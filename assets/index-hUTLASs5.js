(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function WL(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var X0={exports:{}},Vu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $S;function $L(){if($S)return Vu;$S=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,a){var l=null;if(a!==void 0&&(l=""+a),r.key!==void 0&&(l=""+r.key),"key"in r){a={};for(var c in r)c!=="key"&&(a[c]=r[c])}else a=r;return r=a.ref,{$$typeof:t,type:i,key:l,ref:r!==void 0?r:null,props:a}}return Vu.Fragment=e,Vu.jsx=n,Vu.jsxs=n,Vu}var qS;function qL(){return qS||(qS=1,X0.exports=$L()),X0.exports}var f=qL(),Z0={exports:{}},gt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YS;function YL(){if(YS)return gt;YS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function y(D){return D===null||typeof D!="object"?null:(D=g&&D[g]||D["@@iterator"],typeof D=="function"?D:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,w={};function T(D,q,ce){this.props=D,this.context=q,this.refs=w,this.updater=ce||x}T.prototype.isReactComponent={},T.prototype.setState=function(D,q){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,q,"setState")},T.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function _(){}_.prototype=T.prototype;function S(D,q,ce){this.props=D,this.context=q,this.refs=w,this.updater=ce||x}var E=S.prototype=new _;E.constructor=S,b(E,T.prototype),E.isPureReactComponent=!0;var R=Array.isArray,A={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function j(D,q,ce,me,fe,ie){return ce=ie.ref,{$$typeof:t,type:D,key:q,ref:ce!==void 0?ce:null,props:ie}}function O(D,q){return j(D.type,q,void 0,void 0,void 0,D.props)}function L(D){return typeof D=="object"&&D!==null&&D.$$typeof===t}function B(D){var q={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ce){return q[ce]})}var F=/\/+/g;function J(D,q){return typeof D=="object"&&D!==null&&D.key!=null?B(""+D.key):q.toString(36)}function Q(){}function W(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(Q,Q):(D.status="pending",D.then(function(q){D.status==="pending"&&(D.status="fulfilled",D.value=q)},function(q){D.status==="pending"&&(D.status="rejected",D.reason=q)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function Z(D,q,ce,me,fe){var ie=typeof D;(ie==="undefined"||ie==="boolean")&&(D=null);var Ne=!1;if(D===null)Ne=!0;else switch(ie){case"bigint":case"string":case"number":Ne=!0;break;case"object":switch(D.$$typeof){case t:case e:Ne=!0;break;case p:return Ne=D._init,Z(Ne(D._payload),q,ce,me,fe)}}if(Ne)return fe=fe(D),Ne=me===""?"."+J(D,0):me,R(fe)?(ce="",Ne!=null&&(ce=Ne.replace(F,"$&/")+"/"),Z(fe,q,ce,"",function(Ie){return Ie})):fe!=null&&(L(fe)&&(fe=O(fe,ce+(fe.key==null||D&&D.key===fe.key?"":(""+fe.key).replace(F,"$&/")+"/")+Ne)),q.push(fe)),1;Ne=0;var Fe=me===""?".":me+":";if(R(D))for(var Be=0;Be<D.length;Be++)me=D[Be],ie=Fe+J(me,Be),Ne+=Z(me,q,ce,ie,fe);else if(Be=y(D),typeof Be=="function")for(D=Be.call(D),Be=0;!(me=D.next()).done;)me=me.value,ie=Fe+J(me,Be++),Ne+=Z(me,q,ce,ie,fe);else if(ie==="object"){if(typeof D.then=="function")return Z(W(D),q,ce,me,fe);throw q=String(D),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return Ne}function z(D,q,ce){if(D==null)return D;var me=[],fe=0;return Z(D,me,"","",function(ie){return q.call(ce,ie,fe++)}),me}function $(D){if(D._status===-1){var q=D._result;q=q(),q.then(function(ce){(D._status===0||D._status===-1)&&(D._status=1,D._result=ce)},function(ce){(D._status===0||D._status===-1)&&(D._status=2,D._result=ce)}),D._status===-1&&(D._status=0,D._result=q)}if(D._status===1)return D._result.default;throw D._result}var U=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function X(){}return gt.Children={map:z,forEach:function(D,q,ce){z(D,function(){q.apply(this,arguments)},ce)},count:function(D){var q=0;return z(D,function(){q++}),q},toArray:function(D){return z(D,function(q){return q})||[]},only:function(D){if(!L(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},gt.Component=T,gt.Fragment=n,gt.Profiler=r,gt.PureComponent=S,gt.StrictMode=i,gt.Suspense=u,gt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,gt.act=function(){throw Error("act(...) is not supported in production builds of React.")},gt.cache=function(D){return function(){return D.apply(null,arguments)}},gt.cloneElement=function(D,q,ce){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var me=b({},D.props),fe=D.key,ie=void 0;if(q!=null)for(Ne in q.ref!==void 0&&(ie=void 0),q.key!==void 0&&(fe=""+q.key),q)!N.call(q,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&q.ref===void 0||(me[Ne]=q[Ne]);var Ne=arguments.length-2;if(Ne===1)me.children=ce;else if(1<Ne){for(var Fe=Array(Ne),Be=0;Be<Ne;Be++)Fe[Be]=arguments[Be+2];me.children=Fe}return j(D.type,fe,void 0,void 0,ie,me)},gt.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:a,_context:D},D},gt.createElement=function(D,q,ce){var me,fe={},ie=null;if(q!=null)for(me in q.key!==void 0&&(ie=""+q.key),q)N.call(q,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(fe[me]=q[me]);var Ne=arguments.length-2;if(Ne===1)fe.children=ce;else if(1<Ne){for(var Fe=Array(Ne),Be=0;Be<Ne;Be++)Fe[Be]=arguments[Be+2];fe.children=Fe}if(D&&D.defaultProps)for(me in Ne=D.defaultProps,Ne)fe[me]===void 0&&(fe[me]=Ne[me]);return j(D,ie,void 0,void 0,null,fe)},gt.createRef=function(){return{current:null}},gt.forwardRef=function(D){return{$$typeof:c,render:D}},gt.isValidElement=L,gt.lazy=function(D){return{$$typeof:p,_payload:{_status:-1,_result:D},_init:$}},gt.memo=function(D,q){return{$$typeof:h,type:D,compare:q===void 0?null:q}},gt.startTransition=function(D){var q=A.T,ce={};A.T=ce;try{var me=D(),fe=A.S;fe!==null&&fe(ce,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(X,U)}catch(ie){U(ie)}finally{A.T=q}},gt.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},gt.use=function(D){return A.H.use(D)},gt.useActionState=function(D,q,ce){return A.H.useActionState(D,q,ce)},gt.useCallback=function(D,q){return A.H.useCallback(D,q)},gt.useContext=function(D){return A.H.useContext(D)},gt.useDebugValue=function(){},gt.useDeferredValue=function(D,q){return A.H.useDeferredValue(D,q)},gt.useEffect=function(D,q){return A.H.useEffect(D,q)},gt.useId=function(){return A.H.useId()},gt.useImperativeHandle=function(D,q,ce){return A.H.useImperativeHandle(D,q,ce)},gt.useInsertionEffect=function(D,q){return A.H.useInsertionEffect(D,q)},gt.useLayoutEffect=function(D,q){return A.H.useLayoutEffect(D,q)},gt.useMemo=function(D,q){return A.H.useMemo(D,q)},gt.useOptimistic=function(D,q){return A.H.useOptimistic(D,q)},gt.useReducer=function(D,q,ce){return A.H.useReducer(D,q,ce)},gt.useRef=function(D){return A.H.useRef(D)},gt.useState=function(D){return A.H.useState(D)},gt.useSyncExternalStore=function(D,q,ce){return A.H.useSyncExternalStore(D,q,ce)},gt.useTransition=function(){return A.H.useTransition()},gt.version="19.0.0",gt}var XS;function qv(){return XS||(XS=1,Z0.exports=YL()),Z0.exports}var k=qv();const ZS=WL(k);var Q0={exports:{}},Hu={},J0={exports:{}},K0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QS;function XL(){return QS||(QS=1,function(t){function e(z,$){var U=z.length;z.push($);e:for(;0<U;){var X=U-1>>>1,D=z[X];if(0<r(D,$))z[X]=$,z[U]=D,U=X;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var $=z[0],U=z.pop();if(U!==$){z[0]=U;e:for(var X=0,D=z.length,q=D>>>1;X<q;){var ce=2*(X+1)-1,me=z[ce],fe=ce+1,ie=z[fe];if(0>r(me,U))fe<D&&0>r(ie,me)?(z[X]=ie,z[fe]=U,X=fe):(z[X]=me,z[ce]=U,X=ce);else if(fe<D&&0>r(ie,U))z[X]=ie,z[fe]=U,X=fe;else break e}}return $}function r(z,$){var U=z.sortIndex-$.sortIndex;return U!==0?U:z.id-$.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var u=[],h=[],p=1,g=null,y=3,x=!1,b=!1,w=!1,T=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function E(z){for(var $=n(h);$!==null;){if($.callback===null)i(h);else if($.startTime<=z)i(h),$.sortIndex=$.expirationTime,e(u,$);else break;$=n(h)}}function R(z){if(w=!1,E(z),!b)if(n(u)!==null)b=!0,W();else{var $=n(h);$!==null&&Z(R,$.startTime-z)}}var A=!1,N=-1,j=5,O=-1;function L(){return!(t.unstable_now()-O<j)}function B(){if(A){var z=t.unstable_now();O=z;var $=!0;try{e:{b=!1,w&&(w=!1,_(N),N=-1),x=!0;var U=y;try{t:{for(E(z),g=n(u);g!==null&&!(g.expirationTime>z&&L());){var X=g.callback;if(typeof X=="function"){g.callback=null,y=g.priorityLevel;var D=X(g.expirationTime<=z);if(z=t.unstable_now(),typeof D=="function"){g.callback=D,E(z),$=!0;break t}g===n(u)&&i(u),E(z)}else i(u);g=n(u)}if(g!==null)$=!0;else{var q=n(h);q!==null&&Z(R,q.startTime-z),$=!1}}break e}finally{g=null,y=U,x=!1}$=void 0}}finally{$?F():A=!1}}}var F;if(typeof S=="function")F=function(){S(B)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,Q=J.port2;J.port1.onmessage=B,F=function(){Q.postMessage(null)}}else F=function(){T(B,0)};function W(){A||(A=!0,F())}function Z(z,$){N=T(function(){z(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){b||x||(b=!0,W())},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(z){switch(y){case 1:case 2:case 3:var $=3;break;default:$=y}var U=y;y=$;try{return z()}finally{y=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,$){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var U=y;y=z;try{return $()}finally{y=U}},t.unstable_scheduleCallback=function(z,$,U){var X=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?X+U:X):U=X,z){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=U+D,z={id:p++,callback:$,priorityLevel:z,startTime:U,expirationTime:D,sortIndex:-1},U>X?(z.sortIndex=U,e(h,z),n(u)===null&&z===n(h)&&(w?(_(N),N=-1):w=!0,Z(R,U-X))):(z.sortIndex=D,e(u,z),b||x||(b=!0,W())),z},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(z){var $=y;return function(){var U=y;y=$;try{return z.apply(this,arguments)}finally{y=U}}}}(K0)),K0}var JS;function ZL(){return JS||(JS=1,J0.exports=XL()),J0.exports}var ey={exports:{}},qn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KS;function QL(){if(KS)return qn;KS=1;var t=qv();function e(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(u,h,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:g==null?null:""+g,children:u,containerInfo:h,implementation:p}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return qn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,qn.createPortal=function(u,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(u,h,null,p)},qn.flushSync=function(u){var h=l.T,p=i.p;try{if(l.T=null,i.p=2,u)return u()}finally{l.T=h,i.p=p,i.d.f()}},qn.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(u,h))},qn.prefetchDNS=function(u){typeof u=="string"&&i.d.D(u)},qn.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var p=h.as,g=c(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?i.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:x}):p==="script"&&i.d.X(u,{crossOrigin:g,integrity:y,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},qn.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=c(h.as,h.crossOrigin);i.d.M(u,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(u)},qn.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,g=c(p,h.crossOrigin);i.d.L(u,p,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},qn.preloadModule=function(u,h){if(typeof u=="string")if(h){var p=c(h.as,h.crossOrigin);i.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(u)},qn.requestFormReset=function(u){i.d.r(u)},qn.unstable_batchedUpdates=function(u,h){return u(h)},qn.useFormState=function(u,h,p){return l.H.useFormState(u,h,p)},qn.useFormStatus=function(){return l.H.useHostTransitionStatus()},qn.version="19.0.0",qn}var e2;function JL(){if(e2)return ey.exports;e2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ey.exports=QL(),ey.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t2;function KL(){if(t2)return Hu;t2=1;var t=ZL(),e=qv(),n=JL();function i(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)o+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}var a=Symbol.for("react.element"),l=Symbol.for("react.transitional.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),y=Symbol.for("react.consumer"),x=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),R=Symbol.for("react.memo_cache_sentinel"),A=Symbol.iterator;function N(s){return s===null||typeof s!="object"?null:(s=A&&s[A]||s["@@iterator"],typeof s=="function"?s:null)}var j=Symbol.for("react.client.reference");function O(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===j?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case u:return"Fragment";case c:return"Portal";case p:return"Profiler";case h:return"StrictMode";case w:return"Suspense";case T:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case x:return(s.displayName||"Context")+".Provider";case y:return(s._context.displayName||"Context")+".Consumer";case b:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case _:return o=s.displayName||null,o!==null?o:O(s.type)||"Memo";case S:o=s._payload,s=s._init;try{return O(s(o))}catch{}}return null}var L=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=Object.assign,F,J;function Q(s){if(F===void 0)try{throw Error()}catch(d){var o=d.stack.trim().match(/\n( *(at )?)/);F=o&&o[1]||"",J=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+F+s+J}var W=!1;function Z(s,o){if(!s||W)return"";W=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(o){var be=function(){throw Error()};if(Object.defineProperty(be.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(be,[])}catch(he){var ae=he}Reflect.construct(s,[],be)}else{try{be.call()}catch(he){ae=he}s.call(be.prototype)}}else{try{throw Error()}catch(he){ae=he}(be=s())&&typeof be.catch=="function"&&be.catch(function(){})}}catch(he){if(he&&ae&&typeof he.stack=="string")return[he.stack,ae.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var M=m.DetermineComponentFrameRoot(),C=M[0],P=M[1];if(C&&P){var G=C.split(`
`),te=P.split(`
`);for(v=m=0;m<G.length&&!G[m].includes("DetermineComponentFrameRoot");)m++;for(;v<te.length&&!te[v].includes("DetermineComponentFrameRoot");)v++;if(m===G.length||v===te.length)for(m=G.length-1,v=te.length-1;1<=m&&0<=v&&G[m]!==te[v];)v--;for(;1<=m&&0<=v;m--,v--)if(G[m]!==te[v]){if(m!==1||v!==1)do if(m--,v--,0>v||G[m]!==te[v]){var pe=`
`+G[m].replace(" at new "," at ");return s.displayName&&pe.includes("<anonymous>")&&(pe=pe.replace("<anonymous>",s.displayName)),pe}while(1<=m&&0<=v);break}}}finally{W=!1,Error.prepareStackTrace=d}return(d=s?s.displayName||s.name:"")?Q(d):""}function z(s){switch(s.tag){case 26:case 27:case 5:return Q(s.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 15:return s=Z(s.type,!1),s;case 11:return s=Z(s.type.render,!1),s;case 1:return s=Z(s.type,!0),s;default:return""}}function $(s){try{var o="";do o+=z(s),s=s.return;while(s);return o}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function U(s){var o=s,d=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(d=o.return),s=o.return;while(s)}return o.tag===3?d:null}function X(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function D(s){if(U(s)!==s)throw Error(i(188))}function q(s){var o=s.alternate;if(!o){if(o=U(s),o===null)throw Error(i(188));return o!==s?null:s}for(var d=s,m=o;;){var v=d.return;if(v===null)break;var M=v.alternate;if(M===null){if(m=v.return,m!==null){d=m;continue}break}if(v.child===M.child){for(M=v.child;M;){if(M===d)return D(v),s;if(M===m)return D(v),o;M=M.sibling}throw Error(i(188))}if(d.return!==m.return)d=v,m=M;else{for(var C=!1,P=v.child;P;){if(P===d){C=!0,d=v,m=M;break}if(P===m){C=!0,m=v,d=M;break}P=P.sibling}if(!C){for(P=M.child;P;){if(P===d){C=!0,d=M,m=v;break}if(P===m){C=!0,m=M,d=v;break}P=P.sibling}if(!C)throw Error(i(189))}}if(d.alternate!==m)throw Error(i(190))}if(d.tag!==3)throw Error(i(188));return d.stateNode.current===d?s:o}function ce(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=ce(s),o!==null)return o;s=s.sibling}return null}var me=Array.isArray,fe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},Ne=[],Fe=-1;function Be(s){return{current:s}}function Ie(s){0>Fe||(s.current=Ne[Fe],Ne[Fe]=null,Fe--)}function $e(s,o){Fe++,Ne[Fe]=s.current,s.current=o}var Ke=Be(null),Se=Be(null),Ee=Be(null),Re=Be(null);function De(s,o){switch($e(Ee,o),$e(Se,s),$e(Ke,null),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)&&(o=o.namespaceURI)?wS(o):0;break;default:if(s=s===8?o.parentNode:o,o=s.tagName,s=s.namespaceURI)s=wS(s),o=_S(s,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}Ie(Ke),$e(Ke,o)}function ke(){Ie(Ke),Ie(Se),Ie(Ee)}function H(s){s.memoizedState!==null&&$e(Re,s);var o=Ke.current,d=_S(o,s.type);o!==d&&($e(Se,s),$e(Ke,d))}function I(s){Se.current===s&&(Ie(Ke),Ie(Se)),Re.current===s&&(Ie(Re),Bu._currentValue=ie)}var ve=Object.prototype.hasOwnProperty,_e=t.unstable_scheduleCallback,K=t.unstable_cancelCallback,we=t.unstable_shouldYield,Le=t.unstable_requestPaint,ze=t.unstable_now,Ce=t.unstable_getCurrentPriorityLevel,Oe=t.unstable_ImmediatePriority,qe=t.unstable_UserBlockingPriority,tt=t.unstable_NormalPriority,Ue=t.unstable_LowPriority,Ye=t.unstable_IdlePriority,kt=t.log,Bt=t.unstable_setDisableYieldValue,_i=null,bn=null;function Js(s){if(bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(_i,s,void 0,(s.current.flags&128)===128)}catch{}}function ui(s){if(typeof kt=="function"&&Bt(s),bn&&typeof bn.setStrictMode=="function")try{bn.setStrictMode(_i,s)}catch{}}var pn=Math.clz32?Math.clz32:cs,Ks=Math.log,Si=Math.LN2;function cs(s){return s>>>=0,s===0?32:31-(Ks(s)/Si|0)|0}var ge=128,Qe=4194304;function at(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Fn(s,o){var d=s.pendingLanes;if(d===0)return 0;var m=0,v=s.suspendedLanes,M=s.pingedLanes,C=s.warmLanes;s=s.finishedLanes!==0;var P=d&134217727;return P!==0?(d=P&~v,d!==0?m=at(d):(M&=P,M!==0?m=at(M):s||(C=P&~C,C!==0&&(m=at(C))))):(P=d&~v,P!==0?m=at(P):M!==0?m=at(M):s||(C=d&~C,C!==0&&(m=at(C)))),m===0?0:o!==0&&o!==m&&(o&v)===0&&(v=m&-m,C=o&-o,v>=C||v===32&&(C&4194176)!==0)?o:m}function Gi(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function ea(s,o){switch(s){case 1:case 2:case 4:case 8:return o+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function V(){var s=ge;return ge<<=1,(ge&4194176)===0&&(ge=128),s}function de(){var s=Qe;return Qe<<=1,(Qe&62914560)===0&&(Qe=4194304),s}function le(s){for(var o=[],d=0;31>d;d++)o.push(s);return o}function ye(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function je(s,o,d,m,v,M){var C=s.pendingLanes;s.pendingLanes=d,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=d,s.entangledLanes&=d,s.errorRecoveryDisabledLanes&=d,s.shellSuspendCounter=0;var P=s.entanglements,G=s.expirationTimes,te=s.hiddenUpdates;for(d=C&~d;0<d;){var pe=31-pn(d),be=1<<pe;P[pe]=0,G[pe]=-1;var ae=te[pe];if(ae!==null)for(te[pe]=null,pe=0;pe<ae.length;pe++){var he=ae[pe];he!==null&&(he.lane&=-536870913)}d&=~be}m!==0&&dt(s,m,0),M!==0&&v===0&&s.tag!==0&&(s.suspendedLanes|=M&~(C&~o))}function dt(s,o,d){s.pendingLanes|=o,s.suspendedLanes&=~o;var m=31-pn(o);s.entangledLanes|=o,s.entanglements[m]=s.entanglements[m]|1073741824|d&4194218}function lt(s,o){var d=s.entangledLanes|=o;for(s=s.entanglements;d;){var m=31-pn(d),v=1<<m;v&o|s[m]&o&&(s[m]|=o),d&=~v}}function pt(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function ct(){var s=fe.p;return s!==0?s:(s=window.event,s===void 0?32:IS(s.type))}function Zt(s,o){var d=fe.p;try{return fe.p=s,o()}finally{fe.p=d}}var ne=Math.random().toString(36).slice(2),oe="__reactFiber$"+ne,Me="__reactProps$"+ne,Te="__reactContainer$"+ne,Ve="__reactEvents$"+ne,zt="__reactListeners$"+ne,mt="__reactHandles$"+ne,ln="__reactResources$"+ne,Gt="__reactMarker$"+ne;function Wi(s){delete s[oe],delete s[Me],delete s[Ve],delete s[zt],delete s[mt]}function di(s){var o=s[oe];if(o)return o;for(var d=s.parentNode;d;){if(o=d[Te]||d[oe]){if(d=o.alternate,o.child!==null||d!==null&&d.child!==null)for(s=TS(s);s!==null;){if(d=s[oe])return d;s=TS(s)}return o}s=d,d=s.parentNode}return null}function $i(s){if(s=s[oe]||s[Te]){var o=s.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return s}return null}function Zc(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(i(33))}function il(s){var o=s[ln];return o||(o=s[ln]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Ln(s){s[Gt]=!0}var bw=new Set,ww={};function io(s,o){rl(s,o),rl(s+"Capture",o)}function rl(s,o){for(ww[s]=o,s=0;s<o.length;s++)bw.add(o[s])}var us=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zR=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_w={},Sw={};function FR(s){return ve.call(Sw,s)?!0:ve.call(_w,s)?!1:zR.test(s)?Sw[s]=!0:(_w[s]=!0,!1)}function Th(s,o,d){if(FR(o))if(d===null)s.removeAttribute(o);else{switch(typeof d){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var m=o.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+d)}}function Eh(s,o,d){if(d===null)s.removeAttribute(o);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+d)}}function ds(s,o,d,m){if(m===null)s.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(d);return}s.setAttributeNS(o,d,""+m)}}function qi(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Mw(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function IR(s){var o=Mw(s)?"checked":"value",d=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),m=""+s[o];if(!s.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,M=d.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return v.call(this)},set:function(C){m=""+C,M.call(this,C)}}),Object.defineProperty(s,o,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(C){m=""+C},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function Ah(s){s._valueTracker||(s._valueTracker=IR(s))}function Tw(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var d=o.getValue(),m="";return s&&(m=Mw(s)?s.checked?"true":"false":s.value),s=m,s!==d?(o.setValue(s),!0):!1}function Ch(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var UR=/[\n"\\]/g;function Yi(s){return s.replace(UR,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function qm(s,o,d,m,v,M,C,P){s.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.type=C:s.removeAttribute("type"),o!=null?C==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+qi(o)):s.value!==""+qi(o)&&(s.value=""+qi(o)):C!=="submit"&&C!=="reset"||s.removeAttribute("value"),o!=null?Ym(s,C,qi(o)):d!=null?Ym(s,C,qi(d)):m!=null&&s.removeAttribute("value"),v==null&&M!=null&&(s.defaultChecked=!!M),v!=null&&(s.checked=v&&typeof v!="function"&&typeof v!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?s.name=""+qi(P):s.removeAttribute("name")}function Ew(s,o,d,m,v,M,C,P){if(M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(s.type=M),o!=null||d!=null){if(!(M!=="submit"&&M!=="reset"||o!=null))return;d=d!=null?""+qi(d):"",o=o!=null?""+qi(o):d,P||o===s.value||(s.value=o),s.defaultValue=o}m=m??v,m=typeof m!="function"&&typeof m!="symbol"&&!!m,s.checked=P?s.checked:!!m,s.defaultChecked=!!m,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(s.name=C)}function Ym(s,o,d){o==="number"&&Ch(s.ownerDocument)===s||s.defaultValue===""+d||(s.defaultValue=""+d)}function sl(s,o,d,m){if(s=s.options,o){o={};for(var v=0;v<d.length;v++)o["$"+d[v]]=!0;for(d=0;d<s.length;d++)v=o.hasOwnProperty("$"+s[d].value),s[d].selected!==v&&(s[d].selected=v),v&&m&&(s[d].defaultSelected=!0)}else{for(d=""+qi(d),o=null,v=0;v<s.length;v++){if(s[v].value===d){s[v].selected=!0,m&&(s[v].defaultSelected=!0);return}o!==null||s[v].disabled||(o=s[v])}o!==null&&(o.selected=!0)}}function Aw(s,o,d){if(o!=null&&(o=""+qi(o),o!==s.value&&(s.value=o),d==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=d!=null?""+qi(d):""}function Cw(s,o,d,m){if(o==null){if(m!=null){if(d!=null)throw Error(i(92));if(me(m)){if(1<m.length)throw Error(i(93));m=m[0]}d=m}d==null&&(d=""),o=d}d=qi(o),s.defaultValue=d,m=s.textContent,m===d&&m!==""&&m!==null&&(s.value=m)}function al(s,o){if(o){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=o;return}}s.textContent=o}var VR=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nw(s,o,d){var m=o.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?m?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":m?s.setProperty(o,d):typeof d!="number"||d===0||VR.has(o)?o==="float"?s.cssFloat=d:s[o]=(""+d).trim():s[o]=d+"px"}function Rw(s,o,d){if(o!=null&&typeof o!="object")throw Error(i(62));if(s=s.style,d!=null){for(var m in d)!d.hasOwnProperty(m)||o!=null&&o.hasOwnProperty(m)||(m.indexOf("--")===0?s.setProperty(m,""):m==="float"?s.cssFloat="":s[m]="");for(var v in o)m=o[v],o.hasOwnProperty(v)&&d[v]!==m&&Nw(s,v,m)}else for(var M in o)o.hasOwnProperty(M)&&Nw(s,M,o[M])}function Xm(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var HR=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),GR=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nh(s){return GR.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Zm=null;function Qm(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ol=null,ll=null;function Lw(s){var o=$i(s);if(o&&(s=o.stateNode)){var d=s[Me]||null;e:switch(s=o.stateNode,o.type){case"input":if(qm(s,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),o=d.name,d.type==="radio"&&o!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Yi(""+o)+'"][type="radio"]'),o=0;o<d.length;o++){var m=d[o];if(m!==s&&m.form===s.form){var v=m[Me]||null;if(!v)throw Error(i(90));qm(m,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<d.length;o++)m=d[o],m.form===s.form&&Tw(m)}break e;case"textarea":Aw(s,d.value,d.defaultValue);break e;case"select":o=d.value,o!=null&&sl(s,!!d.multiple,o,!1)}}}var Jm=!1;function kw(s,o,d){if(Jm)return s(o,d);Jm=!0;try{var m=s(o);return m}finally{if(Jm=!1,(ol!==null||ll!==null)&&(ff(),ol&&(o=ol,s=ll,ll=ol=null,Lw(o),s)))for(o=0;o<s.length;o++)Lw(s[o])}}function Qc(s,o){var d=s.stateNode;if(d===null)return null;var m=d[Me]||null;if(m===null)return null;d=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(i(231,o,typeof d));return d}var Km=!1;if(us)try{var Jc={};Object.defineProperty(Jc,"passive",{get:function(){Km=!0}}),window.addEventListener("test",Jc,Jc),window.removeEventListener("test",Jc,Jc)}catch{Km=!1}var ta=null,eg=null,Rh=null;function jw(){if(Rh)return Rh;var s,o=eg,d=o.length,m,v="value"in ta?ta.value:ta.textContent,M=v.length;for(s=0;s<d&&o[s]===v[s];s++);var C=d-s;for(m=1;m<=C&&o[d-m]===v[M-m];m++);return Rh=v.slice(s,1<m?1-m:void 0)}function Lh(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function kh(){return!0}function Dw(){return!1}function hi(s){function o(d,m,v,M,C){this._reactName=d,this._targetInst=v,this.type=m,this.nativeEvent=M,this.target=C,this.currentTarget=null;for(var P in s)s.hasOwnProperty(P)&&(d=s[P],this[P]=d?d(M):M[P]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?kh:Dw,this.isPropagationStopped=Dw,this}return B(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=kh)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=kh)},persist:function(){},isPersistent:kh}),o}var ro={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jh=hi(ro),Kc=B({},ro,{view:0,detail:0}),WR=hi(Kc),tg,ng,eu,Dh=B({},Kc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rg,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==eu&&(eu&&s.type==="mousemove"?(tg=s.screenX-eu.screenX,ng=s.screenY-eu.screenY):ng=tg=0,eu=s),tg)},movementY:function(s){return"movementY"in s?s.movementY:ng}}),Pw=hi(Dh),$R=B({},Dh,{dataTransfer:0}),qR=hi($R),YR=B({},Kc,{relatedTarget:0}),ig=hi(YR),XR=B({},ro,{animationName:0,elapsedTime:0,pseudoElement:0}),ZR=hi(XR),QR=B({},ro,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),JR=hi(QR),KR=B({},ro,{data:0}),Ow=hi(KR),e4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},n4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function i4(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=n4[s])?!!o[s]:!1}function rg(){return i4}var r4=B({},Kc,{key:function(s){if(s.key){var o=e4[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=Lh(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?t4[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rg,charCode:function(s){return s.type==="keypress"?Lh(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Lh(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),s4=hi(r4),a4=B({},Dh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bw=hi(a4),o4=B({},Kc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rg}),l4=hi(o4),c4=B({},ro,{propertyName:0,elapsedTime:0,pseudoElement:0}),u4=hi(c4),d4=B({},Dh,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),h4=hi(d4),f4=B({},ro,{newState:0,oldState:0}),p4=hi(f4),m4=[9,13,27,32],sg=us&&"CompositionEvent"in window,tu=null;us&&"documentMode"in document&&(tu=document.documentMode);var g4=us&&"TextEvent"in window&&!tu,zw=us&&(!sg||tu&&8<tu&&11>=tu),Fw=" ",Iw=!1;function Uw(s,o){switch(s){case"keyup":return m4.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vw(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var cl=!1;function y4(s,o){switch(s){case"compositionend":return Vw(o);case"keypress":return o.which!==32?null:(Iw=!0,Fw);case"textInput":return s=o.data,s===Fw&&Iw?null:s;default:return null}}function x4(s,o){if(cl)return s==="compositionend"||!sg&&Uw(s,o)?(s=jw(),Rh=eg=ta=null,cl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return zw&&o.locale!=="ko"?null:o.data;default:return null}}var v4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hw(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!v4[s.type]:o==="textarea"}function Gw(s,o,d,m){ol?ll?ll.push(m):ll=[m]:ol=m,o=xf(o,"onChange"),0<o.length&&(d=new jh("onChange","change",null,d,m),s.push({event:d,listeners:o}))}var nu=null,iu=null;function b4(s){gS(s,0)}function Ph(s){var o=Zc(s);if(Tw(o))return s}function Ww(s,o){if(s==="change")return o}var $w=!1;if(us){var ag;if(us){var og="oninput"in document;if(!og){var qw=document.createElement("div");qw.setAttribute("oninput","return;"),og=typeof qw.oninput=="function"}ag=og}else ag=!1;$w=ag&&(!document.documentMode||9<document.documentMode)}function Yw(){nu&&(nu.detachEvent("onpropertychange",Xw),iu=nu=null)}function Xw(s){if(s.propertyName==="value"&&Ph(iu)){var o=[];Gw(o,iu,s,Qm(s)),kw(b4,o)}}function w4(s,o,d){s==="focusin"?(Yw(),nu=o,iu=d,nu.attachEvent("onpropertychange",Xw)):s==="focusout"&&Yw()}function _4(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ph(iu)}function S4(s,o){if(s==="click")return Ph(o)}function M4(s,o){if(s==="input"||s==="change")return Ph(o)}function T4(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Mi=typeof Object.is=="function"?Object.is:T4;function ru(s,o){if(Mi(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var d=Object.keys(s),m=Object.keys(o);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var v=d[m];if(!ve.call(o,v)||!Mi(s[v],o[v]))return!1}return!0}function Zw(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Qw(s,o){var d=Zw(s);s=0;for(var m;d;){if(d.nodeType===3){if(m=s+d.textContent.length,s<=o&&m>=o)return{node:d,offset:o-s};s=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Zw(d)}}function Jw(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Jw(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Kw(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=Ch(s.document);o instanceof s.HTMLIFrameElement;){try{var d=typeof o.contentWindow.location.href=="string"}catch{d=!1}if(d)s=o.contentWindow;else break;o=Ch(s.document)}return o}function lg(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function E4(s,o){var d=Kw(o);o=s.focusedElem;var m=s.selectionRange;if(d!==o&&o&&o.ownerDocument&&Jw(o.ownerDocument.documentElement,o)){if(m!==null&&lg(o)){if(s=m.start,d=m.end,d===void 0&&(d=s),"selectionStart"in o)o.selectionStart=s,o.selectionEnd=Math.min(d,o.value.length);else if(d=(s=o.ownerDocument||document)&&s.defaultView||window,d.getSelection){d=d.getSelection();var v=o.textContent.length,M=Math.min(m.start,v);m=m.end===void 0?M:Math.min(m.end,v),!d.extend&&M>m&&(v=m,m=M,M=v),v=Qw(o,M);var C=Qw(o,m);v&&C&&(d.rangeCount!==1||d.anchorNode!==v.node||d.anchorOffset!==v.offset||d.focusNode!==C.node||d.focusOffset!==C.offset)&&(s=s.createRange(),s.setStart(v.node,v.offset),d.removeAllRanges(),M>m?(d.addRange(s),d.extend(C.node,C.offset)):(s.setEnd(C.node,C.offset),d.addRange(s)))}}for(s=[],d=o;d=d.parentNode;)d.nodeType===1&&s.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<s.length;o++)d=s[o],d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}var A4=us&&"documentMode"in document&&11>=document.documentMode,ul=null,cg=null,su=null,ug=!1;function e_(s,o,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;ug||ul==null||ul!==Ch(m)||(m=ul,"selectionStart"in m&&lg(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),su&&ru(su,m)||(su=m,m=xf(cg,"onSelect"),0<m.length&&(o=new jh("onSelect","select",null,o,d),s.push({event:o,listeners:m}),o.target=ul)))}function so(s,o){var d={};return d[s.toLowerCase()]=o.toLowerCase(),d["Webkit"+s]="webkit"+o,d["Moz"+s]="moz"+o,d}var dl={animationend:so("Animation","AnimationEnd"),animationiteration:so("Animation","AnimationIteration"),animationstart:so("Animation","AnimationStart"),transitionrun:so("Transition","TransitionRun"),transitionstart:so("Transition","TransitionStart"),transitioncancel:so("Transition","TransitionCancel"),transitionend:so("Transition","TransitionEnd")},dg={},t_={};us&&(t_=document.createElement("div").style,"AnimationEvent"in window||(delete dl.animationend.animation,delete dl.animationiteration.animation,delete dl.animationstart.animation),"TransitionEvent"in window||delete dl.transitionend.transition);function ao(s){if(dg[s])return dg[s];if(!dl[s])return s;var o=dl[s],d;for(d in o)if(o.hasOwnProperty(d)&&d in t_)return dg[s]=o[d];return s}var n_=ao("animationend"),i_=ao("animationiteration"),r_=ao("animationstart"),C4=ao("transitionrun"),N4=ao("transitionstart"),R4=ao("transitioncancel"),s_=ao("transitionend"),a_=new Map,o_="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function xr(s,o){a_.set(s,o),io(o,[s])}var Xi=[],hl=0,hg=0;function Oh(){for(var s=hl,o=hg=hl=0;o<s;){var d=Xi[o];Xi[o++]=null;var m=Xi[o];Xi[o++]=null;var v=Xi[o];Xi[o++]=null;var M=Xi[o];if(Xi[o++]=null,m!==null&&v!==null){var C=m.pending;C===null?v.next=v:(v.next=C.next,C.next=v),m.pending=v}M!==0&&l_(d,v,M)}}function Bh(s,o,d,m){Xi[hl++]=s,Xi[hl++]=o,Xi[hl++]=d,Xi[hl++]=m,hg|=m,s.lanes|=m,s=s.alternate,s!==null&&(s.lanes|=m)}function fg(s,o,d,m){return Bh(s,o,d,m),zh(s)}function na(s,o){return Bh(s,null,null,o),zh(s)}function l_(s,o,d){s.lanes|=d;var m=s.alternate;m!==null&&(m.lanes|=d);for(var v=!1,M=s.return;M!==null;)M.childLanes|=d,m=M.alternate,m!==null&&(m.childLanes|=d),M.tag===22&&(s=M.stateNode,s===null||s._visibility&1||(v=!0)),s=M,M=M.return;v&&o!==null&&s.tag===3&&(M=s.stateNode,v=31-pn(d),M=M.hiddenUpdates,s=M[v],s===null?M[v]=[o]:s.push(o),o.lane=d|536870912)}function zh(s){if(50<Ru)throw Ru=0,v0=null,Error(i(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var fl={},c_=new WeakMap;function Zi(s,o){if(typeof s=="object"&&s!==null){var d=c_.get(s);return d!==void 0?d:(o={value:s,source:o,stack:$(o)},c_.set(s,o),o)}return{value:s,source:o,stack:$(o)}}var pl=[],ml=0,Fh=null,Ih=0,Qi=[],Ji=0,oo=null,hs=1,fs="";function lo(s,o){pl[ml++]=Ih,pl[ml++]=Fh,Fh=s,Ih=o}function u_(s,o,d){Qi[Ji++]=hs,Qi[Ji++]=fs,Qi[Ji++]=oo,oo=s;var m=hs;s=fs;var v=32-pn(m)-1;m&=~(1<<v),d+=1;var M=32-pn(o)+v;if(30<M){var C=v-v%5;M=(m&(1<<C)-1).toString(32),m>>=C,v-=C,hs=1<<32-pn(o)+v|d<<v|m,fs=M+s}else hs=1<<M|d<<v|m,fs=s}function pg(s){s.return!==null&&(lo(s,1),u_(s,1,0))}function mg(s){for(;s===Fh;)Fh=pl[--ml],pl[ml]=null,Ih=pl[--ml],pl[ml]=null;for(;s===oo;)oo=Qi[--Ji],Qi[Ji]=null,fs=Qi[--Ji],Qi[Ji]=null,hs=Qi[--Ji],Qi[Ji]=null}var ii=null,In=null,Ct=!1,vr=null,Or=!1,gg=Error(i(519));function co(s){var o=Error(i(418,""));throw lu(Zi(o,s)),gg}function d_(s){var o=s.stateNode,d=s.type,m=s.memoizedProps;switch(o[oe]=s,o[Me]=m,d){case"dialog":Mt("cancel",o),Mt("close",o);break;case"iframe":case"object":case"embed":Mt("load",o);break;case"video":case"audio":for(d=0;d<ku.length;d++)Mt(ku[d],o);break;case"source":Mt("error",o);break;case"img":case"image":case"link":Mt("error",o),Mt("load",o);break;case"details":Mt("toggle",o);break;case"input":Mt("invalid",o),Ew(o,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),Ah(o);break;case"select":Mt("invalid",o);break;case"textarea":Mt("invalid",o),Cw(o,m.value,m.defaultValue,m.children),Ah(o)}d=m.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||o.textContent===""+d||m.suppressHydrationWarning===!0||bS(o.textContent,d)?(m.popover!=null&&(Mt("beforetoggle",o),Mt("toggle",o)),m.onScroll!=null&&Mt("scroll",o),m.onScrollEnd!=null&&Mt("scrollend",o),m.onClick!=null&&(o.onclick=vf),o=!0):o=!1,o||co(s)}function h_(s){for(ii=s.return;ii;)switch(ii.tag){case 3:case 27:Or=!0;return;case 5:case 13:Or=!1;return;default:ii=ii.return}}function au(s){if(s!==ii)return!1;if(!Ct)return h_(s),Ct=!0,!1;var o=!1,d;if((d=s.tag!==3&&s.tag!==27)&&((d=s.tag===5)&&(d=s.type,d=!(d!=="form"&&d!=="button")||O0(s.type,s.memoizedProps)),d=!d),d&&(o=!0),o&&In&&co(s),h_(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8)if(d=s.data,d==="/$"){if(o===0){In=wr(s.nextSibling);break e}o--}else d!=="$"&&d!=="$!"&&d!=="$?"||o++;s=s.nextSibling}In=null}}else In=ii?wr(s.stateNode.nextSibling):null;return!0}function ou(){In=ii=null,Ct=!1}function lu(s){vr===null?vr=[s]:vr.push(s)}var cu=Error(i(460)),f_=Error(i(474)),yg={then:function(){}};function p_(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Uh(){}function m_(s,o,d){switch(d=s[d],d===void 0?s.push(o):d!==o&&(o.then(Uh,Uh),o=d),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,s===cu?Error(i(483)):s;default:if(typeof o.status=="string")o.then(Uh,Uh);else{if(s=Wt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=o,s.status="pending",s.then(function(m){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=m}},function(m){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=m}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,s===cu?Error(i(483)):s}throw uu=o,cu}}var uu=null;function g_(){if(uu===null)throw Error(i(459));var s=uu;return uu=null,s}var gl=null,du=0;function Vh(s){var o=du;return du+=1,gl===null&&(gl=[]),m_(gl,s,o)}function hu(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function Hh(s,o){throw o.$$typeof===a?Error(i(525)):(s=Object.prototype.toString.call(o),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function y_(s){var o=s._init;return o(s._payload)}function x_(s){function o(re,ee){if(s){var se=re.deletions;se===null?(re.deletions=[ee],re.flags|=16):se.push(ee)}}function d(re,ee){if(!s)return null;for(;ee!==null;)o(re,ee),ee=ee.sibling;return null}function m(re){for(var ee=new Map;re!==null;)re.key!==null?ee.set(re.key,re):ee.set(re.index,re),re=re.sibling;return ee}function v(re,ee){return re=pa(re,ee),re.index=0,re.sibling=null,re}function M(re,ee,se){return re.index=se,s?(se=re.alternate,se!==null?(se=se.index,se<ee?(re.flags|=33554434,ee):se):(re.flags|=33554434,ee)):(re.flags|=1048576,ee)}function C(re){return s&&re.alternate===null&&(re.flags|=33554434),re}function P(re,ee,se,xe){return ee===null||ee.tag!==6?(ee=d0(se,re.mode,xe),ee.return=re,ee):(ee=v(ee,se),ee.return=re,ee)}function G(re,ee,se,xe){var He=se.type;return He===u?pe(re,ee,se.props.children,xe,se.key):ee!==null&&(ee.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===S&&y_(He)===ee.type)?(ee=v(ee,se.props),hu(ee,se),ee.return=re,ee):(ee=lf(se.type,se.key,se.props,null,re.mode,xe),hu(ee,se),ee.return=re,ee)}function te(re,ee,se,xe){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==se.containerInfo||ee.stateNode.implementation!==se.implementation?(ee=h0(se,re.mode,xe),ee.return=re,ee):(ee=v(ee,se.children||[]),ee.return=re,ee)}function pe(re,ee,se,xe,He){return ee===null||ee.tag!==7?(ee=bo(se,re.mode,xe,He),ee.return=re,ee):(ee=v(ee,se),ee.return=re,ee)}function be(re,ee,se){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ee=d0(""+ee,re.mode,se),ee.return=re,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case l:return se=lf(ee.type,ee.key,ee.props,null,re.mode,se),hu(se,ee),se.return=re,se;case c:return ee=h0(ee,re.mode,se),ee.return=re,ee;case S:var xe=ee._init;return ee=xe(ee._payload),be(re,ee,se)}if(me(ee)||N(ee))return ee=bo(ee,re.mode,se,null),ee.return=re,ee;if(typeof ee.then=="function")return be(re,Vh(ee),se);if(ee.$$typeof===x)return be(re,sf(re,ee),se);Hh(re,ee)}return null}function ae(re,ee,se,xe){var He=ee!==null?ee.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return He!==null?null:P(re,ee,""+se,xe);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case l:return se.key===He?G(re,ee,se,xe):null;case c:return se.key===He?te(re,ee,se,xe):null;case S:return He=se._init,se=He(se._payload),ae(re,ee,se,xe)}if(me(se)||N(se))return He!==null?null:pe(re,ee,se,xe,null);if(typeof se.then=="function")return ae(re,ee,Vh(se),xe);if(se.$$typeof===x)return ae(re,ee,sf(re,se),xe);Hh(re,se)}return null}function he(re,ee,se,xe,He){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return re=re.get(se)||null,P(ee,re,""+xe,He);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case l:return re=re.get(xe.key===null?se:xe.key)||null,G(ee,re,xe,He);case c:return re=re.get(xe.key===null?se:xe.key)||null,te(ee,re,xe,He);case S:var vt=xe._init;return xe=vt(xe._payload),he(re,ee,se,xe,He)}if(me(xe)||N(xe))return re=re.get(se)||null,pe(ee,re,xe,He,null);if(typeof xe.then=="function")return he(re,ee,se,Vh(xe),He);if(xe.$$typeof===x)return he(re,ee,se,sf(ee,xe),He);Hh(ee,xe)}return null}function We(re,ee,se,xe){for(var He=null,vt=null,Ze=ee,nt=ee=0,Dn=null;Ze!==null&&nt<se.length;nt++){Ze.index>nt?(Dn=Ze,Ze=null):Dn=Ze.sibling;var Nt=ae(re,Ze,se[nt],xe);if(Nt===null){Ze===null&&(Ze=Dn);break}s&&Ze&&Nt.alternate===null&&o(re,Ze),ee=M(Nt,ee,nt),vt===null?He=Nt:vt.sibling=Nt,vt=Nt,Ze=Dn}if(nt===se.length)return d(re,Ze),Ct&&lo(re,nt),He;if(Ze===null){for(;nt<se.length;nt++)Ze=be(re,se[nt],xe),Ze!==null&&(ee=M(Ze,ee,nt),vt===null?He=Ze:vt.sibling=Ze,vt=Ze);return Ct&&lo(re,nt),He}for(Ze=m(Ze);nt<se.length;nt++)Dn=he(Ze,re,nt,se[nt],xe),Dn!==null&&(s&&Dn.alternate!==null&&Ze.delete(Dn.key===null?nt:Dn.key),ee=M(Dn,ee,nt),vt===null?He=Dn:vt.sibling=Dn,vt=Dn);return s&&Ze.forEach(function(wa){return o(re,wa)}),Ct&&lo(re,nt),He}function ut(re,ee,se,xe){if(se==null)throw Error(i(151));for(var He=null,vt=null,Ze=ee,nt=ee=0,Dn=null,Nt=se.next();Ze!==null&&!Nt.done;nt++,Nt=se.next()){Ze.index>nt?(Dn=Ze,Ze=null):Dn=Ze.sibling;var wa=ae(re,Ze,Nt.value,xe);if(wa===null){Ze===null&&(Ze=Dn);break}s&&Ze&&wa.alternate===null&&o(re,Ze),ee=M(wa,ee,nt),vt===null?He=wa:vt.sibling=wa,vt=wa,Ze=Dn}if(Nt.done)return d(re,Ze),Ct&&lo(re,nt),He;if(Ze===null){for(;!Nt.done;nt++,Nt=se.next())Nt=be(re,Nt.value,xe),Nt!==null&&(ee=M(Nt,ee,nt),vt===null?He=Nt:vt.sibling=Nt,vt=Nt);return Ct&&lo(re,nt),He}for(Ze=m(Ze);!Nt.done;nt++,Nt=se.next())Nt=he(Ze,re,nt,Nt.value,xe),Nt!==null&&(s&&Nt.alternate!==null&&Ze.delete(Nt.key===null?nt:Nt.key),ee=M(Nt,ee,nt),vt===null?He=Nt:vt.sibling=Nt,vt=Nt);return s&&Ze.forEach(function(GL){return o(re,GL)}),Ct&&lo(re,nt),He}function dn(re,ee,se,xe){if(typeof se=="object"&&se!==null&&se.type===u&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case l:e:{for(var He=se.key;ee!==null;){if(ee.key===He){if(He=se.type,He===u){if(ee.tag===7){d(re,ee.sibling),xe=v(ee,se.props.children),xe.return=re,re=xe;break e}}else if(ee.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===S&&y_(He)===ee.type){d(re,ee.sibling),xe=v(ee,se.props),hu(xe,se),xe.return=re,re=xe;break e}d(re,ee);break}else o(re,ee);ee=ee.sibling}se.type===u?(xe=bo(se.props.children,re.mode,xe,se.key),xe.return=re,re=xe):(xe=lf(se.type,se.key,se.props,null,re.mode,xe),hu(xe,se),xe.return=re,re=xe)}return C(re);case c:e:{for(He=se.key;ee!==null;){if(ee.key===He)if(ee.tag===4&&ee.stateNode.containerInfo===se.containerInfo&&ee.stateNode.implementation===se.implementation){d(re,ee.sibling),xe=v(ee,se.children||[]),xe.return=re,re=xe;break e}else{d(re,ee);break}else o(re,ee);ee=ee.sibling}xe=h0(se,re.mode,xe),xe.return=re,re=xe}return C(re);case S:return He=se._init,se=He(se._payload),dn(re,ee,se,xe)}if(me(se))return We(re,ee,se,xe);if(N(se)){if(He=N(se),typeof He!="function")throw Error(i(150));return se=He.call(se),ut(re,ee,se,xe)}if(typeof se.then=="function")return dn(re,ee,Vh(se),xe);if(se.$$typeof===x)return dn(re,ee,sf(re,se),xe);Hh(re,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,ee!==null&&ee.tag===6?(d(re,ee.sibling),xe=v(ee,se),xe.return=re,re=xe):(d(re,ee),xe=d0(se,re.mode,xe),xe.return=re,re=xe),C(re)):d(re,ee)}return function(re,ee,se,xe){try{du=0;var He=dn(re,ee,se,xe);return gl=null,He}catch(Ze){if(Ze===cu)throw Ze;var vt=nr(29,Ze,null,re.mode);return vt.lanes=xe,vt.return=re,vt}finally{}}}var uo=x_(!0),v_=x_(!1),yl=Be(null),Gh=Be(0);function b_(s,o){s=Ms,$e(Gh,s),$e(yl,o),Ms=s|o.baseLanes}function xg(){$e(Gh,Ms),$e(yl,yl.current)}function vg(){Ms=Gh.current,Ie(yl),Ie(Gh)}var Ki=Be(null),Br=null;function ia(s){var o=s.alternate;$e(An,An.current&1),$e(Ki,s),Br===null&&(o===null||yl.current!==null||o.memoizedState!==null)&&(Br=s)}function w_(s){if(s.tag===22){if($e(An,An.current),$e(Ki,s),Br===null){var o=s.alternate;o!==null&&o.memoizedState!==null&&(Br=s)}}else ra()}function ra(){$e(An,An.current),$e(Ki,Ki.current)}function ps(s){Ie(Ki),Br===s&&(Br=null),Ie(An)}var An=Be(0);function Wh(s){for(var o=s;o!==null;){if(o.tag===13){var d=o.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var L4=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(d,m){s.push(m)}};this.abort=function(){o.aborted=!0,s.forEach(function(d){return d()})}},k4=t.unstable_scheduleCallback,j4=t.unstable_NormalPriority,Cn={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bg(){return{controller:new L4,data:new Map,refCount:0}}function fu(s){s.refCount--,s.refCount===0&&k4(j4,function(){s.controller.abort()})}var pu=null,wg=0,xl=0,vl=null;function D4(s,o){if(pu===null){var d=pu=[];wg=0,xl=A0(),vl={status:"pending",value:void 0,then:function(m){d.push(m)}}}return wg++,o.then(__,__),o}function __(){if(--wg===0&&pu!==null){vl!==null&&(vl.status="fulfilled");var s=pu;pu=null,xl=0,vl=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function P4(s,o){var d=[],m={status:"pending",value:null,reason:null,then:function(v){d.push(v)}};return s.then(function(){m.status="fulfilled",m.value=o;for(var v=0;v<d.length;v++)(0,d[v])(o)},function(v){for(m.status="rejected",m.reason=v,v=0;v<d.length;v++)(0,d[v])(void 0)}),m}var S_=L.S;L.S=function(s,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&D4(s,o),S_!==null&&S_(s,o)};var ho=Be(null);function _g(){var s=ho.current;return s!==null?s:Wt.pooledCache}function $h(s,o){o===null?$e(ho,ho.current):$e(ho,o.pool)}function M_(){var s=_g();return s===null?null:{parent:Cn._currentValue,pool:s}}var sa=0,xt=null,Dt=null,wn=null,qh=!1,bl=!1,fo=!1,Yh=0,mu=0,wl=null,O4=0;function mn(){throw Error(i(321))}function Sg(s,o){if(o===null)return!1;for(var d=0;d<o.length&&d<s.length;d++)if(!Mi(s[d],o[d]))return!1;return!0}function Mg(s,o,d,m,v,M){return sa=M,xt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,L.H=s===null||s.memoizedState===null?po:aa,fo=!1,M=d(m,v),fo=!1,bl&&(M=E_(o,d,m,v)),T_(s),M}function T_(s){L.H=zr;var o=Dt!==null&&Dt.next!==null;if(sa=0,wn=Dt=xt=null,qh=!1,mu=0,wl=null,o)throw Error(i(300));s===null||kn||(s=s.dependencies,s!==null&&rf(s)&&(kn=!0))}function E_(s,o,d,m){xt=s;var v=0;do{if(bl&&(wl=null),mu=0,bl=!1,25<=v)throw Error(i(301));if(v+=1,wn=Dt=null,s.updateQueue!=null){var M=s.updateQueue;M.lastEffect=null,M.events=null,M.stores=null,M.memoCache!=null&&(M.memoCache.index=0)}L.H=mo,M=o(d,m)}while(bl);return M}function B4(){var s=L.H,o=s.useState()[0];return o=typeof o.then=="function"?gu(o):o,s=s.useState()[0],(Dt!==null?Dt.memoizedState:null)!==s&&(xt.flags|=1024),o}function Tg(){var s=Yh!==0;return Yh=0,s}function Eg(s,o,d){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~d}function Ag(s){if(qh){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}qh=!1}sa=0,wn=Dt=xt=null,bl=!1,mu=Yh=0,wl=null}function fi(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wn===null?xt.memoizedState=wn=s:wn=wn.next=s,wn}function _n(){if(Dt===null){var s=xt.alternate;s=s!==null?s.memoizedState:null}else s=Dt.next;var o=wn===null?xt.memoizedState:wn.next;if(o!==null)wn=o,Dt=s;else{if(s===null)throw xt.alternate===null?Error(i(467)):Error(i(310));Dt=s,s={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},wn===null?xt.memoizedState=wn=s:wn=wn.next=s}return wn}var Xh;Xh=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function gu(s){var o=mu;return mu+=1,wl===null&&(wl=[]),s=m_(wl,s,o),o=xt,(wn===null?o.memoizedState:wn.next)===null&&(o=o.alternate,L.H=o===null||o.memoizedState===null?po:aa),s}function Zh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return gu(s);if(s.$$typeof===x)return $n(s)}throw Error(i(438,String(s)))}function Cg(s){var o=null,d=xt.updateQueue;if(d!==null&&(o=d.memoCache),o==null){var m=xt.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(o={data:m.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),d===null&&(d=Xh(),xt.updateQueue=d),d.memoCache=o,d=o.data[o.index],d===void 0)for(d=o.data[o.index]=Array(s),m=0;m<s;m++)d[m]=R;return o.index++,d}function ms(s,o){return typeof o=="function"?o(s):o}function Qh(s){var o=_n();return Ng(o,Dt,s)}function Ng(s,o,d){var m=s.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=d;var v=s.baseQueue,M=m.pending;if(M!==null){if(v!==null){var C=v.next;v.next=M.next,M.next=C}o.baseQueue=v=M,m.pending=null}if(M=s.baseState,v===null)s.memoizedState=M;else{o=v.next;var P=C=null,G=null,te=o,pe=!1;do{var be=te.lane&-536870913;if(be!==te.lane?(At&be)===be:(sa&be)===be){var ae=te.revertLane;if(ae===0)G!==null&&(G=G.next={lane:0,revertLane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),be===xl&&(pe=!0);else if((sa&ae)===ae){te=te.next,ae===xl&&(pe=!0);continue}else be={lane:0,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},G===null?(P=G=be,C=M):G=G.next=be,xt.lanes|=ae,ma|=ae;be=te.action,fo&&d(M,be),M=te.hasEagerState?te.eagerState:d(M,be)}else ae={lane:be,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},G===null?(P=G=ae,C=M):G=G.next=ae,xt.lanes|=be,ma|=be;te=te.next}while(te!==null&&te!==o);if(G===null?C=M:G.next=P,!Mi(M,s.memoizedState)&&(kn=!0,pe&&(d=vl,d!==null)))throw d;s.memoizedState=M,s.baseState=C,s.baseQueue=G,m.lastRenderedState=M}return v===null&&(m.lanes=0),[s.memoizedState,m.dispatch]}function Rg(s){var o=_n(),d=o.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=s;var m=d.dispatch,v=d.pending,M=o.memoizedState;if(v!==null){d.pending=null;var C=v=v.next;do M=s(M,C.action),C=C.next;while(C!==v);Mi(M,o.memoizedState)||(kn=!0),o.memoizedState=M,o.baseQueue===null&&(o.baseState=M),d.lastRenderedState=M}return[M,m]}function A_(s,o,d){var m=xt,v=_n(),M=Ct;if(M){if(d===void 0)throw Error(i(407));d=d()}else d=o();var C=!Mi((Dt||v).memoizedState,d);if(C&&(v.memoizedState=d,kn=!0),v=v.queue,jg(R_.bind(null,m,v,s),[s]),v.getSnapshot!==o||C||wn!==null&&wn.memoizedState.tag&1){if(m.flags|=2048,_l(9,N_.bind(null,m,v,d,o),{destroy:void 0},null),Wt===null)throw Error(i(349));M||(sa&60)!==0||C_(m,o,d)}return d}function C_(s,o,d){s.flags|=16384,s={getSnapshot:o,value:d},o=xt.updateQueue,o===null?(o=Xh(),xt.updateQueue=o,o.stores=[s]):(d=o.stores,d===null?o.stores=[s]:d.push(s))}function N_(s,o,d,m){o.value=d,o.getSnapshot=m,L_(o)&&k_(s)}function R_(s,o,d){return d(function(){L_(o)&&k_(s)})}function L_(s){var o=s.getSnapshot;s=s.value;try{var d=o();return!Mi(s,d)}catch{return!0}}function k_(s){var o=na(s,2);o!==null&&ri(o,s,2)}function Lg(s){var o=fi();if(typeof s=="function"){var d=s;if(s=d(),fo){ui(!0);try{d()}finally{ui(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:s},o}function j_(s,o,d,m){return s.baseState=d,Ng(s,Dt,typeof m=="function"?m:ms)}function z4(s,o,d,m,v){if(ef(s))throw Error(i(485));if(s=o.action,s!==null){var M={payload:v,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){M.listeners.push(C)}};L.T!==null?d(!0):M.isTransition=!1,m(M),d=o.pending,d===null?(M.next=o.pending=M,D_(o,M)):(M.next=d.next,o.pending=d.next=M)}}function D_(s,o){var d=o.action,m=o.payload,v=s.state;if(o.isTransition){var M=L.T,C={};L.T=C;try{var P=d(v,m),G=L.S;G!==null&&G(C,P),P_(s,o,P)}catch(te){kg(s,o,te)}finally{L.T=M}}else try{M=d(v,m),P_(s,o,M)}catch(te){kg(s,o,te)}}function P_(s,o,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(m){O_(s,o,m)},function(m){return kg(s,o,m)}):O_(s,o,d)}function O_(s,o,d){o.status="fulfilled",o.value=d,B_(o),s.state=d,o=s.pending,o!==null&&(d=o.next,d===o?s.pending=null:(d=d.next,o.next=d,D_(s,d)))}function kg(s,o,d){var m=s.pending;if(s.pending=null,m!==null){m=m.next;do o.status="rejected",o.reason=d,B_(o),o=o.next;while(o!==m)}s.action=null}function B_(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function z_(s,o){return o}function F_(s,o){if(Ct){var d=Wt.formState;if(d!==null){e:{var m=xt;if(Ct){if(In){t:{for(var v=In,M=Or;v.nodeType!==8;){if(!M){v=null;break t}if(v=wr(v.nextSibling),v===null){v=null;break t}}M=v.data,v=M==="F!"||M==="F"?v:null}if(v){In=wr(v.nextSibling),m=v.data==="F!";break e}}co(m)}m=!1}m&&(o=d[0])}}return d=fi(),d.memoizedState=d.baseState=o,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:z_,lastRenderedState:o},d.queue=m,d=i1.bind(null,xt,m),m.dispatch=d,m=Lg(!1),M=zg.bind(null,xt,!1,m.queue),m=fi(),v={state:o,dispatch:null,action:s,pending:null},m.queue=v,d=z4.bind(null,xt,v,M,d),v.dispatch=d,m.memoizedState=s,[o,d,!1]}function I_(s){var o=_n();return U_(o,Dt,s)}function U_(s,o,d){o=Ng(s,o,z_)[0],s=Qh(ms)[0],o=typeof o=="object"&&o!==null&&typeof o.then=="function"?gu(o):o;var m=_n(),v=m.queue,M=v.dispatch;return d!==m.memoizedState&&(xt.flags|=2048,_l(9,F4.bind(null,v,d),{destroy:void 0},null)),[o,M,s]}function F4(s,o){s.action=o}function V_(s){var o=_n(),d=Dt;if(d!==null)return U_(o,d,s);_n(),o=o.memoizedState,d=_n();var m=d.queue.dispatch;return d.memoizedState=s,[o,m,!1]}function _l(s,o,d,m){return s={tag:s,create:o,inst:d,deps:m,next:null},o=xt.updateQueue,o===null&&(o=Xh(),xt.updateQueue=o),d=o.lastEffect,d===null?o.lastEffect=s.next=s:(m=d.next,d.next=s,s.next=m,o.lastEffect=s),s}function H_(){return _n().memoizedState}function Jh(s,o,d,m){var v=fi();xt.flags|=s,v.memoizedState=_l(1|o,d,{destroy:void 0},m===void 0?null:m)}function Kh(s,o,d,m){var v=_n();m=m===void 0?null:m;var M=v.memoizedState.inst;Dt!==null&&m!==null&&Sg(m,Dt.memoizedState.deps)?v.memoizedState=_l(o,d,M,m):(xt.flags|=s,v.memoizedState=_l(1|o,d,M,m))}function G_(s,o){Jh(8390656,8,s,o)}function jg(s,o){Kh(2048,8,s,o)}function W_(s,o){return Kh(4,2,s,o)}function $_(s,o){return Kh(4,4,s,o)}function q_(s,o){if(typeof o=="function"){s=s();var d=o(s);return function(){typeof d=="function"?d():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Y_(s,o,d){d=d!=null?d.concat([s]):null,Kh(4,4,q_.bind(null,o,s),d)}function Dg(){}function X_(s,o){var d=_n();o=o===void 0?null:o;var m=d.memoizedState;return o!==null&&Sg(o,m[1])?m[0]:(d.memoizedState=[s,o],s)}function Z_(s,o){var d=_n();o=o===void 0?null:o;var m=d.memoizedState;if(o!==null&&Sg(o,m[1]))return m[0];if(m=s(),fo){ui(!0);try{s()}finally{ui(!1)}}return d.memoizedState=[m,o],m}function Pg(s,o,d){return d===void 0||(sa&1073741824)!==0?s.memoizedState=o:(s.memoizedState=d,s=J1(),xt.lanes|=s,ma|=s,d)}function Q_(s,o,d,m){return Mi(d,o)?d:yl.current!==null?(s=Pg(s,d,m),Mi(s,o)||(kn=!0),s):(sa&42)===0?(kn=!0,s.memoizedState=d):(s=J1(),xt.lanes|=s,ma|=s,o)}function J_(s,o,d,m,v){var M=fe.p;fe.p=M!==0&&8>M?M:8;var C=L.T,P={};L.T=P,zg(s,!1,o,d);try{var G=v(),te=L.S;if(te!==null&&te(P,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var pe=P4(G,m);yu(s,o,pe,Ci(s))}else yu(s,o,m,Ci(s))}catch(be){yu(s,o,{then:function(){},status:"rejected",reason:be},Ci())}finally{fe.p=M,L.T=C}}function I4(){}function Og(s,o,d,m){if(s.tag!==5)throw Error(i(476));var v=K_(s).queue;J_(s,v,o,ie,d===null?I4:function(){return e1(s),d(m)})}function K_(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:ie},next:null};var d={};return o.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:d},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function e1(s){var o=K_(s).next.queue;yu(s,o,{},Ci())}function Bg(){return $n(Bu)}function t1(){return _n().memoizedState}function n1(){return _n().memoizedState}function U4(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var d=Ci();s=ca(d);var m=ua(o,s,d);m!==null&&(ri(m,o,d),bu(m,o,d)),o={cache:bg()},s.payload=o;return}o=o.return}}function V4(s,o,d){var m=Ci();d={lane:m,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},ef(s)?r1(o,d):(d=fg(s,o,d,m),d!==null&&(ri(d,s,m),s1(d,o,m)))}function i1(s,o,d){var m=Ci();yu(s,o,d,m)}function yu(s,o,d,m){var v={lane:m,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(ef(s))r1(o,v);else{var M=s.alternate;if(s.lanes===0&&(M===null||M.lanes===0)&&(M=o.lastRenderedReducer,M!==null))try{var C=o.lastRenderedState,P=M(C,d);if(v.hasEagerState=!0,v.eagerState=P,Mi(P,C))return Bh(s,o,v,0),Wt===null&&Oh(),!1}catch{}finally{}if(d=fg(s,o,v,m),d!==null)return ri(d,s,m),s1(d,o,m),!0}return!1}function zg(s,o,d,m){if(m={lane:2,revertLane:A0(),action:m,hasEagerState:!1,eagerState:null,next:null},ef(s)){if(o)throw Error(i(479))}else o=fg(s,d,m,2),o!==null&&ri(o,s,2)}function ef(s){var o=s.alternate;return s===xt||o!==null&&o===xt}function r1(s,o){bl=qh=!0;var d=s.pending;d===null?o.next=o:(o.next=d.next,d.next=o),s.pending=o}function s1(s,o,d){if((d&4194176)!==0){var m=o.lanes;m&=s.pendingLanes,d|=m,o.lanes=d,lt(s,d)}}var zr={readContext:$n,use:Zh,useCallback:mn,useContext:mn,useEffect:mn,useImperativeHandle:mn,useLayoutEffect:mn,useInsertionEffect:mn,useMemo:mn,useReducer:mn,useRef:mn,useState:mn,useDebugValue:mn,useDeferredValue:mn,useTransition:mn,useSyncExternalStore:mn,useId:mn};zr.useCacheRefresh=mn,zr.useMemoCache=mn,zr.useHostTransitionStatus=mn,zr.useFormState=mn,zr.useActionState=mn,zr.useOptimistic=mn;var po={readContext:$n,use:Zh,useCallback:function(s,o){return fi().memoizedState=[s,o===void 0?null:o],s},useContext:$n,useEffect:G_,useImperativeHandle:function(s,o,d){d=d!=null?d.concat([s]):null,Jh(4194308,4,q_.bind(null,o,s),d)},useLayoutEffect:function(s,o){return Jh(4194308,4,s,o)},useInsertionEffect:function(s,o){Jh(4,2,s,o)},useMemo:function(s,o){var d=fi();o=o===void 0?null:o;var m=s();if(fo){ui(!0);try{s()}finally{ui(!1)}}return d.memoizedState=[m,o],m},useReducer:function(s,o,d){var m=fi();if(d!==void 0){var v=d(o);if(fo){ui(!0);try{d(o)}finally{ui(!1)}}}else v=o;return m.memoizedState=m.baseState=v,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:v},m.queue=s,s=s.dispatch=V4.bind(null,xt,s),[m.memoizedState,s]},useRef:function(s){var o=fi();return s={current:s},o.memoizedState=s},useState:function(s){s=Lg(s);var o=s.queue,d=i1.bind(null,xt,o);return o.dispatch=d,[s.memoizedState,d]},useDebugValue:Dg,useDeferredValue:function(s,o){var d=fi();return Pg(d,s,o)},useTransition:function(){var s=Lg(!1);return s=J_.bind(null,xt,s.queue,!0,!1),fi().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,d){var m=xt,v=fi();if(Ct){if(d===void 0)throw Error(i(407));d=d()}else{if(d=o(),Wt===null)throw Error(i(349));(At&60)!==0||C_(m,o,d)}v.memoizedState=d;var M={value:d,getSnapshot:o};return v.queue=M,G_(R_.bind(null,m,M,s),[s]),m.flags|=2048,_l(9,N_.bind(null,m,M,d,o),{destroy:void 0},null),d},useId:function(){var s=fi(),o=Wt.identifierPrefix;if(Ct){var d=fs,m=hs;d=(m&~(1<<32-pn(m)-1)).toString(32)+d,o=":"+o+"R"+d,d=Yh++,0<d&&(o+="H"+d.toString(32)),o+=":"}else d=O4++,o=":"+o+"r"+d.toString(32)+":";return s.memoizedState=o},useCacheRefresh:function(){return fi().memoizedState=U4.bind(null,xt)}};po.useMemoCache=Cg,po.useHostTransitionStatus=Bg,po.useFormState=F_,po.useActionState=F_,po.useOptimistic=function(s){var o=fi();o.memoizedState=o.baseState=s;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=d,o=zg.bind(null,xt,!0,d),d.dispatch=o,[s,o]};var aa={readContext:$n,use:Zh,useCallback:X_,useContext:$n,useEffect:jg,useImperativeHandle:Y_,useInsertionEffect:W_,useLayoutEffect:$_,useMemo:Z_,useReducer:Qh,useRef:H_,useState:function(){return Qh(ms)},useDebugValue:Dg,useDeferredValue:function(s,o){var d=_n();return Q_(d,Dt.memoizedState,s,o)},useTransition:function(){var s=Qh(ms)[0],o=_n().memoizedState;return[typeof s=="boolean"?s:gu(s),o]},useSyncExternalStore:A_,useId:t1};aa.useCacheRefresh=n1,aa.useMemoCache=Cg,aa.useHostTransitionStatus=Bg,aa.useFormState=I_,aa.useActionState=I_,aa.useOptimistic=function(s,o){var d=_n();return j_(d,Dt,s,o)};var mo={readContext:$n,use:Zh,useCallback:X_,useContext:$n,useEffect:jg,useImperativeHandle:Y_,useInsertionEffect:W_,useLayoutEffect:$_,useMemo:Z_,useReducer:Rg,useRef:H_,useState:function(){return Rg(ms)},useDebugValue:Dg,useDeferredValue:function(s,o){var d=_n();return Dt===null?Pg(d,s,o):Q_(d,Dt.memoizedState,s,o)},useTransition:function(){var s=Rg(ms)[0],o=_n().memoizedState;return[typeof s=="boolean"?s:gu(s),o]},useSyncExternalStore:A_,useId:t1};mo.useCacheRefresh=n1,mo.useMemoCache=Cg,mo.useHostTransitionStatus=Bg,mo.useFormState=V_,mo.useActionState=V_,mo.useOptimistic=function(s,o){var d=_n();return Dt!==null?j_(d,Dt,s,o):(d.baseState=s,[s,d.queue.dispatch])};function Fg(s,o,d,m){o=s.memoizedState,d=d(m,o),d=d==null?o:B({},o,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var Ig={isMounted:function(s){return(s=s._reactInternals)?U(s)===s:!1},enqueueSetState:function(s,o,d){s=s._reactInternals;var m=Ci(),v=ca(m);v.payload=o,d!=null&&(v.callback=d),o=ua(s,v,m),o!==null&&(ri(o,s,m),bu(o,s,m))},enqueueReplaceState:function(s,o,d){s=s._reactInternals;var m=Ci(),v=ca(m);v.tag=1,v.payload=o,d!=null&&(v.callback=d),o=ua(s,v,m),o!==null&&(ri(o,s,m),bu(o,s,m))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var d=Ci(),m=ca(d);m.tag=2,o!=null&&(m.callback=o),o=ua(s,m,d),o!==null&&(ri(o,s,d),bu(o,s,d))}};function a1(s,o,d,m,v,M,C){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,M,C):o.prototype&&o.prototype.isPureReactComponent?!ru(d,m)||!ru(v,M):!0}function o1(s,o,d,m){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(d,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(d,m),o.state!==s&&Ig.enqueueReplaceState(o,o.state,null)}function go(s,o){var d=o;if("ref"in o){d={};for(var m in o)m!=="ref"&&(d[m]=o[m])}if(s=s.defaultProps){d===o&&(d=B({},d));for(var v in s)d[v]===void 0&&(d[v]=s[v])}return d}var tf=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function l1(s){tf(s)}function c1(s){console.error(s)}function u1(s){tf(s)}function nf(s,o){try{var d=s.onUncaughtError;d(o.value,{componentStack:o.stack})}catch(m){setTimeout(function(){throw m})}}function d1(s,o,d){try{var m=s.onCaughtError;m(d.value,{componentStack:d.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Ug(s,o,d){return d=ca(d),d.tag=3,d.payload={element:null},d.callback=function(){nf(s,o)},d}function h1(s){return s=ca(s),s.tag=3,s}function f1(s,o,d,m){var v=d.type.getDerivedStateFromError;if(typeof v=="function"){var M=m.value;s.payload=function(){return v(M)},s.callback=function(){d1(o,d,m)}}var C=d.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(s.callback=function(){d1(o,d,m),typeof v!="function"&&(ga===null?ga=new Set([this]):ga.add(this));var P=m.stack;this.componentDidCatch(m.value,{componentStack:P!==null?P:""})})}function H4(s,o,d,m,v){if(d.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(o=d.alternate,o!==null&&vu(o,d,v,!0),d=Ki.current,d!==null){switch(d.tag){case 13:return Br===null?_0():d.alternate===null&&un===0&&(un=3),d.flags&=-257,d.flags|=65536,d.lanes=v,m===yg?d.flags|=16384:(o=d.updateQueue,o===null?d.updateQueue=new Set([m]):o.add(m),M0(s,m,v)),!1;case 22:return d.flags|=65536,m===yg?d.flags|=16384:(o=d.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([m])},d.updateQueue=o):(d=o.retryQueue,d===null?o.retryQueue=new Set([m]):d.add(m)),M0(s,m,v)),!1}throw Error(i(435,d.tag))}return M0(s,m,v),_0(),!1}if(Ct)return o=Ki.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,m!==gg&&(s=Error(i(422),{cause:m}),lu(Zi(s,d)))):(m!==gg&&(o=Error(i(423),{cause:m}),lu(Zi(o,d))),s=s.current.alternate,s.flags|=65536,v&=-v,s.lanes|=v,m=Zi(m,d),v=Ug(s.stateNode,m,v),n0(s,v),un!==4&&(un=2)),!1;var M=Error(i(520),{cause:m});if(M=Zi(M,d),Cu===null?Cu=[M]:Cu.push(M),un!==4&&(un=2),o===null)return!0;m=Zi(m,d),d=o;do{switch(d.tag){case 3:return d.flags|=65536,s=v&-v,d.lanes|=s,s=Ug(d.stateNode,m,s),n0(d,s),!1;case 1:if(o=d.type,M=d.stateNode,(d.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(ga===null||!ga.has(M))))return d.flags|=65536,v&=-v,d.lanes|=v,v=h1(v),f1(v,s,d,m),n0(d,v),!1}d=d.return}while(d!==null);return!1}var p1=Error(i(461)),kn=!1;function Un(s,o,d,m){o.child=s===null?v_(o,null,d,m):uo(o,s.child,d,m)}function m1(s,o,d,m,v){d=d.render;var M=o.ref;if("ref"in m){var C={};for(var P in m)P!=="ref"&&(C[P]=m[P])}else C=m;return xo(o),m=Mg(s,o,d,C,M,v),P=Tg(),s!==null&&!kn?(Eg(s,o,v),gs(s,o,v)):(Ct&&P&&pg(o),o.flags|=1,Un(s,o,m,v),o.child)}function g1(s,o,d,m,v){if(s===null){var M=d.type;return typeof M=="function"&&!u0(M)&&M.defaultProps===void 0&&d.compare===null?(o.tag=15,o.type=M,y1(s,o,M,m,v)):(s=lf(d.type,null,m,o,o.mode,v),s.ref=o.ref,s.return=o,o.child=s)}if(M=s.child,!Zg(s,v)){var C=M.memoizedProps;if(d=d.compare,d=d!==null?d:ru,d(C,m)&&s.ref===o.ref)return gs(s,o,v)}return o.flags|=1,s=pa(M,m),s.ref=o.ref,s.return=o,o.child=s}function y1(s,o,d,m,v){if(s!==null){var M=s.memoizedProps;if(ru(M,m)&&s.ref===o.ref)if(kn=!1,o.pendingProps=m=M,Zg(s,v))(s.flags&131072)!==0&&(kn=!0);else return o.lanes=s.lanes,gs(s,o,v)}return Vg(s,o,d,m,v)}function x1(s,o,d){var m=o.pendingProps,v=m.children,M=(o.stateNode._pendingVisibility&2)!==0,C=s!==null?s.memoizedState:null;if(xu(s,o),m.mode==="hidden"||M){if((o.flags&128)!==0){if(m=C!==null?C.baseLanes|d:d,s!==null){for(v=o.child=s.child,M=0;v!==null;)M=M|v.lanes|v.childLanes,v=v.sibling;o.childLanes=M&~m}else o.childLanes=0,o.child=null;return v1(s,o,m,d)}if((d&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&$h(o,C!==null?C.cachePool:null),C!==null?b_(o,C):xg(),w_(o);else return o.lanes=o.childLanes=536870912,v1(s,o,C!==null?C.baseLanes|d:d,d)}else C!==null?($h(o,C.cachePool),b_(o,C),ra(),o.memoizedState=null):(s!==null&&$h(o,null),xg(),ra());return Un(s,o,v,d),o.child}function v1(s,o,d,m){var v=_g();return v=v===null?null:{parent:Cn._currentValue,pool:v},o.memoizedState={baseLanes:d,cachePool:v},s!==null&&$h(o,null),xg(),w_(o),s!==null&&vu(s,o,m,!0),null}function xu(s,o){var d=o.ref;if(d===null)s!==null&&s.ref!==null&&(o.flags|=2097664);else{if(typeof d!="function"&&typeof d!="object")throw Error(i(284));(s===null||s.ref!==d)&&(o.flags|=2097664)}}function Vg(s,o,d,m,v){return xo(o),d=Mg(s,o,d,m,void 0,v),m=Tg(),s!==null&&!kn?(Eg(s,o,v),gs(s,o,v)):(Ct&&m&&pg(o),o.flags|=1,Un(s,o,d,v),o.child)}function b1(s,o,d,m,v,M){return xo(o),o.updateQueue=null,d=E_(o,m,d,v),T_(s),m=Tg(),s!==null&&!kn?(Eg(s,o,M),gs(s,o,M)):(Ct&&m&&pg(o),o.flags|=1,Un(s,o,d,M),o.child)}function w1(s,o,d,m,v){if(xo(o),o.stateNode===null){var M=fl,C=d.contextType;typeof C=="object"&&C!==null&&(M=$n(C)),M=new d(m,M),o.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,M.updater=Ig,o.stateNode=M,M._reactInternals=o,M=o.stateNode,M.props=m,M.state=o.memoizedState,M.refs={},e0(o),C=d.contextType,M.context=typeof C=="object"&&C!==null?$n(C):fl,M.state=o.memoizedState,C=d.getDerivedStateFromProps,typeof C=="function"&&(Fg(o,d,C,m),M.state=o.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(C=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),C!==M.state&&Ig.enqueueReplaceState(M,M.state,null),_u(o,m,M,v),wu(),M.state=o.memoizedState),typeof M.componentDidMount=="function"&&(o.flags|=4194308),m=!0}else if(s===null){M=o.stateNode;var P=o.memoizedProps,G=go(d,P);M.props=G;var te=M.context,pe=d.contextType;C=fl,typeof pe=="object"&&pe!==null&&(C=$n(pe));var be=d.getDerivedStateFromProps;pe=typeof be=="function"||typeof M.getSnapshotBeforeUpdate=="function",P=o.pendingProps!==P,pe||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(P||te!==C)&&o1(o,M,m,C),la=!1;var ae=o.memoizedState;M.state=ae,_u(o,m,M,v),wu(),te=o.memoizedState,P||ae!==te||la?(typeof be=="function"&&(Fg(o,d,be,m),te=o.memoizedState),(G=la||a1(o,d,G,m,ae,te,C))?(pe||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(o.flags|=4194308)):(typeof M.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=te),M.props=m,M.state=te,M.context=C,m=G):(typeof M.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{M=o.stateNode,t0(s,o),C=o.memoizedProps,pe=go(d,C),M.props=pe,be=o.pendingProps,ae=M.context,te=d.contextType,G=fl,typeof te=="object"&&te!==null&&(G=$n(te)),P=d.getDerivedStateFromProps,(te=typeof P=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(C!==be||ae!==G)&&o1(o,M,m,G),la=!1,ae=o.memoizedState,M.state=ae,_u(o,m,M,v),wu();var he=o.memoizedState;C!==be||ae!==he||la||s!==null&&s.dependencies!==null&&rf(s.dependencies)?(typeof P=="function"&&(Fg(o,d,P,m),he=o.memoizedState),(pe=la||a1(o,d,pe,m,ae,he,G)||s!==null&&s.dependencies!==null&&rf(s.dependencies))?(te||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(m,he,G),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(m,he,G)),typeof M.componentDidUpdate=="function"&&(o.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof M.componentDidUpdate!="function"||C===s.memoizedProps&&ae===s.memoizedState||(o.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&ae===s.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=he),M.props=m,M.state=he,M.context=G,m=pe):(typeof M.componentDidUpdate!="function"||C===s.memoizedProps&&ae===s.memoizedState||(o.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&ae===s.memoizedState||(o.flags|=1024),m=!1)}return M=m,xu(s,o),m=(o.flags&128)!==0,M||m?(M=o.stateNode,d=m&&typeof d.getDerivedStateFromError!="function"?null:M.render(),o.flags|=1,s!==null&&m?(o.child=uo(o,s.child,null,v),o.child=uo(o,null,d,v)):Un(s,o,d,v),o.memoizedState=M.state,s=o.child):s=gs(s,o,v),s}function _1(s,o,d,m){return ou(),o.flags|=256,Un(s,o,d,m),o.child}var Hg={dehydrated:null,treeContext:null,retryLane:0};function Gg(s){return{baseLanes:s,cachePool:M_()}}function Wg(s,o,d){return s=s!==null?s.childLanes&~d:0,o&&(s|=ir),s}function S1(s,o,d){var m=o.pendingProps,v=!1,M=(o.flags&128)!==0,C;if((C=M)||(C=s!==null&&s.memoizedState===null?!1:(An.current&2)!==0),C&&(v=!0,o.flags&=-129),C=(o.flags&32)!==0,o.flags&=-33,s===null){if(Ct){if(v?ia(o):ra(),Ct){var P=In,G;if(G=P){e:{for(G=P,P=Or;G.nodeType!==8;){if(!P){P=null;break e}if(G=wr(G.nextSibling),G===null){P=null;break e}}P=G}P!==null?(o.memoizedState={dehydrated:P,treeContext:oo!==null?{id:hs,overflow:fs}:null,retryLane:536870912},G=nr(18,null,null,0),G.stateNode=P,G.return=o,o.child=G,ii=o,In=null,G=!0):G=!1}G||co(o)}if(P=o.memoizedState,P!==null&&(P=P.dehydrated,P!==null))return P.data==="$!"?o.lanes=16:o.lanes=536870912,null;ps(o)}return P=m.children,m=m.fallback,v?(ra(),v=o.mode,P=qg({mode:"hidden",children:P},v),m=bo(m,v,d,null),P.return=o,m.return=o,P.sibling=m,o.child=P,v=o.child,v.memoizedState=Gg(d),v.childLanes=Wg(s,C,d),o.memoizedState=Hg,m):(ia(o),$g(o,P))}if(G=s.memoizedState,G!==null&&(P=G.dehydrated,P!==null)){if(M)o.flags&256?(ia(o),o.flags&=-257,o=Yg(s,o,d)):o.memoizedState!==null?(ra(),o.child=s.child,o.flags|=128,o=null):(ra(),v=m.fallback,P=o.mode,m=qg({mode:"visible",children:m.children},P),v=bo(v,P,d,null),v.flags|=2,m.return=o,v.return=o,m.sibling=v,o.child=m,uo(o,s.child,null,d),m=o.child,m.memoizedState=Gg(d),m.childLanes=Wg(s,C,d),o.memoizedState=Hg,o=v);else if(ia(o),P.data==="$!"){if(C=P.nextSibling&&P.nextSibling.dataset,C)var te=C.dgst;C=te,m=Error(i(419)),m.stack="",m.digest=C,lu({value:m,source:null,stack:null}),o=Yg(s,o,d)}else if(kn||vu(s,o,d,!1),C=(d&s.childLanes)!==0,kn||C){if(C=Wt,C!==null){if(m=d&-d,(m&42)!==0)m=1;else switch(m){case 2:m=1;break;case 8:m=4;break;case 32:m=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:m=64;break;case 268435456:m=134217728;break;default:m=0}if(m=(m&(C.suspendedLanes|d))!==0?0:m,m!==0&&m!==G.retryLane)throw G.retryLane=m,na(s,m),ri(C,s,m),p1}P.data==="$?"||_0(),o=Yg(s,o,d)}else P.data==="$?"?(o.flags|=128,o.child=s.child,o=rL.bind(null,s),P._reactRetry=o,o=null):(s=G.treeContext,In=wr(P.nextSibling),ii=o,Ct=!0,vr=null,Or=!1,s!==null&&(Qi[Ji++]=hs,Qi[Ji++]=fs,Qi[Ji++]=oo,hs=s.id,fs=s.overflow,oo=o),o=$g(o,m.children),o.flags|=4096);return o}return v?(ra(),v=m.fallback,P=o.mode,G=s.child,te=G.sibling,m=pa(G,{mode:"hidden",children:m.children}),m.subtreeFlags=G.subtreeFlags&31457280,te!==null?v=pa(te,v):(v=bo(v,P,d,null),v.flags|=2),v.return=o,m.return=o,m.sibling=v,o.child=m,m=v,v=o.child,P=s.child.memoizedState,P===null?P=Gg(d):(G=P.cachePool,G!==null?(te=Cn._currentValue,G=G.parent!==te?{parent:te,pool:te}:G):G=M_(),P={baseLanes:P.baseLanes|d,cachePool:G}),v.memoizedState=P,v.childLanes=Wg(s,C,d),o.memoizedState=Hg,m):(ia(o),d=s.child,s=d.sibling,d=pa(d,{mode:"visible",children:m.children}),d.return=o,d.sibling=null,s!==null&&(C=o.deletions,C===null?(o.deletions=[s],o.flags|=16):C.push(s)),o.child=d,o.memoizedState=null,d)}function $g(s,o){return o=qg({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function qg(s,o){return X1(s,o,0,null)}function Yg(s,o,d){return uo(o,s.child,null,d),s=$g(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function M1(s,o,d){s.lanes|=o;var m=s.alternate;m!==null&&(m.lanes|=o),Jg(s.return,o,d)}function Xg(s,o,d,m,v){var M=s.memoizedState;M===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:v}:(M.isBackwards=o,M.rendering=null,M.renderingStartTime=0,M.last=m,M.tail=d,M.tailMode=v)}function T1(s,o,d){var m=o.pendingProps,v=m.revealOrder,M=m.tail;if(Un(s,o,m.children,d),m=An.current,(m&2)!==0)m=m&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&M1(s,d,o);else if(s.tag===19)M1(s,d,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}m&=1}switch($e(An,m),v){case"forwards":for(d=o.child,v=null;d!==null;)s=d.alternate,s!==null&&Wh(s)===null&&(v=d),d=d.sibling;d=v,d===null?(v=o.child,o.child=null):(v=d.sibling,d.sibling=null),Xg(o,!1,v,d,M);break;case"backwards":for(d=null,v=o.child,o.child=null;v!==null;){if(s=v.alternate,s!==null&&Wh(s)===null){o.child=v;break}s=v.sibling,v.sibling=d,d=v,v=s}Xg(o,!0,d,null,M);break;case"together":Xg(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function gs(s,o,d){if(s!==null&&(o.dependencies=s.dependencies),ma|=o.lanes,(d&o.childLanes)===0)if(s!==null){if(vu(s,o,d,!1),(d&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(i(153));if(o.child!==null){for(s=o.child,d=pa(s,s.pendingProps),o.child=d,d.return=o;s.sibling!==null;)s=s.sibling,d=d.sibling=pa(s,s.pendingProps),d.return=o;d.sibling=null}return o.child}function Zg(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&rf(s)))}function G4(s,o,d){switch(o.tag){case 3:De(o,o.stateNode.containerInfo),oa(o,Cn,s.memoizedState.cache),ou();break;case 27:case 5:H(o);break;case 4:De(o,o.stateNode.containerInfo);break;case 10:oa(o,o.type,o.memoizedProps.value);break;case 13:var m=o.memoizedState;if(m!==null)return m.dehydrated!==null?(ia(o),o.flags|=128,null):(d&o.child.childLanes)!==0?S1(s,o,d):(ia(o),s=gs(s,o,d),s!==null?s.sibling:null);ia(o);break;case 19:var v=(s.flags&128)!==0;if(m=(d&o.childLanes)!==0,m||(vu(s,o,d,!1),m=(d&o.childLanes)!==0),v){if(m)return T1(s,o,d);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),$e(An,An.current),m)break;return null;case 22:case 23:return o.lanes=0,x1(s,o,d);case 24:oa(o,Cn,s.memoizedState.cache)}return gs(s,o,d)}function E1(s,o,d){if(s!==null)if(s.memoizedProps!==o.pendingProps)kn=!0;else{if(!Zg(s,d)&&(o.flags&128)===0)return kn=!1,G4(s,o,d);kn=(s.flags&131072)!==0}else kn=!1,Ct&&(o.flags&1048576)!==0&&u_(o,Ih,o.index);switch(o.lanes=0,o.tag){case 16:e:{s=o.pendingProps;var m=o.elementType,v=m._init;if(m=v(m._payload),o.type=m,typeof m=="function")u0(m)?(s=go(m,s),o.tag=1,o=w1(null,o,m,s,d)):(o.tag=0,o=Vg(null,o,m,s,d));else{if(m!=null){if(v=m.$$typeof,v===b){o.tag=11,o=m1(null,o,m,s,d);break e}else if(v===_){o.tag=14,o=g1(null,o,m,s,d);break e}}throw o=O(m)||m,Error(i(306,o,""))}}return o;case 0:return Vg(s,o,o.type,o.pendingProps,d);case 1:return m=o.type,v=go(m,o.pendingProps),w1(s,o,m,v,d);case 3:e:{if(De(o,o.stateNode.containerInfo),s===null)throw Error(i(387));var M=o.pendingProps;v=o.memoizedState,m=v.element,t0(s,o),_u(o,M,null,d);var C=o.memoizedState;if(M=C.cache,oa(o,Cn,M),M!==v.cache&&Kg(o,[Cn],d,!0),wu(),M=C.element,v.isDehydrated)if(v={element:M,isDehydrated:!1,cache:C.cache},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){o=_1(s,o,M,d);break e}else if(M!==m){m=Zi(Error(i(424)),o),lu(m),o=_1(s,o,M,d);break e}else for(In=wr(o.stateNode.containerInfo.firstChild),ii=o,Ct=!0,vr=null,Or=!0,d=v_(o,null,M,d),o.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(ou(),M===m){o=gs(s,o,d);break e}Un(s,o,M,d)}o=o.child}return o;case 26:return xu(s,o),s===null?(d=NS(o.type,null,o.pendingProps,null))?o.memoizedState=d:Ct||(d=o.type,s=o.pendingProps,m=bf(Ee.current).createElement(d),m[oe]=o,m[Me]=s,Vn(m,d,s),Ln(m),o.stateNode=m):o.memoizedState=NS(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return H(o),s===null&&Ct&&(m=o.stateNode=ES(o.type,o.pendingProps,Ee.current),ii=o,Or=!0,In=wr(m.firstChild)),m=o.pendingProps.children,s!==null||Ct?Un(s,o,m,d):o.child=uo(o,null,m,d),xu(s,o),o.child;case 5:return s===null&&Ct&&((v=m=In)&&(m=bL(m,o.type,o.pendingProps,Or),m!==null?(o.stateNode=m,ii=o,In=wr(m.firstChild),Or=!1,v=!0):v=!1),v||co(o)),H(o),v=o.type,M=o.pendingProps,C=s!==null?s.memoizedProps:null,m=M.children,O0(v,M)?m=null:C!==null&&O0(v,C)&&(o.flags|=32),o.memoizedState!==null&&(v=Mg(s,o,B4,null,null,d),Bu._currentValue=v),xu(s,o),Un(s,o,m,d),o.child;case 6:return s===null&&Ct&&((s=d=In)&&(d=wL(d,o.pendingProps,Or),d!==null?(o.stateNode=d,ii=o,In=null,s=!0):s=!1),s||co(o)),null;case 13:return S1(s,o,d);case 4:return De(o,o.stateNode.containerInfo),m=o.pendingProps,s===null?o.child=uo(o,null,m,d):Un(s,o,m,d),o.child;case 11:return m1(s,o,o.type,o.pendingProps,d);case 7:return Un(s,o,o.pendingProps,d),o.child;case 8:return Un(s,o,o.pendingProps.children,d),o.child;case 12:return Un(s,o,o.pendingProps.children,d),o.child;case 10:return m=o.pendingProps,oa(o,o.type,m.value),Un(s,o,m.children,d),o.child;case 9:return v=o.type._context,m=o.pendingProps.children,xo(o),v=$n(v),m=m(v),o.flags|=1,Un(s,o,m,d),o.child;case 14:return g1(s,o,o.type,o.pendingProps,d);case 15:return y1(s,o,o.type,o.pendingProps,d);case 19:return T1(s,o,d);case 22:return x1(s,o,d);case 24:return xo(o),m=$n(Cn),s===null?(v=_g(),v===null&&(v=Wt,M=bg(),v.pooledCache=M,M.refCount++,M!==null&&(v.pooledCacheLanes|=d),v=M),o.memoizedState={parent:m,cache:v},e0(o),oa(o,Cn,v)):((s.lanes&d)!==0&&(t0(s,o),_u(o,null,null,d),wu()),v=s.memoizedState,M=o.memoizedState,v.parent!==m?(v={parent:m,cache:m},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),oa(o,Cn,m)):(m=M.cache,oa(o,Cn,m),m!==v.cache&&Kg(o,[Cn],d,!0))),Un(s,o,o.pendingProps.children,d),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}var Qg=Be(null),yo=null,ys=null;function oa(s,o,d){$e(Qg,o._currentValue),o._currentValue=d}function xs(s){s._currentValue=Qg.current,Ie(Qg)}function Jg(s,o,d){for(;s!==null;){var m=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),s===d)break;s=s.return}}function Kg(s,o,d,m){var v=s.child;for(v!==null&&(v.return=s);v!==null;){var M=v.dependencies;if(M!==null){var C=v.child;M=M.firstContext;e:for(;M!==null;){var P=M;M=v;for(var G=0;G<o.length;G++)if(P.context===o[G]){M.lanes|=d,P=M.alternate,P!==null&&(P.lanes|=d),Jg(M.return,d,s),m||(C=null);break e}M=P.next}}else if(v.tag===18){if(C=v.return,C===null)throw Error(i(341));C.lanes|=d,M=C.alternate,M!==null&&(M.lanes|=d),Jg(C,d,s),C=null}else C=v.child;if(C!==null)C.return=v;else for(C=v;C!==null;){if(C===s){C=null;break}if(v=C.sibling,v!==null){v.return=C.return,C=v;break}C=C.return}v=C}}function vu(s,o,d,m){s=null;for(var v=o,M=!1;v!==null;){if(!M){if((v.flags&524288)!==0)M=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var C=v.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var P=v.type;Mi(v.pendingProps.value,C.value)||(s!==null?s.push(P):s=[P])}}else if(v===Re.current){if(C=v.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(s!==null?s.push(Bu):s=[Bu])}v=v.return}s!==null&&Kg(o,s,d,m),o.flags|=262144}function rf(s){for(s=s.firstContext;s!==null;){if(!Mi(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function xo(s){yo=s,ys=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function $n(s){return A1(yo,s)}function sf(s,o){return yo===null&&xo(s),A1(s,o)}function A1(s,o){var d=o._currentValue;if(o={context:o,memoizedValue:d,next:null},ys===null){if(s===null)throw Error(i(308));ys=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else ys=ys.next=o;return d}var la=!1;function e0(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function t0(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ca(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ua(s,o,d){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(nn&2)!==0){var v=m.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),m.pending=o,o=zh(s),l_(s,null,d),o}return Bh(s,m,o,d),zh(s)}function bu(s,o,d){if(o=o.updateQueue,o!==null&&(o=o.shared,(d&4194176)!==0)){var m=o.lanes;m&=s.pendingLanes,d|=m,o.lanes=d,lt(s,d)}}function n0(s,o){var d=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var v=null,M=null;if(d=d.firstBaseUpdate,d!==null){do{var C={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};M===null?v=M=C:M=M.next=C,d=d.next}while(d!==null);M===null?v=M=o:M=M.next=o}else v=M=o;d={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:M,shared:m.shared,callbacks:m.callbacks},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=o:s.next=o,d.lastBaseUpdate=o}var i0=!1;function wu(){if(i0){var s=vl;if(s!==null)throw s}}function _u(s,o,d,m){i0=!1;var v=s.updateQueue;la=!1;var M=v.firstBaseUpdate,C=v.lastBaseUpdate,P=v.shared.pending;if(P!==null){v.shared.pending=null;var G=P,te=G.next;G.next=null,C===null?M=te:C.next=te,C=G;var pe=s.alternate;pe!==null&&(pe=pe.updateQueue,P=pe.lastBaseUpdate,P!==C&&(P===null?pe.firstBaseUpdate=te:P.next=te,pe.lastBaseUpdate=G))}if(M!==null){var be=v.baseState;C=0,pe=te=G=null,P=M;do{var ae=P.lane&-536870913,he=ae!==P.lane;if(he?(At&ae)===ae:(m&ae)===ae){ae!==0&&ae===xl&&(i0=!0),pe!==null&&(pe=pe.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});e:{var We=s,ut=P;ae=o;var dn=d;switch(ut.tag){case 1:if(We=ut.payload,typeof We=="function"){be=We.call(dn,be,ae);break e}be=We;break e;case 3:We.flags=We.flags&-65537|128;case 0:if(We=ut.payload,ae=typeof We=="function"?We.call(dn,be,ae):We,ae==null)break e;be=B({},be,ae);break e;case 2:la=!0}}ae=P.callback,ae!==null&&(s.flags|=64,he&&(s.flags|=8192),he=v.callbacks,he===null?v.callbacks=[ae]:he.push(ae))}else he={lane:ae,tag:P.tag,payload:P.payload,callback:P.callback,next:null},pe===null?(te=pe=he,G=be):pe=pe.next=he,C|=ae;if(P=P.next,P===null){if(P=v.shared.pending,P===null)break;he=P,P=he.next,he.next=null,v.lastBaseUpdate=he,v.shared.pending=null}}while(!0);pe===null&&(G=be),v.baseState=G,v.firstBaseUpdate=te,v.lastBaseUpdate=pe,M===null&&(v.shared.lanes=0),ma|=C,s.lanes=C,s.memoizedState=be}}function C1(s,o){if(typeof s!="function")throw Error(i(191,s));s.call(o)}function N1(s,o){var d=s.callbacks;if(d!==null)for(s.callbacks=null,s=0;s<d.length;s++)C1(d[s],o)}function Su(s,o){try{var d=o.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var v=m.next;d=v;do{if((d.tag&s)===s){m=void 0;var M=d.create,C=d.inst;m=M(),C.destroy=m}d=d.next}while(d!==v)}}catch(P){Ft(o,o.return,P)}}function da(s,o,d){try{var m=o.updateQueue,v=m!==null?m.lastEffect:null;if(v!==null){var M=v.next;m=M;do{if((m.tag&s)===s){var C=m.inst,P=C.destroy;if(P!==void 0){C.destroy=void 0,v=o;var G=d;try{P()}catch(te){Ft(v,G,te)}}}m=m.next}while(m!==M)}}catch(te){Ft(o,o.return,te)}}function R1(s){var o=s.updateQueue;if(o!==null){var d=s.stateNode;try{N1(o,d)}catch(m){Ft(s,s.return,m)}}}function L1(s,o,d){d.props=go(s.type,s.memoizedProps),d.state=s.memoizedState;try{d.componentWillUnmount()}catch(m){Ft(s,o,m)}}function vo(s,o){try{var d=s.ref;if(d!==null){var m=s.stateNode;switch(s.tag){case 26:case 27:case 5:var v=m;break;default:v=m}typeof d=="function"?s.refCleanup=d(v):d.current=v}}catch(M){Ft(s,o,M)}}function Ti(s,o){var d=s.ref,m=s.refCleanup;if(d!==null)if(typeof m=="function")try{m()}catch(v){Ft(s,o,v)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(v){Ft(s,o,v)}else d.current=null}function k1(s){var o=s.type,d=s.memoizedProps,m=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":d.autoFocus&&m.focus();break e;case"img":d.src?m.src=d.src:d.srcSet&&(m.srcset=d.srcSet)}}catch(v){Ft(s,s.return,v)}}function j1(s,o,d){try{var m=s.stateNode;mL(m,s.type,d,o),m[Me]=o}catch(v){Ft(s,s.return,v)}}function D1(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27||s.tag===4}function r0(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||D1(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==27&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function s0(s,o,d){var m=s.tag;if(m===5||m===6)s=s.stateNode,o?d.nodeType===8?d.parentNode.insertBefore(s,o):d.insertBefore(s,o):(d.nodeType===8?(o=d.parentNode,o.insertBefore(s,d)):(o=d,o.appendChild(s)),d=d._reactRootContainer,d!=null||o.onclick!==null||(o.onclick=vf));else if(m!==4&&m!==27&&(s=s.child,s!==null))for(s0(s,o,d),s=s.sibling;s!==null;)s0(s,o,d),s=s.sibling}function af(s,o,d){var m=s.tag;if(m===5||m===6)s=s.stateNode,o?d.insertBefore(s,o):d.appendChild(s);else if(m!==4&&m!==27&&(s=s.child,s!==null))for(af(s,o,d),s=s.sibling;s!==null;)af(s,o,d),s=s.sibling}var vs=!1,cn=!1,a0=!1,P1=typeof WeakSet=="function"?WeakSet:Set,jn=null,O1=!1;function W4(s,o){if(s=s.containerInfo,D0=Ef,s=Kw(s),lg(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var v=m.anchorOffset,M=m.focusNode;m=m.focusOffset;try{d.nodeType,M.nodeType}catch{d=null;break e}var C=0,P=-1,G=-1,te=0,pe=0,be=s,ae=null;t:for(;;){for(var he;be!==d||v!==0&&be.nodeType!==3||(P=C+v),be!==M||m!==0&&be.nodeType!==3||(G=C+m),be.nodeType===3&&(C+=be.nodeValue.length),(he=be.firstChild)!==null;)ae=be,be=he;for(;;){if(be===s)break t;if(ae===d&&++te===v&&(P=C),ae===M&&++pe===m&&(G=C),(he=be.nextSibling)!==null)break;be=ae,ae=be.parentNode}be=he}d=P===-1||G===-1?null:{start:P,end:G}}else d=null}d=d||{start:0,end:0}}else d=null;for(P0={focusedElem:s,selectionRange:d},Ef=!1,jn=o;jn!==null;)if(o=jn,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,jn=s;else for(;jn!==null;){switch(o=jn,M=o.alternate,s=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&M!==null){s=void 0,d=o,v=M.memoizedProps,M=M.memoizedState,m=d.stateNode;try{var We=go(d.type,v,d.elementType===d.type);s=m.getSnapshotBeforeUpdate(We,M),m.__reactInternalSnapshotBeforeUpdate=s}catch(ut){Ft(d,d.return,ut)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,d=s.nodeType,d===9)F0(s);else if(d===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":F0(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=o.sibling,s!==null){s.return=o.return,jn=s;break}jn=o.return}return We=O1,O1=!1,We}function B1(s,o,d){var m=d.flags;switch(d.tag){case 0:case 11:case 15:ws(s,d),m&4&&Su(5,d);break;case 1:if(ws(s,d),m&4)if(s=d.stateNode,o===null)try{s.componentDidMount()}catch(P){Ft(d,d.return,P)}else{var v=go(d.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(v,o,s.__reactInternalSnapshotBeforeUpdate)}catch(P){Ft(d,d.return,P)}}m&64&&R1(d),m&512&&vo(d,d.return);break;case 3:if(ws(s,d),m&64&&(m=d.updateQueue,m!==null)){if(s=null,d.child!==null)switch(d.child.tag){case 27:case 5:s=d.child.stateNode;break;case 1:s=d.child.stateNode}try{N1(m,s)}catch(P){Ft(d,d.return,P)}}break;case 26:ws(s,d),m&512&&vo(d,d.return);break;case 27:case 5:ws(s,d),o===null&&m&4&&k1(d),m&512&&vo(d,d.return);break;case 12:ws(s,d);break;case 13:ws(s,d),m&4&&I1(s,d);break;case 22:if(v=d.memoizedState!==null||vs,!v){o=o!==null&&o.memoizedState!==null||cn;var M=vs,C=cn;vs=v,(cn=o)&&!C?ha(s,d,(d.subtreeFlags&8772)!==0):ws(s,d),vs=M,cn=C}m&512&&(d.memoizedProps.mode==="manual"?vo(d,d.return):Ti(d,d.return));break;default:ws(s,d)}}function z1(s){var o=s.alternate;o!==null&&(s.alternate=null,z1(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&Wi(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Sn=null,Ei=!1;function bs(s,o,d){for(d=d.child;d!==null;)F1(s,o,d),d=d.sibling}function F1(s,o,d){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(_i,d)}catch{}switch(d.tag){case 26:cn||Ti(d,o),bs(s,o,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:cn||Ti(d,o);var m=Sn,v=Ei;for(Sn=d.stateNode,bs(s,o,d),d=d.stateNode,o=d.attributes;o.length;)d.removeAttributeNode(o[0]);Wi(d),Sn=m,Ei=v;break;case 5:cn||Ti(d,o);case 6:v=Sn;var M=Ei;if(Sn=null,bs(s,o,d),Sn=v,Ei=M,Sn!==null)if(Ei)try{s=Sn,m=d.stateNode,s.nodeType===8?s.parentNode.removeChild(m):s.removeChild(m)}catch(C){Ft(d,o,C)}else try{Sn.removeChild(d.stateNode)}catch(C){Ft(d,o,C)}break;case 18:Sn!==null&&(Ei?(o=Sn,d=d.stateNode,o.nodeType===8?z0(o.parentNode,d):o.nodeType===1&&z0(o,d),Uu(o)):z0(Sn,d.stateNode));break;case 4:m=Sn,v=Ei,Sn=d.stateNode.containerInfo,Ei=!0,bs(s,o,d),Sn=m,Ei=v;break;case 0:case 11:case 14:case 15:cn||da(2,d,o),cn||da(4,d,o),bs(s,o,d);break;case 1:cn||(Ti(d,o),m=d.stateNode,typeof m.componentWillUnmount=="function"&&L1(d,o,m)),bs(s,o,d);break;case 21:bs(s,o,d);break;case 22:cn||Ti(d,o),cn=(m=cn)||d.memoizedState!==null,bs(s,o,d),cn=m;break;default:bs(s,o,d)}}function I1(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Uu(s)}catch(d){Ft(o,o.return,d)}}function $4(s){switch(s.tag){case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new P1),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new P1),o;default:throw Error(i(435,s.tag))}}function o0(s,o){var d=$4(s);o.forEach(function(m){var v=sL.bind(null,s,m);d.has(m)||(d.add(m),m.then(v,v))})}function er(s,o){var d=o.deletions;if(d!==null)for(var m=0;m<d.length;m++){var v=d[m],M=s,C=o,P=C;e:for(;P!==null;){switch(P.tag){case 27:case 5:Sn=P.stateNode,Ei=!1;break e;case 3:Sn=P.stateNode.containerInfo,Ei=!0;break e;case 4:Sn=P.stateNode.containerInfo,Ei=!0;break e}P=P.return}if(Sn===null)throw Error(i(160));F1(M,C,v),Sn=null,Ei=!1,M=v.alternate,M!==null&&(M.return=null),v.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)U1(o,s),o=o.sibling}var br=null;function U1(s,o){var d=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:er(o,s),tr(s),m&4&&(da(3,s,s.return),Su(3,s),da(5,s,s.return));break;case 1:er(o,s),tr(s),m&512&&(cn||d===null||Ti(d,d.return)),m&64&&vs&&(s=s.updateQueue,s!==null&&(m=s.callbacks,m!==null&&(d=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=d===null?m:d.concat(m))));break;case 26:var v=br;if(er(o,s),tr(s),m&512&&(cn||d===null||Ti(d,d.return)),m&4){var M=d!==null?d.memoizedState:null;if(m=s.memoizedState,d===null)if(m===null)if(s.stateNode===null){e:{m=s.type,d=s.memoizedProps,v=v.ownerDocument||v;t:switch(m){case"title":M=v.getElementsByTagName("title")[0],(!M||M[Gt]||M[oe]||M.namespaceURI==="http://www.w3.org/2000/svg"||M.hasAttribute("itemprop"))&&(M=v.createElement(m),v.head.insertBefore(M,v.querySelector("head > title"))),Vn(M,m,d),M[oe]=s,Ln(M),m=M;break e;case"link":var C=kS("link","href",v).get(m+(d.href||""));if(C){for(var P=0;P<C.length;P++)if(M=C[P],M.getAttribute("href")===(d.href==null?null:d.href)&&M.getAttribute("rel")===(d.rel==null?null:d.rel)&&M.getAttribute("title")===(d.title==null?null:d.title)&&M.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){C.splice(P,1);break t}}M=v.createElement(m),Vn(M,m,d),v.head.appendChild(M);break;case"meta":if(C=kS("meta","content",v).get(m+(d.content||""))){for(P=0;P<C.length;P++)if(M=C[P],M.getAttribute("content")===(d.content==null?null:""+d.content)&&M.getAttribute("name")===(d.name==null?null:d.name)&&M.getAttribute("property")===(d.property==null?null:d.property)&&M.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&M.getAttribute("charset")===(d.charSet==null?null:d.charSet)){C.splice(P,1);break t}}M=v.createElement(m),Vn(M,m,d),v.head.appendChild(M);break;default:throw Error(i(468,m))}M[oe]=s,Ln(M),m=M}s.stateNode=m}else jS(v,s.type,s.stateNode);else s.stateNode=LS(v,m,s.memoizedProps);else M!==m?(M===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):M.count--,m===null?jS(v,s.type,s.stateNode):LS(v,m,s.memoizedProps)):m===null&&s.stateNode!==null&&j1(s,s.memoizedProps,d.memoizedProps)}break;case 27:if(m&4&&s.alternate===null){v=s.stateNode,M=s.memoizedProps;try{for(var G=v.firstChild;G;){var te=G.nextSibling,pe=G.nodeName;G[Gt]||pe==="HEAD"||pe==="BODY"||pe==="SCRIPT"||pe==="STYLE"||pe==="LINK"&&G.rel.toLowerCase()==="stylesheet"||v.removeChild(G),G=te}for(var be=s.type,ae=v.attributes;ae.length;)v.removeAttributeNode(ae[0]);Vn(v,be,M),v[oe]=s,v[Me]=M}catch(We){Ft(s,s.return,We)}}case 5:if(er(o,s),tr(s),m&512&&(cn||d===null||Ti(d,d.return)),s.flags&32){v=s.stateNode;try{al(v,"")}catch(We){Ft(s,s.return,We)}}m&4&&s.stateNode!=null&&(v=s.memoizedProps,j1(s,v,d!==null?d.memoizedProps:v)),m&1024&&(a0=!0);break;case 6:if(er(o,s),tr(s),m&4){if(s.stateNode===null)throw Error(i(162));m=s.memoizedProps,d=s.stateNode;try{d.nodeValue=m}catch(We){Ft(s,s.return,We)}}break;case 3:if(Sf=null,v=br,br=wf(o.containerInfo),er(o,s),br=v,tr(s),m&4&&d!==null&&d.memoizedState.isDehydrated)try{Uu(o.containerInfo)}catch(We){Ft(s,s.return,We)}a0&&(a0=!1,V1(s));break;case 4:m=br,br=wf(s.stateNode.containerInfo),er(o,s),tr(s),br=m;break;case 12:er(o,s),tr(s);break;case 13:er(o,s),tr(s),s.child.flags&8192&&s.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(g0=ze()),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,o0(s,m)));break;case 22:if(m&512&&(cn||d===null||Ti(d,d.return)),G=s.memoizedState!==null,te=d!==null&&d.memoizedState!==null,pe=vs,be=cn,vs=pe||G,cn=be||te,er(o,s),cn=be,vs=pe,tr(s),o=s.stateNode,o._current=s,o._visibility&=-3,o._visibility|=o._pendingVisibility&2,m&8192&&(o._visibility=G?o._visibility&-2:o._visibility|1,G&&(o=vs||cn,d===null||te||o||Sl(s)),s.memoizedProps===null||s.memoizedProps.mode!=="manual"))e:for(d=null,o=s;;){if(o.tag===5||o.tag===26||o.tag===27){if(d===null){te=d=o;try{if(v=te.stateNode,G)M=v.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{C=te.stateNode,P=te.memoizedProps.style;var he=P!=null&&P.hasOwnProperty("display")?P.display:null;C.style.display=he==null||typeof he=="boolean"?"":(""+he).trim()}}catch(We){Ft(te,te.return,We)}}}else if(o.tag===6){if(d===null){te=o;try{te.stateNode.nodeValue=G?"":te.memoizedProps}catch(We){Ft(te,te.return,We)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;d===o&&(d=null),o=o.return}d===o&&(d=null),o.sibling.return=o.return,o=o.sibling}m&4&&(m=s.updateQueue,m!==null&&(d=m.retryQueue,d!==null&&(m.retryQueue=null,o0(s,d))));break;case 19:er(o,s),tr(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,o0(s,m)));break;case 21:break;default:er(o,s),tr(s)}}function tr(s){var o=s.flags;if(o&2){try{if(s.tag!==27){e:{for(var d=s.return;d!==null;){if(D1(d)){var m=d;break e}d=d.return}throw Error(i(160))}switch(m.tag){case 27:var v=m.stateNode,M=r0(s);af(s,M,v);break;case 5:var C=m.stateNode;m.flags&32&&(al(C,""),m.flags&=-33);var P=r0(s);af(s,P,C);break;case 3:case 4:var G=m.stateNode.containerInfo,te=r0(s);s0(s,te,G);break;default:throw Error(i(161))}}}catch(pe){Ft(s,s.return,pe)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function V1(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;V1(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function ws(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)B1(s,o.alternate,o),o=o.sibling}function Sl(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:da(4,o,o.return),Sl(o);break;case 1:Ti(o,o.return);var d=o.stateNode;typeof d.componentWillUnmount=="function"&&L1(o,o.return,d),Sl(o);break;case 26:case 27:case 5:Ti(o,o.return),Sl(o);break;case 22:Ti(o,o.return),o.memoizedState===null&&Sl(o);break;default:Sl(o)}s=s.sibling}}function ha(s,o,d){for(d=d&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var m=o.alternate,v=s,M=o,C=M.flags;switch(M.tag){case 0:case 11:case 15:ha(v,M,d),Su(4,M);break;case 1:if(ha(v,M,d),m=M,v=m.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(te){Ft(m,m.return,te)}if(m=M,v=m.updateQueue,v!==null){var P=m.stateNode;try{var G=v.shared.hiddenCallbacks;if(G!==null)for(v.shared.hiddenCallbacks=null,v=0;v<G.length;v++)C1(G[v],P)}catch(te){Ft(m,m.return,te)}}d&&C&64&&R1(M),vo(M,M.return);break;case 26:case 27:case 5:ha(v,M,d),d&&m===null&&C&4&&k1(M),vo(M,M.return);break;case 12:ha(v,M,d);break;case 13:ha(v,M,d),d&&C&4&&I1(v,M);break;case 22:M.memoizedState===null&&ha(v,M,d),vo(M,M.return);break;default:ha(v,M,d)}o=o.sibling}}function l0(s,o){var d=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==d&&(s!=null&&s.refCount++,d!=null&&fu(d))}function c0(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&fu(s))}function fa(s,o,d,m){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)H1(s,o,d,m),o=o.sibling}function H1(s,o,d,m){var v=o.flags;switch(o.tag){case 0:case 11:case 15:fa(s,o,d,m),v&2048&&Su(9,o);break;case 3:fa(s,o,d,m),v&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&fu(s)));break;case 12:if(v&2048){fa(s,o,d,m),s=o.stateNode;try{var M=o.memoizedProps,C=M.id,P=M.onPostCommit;typeof P=="function"&&P(C,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(G){Ft(o,o.return,G)}}else fa(s,o,d,m);break;case 23:break;case 22:M=o.stateNode,o.memoizedState!==null?M._visibility&4?fa(s,o,d,m):Mu(s,o):M._visibility&4?fa(s,o,d,m):(M._visibility|=4,Ml(s,o,d,m,(o.subtreeFlags&10256)!==0)),v&2048&&l0(o.alternate,o);break;case 24:fa(s,o,d,m),v&2048&&c0(o.alternate,o);break;default:fa(s,o,d,m)}}function Ml(s,o,d,m,v){for(v=v&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var M=s,C=o,P=d,G=m,te=C.flags;switch(C.tag){case 0:case 11:case 15:Ml(M,C,P,G,v),Su(8,C);break;case 23:break;case 22:var pe=C.stateNode;C.memoizedState!==null?pe._visibility&4?Ml(M,C,P,G,v):Mu(M,C):(pe._visibility|=4,Ml(M,C,P,G,v)),v&&te&2048&&l0(C.alternate,C);break;case 24:Ml(M,C,P,G,v),v&&te&2048&&c0(C.alternate,C);break;default:Ml(M,C,P,G,v)}o=o.sibling}}function Mu(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var d=s,m=o,v=m.flags;switch(m.tag){case 22:Mu(d,m),v&2048&&l0(m.alternate,m);break;case 24:Mu(d,m),v&2048&&c0(m.alternate,m);break;default:Mu(d,m)}o=o.sibling}}var Tu=8192;function Tl(s){if(s.subtreeFlags&Tu)for(s=s.child;s!==null;)G1(s),s=s.sibling}function G1(s){switch(s.tag){case 26:Tl(s),s.flags&Tu&&s.memoizedState!==null&&DL(br,s.memoizedState,s.memoizedProps);break;case 5:Tl(s);break;case 3:case 4:var o=br;br=wf(s.stateNode.containerInfo),Tl(s),br=o;break;case 22:s.memoizedState===null&&(o=s.alternate,o!==null&&o.memoizedState!==null?(o=Tu,Tu=16777216,Tl(s),Tu=o):Tl(s));break;default:Tl(s)}}function W1(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function Eu(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var d=0;d<o.length;d++){var m=o[d];jn=m,q1(m,s)}W1(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)$1(s),s=s.sibling}function $1(s){switch(s.tag){case 0:case 11:case 15:Eu(s),s.flags&2048&&da(9,s,s.return);break;case 3:Eu(s);break;case 12:Eu(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&4&&(s.return===null||s.return.tag!==13)?(o._visibility&=-5,of(s)):Eu(s);break;default:Eu(s)}}function of(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var d=0;d<o.length;d++){var m=o[d];jn=m,q1(m,s)}W1(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:da(8,o,o.return),of(o);break;case 22:d=o.stateNode,d._visibility&4&&(d._visibility&=-5,of(o));break;default:of(o)}s=s.sibling}}function q1(s,o){for(;jn!==null;){var d=jn;switch(d.tag){case 0:case 11:case 15:da(8,d,o);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var m=d.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:fu(d.memoizedState.cache)}if(m=d.child,m!==null)m.return=d,jn=m;else e:for(d=s;jn!==null;){m=jn;var v=m.sibling,M=m.return;if(z1(m),m===d){jn=null;break e}if(v!==null){v.return=M,jn=v;break e}jn=M}}}function q4(s,o,d,m){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nr(s,o,d,m){return new q4(s,o,d,m)}function u0(s){return s=s.prototype,!(!s||!s.isReactComponent)}function pa(s,o){var d=s.alternate;return d===null?(d=nr(s.tag,o,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=o,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&31457280,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,o=s.dependencies,d.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d.refCleanup=s.refCleanup,d}function Y1(s,o){s.flags&=31457282;var d=s.alternate;return d===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=d.childLanes,s.lanes=d.lanes,s.child=d.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=d.memoizedProps,s.memoizedState=d.memoizedState,s.updateQueue=d.updateQueue,s.type=d.type,o=d.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function lf(s,o,d,m,v,M){var C=0;if(m=s,typeof s=="function")u0(s)&&(C=1);else if(typeof s=="string")C=kL(s,d,Ke.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case u:return bo(d.children,v,M,o);case h:C=8,v|=24;break;case p:return s=nr(12,d,o,v|2),s.elementType=p,s.lanes=M,s;case w:return s=nr(13,d,o,v),s.elementType=w,s.lanes=M,s;case T:return s=nr(19,d,o,v),s.elementType=T,s.lanes=M,s;case E:return X1(d,v,M,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case g:case x:C=10;break e;case y:C=9;break e;case b:C=11;break e;case _:C=14;break e;case S:C=16,m=null;break e}C=29,d=Error(i(130,s===null?"null":typeof s,"")),m=null}return o=nr(C,d,o,v),o.elementType=s,o.type=m,o.lanes=M,o}function bo(s,o,d,m){return s=nr(7,s,m,o),s.lanes=d,s}function X1(s,o,d,m){s=nr(22,s,m,o),s.elementType=E,s.lanes=d;var v={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var M=v._current;if(M===null)throw Error(i(456));if((v._pendingVisibility&2)===0){var C=na(M,2);C!==null&&(v._pendingVisibility|=2,ri(C,M,2))}},attach:function(){var M=v._current;if(M===null)throw Error(i(456));if((v._pendingVisibility&2)!==0){var C=na(M,2);C!==null&&(v._pendingVisibility&=-3,ri(C,M,2))}}};return s.stateNode=v,s}function d0(s,o,d){return s=nr(6,s,null,o),s.lanes=d,s}function h0(s,o,d){return o=nr(4,s.children!==null?s.children:[],s.key,o),o.lanes=d,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function _s(s){s.flags|=4}function Z1(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!DS(o)){if(o=Ki.current,o!==null&&((At&4194176)===At?Br!==null:(At&62914560)!==At&&(At&536870912)===0||o!==Br))throw uu=yg,f_;s.flags|=8192}}function cf(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?de():536870912,s.lanes|=o,Al|=o)}function Au(s,o){if(!Ct)switch(s.tailMode){case"hidden":o=s.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function tn(s){var o=s.alternate!==null&&s.alternate.child===s.child,d=0,m=0;if(o)for(var v=s.child;v!==null;)d|=v.lanes|v.childLanes,m|=v.subtreeFlags&31457280,m|=v.flags&31457280,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)d|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=m,s.childLanes=d,o}function Y4(s,o,d){var m=o.pendingProps;switch(mg(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(o),null;case 1:return tn(o),null;case 3:return d=o.stateNode,m=null,s!==null&&(m=s.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),xs(Cn),ke(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(au(o)?_s(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,vr!==null&&(b0(vr),vr=null))),tn(o),null;case 26:return d=o.memoizedState,s===null?(_s(o),d!==null?(tn(o),Z1(o,d)):(tn(o),o.flags&=-16777217)):d?d!==s.memoizedState?(_s(o),tn(o),Z1(o,d)):(tn(o),o.flags&=-16777217):(s.memoizedProps!==m&&_s(o),tn(o),o.flags&=-16777217),null;case 27:I(o),d=Ee.current;var v=o.type;if(s!==null&&o.stateNode!=null)s.memoizedProps!==m&&_s(o);else{if(!m){if(o.stateNode===null)throw Error(i(166));return tn(o),null}s=Ke.current,au(o)?d_(o):(s=ES(v,m,d),o.stateNode=s,_s(o))}return tn(o),null;case 5:if(I(o),d=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==m&&_s(o);else{if(!m){if(o.stateNode===null)throw Error(i(166));return tn(o),null}if(s=Ke.current,au(o))d_(o);else{switch(v=bf(Ee.current),s){case 1:s=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:s=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":s=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":s=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":s=v.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof m.is=="string"?v.createElement("select",{is:m.is}):v.createElement("select"),m.multiple?s.multiple=!0:m.size&&(s.size=m.size);break;default:s=typeof m.is=="string"?v.createElement(d,{is:m.is}):v.createElement(d)}}s[oe]=o,s[Me]=m;e:for(v=o.child;v!==null;){if(v.tag===5||v.tag===6)s.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===o)break e;for(;v.sibling===null;){if(v.return===null||v.return===o)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}o.stateNode=s;e:switch(Vn(s,d,m),d){case"button":case"input":case"select":case"textarea":s=!!m.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&_s(o)}}return tn(o),o.flags&=-16777217,null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==m&&_s(o);else{if(typeof m!="string"&&o.stateNode===null)throw Error(i(166));if(s=Ee.current,au(o)){if(s=o.stateNode,d=o.memoizedProps,m=null,v=ii,v!==null)switch(v.tag){case 27:case 5:m=v.memoizedProps}s[oe]=o,s=!!(s.nodeValue===d||m!==null&&m.suppressHydrationWarning===!0||bS(s.nodeValue,d)),s||co(o)}else s=bf(s).createTextNode(m),s[oe]=o,o.stateNode=s}return tn(o),null;case 13:if(m=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(v=au(o),m!==null&&m.dehydrated!==null){if(s===null){if(!v)throw Error(i(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[oe]=o}else ou(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;tn(o),v=!1}else vr!==null&&(b0(vr),vr=null),v=!0;if(!v)return o.flags&256?(ps(o),o):(ps(o),null)}if(ps(o),(o.flags&128)!==0)return o.lanes=d,o;if(d=m!==null,s=s!==null&&s.memoizedState!==null,d){m=o.child,v=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(v=m.alternate.memoizedState.cachePool.pool);var M=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(M=m.memoizedState.cachePool.pool),M!==v&&(m.flags|=2048)}return d!==s&&d&&(o.child.flags|=8192),cf(o,o.updateQueue),tn(o),null;case 4:return ke(),s===null&&L0(o.stateNode.containerInfo),tn(o),null;case 10:return xs(o.type),tn(o),null;case 19:if(Ie(An),v=o.memoizedState,v===null)return tn(o),null;if(m=(o.flags&128)!==0,M=v.rendering,M===null)if(m)Au(v,!1);else{if(un!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(M=Wh(s),M!==null){for(o.flags|=128,Au(v,!1),s=M.updateQueue,o.updateQueue=s,cf(o,s),o.subtreeFlags=0,s=d,d=o.child;d!==null;)Y1(d,s),d=d.sibling;return $e(An,An.current&1|2),o.child}s=s.sibling}v.tail!==null&&ze()>uf&&(o.flags|=128,m=!0,Au(v,!1),o.lanes=4194304)}else{if(!m)if(s=Wh(M),s!==null){if(o.flags|=128,m=!0,s=s.updateQueue,o.updateQueue=s,cf(o,s),Au(v,!0),v.tail===null&&v.tailMode==="hidden"&&!M.alternate&&!Ct)return tn(o),null}else 2*ze()-v.renderingStartTime>uf&&d!==536870912&&(o.flags|=128,m=!0,Au(v,!1),o.lanes=4194304);v.isBackwards?(M.sibling=o.child,o.child=M):(s=v.last,s!==null?s.sibling=M:o.child=M,v.last=M)}return v.tail!==null?(o=v.tail,v.rendering=o,v.tail=o.sibling,v.renderingStartTime=ze(),o.sibling=null,s=An.current,$e(An,m?s&1|2:s&1),o):(tn(o),null);case 22:case 23:return ps(o),vg(),m=o.memoizedState!==null,s!==null?s.memoizedState!==null!==m&&(o.flags|=8192):m&&(o.flags|=8192),m?(d&536870912)!==0&&(o.flags&128)===0&&(tn(o),o.subtreeFlags&6&&(o.flags|=8192)):tn(o),d=o.updateQueue,d!==null&&cf(o,d.retryQueue),d=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==d&&(o.flags|=2048),s!==null&&Ie(ho),null;case 24:return d=null,s!==null&&(d=s.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),xs(Cn),tn(o),null;case 25:return null}throw Error(i(156,o.tag))}function X4(s,o){switch(mg(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return xs(Cn),ke(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return I(o),null;case 13:if(ps(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(i(340));ou()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return Ie(An),null;case 4:return ke(),null;case 10:return xs(o.type),null;case 22:case 23:return ps(o),vg(),s!==null&&Ie(ho),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return xs(Cn),null;case 25:return null;default:return null}}function Q1(s,o){switch(mg(o),o.tag){case 3:xs(Cn),ke();break;case 26:case 27:case 5:I(o);break;case 4:ke();break;case 13:ps(o);break;case 19:Ie(An);break;case 10:xs(o.type);break;case 22:case 23:ps(o),vg(),s!==null&&Ie(ho);break;case 24:xs(Cn)}}var Z4={getCacheForType:function(s){var o=$n(Cn),d=o.data.get(s);return d===void 0&&(d=s(),o.data.set(s,d)),d}},Q4=typeof WeakMap=="function"?WeakMap:Map,nn=0,Wt=null,wt=null,At=0,$t=0,Ai=null,Ss=!1,El=!1,f0=!1,Ms=0,un=0,ma=0,wo=0,p0=0,ir=0,Al=0,Cu=null,Fr=null,m0=!1,g0=0,uf=1/0,df=null,ga=null,hf=!1,_o=null,Nu=0,y0=0,x0=null,Ru=0,v0=null;function Ci(){if((nn&2)!==0&&At!==0)return At&-At;if(L.T!==null){var s=xl;return s!==0?s:A0()}return ct()}function J1(){ir===0&&(ir=(At&536870912)===0||Ct?V():536870912);var s=Ki.current;return s!==null&&(s.flags|=32),ir}function ri(s,o,d){(s===Wt&&$t===2||s.cancelPendingCommit!==null)&&(Cl(s,0),Ts(s,At,ir,!1)),ye(s,d),((nn&2)===0||s!==Wt)&&(s===Wt&&((nn&2)===0&&(wo|=d),un===4&&Ts(s,At,ir,!1)),Ir(s))}function K1(s,o,d){if((nn&6)!==0)throw Error(i(327));var m=!d&&(o&60)===0&&(o&s.expiredLanes)===0||Gi(s,o),v=m?eL(s,o):S0(s,o,!0),M=m;do{if(v===0){El&&!m&&Ts(s,o,0,!1);break}else if(v===6)Ts(s,o,0,!Ss);else{if(d=s.current.alternate,M&&!J4(d)){v=S0(s,o,!1),M=!1;continue}if(v===2){if(M=o,s.errorRecoveryDisabledLanes&M)var C=0;else C=s.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){o=C;e:{var P=s;v=Cu;var G=P.current.memoizedState.isDehydrated;if(G&&(Cl(P,C).flags|=256),C=S0(P,C,!1),C!==2){if(f0&&!G){P.errorRecoveryDisabledLanes|=M,wo|=M,v=4;break e}M=Fr,Fr=v,M!==null&&b0(M)}v=C}if(M=!1,v!==2)continue}}if(v===1){Cl(s,0),Ts(s,o,0,!0);break}e:{switch(m=s,v){case 0:case 1:throw Error(i(345));case 4:if((o&4194176)===o){Ts(m,o,ir,!Ss);break e}break;case 2:Fr=null;break;case 3:case 5:break;default:throw Error(i(329))}if(m.finishedWork=d,m.finishedLanes=o,(o&62914560)===o&&(M=g0+300-ze(),10<M)){if(Ts(m,o,ir,!Ss),Fn(m,0)!==0)break e;m.timeoutHandle=SS(eS.bind(null,m,d,Fr,df,m0,o,ir,wo,Al,Ss,2,-0,0),M);break e}eS(m,d,Fr,df,m0,o,ir,wo,Al,Ss,0,-0,0)}}break}while(!0);Ir(s)}function b0(s){Fr===null?Fr=s:Fr.push.apply(Fr,s)}function eS(s,o,d,m,v,M,C,P,G,te,pe,be,ae){var he=o.subtreeFlags;if((he&8192||(he&16785408)===16785408)&&(Ou={stylesheets:null,count:0,unsuspend:jL},G1(o),o=PL(),o!==null)){s.cancelPendingCommit=o(oS.bind(null,s,d,m,v,C,P,G,1,be,ae)),Ts(s,M,C,!te);return}oS(s,d,m,v,C,P,G,pe,be,ae)}function J4(s){for(var o=s;;){var d=o.tag;if((d===0||d===11||d===15)&&o.flags&16384&&(d=o.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var m=0;m<d.length;m++){var v=d[m],M=v.getSnapshot;v=v.value;try{if(!Mi(M(),v))return!1}catch{return!1}}if(d=o.child,o.subtreeFlags&16384&&d!==null)d.return=o,o=d;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ts(s,o,d,m){o&=~p0,o&=~wo,s.suspendedLanes|=o,s.pingedLanes&=~o,m&&(s.warmLanes|=o),m=s.expirationTimes;for(var v=o;0<v;){var M=31-pn(v),C=1<<M;m[M]=-1,v&=~C}d!==0&&dt(s,d,o)}function ff(){return(nn&6)===0?(Lu(0),!1):!0}function w0(){if(wt!==null){if($t===0)var s=wt.return;else s=wt,ys=yo=null,Ag(s),gl=null,du=0,s=wt;for(;s!==null;)Q1(s.alternate,s),s=s.return;wt=null}}function Cl(s,o){s.finishedWork=null,s.finishedLanes=0;var d=s.timeoutHandle;d!==-1&&(s.timeoutHandle=-1,yL(d)),d=s.cancelPendingCommit,d!==null&&(s.cancelPendingCommit=null,d()),w0(),Wt=s,wt=d=pa(s.current,null),At=o,$t=0,Ai=null,Ss=!1,El=Gi(s,o),f0=!1,Al=ir=p0=wo=ma=un=0,Fr=Cu=null,m0=!1,(o&8)!==0&&(o|=o&32);var m=s.entangledLanes;if(m!==0)for(s=s.entanglements,m&=o;0<m;){var v=31-pn(m),M=1<<v;o|=s[v],m&=~M}return Ms=o,Oh(),d}function tS(s,o){xt=null,L.H=zr,o===cu?(o=g_(),$t=3):o===f_?(o=g_(),$t=4):$t=o===p1?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Ai=o,wt===null&&(un=1,nf(s,Zi(o,s.current)))}function nS(){var s=L.H;return L.H=zr,s===null?zr:s}function iS(){var s=L.A;return L.A=Z4,s}function _0(){un=4,Ss||(At&4194176)!==At&&Ki.current!==null||(El=!0),(ma&134217727)===0&&(wo&134217727)===0||Wt===null||Ts(Wt,At,ir,!1)}function S0(s,o,d){var m=nn;nn|=2;var v=nS(),M=iS();(Wt!==s||At!==o)&&(df=null,Cl(s,o)),o=!1;var C=un;e:do try{if($t!==0&&wt!==null){var P=wt,G=Ai;switch($t){case 8:w0(),C=6;break e;case 3:case 2:case 6:Ki.current===null&&(o=!0);var te=$t;if($t=0,Ai=null,Nl(s,P,G,te),d&&El){C=0;break e}break;default:te=$t,$t=0,Ai=null,Nl(s,P,G,te)}}K4(),C=un;break}catch(pe){tS(s,pe)}while(!0);return o&&s.shellSuspendCounter++,ys=yo=null,nn=m,L.H=v,L.A=M,wt===null&&(Wt=null,At=0,Oh()),C}function K4(){for(;wt!==null;)rS(wt)}function eL(s,o){var d=nn;nn|=2;var m=nS(),v=iS();Wt!==s||At!==o?(df=null,uf=ze()+500,Cl(s,o)):El=Gi(s,o);e:do try{if($t!==0&&wt!==null){o=wt;var M=Ai;t:switch($t){case 1:$t=0,Ai=null,Nl(s,o,M,1);break;case 2:if(p_(M)){$t=0,Ai=null,sS(o);break}o=function(){$t===2&&Wt===s&&($t=7),Ir(s)},M.then(o,o);break e;case 3:$t=7;break e;case 4:$t=5;break e;case 7:p_(M)?($t=0,Ai=null,sS(o)):($t=0,Ai=null,Nl(s,o,M,7));break;case 5:var C=null;switch(wt.tag){case 26:C=wt.memoizedState;case 5:case 27:var P=wt;if(!C||DS(C)){$t=0,Ai=null;var G=P.sibling;if(G!==null)wt=G;else{var te=P.return;te!==null?(wt=te,pf(te)):wt=null}break t}}$t=0,Ai=null,Nl(s,o,M,5);break;case 6:$t=0,Ai=null,Nl(s,o,M,6);break;case 8:w0(),un=6;break e;default:throw Error(i(462))}}tL();break}catch(pe){tS(s,pe)}while(!0);return ys=yo=null,L.H=m,L.A=v,nn=d,wt!==null?0:(Wt=null,At=0,Oh(),un)}function tL(){for(;wt!==null&&!we();)rS(wt)}function rS(s){var o=E1(s.alternate,s,Ms);s.memoizedProps=s.pendingProps,o===null?pf(s):wt=o}function sS(s){var o=s,d=o.alternate;switch(o.tag){case 15:case 0:o=b1(d,o,o.pendingProps,o.type,void 0,At);break;case 11:o=b1(d,o,o.pendingProps,o.type.render,o.ref,At);break;case 5:Ag(o);default:Q1(d,o),o=wt=Y1(o,Ms),o=E1(d,o,Ms)}s.memoizedProps=s.pendingProps,o===null?pf(s):wt=o}function Nl(s,o,d,m){ys=yo=null,Ag(o),gl=null,du=0;var v=o.return;try{if(H4(s,v,o,d,At)){un=1,nf(s,Zi(d,s.current)),wt=null;return}}catch(M){if(v!==null)throw wt=v,M;un=1,nf(s,Zi(d,s.current)),wt=null;return}o.flags&32768?(Ct||m===1?s=!0:El||(At&536870912)!==0?s=!1:(Ss=s=!0,(m===2||m===3||m===6)&&(m=Ki.current,m!==null&&m.tag===13&&(m.flags|=16384))),aS(o,s)):pf(o)}function pf(s){var o=s;do{if((o.flags&32768)!==0){aS(o,Ss);return}s=o.return;var d=Y4(o.alternate,o,Ms);if(d!==null){wt=d;return}if(o=o.sibling,o!==null){wt=o;return}wt=o=s}while(o!==null);un===0&&(un=5)}function aS(s,o){do{var d=X4(s.alternate,s);if(d!==null){d.flags&=32767,wt=d;return}if(d=s.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!o&&(s=s.sibling,s!==null)){wt=s;return}wt=s=d}while(s!==null);un=6,wt=null}function oS(s,o,d,m,v,M,C,P,G,te){var pe=L.T,be=fe.p;try{fe.p=2,L.T=null,nL(s,o,d,m,be,v,M,C,P,G,te)}finally{L.T=pe,fe.p=be}}function nL(s,o,d,m,v,M,C,P){do Rl();while(_o!==null);if((nn&6)!==0)throw Error(i(327));var G=s.finishedWork;if(m=s.finishedLanes,G===null)return null;if(s.finishedWork=null,s.finishedLanes=0,G===s.current)throw Error(i(177));s.callbackNode=null,s.callbackPriority=0,s.cancelPendingCommit=null;var te=G.lanes|G.childLanes;if(te|=hg,je(s,m,te,M,C,P),s===Wt&&(wt=Wt=null,At=0),(G.subtreeFlags&10256)===0&&(G.flags&10256)===0||hf||(hf=!0,y0=te,x0=d,aL(tt,function(){return Rl(),null})),d=(G.flags&15990)!==0,(G.subtreeFlags&15990)!==0||d?(d=L.T,L.T=null,M=fe.p,fe.p=2,C=nn,nn|=4,W4(s,G),U1(G,s),E4(P0,s.containerInfo),Ef=!!D0,P0=D0=null,s.current=G,B1(s,G.alternate,G),Le(),nn=C,fe.p=M,L.T=d):s.current=G,hf?(hf=!1,_o=s,Nu=m):lS(s,te),te=s.pendingLanes,te===0&&(ga=null),Js(G.stateNode),Ir(s),o!==null)for(v=s.onRecoverableError,G=0;G<o.length;G++)te=o[G],v(te.value,{componentStack:te.stack});return(Nu&3)!==0&&Rl(),te=s.pendingLanes,(m&4194218)!==0&&(te&42)!==0?s===v0?Ru++:(Ru=0,v0=s):Ru=0,Lu(0),null}function lS(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,fu(o)))}function Rl(){if(_o!==null){var s=_o,o=y0;y0=0;var d=pt(Nu),m=L.T,v=fe.p;try{if(fe.p=32>d?32:d,L.T=null,_o===null)var M=!1;else{d=x0,x0=null;var C=_o,P=Nu;if(_o=null,Nu=0,(nn&6)!==0)throw Error(i(331));var G=nn;if(nn|=4,$1(C.current),H1(C,C.current,P,d),nn=G,Lu(0,!1),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(_i,C)}catch{}M=!0}return M}finally{fe.p=v,L.T=m,lS(s,o)}}return!1}function cS(s,o,d){o=Zi(d,o),o=Ug(s.stateNode,o,2),s=ua(s,o,2),s!==null&&(ye(s,2),Ir(s))}function Ft(s,o,d){if(s.tag===3)cS(s,s,d);else for(;o!==null;){if(o.tag===3){cS(o,s,d);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(ga===null||!ga.has(m))){s=Zi(d,s),d=h1(2),m=ua(o,d,2),m!==null&&(f1(d,m,o,s),ye(m,2),Ir(m));break}}o=o.return}}function M0(s,o,d){var m=s.pingCache;if(m===null){m=s.pingCache=new Q4;var v=new Set;m.set(o,v)}else v=m.get(o),v===void 0&&(v=new Set,m.set(o,v));v.has(d)||(f0=!0,v.add(d),s=iL.bind(null,s,o,d),o.then(s,s))}function iL(s,o,d){var m=s.pingCache;m!==null&&m.delete(o),s.pingedLanes|=s.suspendedLanes&d,s.warmLanes&=~d,Wt===s&&(At&d)===d&&(un===4||un===3&&(At&62914560)===At&&300>ze()-g0?(nn&2)===0&&Cl(s,0):p0|=d,Al===At&&(Al=0)),Ir(s)}function uS(s,o){o===0&&(o=de()),s=na(s,o),s!==null&&(ye(s,o),Ir(s))}function rL(s){var o=s.memoizedState,d=0;o!==null&&(d=o.retryLane),uS(s,d)}function sL(s,o){var d=0;switch(s.tag){case 13:var m=s.stateNode,v=s.memoizedState;v!==null&&(d=v.retryLane);break;case 19:m=s.stateNode;break;case 22:m=s.stateNode._retryCache;break;default:throw Error(i(314))}m!==null&&m.delete(o),uS(s,d)}function aL(s,o){return _e(s,o)}var mf=null,Ll=null,T0=!1,gf=!1,E0=!1,So=0;function Ir(s){s!==Ll&&s.next===null&&(Ll===null?mf=Ll=s:Ll=Ll.next=s),gf=!0,T0||(T0=!0,lL(oL))}function Lu(s,o){if(!E0&&gf){E0=!0;do for(var d=!1,m=mf;m!==null;){if(s!==0){var v=m.pendingLanes;if(v===0)var M=0;else{var C=m.suspendedLanes,P=m.pingedLanes;M=(1<<31-pn(42|s)+1)-1,M&=v&~(C&~P),M=M&201326677?M&201326677|1:M?M|2:0}M!==0&&(d=!0,fS(m,M))}else M=At,M=Fn(m,m===Wt?M:0),(M&3)===0||Gi(m,M)||(d=!0,fS(m,M));m=m.next}while(d);E0=!1}}function oL(){gf=T0=!1;var s=0;So!==0&&(gL()&&(s=So),So=0);for(var o=ze(),d=null,m=mf;m!==null;){var v=m.next,M=dS(m,o);M===0?(m.next=null,d===null?mf=v:d.next=v,v===null&&(Ll=d)):(d=m,(s!==0||(M&3)!==0)&&(gf=!0)),m=v}Lu(s)}function dS(s,o){for(var d=s.suspendedLanes,m=s.pingedLanes,v=s.expirationTimes,M=s.pendingLanes&-62914561;0<M;){var C=31-pn(M),P=1<<C,G=v[C];G===-1?((P&d)===0||(P&m)!==0)&&(v[C]=ea(P,o)):G<=o&&(s.expiredLanes|=P),M&=~P}if(o=Wt,d=At,d=Fn(s,s===o?d:0),m=s.callbackNode,d===0||s===o&&$t===2||s.cancelPendingCommit!==null)return m!==null&&m!==null&&K(m),s.callbackNode=null,s.callbackPriority=0;if((d&3)===0||Gi(s,d)){if(o=d&-d,o===s.callbackPriority)return o;switch(m!==null&&K(m),pt(d)){case 2:case 8:d=qe;break;case 32:d=tt;break;case 268435456:d=Ye;break;default:d=tt}return m=hS.bind(null,s),d=_e(d,m),s.callbackPriority=o,s.callbackNode=d,o}return m!==null&&m!==null&&K(m),s.callbackPriority=2,s.callbackNode=null,2}function hS(s,o){var d=s.callbackNode;if(Rl()&&s.callbackNode!==d)return null;var m=At;return m=Fn(s,s===Wt?m:0),m===0?null:(K1(s,m,o),dS(s,ze()),s.callbackNode!=null&&s.callbackNode===d?hS.bind(null,s):null)}function fS(s,o){if(Rl())return null;K1(s,o,!0)}function lL(s){xL(function(){(nn&6)!==0?_e(Oe,s):s()})}function A0(){return So===0&&(So=V()),So}function pS(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Nh(""+s)}function mS(s,o){var d=o.ownerDocument.createElement("input");return d.name=o.name,d.value=o.value,s.id&&d.setAttribute("form",s.id),o.parentNode.insertBefore(d,o),s=new FormData(s),d.parentNode.removeChild(d),s}function cL(s,o,d,m,v){if(o==="submit"&&d&&d.stateNode===v){var M=pS((v[Me]||null).action),C=m.submitter;C&&(o=(o=C[Me]||null)?pS(o.formAction):C.getAttribute("formAction"),o!==null&&(M=o,C=null));var P=new jh("action","action",null,m,v);s.push({event:P,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(So!==0){var G=C?mS(v,C):new FormData(v);Og(d,{pending:!0,data:G,method:v.method,action:M},null,G)}}else typeof M=="function"&&(P.preventDefault(),G=C?mS(v,C):new FormData(v),Og(d,{pending:!0,data:G,method:v.method,action:M},M,G))},currentTarget:v}]})}}for(var C0=0;C0<o_.length;C0++){var N0=o_[C0],uL=N0.toLowerCase(),dL=N0[0].toUpperCase()+N0.slice(1);xr(uL,"on"+dL)}xr(n_,"onAnimationEnd"),xr(i_,"onAnimationIteration"),xr(r_,"onAnimationStart"),xr("dblclick","onDoubleClick"),xr("focusin","onFocus"),xr("focusout","onBlur"),xr(C4,"onTransitionRun"),xr(N4,"onTransitionStart"),xr(R4,"onTransitionCancel"),xr(s_,"onTransitionEnd"),rl("onMouseEnter",["mouseout","mouseover"]),rl("onMouseLeave",["mouseout","mouseover"]),rl("onPointerEnter",["pointerout","pointerover"]),rl("onPointerLeave",["pointerout","pointerover"]),io("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),io("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),io("onBeforeInput",["compositionend","keypress","textInput","paste"]),io("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),io("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),io("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ku));function gS(s,o){o=(o&4)!==0;for(var d=0;d<s.length;d++){var m=s[d],v=m.event;m=m.listeners;e:{var M=void 0;if(o)for(var C=m.length-1;0<=C;C--){var P=m[C],G=P.instance,te=P.currentTarget;if(P=P.listener,G!==M&&v.isPropagationStopped())break e;M=P,v.currentTarget=te;try{M(v)}catch(pe){tf(pe)}v.currentTarget=null,M=G}else for(C=0;C<m.length;C++){if(P=m[C],G=P.instance,te=P.currentTarget,P=P.listener,G!==M&&v.isPropagationStopped())break e;M=P,v.currentTarget=te;try{M(v)}catch(pe){tf(pe)}v.currentTarget=null,M=G}}}}function Mt(s,o){var d=o[Ve];d===void 0&&(d=o[Ve]=new Set);var m=s+"__bubble";d.has(m)||(yS(o,s,2,!1),d.add(m))}function R0(s,o,d){var m=0;o&&(m|=4),yS(d,s,m,o)}var yf="_reactListening"+Math.random().toString(36).slice(2);function L0(s){if(!s[yf]){s[yf]=!0,bw.forEach(function(d){d!=="selectionchange"&&(hL.has(d)||R0(d,!1,s),R0(d,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[yf]||(o[yf]=!0,R0("selectionchange",!1,o))}}function yS(s,o,d,m){switch(IS(o)){case 2:var v=zL;break;case 8:v=FL;break;default:v=G0}d=v.bind(null,o,d,s),v=void 0,!Km||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),m?v!==void 0?s.addEventListener(o,d,{capture:!0,passive:v}):s.addEventListener(o,d,!0):v!==void 0?s.addEventListener(o,d,{passive:v}):s.addEventListener(o,d,!1)}function k0(s,o,d,m,v){var M=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var C=m.tag;if(C===3||C===4){var P=m.stateNode.containerInfo;if(P===v||P.nodeType===8&&P.parentNode===v)break;if(C===4)for(C=m.return;C!==null;){var G=C.tag;if((G===3||G===4)&&(G=C.stateNode.containerInfo,G===v||G.nodeType===8&&G.parentNode===v))return;C=C.return}for(;P!==null;){if(C=di(P),C===null)return;if(G=C.tag,G===5||G===6||G===26||G===27){m=M=C;continue e}P=P.parentNode}}m=m.return}kw(function(){var te=M,pe=Qm(d),be=[];e:{var ae=a_.get(s);if(ae!==void 0){var he=jh,We=s;switch(s){case"keypress":if(Lh(d)===0)break e;case"keydown":case"keyup":he=s4;break;case"focusin":We="focus",he=ig;break;case"focusout":We="blur",he=ig;break;case"beforeblur":case"afterblur":he=ig;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Pw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=qR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=l4;break;case n_:case i_:case r_:he=ZR;break;case s_:he=u4;break;case"scroll":case"scrollend":he=WR;break;case"wheel":he=h4;break;case"copy":case"cut":case"paste":he=JR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=Bw;break;case"toggle":case"beforetoggle":he=p4}var ut=(o&4)!==0,dn=!ut&&(s==="scroll"||s==="scrollend"),re=ut?ae!==null?ae+"Capture":null:ae;ut=[];for(var ee=te,se;ee!==null;){var xe=ee;if(se=xe.stateNode,xe=xe.tag,xe!==5&&xe!==26&&xe!==27||se===null||re===null||(xe=Qc(ee,re),xe!=null&&ut.push(ju(ee,xe,se))),dn)break;ee=ee.return}0<ut.length&&(ae=new he(ae,We,null,d,pe),be.push({event:ae,listeners:ut}))}}if((o&7)===0){e:{if(ae=s==="mouseover"||s==="pointerover",he=s==="mouseout"||s==="pointerout",ae&&d!==Zm&&(We=d.relatedTarget||d.fromElement)&&(di(We)||We[Te]))break e;if((he||ae)&&(ae=pe.window===pe?pe:(ae=pe.ownerDocument)?ae.defaultView||ae.parentWindow:window,he?(We=d.relatedTarget||d.toElement,he=te,We=We?di(We):null,We!==null&&(dn=U(We),ut=We.tag,We!==dn||ut!==5&&ut!==27&&ut!==6)&&(We=null)):(he=null,We=te),he!==We)){if(ut=Pw,xe="onMouseLeave",re="onMouseEnter",ee="mouse",(s==="pointerout"||s==="pointerover")&&(ut=Bw,xe="onPointerLeave",re="onPointerEnter",ee="pointer"),dn=he==null?ae:Zc(he),se=We==null?ae:Zc(We),ae=new ut(xe,ee+"leave",he,d,pe),ae.target=dn,ae.relatedTarget=se,xe=null,di(pe)===te&&(ut=new ut(re,ee+"enter",We,d,pe),ut.target=se,ut.relatedTarget=dn,xe=ut),dn=xe,he&&We)t:{for(ut=he,re=We,ee=0,se=ut;se;se=kl(se))ee++;for(se=0,xe=re;xe;xe=kl(xe))se++;for(;0<ee-se;)ut=kl(ut),ee--;for(;0<se-ee;)re=kl(re),se--;for(;ee--;){if(ut===re||re!==null&&ut===re.alternate)break t;ut=kl(ut),re=kl(re)}ut=null}else ut=null;he!==null&&xS(be,ae,he,ut,!1),We!==null&&dn!==null&&xS(be,dn,We,ut,!0)}}e:{if(ae=te?Zc(te):window,he=ae.nodeName&&ae.nodeName.toLowerCase(),he==="select"||he==="input"&&ae.type==="file")var He=Ww;else if(Hw(ae))if($w)He=M4;else{He=_4;var vt=w4}else he=ae.nodeName,!he||he.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?te&&Xm(te.elementType)&&(He=Ww):He=S4;if(He&&(He=He(s,te))){Gw(be,He,d,pe);break e}vt&&vt(s,ae,te),s==="focusout"&&te&&ae.type==="number"&&te.memoizedProps.value!=null&&Ym(ae,"number",ae.value)}switch(vt=te?Zc(te):window,s){case"focusin":(Hw(vt)||vt.contentEditable==="true")&&(ul=vt,cg=te,su=null);break;case"focusout":su=cg=ul=null;break;case"mousedown":ug=!0;break;case"contextmenu":case"mouseup":case"dragend":ug=!1,e_(be,d,pe);break;case"selectionchange":if(A4)break;case"keydown":case"keyup":e_(be,d,pe)}var Ze;if(sg)e:{switch(s){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else cl?Uw(s,d)&&(nt="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(nt="onCompositionStart");nt&&(zw&&d.locale!=="ko"&&(cl||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&cl&&(Ze=jw()):(ta=pe,eg="value"in ta?ta.value:ta.textContent,cl=!0)),vt=xf(te,nt),0<vt.length&&(nt=new Ow(nt,s,null,d,pe),be.push({event:nt,listeners:vt}),Ze?nt.data=Ze:(Ze=Vw(d),Ze!==null&&(nt.data=Ze)))),(Ze=g4?y4(s,d):x4(s,d))&&(nt=xf(te,"onBeforeInput"),0<nt.length&&(vt=new Ow("onBeforeInput","beforeinput",null,d,pe),be.push({event:vt,listeners:nt}),vt.data=Ze)),cL(be,s,te,d,pe)}gS(be,o)})}function ju(s,o,d){return{instance:s,listener:o,currentTarget:d}}function xf(s,o){for(var d=o+"Capture",m=[];s!==null;){var v=s,M=v.stateNode;v=v.tag,v!==5&&v!==26&&v!==27||M===null||(v=Qc(s,d),v!=null&&m.unshift(ju(s,v,M)),v=Qc(s,o),v!=null&&m.push(ju(s,v,M))),s=s.return}return m}function kl(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function xS(s,o,d,m,v){for(var M=o._reactName,C=[];d!==null&&d!==m;){var P=d,G=P.alternate,te=P.stateNode;if(P=P.tag,G!==null&&G===m)break;P!==5&&P!==26&&P!==27||te===null||(G=te,v?(te=Qc(d,M),te!=null&&C.unshift(ju(d,te,G))):v||(te=Qc(d,M),te!=null&&C.push(ju(d,te,G)))),d=d.return}C.length!==0&&s.push({event:o,listeners:C})}var fL=/\r\n?/g,pL=/\u0000|\uFFFD/g;function vS(s){return(typeof s=="string"?s:""+s).replace(fL,`
`).replace(pL,"")}function bS(s,o){return o=vS(o),vS(s)===o}function vf(){}function Pt(s,o,d,m,v,M){switch(d){case"children":typeof m=="string"?o==="body"||o==="textarea"&&m===""||al(s,m):(typeof m=="number"||typeof m=="bigint")&&o!=="body"&&al(s,""+m);break;case"className":Eh(s,"class",m);break;case"tabIndex":Eh(s,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Eh(s,d,m);break;case"style":Rw(s,m,M);break;case"data":if(o!=="object"){Eh(s,"data",m);break}case"src":case"href":if(m===""&&(o!=="a"||d!=="href")){s.removeAttribute(d);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(d);break}m=Nh(""+m),s.setAttribute(d,m);break;case"action":case"formAction":if(typeof m=="function"){s.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof M=="function"&&(d==="formAction"?(o!=="input"&&Pt(s,o,"name",v.name,v,null),Pt(s,o,"formEncType",v.formEncType,v,null),Pt(s,o,"formMethod",v.formMethod,v,null),Pt(s,o,"formTarget",v.formTarget,v,null)):(Pt(s,o,"encType",v.encType,v,null),Pt(s,o,"method",v.method,v,null),Pt(s,o,"target",v.target,v,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(d);break}m=Nh(""+m),s.setAttribute(d,m);break;case"onClick":m!=null&&(s.onclick=vf);break;case"onScroll":m!=null&&Mt("scroll",s);break;case"onScrollEnd":m!=null&&Mt("scrollend",s);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(d=m.__html,d!=null){if(v.children!=null)throw Error(i(60));s.innerHTML=d}}break;case"multiple":s.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":s.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){s.removeAttribute("xlink:href");break}d=Nh(""+m),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(d,""+m):s.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(d,""):s.removeAttribute(d);break;case"capture":case"download":m===!0?s.setAttribute(d,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(d,m):s.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?s.setAttribute(d,m):s.removeAttribute(d);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?s.removeAttribute(d):s.setAttribute(d,m);break;case"popover":Mt("beforetoggle",s),Mt("toggle",s),Th(s,"popover",m);break;case"xlinkActuate":ds(s,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":ds(s,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":ds(s,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":ds(s,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":ds(s,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":ds(s,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":ds(s,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":ds(s,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":ds(s,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Th(s,"is",m);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=HR.get(d)||d,Th(s,d,m))}}function j0(s,o,d,m,v,M){switch(d){case"style":Rw(s,m,M);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(d=m.__html,d!=null){if(v.children!=null)throw Error(i(60));s.innerHTML=d}}break;case"children":typeof m=="string"?al(s,m):(typeof m=="number"||typeof m=="bigint")&&al(s,""+m);break;case"onScroll":m!=null&&Mt("scroll",s);break;case"onScrollEnd":m!=null&&Mt("scrollend",s);break;case"onClick":m!=null&&(s.onclick=vf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ww.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(v=d.endsWith("Capture"),o=d.slice(2,v?d.length-7:void 0),M=s[Me]||null,M=M!=null?M[d]:null,typeof M=="function"&&s.removeEventListener(o,M,v),typeof m=="function")){typeof M!="function"&&M!==null&&(d in s?s[d]=null:s.hasAttribute(d)&&s.removeAttribute(d)),s.addEventListener(o,m,v);break e}d in s?s[d]=m:m===!0?s.setAttribute(d,""):Th(s,d,m)}}}function Vn(s,o,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mt("error",s),Mt("load",s);var m=!1,v=!1,M;for(M in d)if(d.hasOwnProperty(M)){var C=d[M];if(C!=null)switch(M){case"src":m=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Pt(s,o,M,C,d,null)}}v&&Pt(s,o,"srcSet",d.srcSet,d,null),m&&Pt(s,o,"src",d.src,d,null);return;case"input":Mt("invalid",s);var P=M=C=v=null,G=null,te=null;for(m in d)if(d.hasOwnProperty(m)){var pe=d[m];if(pe!=null)switch(m){case"name":v=pe;break;case"type":C=pe;break;case"checked":G=pe;break;case"defaultChecked":te=pe;break;case"value":M=pe;break;case"defaultValue":P=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(i(137,o));break;default:Pt(s,o,m,pe,d,null)}}Ew(s,M,P,G,te,C,v,!1),Ah(s);return;case"select":Mt("invalid",s),m=C=M=null;for(v in d)if(d.hasOwnProperty(v)&&(P=d[v],P!=null))switch(v){case"value":M=P;break;case"defaultValue":C=P;break;case"multiple":m=P;default:Pt(s,o,v,P,d,null)}o=M,d=C,s.multiple=!!m,o!=null?sl(s,!!m,o,!1):d!=null&&sl(s,!!m,d,!0);return;case"textarea":Mt("invalid",s),M=v=m=null;for(C in d)if(d.hasOwnProperty(C)&&(P=d[C],P!=null))switch(C){case"value":m=P;break;case"defaultValue":v=P;break;case"children":M=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(i(91));break;default:Pt(s,o,C,P,d,null)}Cw(s,m,v,M),Ah(s);return;case"option":for(G in d)if(d.hasOwnProperty(G)&&(m=d[G],m!=null))switch(G){case"selected":s.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Pt(s,o,G,m,d,null)}return;case"dialog":Mt("cancel",s),Mt("close",s);break;case"iframe":case"object":Mt("load",s);break;case"video":case"audio":for(m=0;m<ku.length;m++)Mt(ku[m],s);break;case"image":Mt("error",s),Mt("load",s);break;case"details":Mt("toggle",s);break;case"embed":case"source":case"link":Mt("error",s),Mt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in d)if(d.hasOwnProperty(te)&&(m=d[te],m!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Pt(s,o,te,m,d,null)}return;default:if(Xm(o)){for(pe in d)d.hasOwnProperty(pe)&&(m=d[pe],m!==void 0&&j0(s,o,pe,m,d,void 0));return}}for(P in d)d.hasOwnProperty(P)&&(m=d[P],m!=null&&Pt(s,o,P,m,d,null))}function mL(s,o,d,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,M=null,C=null,P=null,G=null,te=null,pe=null;for(he in d){var be=d[he];if(d.hasOwnProperty(he)&&be!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":G=be;default:m.hasOwnProperty(he)||Pt(s,o,he,null,m,be)}}for(var ae in m){var he=m[ae];if(be=d[ae],m.hasOwnProperty(ae)&&(he!=null||be!=null))switch(ae){case"type":M=he;break;case"name":v=he;break;case"checked":te=he;break;case"defaultChecked":pe=he;break;case"value":C=he;break;case"defaultValue":P=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(i(137,o));break;default:he!==be&&Pt(s,o,ae,he,m,be)}}qm(s,C,P,G,te,pe,M,v);return;case"select":he=C=P=ae=null;for(M in d)if(G=d[M],d.hasOwnProperty(M)&&G!=null)switch(M){case"value":break;case"multiple":he=G;default:m.hasOwnProperty(M)||Pt(s,o,M,null,m,G)}for(v in m)if(M=m[v],G=d[v],m.hasOwnProperty(v)&&(M!=null||G!=null))switch(v){case"value":ae=M;break;case"defaultValue":P=M;break;case"multiple":C=M;default:M!==G&&Pt(s,o,v,M,m,G)}o=P,d=C,m=he,ae!=null?sl(s,!!d,ae,!1):!!m!=!!d&&(o!=null?sl(s,!!d,o,!0):sl(s,!!d,d?[]:"",!1));return;case"textarea":he=ae=null;for(P in d)if(v=d[P],d.hasOwnProperty(P)&&v!=null&&!m.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:Pt(s,o,P,null,m,v)}for(C in m)if(v=m[C],M=d[C],m.hasOwnProperty(C)&&(v!=null||M!=null))switch(C){case"value":ae=v;break;case"defaultValue":he=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==M&&Pt(s,o,C,v,m,M)}Aw(s,ae,he);return;case"option":for(var We in d)if(ae=d[We],d.hasOwnProperty(We)&&ae!=null&&!m.hasOwnProperty(We))switch(We){case"selected":s.selected=!1;break;default:Pt(s,o,We,null,m,ae)}for(G in m)if(ae=m[G],he=d[G],m.hasOwnProperty(G)&&ae!==he&&(ae!=null||he!=null))switch(G){case"selected":s.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:Pt(s,o,G,ae,m,he)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ut in d)ae=d[ut],d.hasOwnProperty(ut)&&ae!=null&&!m.hasOwnProperty(ut)&&Pt(s,o,ut,null,m,ae);for(te in m)if(ae=m[te],he=d[te],m.hasOwnProperty(te)&&ae!==he&&(ae!=null||he!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(i(137,o));break;default:Pt(s,o,te,ae,m,he)}return;default:if(Xm(o)){for(var dn in d)ae=d[dn],d.hasOwnProperty(dn)&&ae!==void 0&&!m.hasOwnProperty(dn)&&j0(s,o,dn,void 0,m,ae);for(pe in m)ae=m[pe],he=d[pe],!m.hasOwnProperty(pe)||ae===he||ae===void 0&&he===void 0||j0(s,o,pe,ae,m,he);return}}for(var re in d)ae=d[re],d.hasOwnProperty(re)&&ae!=null&&!m.hasOwnProperty(re)&&Pt(s,o,re,null,m,ae);for(be in m)ae=m[be],he=d[be],!m.hasOwnProperty(be)||ae===he||ae==null&&he==null||Pt(s,o,be,ae,m,he)}var D0=null,P0=null;function bf(s){return s.nodeType===9?s:s.ownerDocument}function wS(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _S(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function O0(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var B0=null;function gL(){var s=window.event;return s&&s.type==="popstate"?s===B0?!1:(B0=s,!0):(B0=null,!1)}var SS=typeof setTimeout=="function"?setTimeout:void 0,yL=typeof clearTimeout=="function"?clearTimeout:void 0,MS=typeof Promise=="function"?Promise:void 0,xL=typeof queueMicrotask=="function"?queueMicrotask:typeof MS<"u"?function(s){return MS.resolve(null).then(s).catch(vL)}:SS;function vL(s){setTimeout(function(){throw s})}function z0(s,o){var d=o,m=0;do{var v=d.nextSibling;if(s.removeChild(d),v&&v.nodeType===8)if(d=v.data,d==="/$"){if(m===0){s.removeChild(v),Uu(o);return}m--}else d!=="$"&&d!=="$?"&&d!=="$!"||m++;d=v}while(d);Uu(o)}function F0(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var d=o;switch(o=o.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":F0(d),Wi(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}s.removeChild(d)}}function bL(s,o,d,m){for(;s.nodeType===1;){var v=d;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!m&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(m){if(!s[Gt])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(M=s.getAttribute("rel"),M==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(M!==v.rel||s.getAttribute("href")!==(v.href==null?null:v.href)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||s.getAttribute("title")!==(v.title==null?null:v.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(M=s.getAttribute("src"),(M!==(v.src==null?null:v.src)||s.getAttribute("type")!==(v.type==null?null:v.type)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&M&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var M=v.name==null?null:""+v.name;if(v.type==="hidden"&&s.getAttribute("name")===M)return s}else return s;if(s=wr(s.nextSibling),s===null)break}return null}function wL(s,o,d){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!d||(s=wr(s.nextSibling),s===null))return null;return s}function wr(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return s}function TS(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"){if(o===0)return s;o--}else d==="/$"&&o++}s=s.previousSibling}return null}function ES(s,o,d){switch(o=bf(d),s){case"html":if(s=o.documentElement,!s)throw Error(i(452));return s;case"head":if(s=o.head,!s)throw Error(i(453));return s;case"body":if(s=o.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}var rr=new Map,AS=new Set;function wf(s){return typeof s.getRootNode=="function"?s.getRootNode():s.ownerDocument}var Es=fe.d;fe.d={f:_L,r:SL,D:ML,C:TL,L:EL,m:AL,X:NL,S:CL,M:RL};function _L(){var s=Es.f(),o=ff();return s||o}function SL(s){var o=$i(s);o!==null&&o.tag===5&&o.type==="form"?e1(o):Es.r(s)}var jl=typeof document>"u"?null:document;function CS(s,o,d){var m=jl;if(m&&typeof o=="string"&&o){var v=Yi(o);v='link[rel="'+s+'"][href="'+v+'"]',typeof d=="string"&&(v+='[crossorigin="'+d+'"]'),AS.has(v)||(AS.add(v),s={rel:s,crossOrigin:d,href:o},m.querySelector(v)===null&&(o=m.createElement("link"),Vn(o,"link",s),Ln(o),m.head.appendChild(o)))}}function ML(s){Es.D(s),CS("dns-prefetch",s,null)}function TL(s,o){Es.C(s,o),CS("preconnect",s,o)}function EL(s,o,d){Es.L(s,o,d);var m=jl;if(m&&s&&o){var v='link[rel="preload"][as="'+Yi(o)+'"]';o==="image"&&d&&d.imageSrcSet?(v+='[imagesrcset="'+Yi(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(v+='[imagesizes="'+Yi(d.imageSizes)+'"]')):v+='[href="'+Yi(s)+'"]';var M=v;switch(o){case"style":M=Dl(s);break;case"script":M=Pl(s)}rr.has(M)||(s=B({rel:"preload",href:o==="image"&&d&&d.imageSrcSet?void 0:s,as:o},d),rr.set(M,s),m.querySelector(v)!==null||o==="style"&&m.querySelector(Du(M))||o==="script"&&m.querySelector(Pu(M))||(o=m.createElement("link"),Vn(o,"link",s),Ln(o),m.head.appendChild(o)))}}function AL(s,o){Es.m(s,o);var d=jl;if(d&&s){var m=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+Yi(m)+'"][href="'+Yi(s)+'"]',M=v;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":M=Pl(s)}if(!rr.has(M)&&(s=B({rel:"modulepreload",href:s},o),rr.set(M,s),d.querySelector(v)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Pu(M)))return}m=d.createElement("link"),Vn(m,"link",s),Ln(m),d.head.appendChild(m)}}}function CL(s,o,d){Es.S(s,o,d);var m=jl;if(m&&s){var v=il(m).hoistableStyles,M=Dl(s);o=o||"default";var C=v.get(M);if(!C){var P={loading:0,preload:null};if(C=m.querySelector(Du(M)))P.loading=5;else{s=B({rel:"stylesheet",href:s,"data-precedence":o},d),(d=rr.get(M))&&I0(s,d);var G=C=m.createElement("link");Ln(G),Vn(G,"link",s),G._p=new Promise(function(te,pe){G.onload=te,G.onerror=pe}),G.addEventListener("load",function(){P.loading|=1}),G.addEventListener("error",function(){P.loading|=2}),P.loading|=4,_f(C,o,m)}C={type:"stylesheet",instance:C,count:1,state:P},v.set(M,C)}}}function NL(s,o){Es.X(s,o);var d=jl;if(d&&s){var m=il(d).hoistableScripts,v=Pl(s),M=m.get(v);M||(M=d.querySelector(Pu(v)),M||(s=B({src:s,async:!0},o),(o=rr.get(v))&&U0(s,o),M=d.createElement("script"),Ln(M),Vn(M,"link",s),d.head.appendChild(M)),M={type:"script",instance:M,count:1,state:null},m.set(v,M))}}function RL(s,o){Es.M(s,o);var d=jl;if(d&&s){var m=il(d).hoistableScripts,v=Pl(s),M=m.get(v);M||(M=d.querySelector(Pu(v)),M||(s=B({src:s,async:!0,type:"module"},o),(o=rr.get(v))&&U0(s,o),M=d.createElement("script"),Ln(M),Vn(M,"link",s),d.head.appendChild(M)),M={type:"script",instance:M,count:1,state:null},m.set(v,M))}}function NS(s,o,d,m){var v=(v=Ee.current)?wf(v):null;if(!v)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(o=Dl(d.href),d=il(v).hoistableStyles,m=d.get(o),m||(m={type:"style",instance:null,count:0,state:null},d.set(o,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){s=Dl(d.href);var M=il(v).hoistableStyles,C=M.get(s);if(C||(v=v.ownerDocument||v,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},M.set(s,C),(M=v.querySelector(Du(s)))&&!M._p&&(C.instance=M,C.state.loading=5),rr.has(s)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},rr.set(s,d),M||LL(v,s,d,C.state))),o&&m===null)throw Error(i(528,""));return C}if(o&&m!==null)throw Error(i(529,""));return null;case"script":return o=d.async,d=d.src,typeof d=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Pl(d),d=il(v).hoistableScripts,m=d.get(o),m||(m={type:"script",instance:null,count:0,state:null},d.set(o,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Dl(s){return'href="'+Yi(s)+'"'}function Du(s){return'link[rel="stylesheet"]['+s+"]"}function RS(s){return B({},s,{"data-precedence":s.precedence,precedence:null})}function LL(s,o,d,m){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?m.loading=1:(o=s.createElement("link"),m.preload=o,o.addEventListener("load",function(){return m.loading|=1}),o.addEventListener("error",function(){return m.loading|=2}),Vn(o,"link",d),Ln(o),s.head.appendChild(o))}function Pl(s){return'[src="'+Yi(s)+'"]'}function Pu(s){return"script[async]"+s}function LS(s,o,d){if(o.count++,o.instance===null)switch(o.type){case"style":var m=s.querySelector('style[data-href~="'+Yi(d.href)+'"]');if(m)return o.instance=m,Ln(m),m;var v=B({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return m=(s.ownerDocument||s).createElement("style"),Ln(m),Vn(m,"style",v),_f(m,d.precedence,s),o.instance=m;case"stylesheet":v=Dl(d.href);var M=s.querySelector(Du(v));if(M)return o.state.loading|=4,o.instance=M,Ln(M),M;m=RS(d),(v=rr.get(v))&&I0(m,v),M=(s.ownerDocument||s).createElement("link"),Ln(M);var C=M;return C._p=new Promise(function(P,G){C.onload=P,C.onerror=G}),Vn(M,"link",m),o.state.loading|=4,_f(M,d.precedence,s),o.instance=M;case"script":return M=Pl(d.src),(v=s.querySelector(Pu(M)))?(o.instance=v,Ln(v),v):(m=d,(v=rr.get(M))&&(m=B({},d),U0(m,v)),s=s.ownerDocument||s,v=s.createElement("script"),Ln(v),Vn(v,"link",m),s.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(m=o.instance,o.state.loading|=4,_f(m,d.precedence,s));return o.instance}function _f(s,o,d){for(var m=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=m.length?m[m.length-1]:null,M=v,C=0;C<m.length;C++){var P=m[C];if(P.dataset.precedence===o)M=P;else if(M!==v)break}M?M.parentNode.insertBefore(s,M.nextSibling):(o=d.nodeType===9?d.head:d,o.insertBefore(s,o.firstChild))}function I0(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function U0(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var Sf=null;function kS(s,o,d){if(Sf===null){var m=new Map,v=Sf=new Map;v.set(d,m)}else v=Sf,m=v.get(d),m||(m=new Map,v.set(d,m));if(m.has(s))return m;for(m.set(s,null),d=d.getElementsByTagName(s),v=0;v<d.length;v++){var M=d[v];if(!(M[Gt]||M[oe]||s==="link"&&M.getAttribute("rel")==="stylesheet")&&M.namespaceURI!=="http://www.w3.org/2000/svg"){var C=M.getAttribute(o)||"";C=s+C;var P=m.get(C);P?P.push(M):m.set(C,[M])}}return m}function jS(s,o,d){s=s.ownerDocument||s,s.head.insertBefore(d,o==="title"?s.querySelector("head > title"):null)}function kL(s,o,d){if(d===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function DS(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Ou=null;function jL(){}function DL(s,o,d){if(Ou===null)throw Error(i(475));var m=Ou;if(o.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var v=Dl(d.href),M=s.querySelector(Du(v));if(M){s=M._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(m.count++,m=Mf.bind(m),s.then(m,m)),o.state.loading|=4,o.instance=M,Ln(M);return}M=s.ownerDocument||s,d=RS(d),(v=rr.get(v))&&I0(d,v),M=M.createElement("link"),Ln(M);var C=M;C._p=new Promise(function(P,G){C.onload=P,C.onerror=G}),Vn(M,"link",d),o.instance=M}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(m.count++,o=Mf.bind(m),s.addEventListener("load",o),s.addEventListener("error",o))}}function PL(){if(Ou===null)throw Error(i(475));var s=Ou;return s.stylesheets&&s.count===0&&V0(s,s.stylesheets),0<s.count?function(o){var d=setTimeout(function(){if(s.stylesheets&&V0(s,s.stylesheets),s.unsuspend){var m=s.unsuspend;s.unsuspend=null,m()}},6e4);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(d)}}:null}function Mf(){if(this.count--,this.count===0){if(this.stylesheets)V0(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Tf=null;function V0(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Tf=new Map,o.forEach(OL,s),Tf=null,Mf.call(s))}function OL(s,o){if(!(o.state.loading&4)){var d=Tf.get(s);if(d)var m=d.get(null);else{d=new Map,Tf.set(s,d);for(var v=s.querySelectorAll("link[data-precedence],style[data-precedence]"),M=0;M<v.length;M++){var C=v[M];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(d.set(C.dataset.precedence,C),m=C)}m&&d.set(null,m)}v=o.instance,C=v.getAttribute("data-precedence"),M=d.get(C)||m,M===m&&d.set(null,v),d.set(C,v),this.count++,m=Mf.bind(this),v.addEventListener("load",m),v.addEventListener("error",m),M?M.parentNode.insertBefore(v,M.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(v,s.firstChild)),o.state.loading|=4}}var Bu={$$typeof:x,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function BL(s,o,d,m,v,M,C,P){this.tag=1,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=le(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=le(0),this.hiddenUpdates=le(null),this.identifierPrefix=m,this.onUncaughtError=v,this.onCaughtError=M,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function PS(s,o,d,m,v,M,C,P,G,te,pe,be){return s=new BL(s,o,d,C,P,G,te,be),o=1,M===!0&&(o|=24),M=nr(3,null,null,o),s.current=M,M.stateNode=s,o=bg(),o.refCount++,s.pooledCache=o,o.refCount++,M.memoizedState={element:m,isDehydrated:d,cache:o},e0(M),s}function OS(s){return s?(s=fl,s):fl}function BS(s,o,d,m,v,M){v=OS(v),m.context===null?m.context=v:m.pendingContext=v,m=ca(o),m.payload={element:d},M=M===void 0?null:M,M!==null&&(m.callback=M),d=ua(s,m,o),d!==null&&(ri(d,s,o),bu(d,s,o))}function zS(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<o?d:o}}function H0(s,o){zS(s,o),(s=s.alternate)&&zS(s,o)}function FS(s){if(s.tag===13){var o=na(s,67108864);o!==null&&ri(o,s,67108864),H0(s,67108864)}}var Ef=!0;function zL(s,o,d,m){var v=L.T;L.T=null;var M=fe.p;try{fe.p=2,G0(s,o,d,m)}finally{fe.p=M,L.T=v}}function FL(s,o,d,m){var v=L.T;L.T=null;var M=fe.p;try{fe.p=8,G0(s,o,d,m)}finally{fe.p=M,L.T=v}}function G0(s,o,d,m){if(Ef){var v=W0(m);if(v===null)k0(s,o,m,Af,d),US(s,m);else if(UL(v,s,o,d,m))m.stopPropagation();else if(US(s,m),o&4&&-1<IL.indexOf(s)){for(;v!==null;){var M=$i(v);if(M!==null)switch(M.tag){case 3:if(M=M.stateNode,M.current.memoizedState.isDehydrated){var C=at(M.pendingLanes);if(C!==0){var P=M;for(P.pendingLanes|=2,P.entangledLanes|=2;C;){var G=1<<31-pn(C);P.entanglements[1]|=G,C&=~G}Ir(M),(nn&6)===0&&(uf=ze()+500,Lu(0))}}break;case 13:P=na(M,2),P!==null&&ri(P,M,2),ff(),H0(M,2)}if(M=W0(m),M===null&&k0(s,o,m,Af,d),M===v)break;v=M}v!==null&&m.stopPropagation()}else k0(s,o,m,null,d)}}function W0(s){return s=Qm(s),$0(s)}var Af=null;function $0(s){if(Af=null,s=di(s),s!==null){var o=U(s);if(o===null)s=null;else{var d=o.tag;if(d===13){if(s=X(o),s!==null)return s;s=null}else if(d===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return Af=s,null}function IS(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ce()){case Oe:return 2;case qe:return 8;case tt:case Ue:return 32;case Ye:return 268435456;default:return 32}default:return 32}}var q0=!1,ya=null,xa=null,va=null,zu=new Map,Fu=new Map,ba=[],IL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function US(s,o){switch(s){case"focusin":case"focusout":ya=null;break;case"dragenter":case"dragleave":xa=null;break;case"mouseover":case"mouseout":va=null;break;case"pointerover":case"pointerout":zu.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fu.delete(o.pointerId)}}function Iu(s,o,d,m,v,M){return s===null||s.nativeEvent!==M?(s={blockedOn:o,domEventName:d,eventSystemFlags:m,nativeEvent:M,targetContainers:[v]},o!==null&&(o=$i(o),o!==null&&FS(o)),s):(s.eventSystemFlags|=m,o=s.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),s)}function UL(s,o,d,m,v){switch(o){case"focusin":return ya=Iu(ya,s,o,d,m,v),!0;case"dragenter":return xa=Iu(xa,s,o,d,m,v),!0;case"mouseover":return va=Iu(va,s,o,d,m,v),!0;case"pointerover":var M=v.pointerId;return zu.set(M,Iu(zu.get(M)||null,s,o,d,m,v)),!0;case"gotpointercapture":return M=v.pointerId,Fu.set(M,Iu(Fu.get(M)||null,s,o,d,m,v)),!0}return!1}function VS(s){var o=di(s.target);if(o!==null){var d=U(o);if(d!==null){if(o=d.tag,o===13){if(o=X(d),o!==null){s.blockedOn=o,Zt(s.priority,function(){if(d.tag===13){var m=Ci(),v=na(d,m);v!==null&&ri(v,d,m),H0(d,m)}});return}}else if(o===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Cf(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var d=W0(s.nativeEvent);if(d===null){d=s.nativeEvent;var m=new d.constructor(d.type,d);Zm=m,d.target.dispatchEvent(m),Zm=null}else return o=$i(d),o!==null&&FS(o),s.blockedOn=d,!1;o.shift()}return!0}function HS(s,o,d){Cf(s)&&d.delete(o)}function VL(){q0=!1,ya!==null&&Cf(ya)&&(ya=null),xa!==null&&Cf(xa)&&(xa=null),va!==null&&Cf(va)&&(va=null),zu.forEach(HS),Fu.forEach(HS)}function Nf(s,o){s.blockedOn===o&&(s.blockedOn=null,q0||(q0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,VL)))}var Rf=null;function GS(s){Rf!==s&&(Rf=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Rf===s&&(Rf=null);for(var o=0;o<s.length;o+=3){var d=s[o],m=s[o+1],v=s[o+2];if(typeof m!="function"){if($0(m||d)===null)continue;break}var M=$i(d);M!==null&&(s.splice(o,3),o-=3,Og(M,{pending:!0,data:v,method:d.method,action:m},m,v))}}))}function Uu(s){function o(G){return Nf(G,s)}ya!==null&&Nf(ya,s),xa!==null&&Nf(xa,s),va!==null&&Nf(va,s),zu.forEach(o),Fu.forEach(o);for(var d=0;d<ba.length;d++){var m=ba[d];m.blockedOn===s&&(m.blockedOn=null)}for(;0<ba.length&&(d=ba[0],d.blockedOn===null);)VS(d),d.blockedOn===null&&ba.shift();if(d=(s.ownerDocument||s).$$reactFormReplay,d!=null)for(m=0;m<d.length;m+=3){var v=d[m],M=d[m+1],C=v[Me]||null;if(typeof M=="function")C||GS(d);else if(C){var P=null;if(M&&M.hasAttribute("formAction")){if(v=M,C=M[Me]||null)P=C.formAction;else if($0(v)!==null)continue}else P=C.action;typeof P=="function"?d[m+1]=P:(d.splice(m,3),m-=3),GS(d)}}}function Y0(s){this._internalRoot=s}Lf.prototype.render=Y0.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(i(409));var d=o.current,m=Ci();BS(d,m,s,o,null,null)},Lf.prototype.unmount=Y0.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;s.tag===0&&Rl(),BS(s.current,2,null,s,null,null),ff(),o[Te]=null}};function Lf(s){this._internalRoot=s}Lf.prototype.unstable_scheduleHydration=function(s){if(s){var o=ct();s={blockedOn:null,target:s,priority:o};for(var d=0;d<ba.length&&o!==0&&o<ba[d].priority;d++);ba.splice(d,0,s),d===0&&VS(s)}};var WS=e.version;if(WS!=="19.0.0")throw Error(i(527,WS,"19.0.0"));fe.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=q(o),s=s!==null?ce(s):null,s=s===null?null:s.stateNode,s};var HL={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:L,findFiberByHostInstance:di,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kf.isDisabled&&kf.supportsFiber)try{_i=kf.inject(HL),bn=kf}catch{}}return Hu.createRoot=function(s,o){if(!r(s))throw Error(i(299));var d=!1,m="",v=l1,M=c1,C=u1,P=null;return o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(M=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(P=o.unstable_transitionCallbacks)),o=PS(s,1,!1,null,null,d,m,v,M,C,P,null),s[Te]=o.current,L0(s.nodeType===8?s.parentNode:s),new Y0(o)},Hu.hydrateRoot=function(s,o,d){if(!r(s))throw Error(i(299));var m=!1,v="",M=l1,C=c1,P=u1,G=null,te=null;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(v=d.identifierPrefix),d.onUncaughtError!==void 0&&(M=d.onUncaughtError),d.onCaughtError!==void 0&&(C=d.onCaughtError),d.onRecoverableError!==void 0&&(P=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(G=d.unstable_transitionCallbacks),d.formState!==void 0&&(te=d.formState)),o=PS(s,1,!0,o,d??null,m,v,M,C,P,G,te),o.context=OS(null),d=o.current,m=Ci(),v=ca(m),v.callback=null,ua(d,v,m),o.current.lanes=m,ye(o,m),Ir(o),s[Te]=o.current,L0(s),new Lf(o)},Hu.version="19.0.0",Hu}var n2;function ek(){if(n2)return Q0.exports;n2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Q0.exports=KL(),Q0.exports}var tk=ek(),Gu={},i2;function nk(){if(i2)return Gu;i2=1,Object.defineProperty(Gu,"__esModule",{value:!0}),Gu.parse=l,Gu.serialize=h;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,a=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function l(y,x){const b=new a,w=y.length;if(w<2)return b;const T=(x==null?void 0:x.decode)||p;let _=0;do{const S=y.indexOf("=",_);if(S===-1)break;const E=y.indexOf(";",_),R=E===-1?w:E;if(S>R){_=y.lastIndexOf(";",S-1)+1;continue}const A=c(y,_,S),N=u(y,S,A),j=y.slice(A,N);if(b[j]===void 0){let O=c(y,S+1,R),L=u(y,R,O);const B=T(y.slice(O,L));b[j]=B}_=R+1}while(_<w);return b}function c(y,x,b){do{const w=y.charCodeAt(x);if(w!==32&&w!==9)return x}while(++x<b);return b}function u(y,x,b){for(;x>b;){const w=y.charCodeAt(--x);if(w!==32&&w!==9)return x+1}return b}function h(y,x,b){const w=(b==null?void 0:b.encode)||encodeURIComponent;if(!t.test(y))throw new TypeError(`argument name is invalid: ${y}`);const T=w(x);if(!e.test(T))throw new TypeError(`argument val is invalid: ${x}`);let _=y+"="+T;if(!b)return _;if(b.maxAge!==void 0){if(!Number.isInteger(b.maxAge))throw new TypeError(`option maxAge is invalid: ${b.maxAge}`);_+="; Max-Age="+b.maxAge}if(b.domain){if(!n.test(b.domain))throw new TypeError(`option domain is invalid: ${b.domain}`);_+="; Domain="+b.domain}if(b.path){if(!i.test(b.path))throw new TypeError(`option path is invalid: ${b.path}`);_+="; Path="+b.path}if(b.expires){if(!g(b.expires)||!Number.isFinite(b.expires.valueOf()))throw new TypeError(`option expires is invalid: ${b.expires}`);_+="; Expires="+b.expires.toUTCString()}if(b.httpOnly&&(_+="; HttpOnly"),b.secure&&(_+="; Secure"),b.partitioned&&(_+="; Partitioned"),b.priority)switch(typeof b.priority=="string"?b.priority.toLowerCase():void 0){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${b.priority}`)}if(b.sameSite)switch(typeof b.sameSite=="string"?b.sameSite.toLowerCase():b.sameSite){case!0:case"strict":_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"none":_+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${b.sameSite}`)}return _}function p(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function g(y){return r.call(y)==="[object Date]"}return Gu}nk();/**
 * react-router v7.4.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var r2="popstate";function ik(t={}){function e(i,r){let{pathname:a,search:l,hash:c}=i.location;return ux("",{pathname:a,search:l,hash:c},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:kd(r)}return sk(e,n,null,t)}function en(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Lr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rk(){return Math.random().toString(36).substring(2,10)}function s2(t,e){return{usr:t.state,key:t.key,idx:e}}function ux(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Fc(e):e,state:n,key:e&&e.key||i||rk()}}function kd({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Fc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function sk(t,e,n,i={}){let{window:r=document.defaultView,v5Compat:a=!1}=i,l=r.history,c="POP",u=null,h=p();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function p(){return(l.state||{idx:null}).idx}function g(){c="POP";let T=p(),_=T==null?null:T-h;h=T,u&&u({action:c,location:w.location,delta:_})}function y(T,_){c="PUSH";let S=ux(w.location,T,_);h=p()+1;let E=s2(S,h),R=w.createHref(S);try{l.pushState(E,"",R)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;r.location.assign(R)}a&&u&&u({action:c,location:w.location,delta:1})}function x(T,_){c="REPLACE";let S=ux(w.location,T,_);h=p();let E=s2(S,h),R=w.createHref(S);l.replaceState(E,"",R),a&&u&&u({action:c,location:w.location,delta:0})}function b(T){let _=r.location.origin!=="null"?r.location.origin:r.location.href,S=typeof T=="string"?T:kd(T);return S=S.replace(/ $/,"%20"),en(_,`No window.location.(origin|href) available to create URL for href: ${S}`),new URL(S,_)}let w={get action(){return c},get location(){return t(r,l)},listen(T){if(u)throw new Error("A history only accepts one active listener");return r.addEventListener(r2,g),u=T,()=>{r.removeEventListener(r2,g),u=null}},createHref(T){return e(r,T)},createURL:b,encodeLocation(T){let _=b(T);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:y,replace:x,go(T){return l.go(T)}};return w}function cA(t,e,n="/"){return ak(t,e,n,!1)}function ak(t,e,n,i){let r=typeof e=="string"?Fc(e):e,a=Fs(r.pathname||"/",n);if(a==null)return null;let l=uA(t);ok(l);let c=null;for(let u=0;c==null&&u<l.length;++u){let h=xk(a);c=gk(l[u],h,i)}return c}function uA(t,e=[],n=[],i=""){let r=(a,l,c)=>{let u={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};u.relativePath.startsWith("/")&&(en(u.relativePath.startsWith(i),`Absolute route path "${u.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(i.length));let h=Os([i,u.relativePath]),p=n.concat(u);a.children&&a.children.length>0&&(en(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),uA(a.children,e,p,h)),!(a.path==null&&!a.index)&&e.push({path:h,score:pk(h,a.index),routesMeta:p})};return t.forEach((a,l)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))r(a,l);else for(let u of dA(a.path))r(a,l,u)}),e}function dA(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),a=n.replace(/\?$/,"");if(i.length===0)return r?[a,""]:[a];let l=dA(i.join("/")),c=[];return c.push(...l.map(u=>u===""?a:[a,u].join("/"))),r&&c.push(...l),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function ok(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:mk(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var lk=/^:[\w-]+$/,ck=3,uk=2,dk=1,hk=10,fk=-2,a2=t=>t==="*";function pk(t,e){let n=t.split("/"),i=n.length;return n.some(a2)&&(i+=fk),e&&(i+=uk),n.filter(r=>!a2(r)).reduce((r,a)=>r+(lk.test(a)?ck:a===""?dk:hk),i)}function mk(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function gk(t,e,n=!1){let{routesMeta:i}=t,r={},a="/",l=[];for(let c=0;c<i.length;++c){let u=i[c],h=c===i.length-1,p=a==="/"?e:e.slice(a.length)||"/",g=Ip({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},p),y=u.route;if(!g&&h&&n&&!i[i.length-1].route.index&&(g=Ip({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},p)),!g)return null;Object.assign(r,g.params),l.push({params:r,pathname:Os([a,g.pathname]),pathnameBase:_k(Os([a,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(a=Os([a,g.pathnameBase]))}return l}function Ip(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=yk(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let a=r[0],l=a.replace(/(.)\/+$/,"$1"),c=r.slice(1);return{params:i.reduce((h,{paramName:p,isOptional:g},y)=>{if(p==="*"){let b=c[y]||"";l=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const x=c[y];return g&&!x?h[p]=void 0:h[p]=(x||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:l,pattern:t}}function yk(t,e=!1,n=!0){Lr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,u)=>(i.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function xk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Lr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Fs(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function vk(t,e="/"){let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Fc(t):t;return{pathname:n?n.startsWith("/")?n:bk(n,e):e,search:Sk(i),hash:Mk(r)}}function bk(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function ty(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function wk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Yv(t){let e=wk(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function Xv(t,e,n,i=!1){let r;typeof t=="string"?r=Fc(t):(r={...t},en(!r.pathname||!r.pathname.includes("?"),ty("?","pathname","search",r)),en(!r.pathname||!r.pathname.includes("#"),ty("#","pathname","hash",r)),en(!r.search||!r.search.includes("#"),ty("#","search","hash",r)));let a=t===""||r.pathname==="",l=a?"/":r.pathname,c;if(l==null)c=n;else{let g=e.length-1;if(!i&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),g-=1;r.pathname=y.join("/")}c=g>=0?e[g]:"/"}let u=vk(r,c),h=l&&l!=="/"&&l.endsWith("/"),p=(a||l===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||p)&&(u.pathname+="/"),u}var Os=t=>t.join("/").replace(/\/\/+/g,"/"),_k=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Sk=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Mk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Tk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var hA=["POST","PUT","PATCH","DELETE"];new Set(hA);var Ek=["GET",...hA];new Set(Ek);var Ic=k.createContext(null);Ic.displayName="DataRouter";var xm=k.createContext(null);xm.displayName="DataRouterState";var fA=k.createContext({isTransitioning:!1});fA.displayName="ViewTransition";var Ak=k.createContext(new Map);Ak.displayName="Fetchers";var Ck=k.createContext(null);Ck.displayName="Await";var jr=k.createContext(null);jr.displayName="Navigation";var dh=k.createContext(null);dh.displayName="Location";var ls=k.createContext({outlet:null,matches:[],isDataRoute:!1});ls.displayName="Route";var Zv=k.createContext(null);Zv.displayName="RouteError";function Nk(t,{relative:e}={}){en(Uc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=k.useContext(jr),{hash:r,pathname:a,search:l}=hh(t,{relative:e}),c=a;return n!=="/"&&(c=a==="/"?n:Os([n,a])),i.createHref({pathname:c,search:l,hash:r})}function Uc(){return k.useContext(dh)!=null}function Qa(){return en(Uc(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(dh).location}var pA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mA(t){k.useContext(jr).static||k.useLayoutEffect(t)}function Ja(){let{isDataRoute:t}=k.useContext(ls);return t?Vk():Rk()}function Rk(){en(Uc(),"useNavigate() may be used only in the context of a <Router> component.");let t=k.useContext(Ic),{basename:e,navigator:n}=k.useContext(jr),{matches:i}=k.useContext(ls),{pathname:r}=Qa(),a=JSON.stringify(Yv(i)),l=k.useRef(!1);return mA(()=>{l.current=!0}),k.useCallback((u,h={})=>{if(Lr(l.current,pA),!l.current)return;if(typeof u=="number"){n.go(u);return}let p=Xv(u,JSON.parse(a),r,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Os([e,p.pathname])),(h.replace?n.replace:n.push)(p,h.state,h)},[e,n,a,r,t])}k.createContext(null);function hh(t,{relative:e}={}){let{matches:n}=k.useContext(ls),{pathname:i}=Qa(),r=JSON.stringify(Yv(n));return k.useMemo(()=>Xv(t,JSON.parse(r),i,e==="path"),[t,r,i,e])}function Lk(t,e){return gA(t,e)}function gA(t,e,n,i){var S;en(Uc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r,static:a}=k.useContext(jr),{matches:l}=k.useContext(ls),c=l[l.length-1],u=c?c.params:{},h=c?c.pathname:"/",p=c?c.pathnameBase:"/",g=c&&c.route;{let E=g&&g.path||"";yA(h,!g||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let y=Qa(),x;if(e){let E=typeof e=="string"?Fc(e):e;en(p==="/"||((S=E.pathname)==null?void 0:S.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${E.pathname}" was given in the \`location\` prop.`),x=E}else x=y;let b=x.pathname||"/",w=b;if(p!=="/"){let E=p.replace(/^\//,"").split("/");w="/"+b.replace(/^\//,"").split("/").slice(E.length).join("/")}let T=!a&&n&&n.matches&&n.matches.length>0?n.matches:cA(t,{pathname:w});Lr(g||T!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Lr(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=Ok(T&&T.map(E=>Object.assign({},E,{params:Object.assign({},u,E.params),pathname:Os([p,r.encodeLocation?r.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?p:Os([p,r.encodeLocation?r.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),l,n,i);return e&&_?k.createElement(dh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},_):_}function kk(){let t=Uk(),e=Tk(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:a},"ErrorBoundary")," or"," ",k.createElement("code",{style:a},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:r},n):null,l)}var jk=k.createElement(kk,null),Dk=class extends k.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?k.createElement(ls.Provider,{value:this.props.routeContext},k.createElement(Zv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Pk({routeContext:t,match:e,children:n}){let i=k.useContext(Ic);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(ls.Provider,{value:t},n)}function Ok(t,e=[],n=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let r=t,a=n==null?void 0:n.errors;if(a!=null){let u=r.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);en(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),r=r.slice(0,Math.min(r.length,u+1))}let l=!1,c=-1;if(n)for(let u=0;u<r.length;u++){let h=r[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:p,errors:g}=n,y=h.route.loader&&!p.hasOwnProperty(h.route.id)&&(!g||g[h.route.id]===void 0);if(h.route.lazy||y){l=!0,c>=0?r=r.slice(0,c+1):r=[r[0]];break}}}return r.reduceRight((u,h,p)=>{let g,y=!1,x=null,b=null;n&&(g=a&&h.route.id?a[h.route.id]:void 0,x=h.route.errorElement||jk,l&&(c<0&&p===0?(yA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,b=null):c===p&&(y=!0,b=h.route.hydrateFallbackElement||null)));let w=e.concat(r.slice(0,p+1)),T=()=>{let _;return g?_=x:y?_=b:h.route.Component?_=k.createElement(h.route.Component,null):h.route.element?_=h.route.element:_=u,k.createElement(Pk,{match:h,routeContext:{outlet:u,matches:w,isDataRoute:n!=null},children:_})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?k.createElement(Dk,{location:n.location,revalidation:n.revalidation,component:x,error:g,children:T(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):T()},null)}function Qv(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Bk(t){let e=k.useContext(Ic);return en(e,Qv(t)),e}function zk(t){let e=k.useContext(xm);return en(e,Qv(t)),e}function Fk(t){let e=k.useContext(ls);return en(e,Qv(t)),e}function Jv(t){let e=Fk(t),n=e.matches[e.matches.length-1];return en(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Ik(){return Jv("useRouteId")}function Uk(){var i;let t=k.useContext(Zv),e=zk("useRouteError"),n=Jv("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[n]}function Vk(){let{router:t}=Bk("useNavigate"),e=Jv("useNavigate"),n=k.useRef(!1);return mA(()=>{n.current=!0}),k.useCallback(async(r,a={})=>{Lr(n.current,pA),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...a}))},[t,e])}var o2={};function yA(t,e,n){!e&&!o2[t]&&(o2[t]=!0,Lr(!1,n))}k.memo(Hk);function Hk({routes:t,future:e,state:n}){return gA(t,void 0,n,e)}function Kv({to:t,replace:e,state:n,relative:i}){en(Uc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=k.useContext(jr);Lr(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=k.useContext(ls),{pathname:l}=Qa(),c=Ja(),u=Xv(t,Yv(a),l,i==="path"),h=JSON.stringify(u);return k.useEffect(()=>{c(JSON.parse(h),{replace:e,state:n,relative:i})},[c,h,i,e,n]),null}function Nn(t){en(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Gk({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:r,static:a=!1}){en(!Uc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=k.useMemo(()=>({basename:l,navigator:r,static:a,future:{}}),[l,r,a]);typeof n=="string"&&(n=Fc(n));let{pathname:u="/",search:h="",hash:p="",state:g=null,key:y="default"}=n,x=k.useMemo(()=>{let b=Fs(u,l);return b==null?null:{location:{pathname:b,search:h,hash:p,state:g,key:y},navigationType:i}},[l,u,h,p,g,y,i]);return Lr(x!=null,`<Router basename="${l}"> is not able to match the URL "${u}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:k.createElement(jr.Provider,{value:c},k.createElement(dh.Provider,{children:e,value:x}))}function Wk({children:t,location:e}){return Lk(dx(t),e)}function dx(t,e=[]){let n=[];return k.Children.forEach(t,(i,r)=>{if(!k.isValidElement(i))return;let a=[...e,r];if(i.type===k.Fragment){n.push.apply(n,dx(i.props.children,a));return}en(i.type===Nn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),en(!i.props.index||!i.props.children,"An index route cannot have child routes.");let l={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=dx(i.props.children,a)),n.push(l)}),n}var wp="get",_p="application/x-www-form-urlencoded";function vm(t){return t!=null&&typeof t.tagName=="string"}function $k(t){return vm(t)&&t.tagName.toLowerCase()==="button"}function qk(t){return vm(t)&&t.tagName.toLowerCase()==="form"}function Yk(t){return vm(t)&&t.tagName.toLowerCase()==="input"}function Xk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Zk(t,e){return t.button===0&&(!e||e==="_self")&&!Xk(t)}var jf=null;function Qk(){if(jf===null)try{new FormData(document.createElement("form"),0),jf=!1}catch{jf=!0}return jf}var Jk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ny(t){return t!=null&&!Jk.has(t)?(Lr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_p}"`),null):t}function Kk(t,e){let n,i,r,a,l;if(qk(t)){let c=t.getAttribute("action");i=c?Fs(c,e):null,n=t.getAttribute("method")||wp,r=ny(t.getAttribute("enctype"))||_p,a=new FormData(t)}else if($k(t)||Yk(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(i=u?Fs(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||wp,r=ny(t.getAttribute("formenctype"))||ny(c.getAttribute("enctype"))||_p,a=new FormData(c,t),!Qk()){let{name:h,type:p,value:g}=t;if(p==="image"){let y=h?`${h}.`:"";a.append(`${y}x`,"0"),a.append(`${y}y`,"0")}else h&&a.append(h,g)}}else{if(vm(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=wp,i=null,r=_p,l=t}return a&&r==="text/plain"&&(l=a,a=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:a,body:l}}function eb(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function ej(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function tj(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function nj(t,e,n){let i=await Promise.all(t.map(async r=>{let a=e.routes[r.route.id];if(a){let l=await ej(a,n);return l.links?l.links():[]}return[]}));return aj(i.flat(1).filter(tj).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function l2(t,e,n,i,r,a){let l=(u,h)=>n[h]?u.route.id!==n[h].route.id:!0,c=(u,h)=>{var p;return n[h].pathname!==u.pathname||((p=n[h].route.path)==null?void 0:p.endsWith("*"))&&n[h].params["*"]!==u.params["*"]};return a==="assets"?e.filter((u,h)=>l(u,h)||c(u,h)):a==="data"?e.filter((u,h)=>{var g;let p=i.routes[u.route.id];if(!p||!p.hasLoader)return!1;if(l(u,h)||c(u,h))return!0;if(u.route.shouldRevalidate){let y=u.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((g=n[0])==null?void 0:g.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function ij(t,e,{includeHydrateFallback:n}={}){return rj(t.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1))}function rj(t){return[...new Set(t)]}function sj(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function aj(t,e){let n=new Set;return new Set(e),t.reduce((i,r)=>{let a=JSON.stringify(sj(r));return n.has(a)||(n.add(a),i.push({key:a,link:r})),i},[])}function oj(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Fs(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function xA(){let t=k.useContext(Ic);return eb(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function lj(){let t=k.useContext(xm);return eb(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var tb=k.createContext(void 0);tb.displayName="FrameworkContext";function vA(){let t=k.useContext(tb);return eb(t,"You must render this element inside a <HydratedRouter> element"),t}function cj(t,e){let n=k.useContext(tb),[i,r]=k.useState(!1),[a,l]=k.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:h,onMouseLeave:p,onTouchStart:g}=e,y=k.useRef(null);k.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let w=_=>{_.forEach(S=>{l(S.isIntersecting)})},T=new IntersectionObserver(w,{threshold:.5});return y.current&&T.observe(y.current),()=>{T.disconnect()}}},[t]),k.useEffect(()=>{if(i){let w=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(w)}}},[i]);let x=()=>{r(!0)},b=()=>{r(!1),l(!1)};return n?t!=="intent"?[a,y,{}]:[a,y,{onFocus:Wu(c,x),onBlur:Wu(u,b),onMouseEnter:Wu(h,x),onMouseLeave:Wu(p,b),onTouchStart:Wu(g,x)}]:[!1,y,{}]}function Wu(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function uj({page:t,...e}){let{router:n}=xA(),i=k.useMemo(()=>cA(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?k.createElement(hj,{page:t,matches:i,...e}):null}function dj(t){let{manifest:e,routeModules:n}=vA(),[i,r]=k.useState([]);return k.useEffect(()=>{let a=!1;return nj(t,e,n).then(l=>{a||r(l)}),()=>{a=!0}},[t,e,n]),i}function hj({page:t,matches:e,...n}){let i=Qa(),{manifest:r,routeModules:a}=vA(),{basename:l}=xA(),{loaderData:c,matches:u}=lj(),h=k.useMemo(()=>l2(t,e,u,r,i,"data"),[t,e,u,r,i]),p=k.useMemo(()=>l2(t,e,u,r,i,"assets"),[t,e,u,r,i]),g=k.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let b=new Set,w=!1;if(e.forEach(_=>{var E;let S=r.routes[_.route.id];!S||!S.hasLoader||(!h.some(R=>R.route.id===_.route.id)&&_.route.id in c&&((E=a[_.route.id])!=null&&E.shouldRevalidate)||S.hasClientLoader?w=!0:b.add(_.route.id))}),b.size===0)return[];let T=oj(t,l);return w&&b.size>0&&T.searchParams.set("_routes",e.filter(_=>b.has(_.route.id)).map(_=>_.route.id).join(",")),[T.pathname+T.search]},[l,c,i,r,h,e,t,a]),y=k.useMemo(()=>ij(p,r),[p,r]),x=dj(p);return k.createElement(k.Fragment,null,g.map(b=>k.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),y.map(b=>k.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),x.map(({key:b,link:w})=>k.createElement("link",{key:b,...w})))}function fj(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var bA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{bA&&(window.__reactRouterVersion="7.4.1")}catch{}function pj({basename:t,children:e,window:n}){let i=k.useRef();i.current==null&&(i.current=ik({window:n,v5Compat:!0}));let r=i.current,[a,l]=k.useState({action:r.action,location:r.location}),c=k.useCallback(u=>{k.startTransition(()=>l(u))},[l]);return k.useLayoutEffect(()=>r.listen(c),[r,c]),k.createElement(Gk,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:r})}var wA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rt=k.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:r,reloadDocument:a,replace:l,state:c,target:u,to:h,preventScrollReset:p,viewTransition:g,...y},x){let{basename:b}=k.useContext(jr),w=typeof h=="string"&&wA.test(h),T,_=!1;if(typeof h=="string"&&w&&(T=h,bA))try{let L=new URL(window.location.href),B=h.startsWith("//")?new URL(L.protocol+h):new URL(h),F=Fs(B.pathname,b);B.origin===L.origin&&F!=null?h=F+B.search+B.hash:_=!0}catch{Lr(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=Nk(h,{relative:r}),[E,R,A]=cj(i,y),N=xj(h,{replace:l,state:c,target:u,preventScrollReset:p,relative:r,viewTransition:g});function j(L){e&&e(L),L.defaultPrevented||N(L)}let O=k.createElement("a",{...y,...A,href:T||S,onClick:_||a?e:j,ref:fj(x,R),target:u,"data-discover":!w&&n==="render"?"true":void 0});return E&&!w?k.createElement(k.Fragment,null,O,k.createElement(uj,{page:S})):O});Rt.displayName="Link";var mj=k.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:r=!1,style:a,to:l,viewTransition:c,children:u,...h},p){let g=hh(l,{relative:h.relative}),y=Qa(),x=k.useContext(xm),{navigator:b,basename:w}=k.useContext(jr),T=x!=null&&Sj(g)&&c===!0,_=b.encodeLocation?b.encodeLocation(g).pathname:g.pathname,S=y.pathname,E=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(S=S.toLowerCase(),E=E?E.toLowerCase():null,_=_.toLowerCase()),E&&w&&(E=Fs(E,w)||E);const R=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let A=S===_||!r&&S.startsWith(_)&&S.charAt(R)==="/",N=E!=null&&(E===_||!r&&E.startsWith(_)&&E.charAt(_.length)==="/"),j={isActive:A,isPending:N,isTransitioning:T},O=A?e:void 0,L;typeof i=="function"?L=i(j):L=[i,A?"active":null,N?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let B=typeof a=="function"?a(j):a;return k.createElement(Rt,{...h,"aria-current":O,className:L,ref:p,style:B,to:l,viewTransition:c},typeof u=="function"?u(j):u)});mj.displayName="NavLink";var gj=k.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:r,state:a,method:l=wp,action:c,onSubmit:u,relative:h,preventScrollReset:p,viewTransition:g,...y},x)=>{let b=wj(),w=_j(c,{relative:h}),T=l.toLowerCase()==="get"?"get":"post",_=typeof c=="string"&&wA.test(c),S=E=>{if(u&&u(E),E.defaultPrevented)return;E.preventDefault();let R=E.nativeEvent.submitter,A=(R==null?void 0:R.getAttribute("formmethod"))||l;b(R||E.currentTarget,{fetcherKey:e,method:A,navigate:n,replace:r,state:a,relative:h,preventScrollReset:p,viewTransition:g})};return k.createElement("form",{ref:x,method:T,action:w,onSubmit:i?u:S,...y,"data-discover":!_&&t==="render"?"true":void 0})});gj.displayName="Form";function yj(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _A(t){let e=k.useContext(Ic);return en(e,yj(t)),e}function xj(t,{target:e,replace:n,state:i,preventScrollReset:r,relative:a,viewTransition:l}={}){let c=Ja(),u=Qa(),h=hh(t,{relative:a});return k.useCallback(p=>{if(Zk(p,e)){p.preventDefault();let g=n!==void 0?n:kd(u)===kd(h);c(t,{replace:g,state:i,preventScrollReset:r,relative:a,viewTransition:l})}},[u,c,h,n,i,e,t,r,a,l])}var vj=0,bj=()=>`__${String(++vj)}__`;function wj(){let{router:t}=_A("useSubmit"),{basename:e}=k.useContext(jr),n=Ik();return k.useCallback(async(i,r={})=>{let{action:a,method:l,encType:c,formData:u,body:h}=Kk(i,e);if(r.navigate===!1){let p=r.fetcherKey||bj();await t.fetch(p,n,r.action||a,{preventScrollReset:r.preventScrollReset,formData:u,body:h,formMethod:r.method||l,formEncType:r.encType||c,flushSync:r.flushSync})}else await t.navigate(r.action||a,{preventScrollReset:r.preventScrollReset,formData:u,body:h,formMethod:r.method||l,formEncType:r.encType||c,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function _j(t,{relative:e}={}){let{basename:n}=k.useContext(jr),i=k.useContext(ls);en(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),a={...hh(t||".",{relative:e})},l=Qa();if(t==null){a.search=l.search;let c=new URLSearchParams(a.search),u=c.getAll("index");if(u.some(p=>p==="")){c.delete("index"),u.filter(g=>g).forEach(g=>c.append("index",g));let p=c.toString();a.search=p?`?${p}`:""}}return(!t||t===".")&&r.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Os([n,a.pathname])),kd(a)}function Sj(t,e={}){let n=k.useContext(fA);en(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=_A("useViewTransitionState"),r=hh(t,{relative:e.relative});if(!n.isTransitioning)return!1;let a=Fs(n.currentLocation.pathname,i)||n.currentLocation.pathname,l=Fs(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Ip(r.pathname,l)!=null||Ip(r.pathname,a)!=null}new TextEncoder;const nb=k.createContext({});function ib(t){const e=k.useRef(null);return e.current===null&&(e.current=t()),e.current}const rb=typeof window<"u",SA=rb?k.useLayoutEffect:k.useEffect,bm=k.createContext(null),sb=k.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class Mj extends k.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=n.offsetParent,r=i instanceof HTMLElement&&i.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=r-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Tj({children:t,isPresent:e,anchorX:n}){const i=k.useId(),r=k.useRef(null),a=k.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=k.useContext(sb);return k.useInsertionEffect(()=>{const{width:c,height:u,top:h,left:p,right:g}=a.current;if(e||!r.current||!c||!u)return;const y=n==="left"?`left: ${p}`:`right: ${g}`;r.current.dataset.motionPopId=i;const x=document.createElement("style");return l&&(x.nonce=l),document.head.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${y}px !important;
            top: ${h}px !important;
          }
        `),()=>{document.head.removeChild(x)}},[e]),f.jsx(Mj,{isPresent:e,childRef:r,sizeRef:a,children:k.cloneElement(t,{ref:r})})}const Ej=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:a,mode:l,anchorX:c})=>{const u=ib(Aj),h=k.useId(),p=k.useCallback(y=>{u.set(y,!0);for(const x of u.values())if(!x)return;i&&i()},[u,i]),g=k.useMemo(()=>({id:h,initial:e,isPresent:n,custom:r,onExitComplete:p,register:y=>(u.set(y,!1),()=>u.delete(y))}),a?[Math.random(),p]:[n,p]);return k.useMemo(()=>{u.forEach((y,x)=>u.set(x,!1))},[n]),k.useEffect(()=>{!n&&!u.size&&i&&i()},[n]),l==="popLayout"&&(t=f.jsx(Tj,{isPresent:n,anchorX:c,children:t})),f.jsx(bm.Provider,{value:g,children:t})};function Aj(){return new Map}function MA(t=!0){const e=k.useContext(bm);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,a=k.useId();k.useEffect(()=>{if(t)return r(a)},[t]);const l=k.useCallback(()=>t&&i&&i(a),[a,i,t]);return!n&&i?[!1,l]:[!0]}const Df=t=>t.key||"";function c2(t){const e=[];return k.Children.forEach(t,n=>{k.isValidElement(n)&&e.push(n)}),e}const Cj=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:a="sync",propagate:l=!1,anchorX:c="left"})=>{const[u,h]=MA(l),p=k.useMemo(()=>c2(t),[t]),g=l&&!u?[]:p.map(Df),y=k.useRef(!0),x=k.useRef(p),b=ib(()=>new Map),[w,T]=k.useState(p),[_,S]=k.useState(p);SA(()=>{y.current=!1,x.current=p;for(let A=0;A<_.length;A++){const N=Df(_[A]);g.includes(N)?b.delete(N):b.get(N)!==!0&&b.set(N,!1)}},[_,g.length,g.join("-")]);const E=[];if(p!==w){let A=[...p];for(let N=0;N<_.length;N++){const j=_[N],O=Df(j);g.includes(O)||(A.splice(N,0,j),E.push(j))}return a==="wait"&&E.length&&(A=E),S(c2(A)),T(p),null}const{forceRender:R}=k.useContext(nb);return f.jsx(f.Fragment,{children:_.map(A=>{const N=Df(A),j=l&&!u?!1:p===_||g.includes(N),O=()=>{if(b.has(N))b.set(N,!0);else return;let L=!0;b.forEach(B=>{B||(L=!1)}),L&&(R==null||R(),S(x.current),l&&(h==null||h()),i&&i())};return f.jsx(Ej,{isPresent:j,initial:!y.current||n?void 0:!1,custom:e,presenceAffectsLayout:r,mode:a,onExitComplete:j?void 0:O,anchorX:c,children:A},N)})})};function ab(t,e){t.indexOf(e)===-1&&t.push(e)}function ob(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Oi=t=>t;let TA=Oi;const Nj={useManualTiming:!1};function lb(t){let e;return()=>(e===void 0&&(e=t()),e)}const vc=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i};class cb{constructor(){this.subscriptions=[]}add(e){return ab(this.subscriptions,e),()=>ob(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let a=0;a<r;a++){const l=this.subscriptions[a];l&&l(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Bs=t=>t*1e3,zs=t=>t/1e3;function EA(t,e){return e?t*(1e3/e):0}const Rj=lb(()=>window.ScrollTimeline!==void 0);class Lj{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(r=>{if(Rj()&&r.attachTimeline)return r.attachTimeline(e);if(typeof n=="function")return n(r)});return()=>{i.forEach((r,a)=>{r&&r(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class kj extends Lj{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function ub(t,e){return t?t[e]||t.default||t:void 0}const hx=2e4;function AA(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<hx;)e+=n,i=t.next(e);return e>=hx?1/0:e}function db(t){return typeof t=="function"}function u2(t,e){t.timeline=e,t.onfinish=null}const hb=t=>Array.isArray(t)&&typeof t[0]=="number",jj={linearEasing:void 0};function Dj(t,e){const n=lb(t);return()=>{var i;return(i=jj[e])!==null&&i!==void 0?i:n()}}const Up=Dj(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),CA=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let a=0;a<r;a++)i+=t(vc(0,r-1,a))+", ";return`linear(${i.substring(0,i.length-2)})`};function NA(t){return!!(typeof t=="function"&&Up()||!t||typeof t=="string"&&(t in fx||Up())||hb(t)||Array.isArray(t)&&t.every(NA))}const od=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,fx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:od([0,.65,.55,1]),circOut:od([.55,0,1,.45]),backIn:od([.31,.01,.66,-.59]),backOut:od([.33,1.53,.69,.99])};function RA(t,e){if(t)return typeof t=="function"&&Up()?CA(t,e):hb(t)?od(t):Array.isArray(t)?t.map(n=>RA(n,e)||fx.easeOut):fx[t]}const Pf=["read","resolveKeyframes","update","preRender","render","postRender"],d2={value:null};function Pj(t,e){let n=new Set,i=new Set,r=!1,a=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1},u=0;function h(g){l.has(g)&&(p.schedule(g),t()),u++,g(c)}const p={schedule:(g,y=!1,x=!1)=>{const w=x&&r?n:i;return y&&l.add(g),w.has(g)||w.add(g),g},cancel:g=>{i.delete(g),l.delete(g)},process:g=>{if(c=g,r){a=!0;return}r=!0,[n,i]=[i,n],n.forEach(h),e&&d2.value&&d2.value.frameloop[e].push(u),u=0,n.clear(),r=!1,a&&(a=!1,p.process(g))}};return p}const Oj=40;function LA(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,l=Pf.reduce((_,S)=>(_[S]=Pj(a,e?S:void 0),_),{}),{read:c,resolveKeyframes:u,update:h,preRender:p,render:g,postRender:y}=l,x=()=>{const _=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(_-r.timestamp,Oj),1),r.timestamp=_,r.isProcessing=!0,c.process(r),u.process(r),h.process(r),p.process(r),g.process(r),y.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(x))},b=()=>{n=!0,i=!0,r.isProcessing||t(x)};return{schedule:Pf.reduce((_,S)=>{const E=l[S];return _[S]=(R,A=!1,N=!1)=>(n||b(),E.schedule(R,A,N)),_},{}),cancel:_=>{for(let S=0;S<Pf.length;S++)l[Pf[S]].cancel(_)},state:r,steps:l}}const{schedule:Yt,cancel:Va,state:Gn,steps:iy}=LA(typeof requestAnimationFrame<"u"?requestAnimationFrame:Oi,!0),{schedule:fb}=LA(queueMicrotask,!1);let Sp;function Bj(){Sp=void 0}const Xr={now:()=>(Sp===void 0&&Xr.set(Gn.isProcessing||Nj.useManualTiming?Gn.timestamp:performance.now()),Sp),set:t=>{Sp=t,queueMicrotask(Bj)}},Ar={x:!1,y:!1};function kA(){return Ar.x||Ar.y}function zj(t){return t==="x"||t==="y"?Ar[t]?null:(Ar[t]=!0,()=>{Ar[t]=!1}):Ar.x||Ar.y?null:(Ar.x=Ar.y=!0,()=>{Ar.x=Ar.y=!1})}function Fj(t,e,n){var i;if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const a=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}function jA(t,e){const n=Fj(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function h2(t){return!(t.pointerType==="touch"||kA())}function Ij(t,e,n={}){const[i,r,a]=jA(t,n),l=c=>{if(!h2(c))return;const{target:u}=c,h=e(u,c);if(typeof h!="function"||!u)return;const p=g=>{h2(g)&&(h(g),u.removeEventListener("pointerleave",p))};u.addEventListener("pointerleave",p,r)};return i.forEach(c=>{c.addEventListener("pointerenter",l,r)}),a}const DA=(t,e)=>e?t===e?!0:DA(t,e.parentElement):!1,pb=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Uj=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Vj(t){return Uj.has(t.tagName)||t.tabIndex!==-1}const ld=new WeakSet;function f2(t){return e=>{e.key==="Enter"&&t(e)}}function ry(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Hj=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=f2(()=>{if(ld.has(n))return;ry(n,"down");const r=f2(()=>{ry(n,"up")}),a=()=>ry(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function p2(t){return pb(t)&&!kA()}function Gj(t,e,n={}){const[i,r,a]=jA(t,n),l=c=>{const u=c.currentTarget;if(!p2(c)||ld.has(u))return;ld.add(u);const h=e(u,c),p=(x,b)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",y),!(!p2(x)||!ld.has(u))&&(ld.delete(u),typeof h=="function"&&h(x,{success:b}))},g=x=>{p(x,u===window||u===document||n.useGlobalTarget||DA(u,x.target))},y=x=>{p(x,!1)};window.addEventListener("pointerup",g,r),window.addEventListener("pointercancel",y,r)};return i.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",l,r),c instanceof HTMLElement&&(c.addEventListener("focus",h=>Hj(h,r)),!Vj(c)&&c.tabIndex===null&&(c.tabIndex=0))}),a}const m2=30,Wj=t=>!isNaN(parseFloat(t));class $j{constructor(e,n={}){this.version="12.6.1",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const a=Xr.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Xr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Wj(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new cb);const i=this.events[e].add(n);return e==="change"?()=>{i(),Yt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Xr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>m2)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,m2);return EA(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function jd(t,e){return new $j(t,e)}const PA=k.createContext({strict:!1}),g2={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},bc={};for(const t in g2)bc[t]={isEnabled:e=>g2[t].some(n=>!!e[n])};function qj(t){for(const e in t)bc[e]={...bc[e],...t[e]}}const Yj=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Vp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Yj.has(t)}let OA=t=>!Vp(t);function Xj(t){t&&(OA=e=>e.startsWith("on")?!Vp(e):t(e))}try{Xj(require("@emotion/is-prop-valid").default)}catch{}function Zj(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(OA(r)||n===!0&&Vp(r)||!e&&!Vp(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function Qj(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}const wm=k.createContext({});function _m(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Dd(t){return typeof t=="string"||Array.isArray(t)}const mb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],gb=["initial",...mb];function Sm(t){return _m(t.animate)||gb.some(e=>Dd(t[e]))}function BA(t){return!!(Sm(t)||t.variants)}function Jj(t,e){if(Sm(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Dd(n)?n:void 0,animate:Dd(i)?i:void 0}}return t.inherit!==!1?e:{}}function Kj(t){const{initial:e,animate:n}=Jj(t,k.useContext(wm));return k.useMemo(()=>({initial:e,animate:n}),[y2(e),y2(n)])}function y2(t){return Array.isArray(t)?t.join(" "):t}const eD=Symbol.for("motionComponentSymbol");function nc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function tD(t,e,n){return k.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):nc(n)&&(n.current=i))},[e])}const yb=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),nD="framerAppearId",zA="data-"+yb(nD),FA=k.createContext({});function iD(t,e,n,i,r){var a,l;const{visualElement:c}=k.useContext(wm),u=k.useContext(PA),h=k.useContext(bm),p=k.useContext(sb).reducedMotion,g=k.useRef(null);i=i||u.renderer,!g.current&&i&&(g.current=i(t,{visualState:e,parent:c,props:n,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:p}));const y=g.current,x=k.useContext(FA);y&&!y.projection&&r&&(y.type==="html"||y.type==="svg")&&rD(g.current,n,r,x);const b=k.useRef(!1);k.useInsertionEffect(()=>{y&&b.current&&y.update(n,h)});const w=n[zA],T=k.useRef(!!w&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,w))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,w)));return SA(()=>{y&&(b.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),fb.render(y.render),T.current&&y.animationState&&y.animationState.animateChanges())}),k.useEffect(()=>{y&&(!T.current&&y.animationState&&y.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{var _;(_=window.MotionHandoffMarkAsComplete)===null||_===void 0||_.call(window,w)}),T.current=!1))}),y}function rD(t,e,n,i){const{layoutId:r,layout:a,drag:l,dragConstraints:c,layoutScroll:u,layoutRoot:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:IA(t.parent)),t.projection.setOptions({layoutId:r,layout:a,alwaysMeasureLayout:!!l||c&&nc(c),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:i,layoutScroll:u,layoutRoot:h})}function IA(t){if(t)return t.options.allowProjection!==!1?t.projection:IA(t.parent)}function sD({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){var a,l;t&&qj(t);function c(h,p){let g;const y={...k.useContext(sb),...h,layoutId:aD(h)},{isStatic:x}=y,b=Kj(h),w=i(h,x);if(!x&&rb){oD();const T=lD(y);g=T.MeasureLayout,b.visualElement=iD(r,w,y,e,T.ProjectionNode)}return f.jsxs(wm.Provider,{value:b,children:[g&&b.visualElement?f.jsx(g,{visualElement:b.visualElement,...y}):null,n(r,h,tD(w,b.visualElement,p),w,x,b.visualElement)]})}c.displayName=`motion.${typeof r=="string"?r:`create(${(l=(a=r.displayName)!==null&&a!==void 0?a:r.name)!==null&&l!==void 0?l:""})`}`;const u=k.forwardRef(c);return u[eD]=r,u}function aD({layoutId:t}){const e=k.useContext(nb).id;return e&&t!==void 0?e+"-"+t:t}function oD(t,e){k.useContext(PA).strict}function lD(t){const{drag:e,layout:n}=bc;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const UA=t=>e=>typeof e=="string"&&e.startsWith(t),xb=UA("--"),cD=UA("var(--"),vb=t=>cD(t)?uD.test(t.split("/*")[0].trim()):!1,uD=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Pd={};function dD(t){for(const e in t)Pd[e]=t[e],xb(e)&&(Pd[e].isCSSVariable=!0)}const Vc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ko=new Set(Vc);function VA(t,{layout:e,layoutId:n}){return Ko.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Pd[t]||t==="opacity")}const Jn=t=>!!(t&&t.getVelocity),HA=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Is=(t,e,n)=>n>e?e:n<t?t:n,Hc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Od={...Hc,transform:t=>Is(0,1,t)},Of={...Hc,default:1},fh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),La=fh("deg"),Zr=fh("%"),it=fh("px"),hD=fh("vh"),fD=fh("vw"),x2={...Zr,parse:t=>Zr.parse(t)/100,transform:t=>Zr.transform(t*100)},pD={borderWidth:it,borderTopWidth:it,borderRightWidth:it,borderBottomWidth:it,borderLeftWidth:it,borderRadius:it,radius:it,borderTopLeftRadius:it,borderTopRightRadius:it,borderBottomRightRadius:it,borderBottomLeftRadius:it,width:it,maxWidth:it,height:it,maxHeight:it,top:it,right:it,bottom:it,left:it,padding:it,paddingTop:it,paddingRight:it,paddingBottom:it,paddingLeft:it,margin:it,marginTop:it,marginRight:it,marginBottom:it,marginLeft:it,backgroundPositionX:it,backgroundPositionY:it},mD={rotate:La,rotateX:La,rotateY:La,rotateZ:La,scale:Of,scaleX:Of,scaleY:Of,scaleZ:Of,skew:La,skewX:La,skewY:La,distance:it,translateX:it,translateY:it,translateZ:it,x:it,y:it,z:it,perspective:it,transformPerspective:it,opacity:Od,originX:x2,originY:x2,originZ:it},v2={...Hc,transform:Math.round},bb={...pD,...mD,zIndex:v2,size:it,fillOpacity:Od,strokeOpacity:Od,numOctaves:v2},gD={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},yD=Vc.length;function xD(t,e,n){let i="",r=!0;for(let a=0;a<yD;a++){const l=Vc[a],c=t[l];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(l.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||n){const h=HA(c,bb[l]);if(!u){r=!1;const p=gD[l]||l;i+=`${p}(${h}) `}n&&(e[l]=h)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function wb(t,e,n){const{style:i,vars:r,transformOrigin:a}=t;let l=!1,c=!1;for(const u in e){const h=e[u];if(Ko.has(u)){l=!0;continue}else if(xb(u)){r[u]=h;continue}else{const p=HA(h,bb[u]);u.startsWith("origin")?(c=!0,a[u]=p):i[u]=p}}if(e.transform||(l||n?i.transform=xD(e,t.transform,n):i.transform&&(i.transform="none")),c){const{originX:u="50%",originY:h="50%",originZ:p=0}=a;i.transformOrigin=`${u} ${h} ${p}`}}const _b=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function GA(t,e,n){for(const i in e)!Jn(e[i])&&!VA(i,n)&&(t[i]=e[i])}function vD({transformTemplate:t},e){return k.useMemo(()=>{const n=_b();return wb(n,e,t),Object.assign({},n.vars,n.style)},[e])}function bD(t,e){const n=t.style||{},i={};return GA(i,n,t),Object.assign(i,vD(t,e)),i}function wD(t,e){const n={},i=bD(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const _D=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Sb(t){return typeof t!="string"||t.includes("-")?!1:!!(_D.indexOf(t)>-1||/[A-Z]/u.test(t))}const SD={offset:"stroke-dashoffset",array:"stroke-dasharray"},MD={offset:"strokeDashoffset",array:"strokeDasharray"};function TD(t,e,n=1,i=0,r=!0){t.pathLength=1;const a=r?SD:MD;t[a.offset]=it.transform(-i);const l=it.transform(e),c=it.transform(n);t[a.array]=`${l} ${c}`}function b2(t,e,n){return typeof t=="string"?t:it.transform(e+n*t)}function ED(t,e,n){const i=b2(e,t.x,t.width),r=b2(n,t.y,t.height);return`${i} ${r}`}function Mb(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:a,pathLength:l,pathSpacing:c=1,pathOffset:u=0,...h},p,g){if(wb(t,h,g),p){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:x,dimensions:b}=t;y.transform&&(b&&(x.transform=y.transform),delete y.transform),b&&(r!==void 0||a!==void 0||x.transform)&&(x.transformOrigin=ED(b,r!==void 0?r:.5,a!==void 0?a:.5)),e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),i!==void 0&&(y.scale=i),l!==void 0&&TD(y,l,c,u,!1)}const WA=()=>({..._b(),attrs:{}}),Tb=t=>typeof t=="string"&&t.toLowerCase()==="svg";function AD(t,e,n,i){const r=k.useMemo(()=>{const a=WA();return Mb(a,e,Tb(i),t.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};GA(a,t.style,t),r.style={...a,...r.style}}return r}function CD(t=!1){return(n,i,r,{latestValues:a},l)=>{const u=(Sb(n)?AD:wD)(i,a,l,n),h=Zj(i,typeof n=="string",t),p=n!==k.Fragment?{...h,...u,ref:r}:{},{children:g}=i,y=k.useMemo(()=>Jn(g)?g.get():g,[g]);return k.createElement(n,{...p,children:y})}}function w2(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function Eb(t,e,n,i){if(typeof e=="function"){const[r,a]=w2(i);e=e(n!==void 0?n:t.custom,r,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,a]=w2(i);e=e(n!==void 0?n:t.custom,r,a)}return e}const px=t=>Array.isArray(t),ND=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),RD=t=>px(t)?t[t.length-1]||0:t;function Mp(t){const e=Jn(t)?t.get():t;return ND(e)?e.toValue():e}function LD({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},i,r,a){const l={latestValues:kD(i,r,a,t),renderState:e()};return n&&(l.onMount=c=>n({props:i,current:c,...l}),l.onUpdate=c=>n(c)),l}const $A=t=>(e,n)=>{const i=k.useContext(wm),r=k.useContext(bm),a=()=>LD(t,e,i,r);return n?a():ib(a)};function kD(t,e,n,i){const r={},a=i(t,{});for(const y in a)r[y]=Mp(a[y]);let{initial:l,animate:c}=t;const u=Sm(t),h=BA(t);e&&h&&!u&&t.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let p=n?n.initial===!1:!1;p=p||l===!1;const g=p?c:l;if(g&&typeof g!="boolean"&&!_m(g)){const y=Array.isArray(g)?g:[g];for(let x=0;x<y.length;x++){const b=Eb(t,y[x]);if(b){const{transitionEnd:w,transition:T,..._}=b;for(const S in _){let E=_[S];if(Array.isArray(E)){const R=p?E.length-1:0;E=E[R]}E!==null&&(r[S]=E)}for(const S in w)r[S]=w[S]}}}return r}function Ab(t,e,n){var i;const{style:r}=t,a={};for(const l in r)(Jn(r[l])||e.style&&Jn(e.style[l])||VA(l,t)||((i=n==null?void 0:n.getValue(l))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(a[l]=r[l]);return a}const jD={useVisualState:$A({scrapeMotionValuesFromProps:Ab,createRenderState:_b})};function qA(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function YA(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const a in n)t.style.setProperty(a,n[a])}const XA=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ZA(t,e,n,i){YA(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(XA.has(r)?r:yb(r),e.attrs[r])}function QA(t,e,n){const i=Ab(t,e,n);for(const r in t)if(Jn(t[r])||Jn(e[r])){const a=Vc.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[a]=t[r]}return i}const _2=["x","y","width","height","cx","cy","r"],DD={useVisualState:$A({scrapeMotionValuesFromProps:QA,createRenderState:WA,onUpdate:({props:t,prevProps:e,current:n,renderState:i,latestValues:r})=>{if(!n)return;let a=!!t.drag;if(!a){for(const c in r)if(Ko.has(c)){a=!0;break}}if(!a)return;let l=!e;if(e)for(let c=0;c<_2.length;c++){const u=_2[c];t[u]!==e[u]&&(l=!0)}l&&Yt.read(()=>{qA(n,i),Yt.render(()=>{Mb(i,r,Tb(n.tagName),t.transformTemplate),ZA(n,i)})})}})};function PD(t,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const l={...Sb(i)?DD:jD,preloadedFeatures:t,useRender:CD(r),createVisualElement:e,Component:i};return sD(l)}}function Bd(t,e,n){const i=t.getProps();return Eb(i,e,n!==void 0?n:i.custom,t)}const JA=new Set(["width","height","top","left","right","bottom",...Vc]);function OD(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,jd(n))}function BD(t,e){const n=Bd(t,e);let{transitionEnd:i={},transition:r={},...a}=n||{};a={...a,...i};for(const l in a){const c=RD(a[l]);OD(t,l,c)}}function zD(t){return!!(Jn(t)&&t.add)}function mx(t,e){const n=t.getValue("willChange");if(zD(n))return n.add(e)}function KA(t){return t.props[zA]}const eC=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,FD=1e-7,ID=12;function UD(t,e,n,i,r){let a,l,c=0;do l=e+(n-e)/2,a=eC(l,i,r)-t,a>0?n=l:e=l;while(Math.abs(a)>FD&&++c<ID);return l}function ph(t,e,n,i){if(t===e&&n===i)return Oi;const r=a=>UD(a,0,1,t,n);return a=>a===0||a===1?a:eC(r(a),e,i)}const tC=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,nC=t=>e=>1-t(1-e),iC=ph(.33,1.53,.69,.99),Cb=nC(iC),rC=tC(Cb),sC=t=>(t*=2)<1?.5*Cb(t):.5*(2-Math.pow(2,-10*(t-1))),Nb=t=>1-Math.sin(Math.acos(t)),aC=nC(Nb),oC=tC(Nb),lC=t=>/^0[^.\s]+$/u.test(t);function VD(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||lC(t):!0}const pd=t=>Math.round(t*1e5)/1e5,Rb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function HD(t){return t==null}const GD=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Lb=(t,e)=>n=>!!(typeof n=="string"&&GD.test(n)&&n.startsWith(t)||e&&!HD(n)&&Object.prototype.hasOwnProperty.call(n,e)),cC=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,a,l,c]=i.match(Rb);return{[t]:parseFloat(r),[e]:parseFloat(a),[n]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},WD=t=>Is(0,255,t),sy={...Hc,transform:t=>Math.round(WD(t))},Do={test:Lb("rgb","red"),parse:cC("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+sy.transform(t)+", "+sy.transform(e)+", "+sy.transform(n)+", "+pd(Od.transform(i))+")"};function $D(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const gx={test:Lb("#"),parse:$D,transform:Do.transform},ic={test:Lb("hsl","hue"),parse:cC("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Zr.transform(pd(e))+", "+Zr.transform(pd(n))+", "+pd(Od.transform(i))+")"},Xn={test:t=>Do.test(t)||gx.test(t)||ic.test(t),parse:t=>Do.test(t)?Do.parse(t):ic.test(t)?ic.parse(t):gx.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Do.transform(t):ic.transform(t)},qD=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function YD(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Rb))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(qD))===null||n===void 0?void 0:n.length)||0)>0}const uC="number",dC="color",XD="var",ZD="var(",S2="${}",QD=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function zd(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let a=0;const c=e.replace(QD,u=>(Xn.test(u)?(i.color.push(a),r.push(dC),n.push(Xn.parse(u))):u.startsWith(ZD)?(i.var.push(a),r.push(XD),n.push(u)):(i.number.push(a),r.push(uC),n.push(parseFloat(u))),++a,S2)).split(S2);return{values:n,split:c,indexes:i,types:r}}function hC(t){return zd(t).values}function fC(t){const{split:e,types:n}=zd(t),i=e.length;return r=>{let a="";for(let l=0;l<i;l++)if(a+=e[l],r[l]!==void 0){const c=n[l];c===uC?a+=pd(r[l]):c===dC?a+=Xn.transform(r[l]):a+=r[l]}return a}}const JD=t=>typeof t=="number"?0:t;function KD(t){const e=hC(t);return fC(t)(e.map(JD))}const Ha={test:YD,parse:hC,createTransformer:fC,getAnimatableNone:KD},e5=new Set(["brightness","contrast","saturate","opacity"]);function t5(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(Rb)||[];if(!i)return t;const r=n.replace(i,"");let a=e5.has(e)?1:0;return i!==n&&(a*=100),e+"("+a+r+")"}const n5=/\b([a-z-]*)\(.*?\)/gu,yx={...Ha,getAnimatableNone:t=>{const e=t.match(n5);return e?e.map(t5).join(" "):t}},i5={...bb,color:Xn,backgroundColor:Xn,outlineColor:Xn,fill:Xn,stroke:Xn,borderColor:Xn,borderTopColor:Xn,borderRightColor:Xn,borderBottomColor:Xn,borderLeftColor:Xn,filter:yx,WebkitFilter:yx},pC=t=>i5[t];function mC(t,e){let n=pC(t);return n!==yx&&(n=Ha),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const r5=new Set(["auto","none","0"]);function s5(t,e,n){let i=0,r;for(;i<t.length&&!r;){const a=t[i];typeof a=="string"&&!r5.has(a)&&zd(a).values.length&&(r=t[i]),i++}if(r&&n)for(const a of e)t[a]=mC(n,r)}const Po=t=>t*180/Math.PI,xx=t=>{const e=Po(Math.atan2(t[1],t[0]));return vx(e)},a5={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:xx,rotateZ:xx,skewX:t=>Po(Math.atan(t[1])),skewY:t=>Po(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},vx=t=>(t=t%360,t<0&&(t+=360),t),M2=xx,T2=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),E2=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),o5={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:T2,scaleY:E2,scale:t=>(T2(t)+E2(t))/2,rotateX:t=>vx(Po(Math.atan2(t[6],t[5]))),rotateY:t=>vx(Po(Math.atan2(-t[2],t[0]))),rotateZ:M2,rotate:M2,skewX:t=>Po(Math.atan(t[4])),skewY:t=>Po(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function A2(t){return t.includes("scale")?1:0}function bx(t,e){if(!t||t==="none")return A2(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(n)i=o5,r=n;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=a5,r=c}if(!r)return A2(e);const a=i[e],l=r[1].split(",").map(c5);return typeof a=="function"?a(l):l[a]}const l5=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return bx(n,e)};function c5(t){return parseFloat(t.trim())}const C2=t=>t===Hc||t===it,u5=new Set(["x","y","z"]),d5=Vc.filter(t=>!u5.has(t));function h5(t){const e=[];return d5.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const wc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>bx(e,"x"),y:(t,{transform:e})=>bx(e,"y")};wc.translateX=wc.x;wc.translateY=wc.y;const Fo=new Set;let wx=!1,_x=!1;function gC(){if(_x){const t=Array.from(Fo).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=h5(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([a,l])=>{var c;(c=i.getValue(a))===null||c===void 0||c.set(l)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}_x=!1,wx=!1,Fo.forEach(t=>t.complete()),Fo.clear()}function yC(){Fo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(_x=!0)})}function f5(){yC(),gC()}class kb{constructor(e,n,i,r,a,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=a,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Fo.add(this),wx||(wx=!0,Yt.read(yC),Yt.resolveKeyframes(gC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const l=r==null?void 0:r.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(i&&n){const u=i.readValue(n,c);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=c),r&&l===void 0&&r.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Fo.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Fo.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const xC=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),p5=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function m5(t){const e=p5.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function vC(t,e,n=1){const[i,r]=m5(t);if(!i)return;const a=window.getComputedStyle(e).getPropertyValue(i);if(a){const l=a.trim();return xC(l)?parseFloat(l):l}return vb(r)?vC(r,e,n+1):r}const bC=t=>e=>e.test(t),g5={test:t=>t==="auto",parse:t=>t},wC=[Hc,it,Zr,La,fD,hD,g5],N2=t=>wC.find(bC(t));class _C extends kb{constructor(e,n,i,r,a){super(e,n,i,r,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let h=e[u];if(typeof h=="string"&&(h=h.trim(),vb(h))){const p=vC(h,n.current);p!==void 0&&(e[u]=p),u===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!JA.has(i)||e.length!==2)return;const[r,a]=e,l=N2(r),c=N2(a);if(l!==c)if(C2(l)&&C2(c))for(let u=0;u<e.length;u++){const h=e[u];typeof h=="string"&&(e[u]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)VD(e[r])&&i.push(r);i.length&&s5(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=wc[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const a=n.getValue(i);a&&a.jump(this.measuredOrigin,!1);const l=r.length-1,c=r[l];r[l]=wc[i](n.measureViewportBox(),window.getComputedStyle(n.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([u,h])=>{n.getValue(u).set(h)}),this.resolveNoneKeyframes()}}const R2=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ha.test(t)||t==="0")&&!t.startsWith("url("));function y5(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function x5(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],l=R2(r,e),c=R2(a,e);return!l||!c?!1:y5(t)||(n==="spring"||db(n))&&i}const v5=t=>t!==null;function Mm(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(v5),a=e&&n!=="loop"&&e%2===1?0:r.length-1;return!a||i===void 0?r[a]:i}const b5=40;class SC{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:a=0,repeatType:l="loop",...c}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Xr.now(),this.options={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:a,repeatType:l,...c},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>b5?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&f5(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Xr.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:a,delay:l,onComplete:c,onUpdate:u,isGenerator:h}=this.options;if(!h&&!x5(e,i,r,a))if(l)this.options.duration=0;else{u&&u(Mm(e,this.options,n)),c&&c(),this.resolveFinishedPromise();return}const p=this.initPlayback(e,n);p!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...p},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const sn=(t,e,n)=>t+(e-t)*n;function ay(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function w5({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,a=0,l=0;if(!e)r=a=l=n;else{const c=n<.5?n*(1+e):n+e-n*e,u=2*n-c;r=ay(u,c,t+1/3),a=ay(u,c,t),l=ay(u,c,t-1/3)}return{red:Math.round(r*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:i}}function Hp(t,e){return n=>n>0?e:t}const oy=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},_5=[gx,Do,ic],S5=t=>_5.find(e=>e.test(t));function L2(t){const e=S5(t);if(!e)return!1;let n=e.parse(t);return e===ic&&(n=w5(n)),n}const k2=(t,e)=>{const n=L2(t),i=L2(e);if(!n||!i)return Hp(t,e);const r={...n};return a=>(r.red=oy(n.red,i.red,a),r.green=oy(n.green,i.green,a),r.blue=oy(n.blue,i.blue,a),r.alpha=sn(n.alpha,i.alpha,a),Do.transform(r))},M5=(t,e)=>n=>e(t(n)),mh=(...t)=>t.reduce(M5),Sx=new Set(["none","hidden"]);function T5(t,e){return Sx.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function E5(t,e){return n=>sn(t,e,n)}function jb(t){return typeof t=="number"?E5:typeof t=="string"?vb(t)?Hp:Xn.test(t)?k2:N5:Array.isArray(t)?MC:typeof t=="object"?Xn.test(t)?k2:A5:Hp}function MC(t,e){const n=[...t],i=n.length,r=t.map((a,l)=>jb(a)(a,e[l]));return a=>{for(let l=0;l<i;l++)n[l]=r[l](a);return n}}function A5(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=jb(t[r])(t[r],e[r]));return r=>{for(const a in i)n[a]=i[a](r);return n}}function C5(t,e){var n;const i=[],r={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const l=e.types[a],c=t.indexes[l][r[l]],u=(n=t.values[c])!==null&&n!==void 0?n:0;i[a]=u,r[l]++}return i}const N5=(t,e)=>{const n=Ha.createTransformer(e),i=zd(t),r=zd(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?Sx.has(t)&&!r.values.length||Sx.has(e)&&!i.values.length?T5(t,e):mh(MC(C5(i,r),r.values),n):Hp(t,e)};function TC(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?sn(t,e,n):jb(t)(t,e)}const R5=5;function EC(t,e,n){const i=Math.max(e-R5,0);return EA(n-t(i),e-i)}const hn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},j2=.001;function L5({duration:t=hn.duration,bounce:e=hn.bounce,velocity:n=hn.velocity,mass:i=hn.mass}){let r,a,l=1-e;l=Is(hn.minDamping,hn.maxDamping,l),t=Is(hn.minDuration,hn.maxDuration,zs(t)),l<1?(r=h=>{const p=h*l,g=p*t,y=p-n,x=Mx(h,l),b=Math.exp(-g);return j2-y/x*b},a=h=>{const g=h*l*t,y=g*n+n,x=Math.pow(l,2)*Math.pow(h,2)*t,b=Math.exp(-g),w=Mx(Math.pow(h,2),l);return(-r(h)+j2>0?-1:1)*((y-x)*b)/w}):(r=h=>{const p=Math.exp(-h*t),g=(h-n)*t+1;return-.001+p*g},a=h=>{const p=Math.exp(-h*t),g=(n-h)*(t*t);return p*g});const c=5/t,u=j5(r,a,c);if(t=Bs(t),isNaN(u))return{stiffness:hn.stiffness,damping:hn.damping,duration:t};{const h=Math.pow(u,2)*i;return{stiffness:h,damping:l*2*Math.sqrt(i*h),duration:t}}}const k5=12;function j5(t,e,n){let i=n;for(let r=1;r<k5;r++)i=i-t(i)/e(i);return i}function Mx(t,e){return t*Math.sqrt(1-e*e)}const D5=["duration","bounce"],P5=["stiffness","damping","mass"];function D2(t,e){return e.some(n=>t[n]!==void 0)}function O5(t){let e={velocity:hn.velocity,stiffness:hn.stiffness,damping:hn.damping,mass:hn.mass,isResolvedFromDuration:!1,...t};if(!D2(t,P5)&&D2(t,D5))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,a=2*Is(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:hn.mass,stiffness:r,damping:a}}else{const n=L5(t);e={...e,...n,mass:hn.mass},e.isResolvedFromDuration=!0}return e}function AC(t=hn.visualDuration,e=hn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const a=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],c={done:!1,value:a},{stiffness:u,damping:h,mass:p,duration:g,velocity:y,isResolvedFromDuration:x}=O5({...n,velocity:-zs(n.velocity||0)}),b=y||0,w=h/(2*Math.sqrt(u*p)),T=l-a,_=zs(Math.sqrt(u/p)),S=Math.abs(T)<5;i||(i=S?hn.restSpeed.granular:hn.restSpeed.default),r||(r=S?hn.restDelta.granular:hn.restDelta.default);let E;if(w<1){const A=Mx(_,w);E=N=>{const j=Math.exp(-w*_*N);return l-j*((b+w*_*T)/A*Math.sin(A*N)+T*Math.cos(A*N))}}else if(w===1)E=A=>l-Math.exp(-_*A)*(T+(b+_*T)*A);else{const A=_*Math.sqrt(w*w-1);E=N=>{const j=Math.exp(-w*_*N),O=Math.min(A*N,300);return l-j*((b+w*_*T)*Math.sinh(O)+A*T*Math.cosh(O))/A}}const R={calculatedDuration:x&&g||null,next:A=>{const N=E(A);if(x)c.done=A>=g;else{let j=0;w<1&&(j=A===0?Bs(b):EC(E,A,N));const O=Math.abs(j)<=i,L=Math.abs(l-N)<=r;c.done=O&&L}return c.value=c.done?l:N,c},toString:()=>{const A=Math.min(AA(R),hx),N=CA(j=>R.next(A*j).value,A,30);return A+"ms "+N}};return R}function P2({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:a=500,modifyTarget:l,min:c,max:u,restDelta:h=.5,restSpeed:p}){const g=t[0],y={done:!1,value:g},x=O=>c!==void 0&&O<c||u!==void 0&&O>u,b=O=>c===void 0?u:u===void 0||Math.abs(c-O)<Math.abs(u-O)?c:u;let w=n*e;const T=g+w,_=l===void 0?T:l(T);_!==T&&(w=_-g);const S=O=>-w*Math.exp(-O/i),E=O=>_+S(O),R=O=>{const L=S(O),B=E(O);y.done=Math.abs(L)<=h,y.value=y.done?_:B};let A,N;const j=O=>{x(y.value)&&(A=O,N=AC({keyframes:[y.value,b(y.value)],velocity:EC(E,O,y.value),damping:r,stiffness:a,restDelta:h,restSpeed:p}))};return j(0),{calculatedDuration:null,next:O=>{let L=!1;return!N&&A===void 0&&(L=!0,R(O),j(O)),A!==void 0&&O>=A?N.next(O-A):(!L&&R(O),y)}}}const B5=ph(.42,0,1,1),z5=ph(0,0,.58,1),CC=ph(.42,0,.58,1),F5=t=>Array.isArray(t)&&typeof t[0]!="number",I5={linear:Oi,easeIn:B5,easeInOut:CC,easeOut:z5,circIn:Nb,circInOut:oC,circOut:aC,backIn:Cb,backInOut:rC,backOut:iC,anticipate:sC},O2=t=>{if(hb(t)){TA(t.length===4);const[e,n,i,r]=t;return ph(e,n,i,r)}else if(typeof t=="string")return I5[t];return t};function U5(t,e,n){const i=[],r=n||TC,a=t.length-1;for(let l=0;l<a;l++){let c=r(t[l],t[l+1]);if(e){const u=Array.isArray(e)?e[l]||Oi:e;c=mh(u,c)}i.push(c)}return i}function V5(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const a=t.length;if(TA(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=U5(e,i,r),u=c.length,h=p=>{if(l&&p<t[0])return e[0];let g=0;if(u>1)for(;g<t.length-2&&!(p<t[g+1]);g++);const y=vc(t[g],t[g+1],p);return c[g](y)};return n?p=>h(Is(t[0],t[a-1],p)):h}function H5(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=vc(0,e,i);t.push(sn(n,1,r))}}function G5(t){const e=[0];return H5(e,t.length-1),e}function W5(t,e){return t.map(n=>n*e)}function $5(t,e){return t.map(()=>e||CC).splice(0,t.length-1)}function Gp({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=F5(i)?i.map(O2):O2(i),a={done:!1,value:e[0]},l=W5(n&&n.length===e.length?n:G5(e),t),c=V5(l,e,{ease:Array.isArray(r)?r:$5(e,r)});return{calculatedDuration:t,next:u=>(a.value=c(u),a.done=u>=t,a)}}const q5=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Yt.update(e,!0),stop:()=>Va(e),now:()=>Gn.isProcessing?Gn.timestamp:Xr.now()}},Y5={decay:P2,inertia:P2,tween:Gp,keyframes:Gp,spring:AC},X5=t=>t/100;class Db extends SC{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:n,motionValue:i,element:r,keyframes:a}=this.options,l=(r==null?void 0:r.KeyframeResolver)||kb,c=(u,h)=>this.onKeyframesResolved(u,h);this.resolver=new l(a,c,n,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:a,velocity:l=0}=this.options,c=db(n)?n:Y5[n]||Gp;let u,h;c!==Gp&&typeof e[0]!="number"&&(u=mh(X5,TC(e[0],e[1])),e=[0,100]);const p=c({...this.options,keyframes:e});a==="mirror"&&(h=c({...this.options,keyframes:[...e].reverse(),velocity:-l})),p.calculatedDuration===null&&(p.calculatedDuration=AA(p));const{calculatedDuration:g}=p,y=g+r,x=y*(i+1)-r;return{generator:p,mirroredGenerator:h,mapPercentToKeyframes:u,calculatedDuration:g,resolvedDuration:y,totalDuration:x}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:O}=this.options;return{done:!0,value:O[O.length-1]}}const{finalKeyframe:r,generator:a,mirroredGenerator:l,mapPercentToKeyframes:c,keyframes:u,calculatedDuration:h,totalDuration:p,resolvedDuration:g}=i;if(this.startTime===null)return a.next(0);const{delay:y,repeat:x,repeatType:b,repeatDelay:w,onUpdate:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-p/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const _=this.currentTime-y*(this.speed>=0?1:-1),S=this.speed>=0?_<0:_>p;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let E=this.currentTime,R=a;if(x){const O=Math.min(this.currentTime,p)/g;let L=Math.floor(O),B=O%1;!B&&O>=1&&(B=1),B===1&&L--,L=Math.min(L,x+1),!!(L%2)&&(b==="reverse"?(B=1-B,w&&(B-=w/g)):b==="mirror"&&(R=l)),E=Is(0,1,B)*g}const A=S?{done:!1,value:u[0]}:R.next(E);c&&(A.value=c(A.value));let{done:N}=A;!S&&h!==null&&(N=this.speed>=0?this.currentTime>=p:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return j&&r!==void 0&&(A.value=Mm(u,this.options,r)),T&&T(A.value),j&&this.finish(),A}get duration(){const{resolved:e}=this;return e?zs(e.calculatedDuration):0}get time(){return zs(this.currentTime)}set time(e){e=Bs(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=zs(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=q5,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Z5=new Set(["opacity","clipPath","filter","transform"]);function Q5(t,e,n,{delay:i=0,duration:r=300,repeat:a=0,repeatType:l="loop",ease:c="easeInOut",times:u}={}){const h={[e]:n};u&&(h.offset=u);const p=RA(c,r);return Array.isArray(p)&&(h.easing=p),t.animate(h,{delay:i,duration:r,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"})}const J5=lb(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Wp=10,K5=2e4;function eP(t){return db(t.type)||t.type==="spring"||!NA(t.ease)}function tP(t,e){const n=new Db({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const r=[];let a=0;for(;!i.done&&a<K5;)i=n.sample(a),r.push(i.value),a+=Wp;return{times:void 0,keyframes:r,duration:a-Wp,ease:"linear"}}const NC={anticipate:sC,backInOut:rC,circInOut:oC};function nP(t){return t in NC}class B2 extends SC{constructor(e){super(e);const{name:n,motionValue:i,element:r,keyframes:a}=this.options;this.resolver=new _C(a,(l,c)=>this.onKeyframesResolved(l,c),n,i,r),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:i=300,times:r,ease:a,type:l,motionValue:c,name:u,startTime:h}=this.options;if(!c.owner||!c.owner.current)return!1;if(typeof a=="string"&&Up()&&nP(a)&&(a=NC[a]),eP(this.options)){const{onComplete:g,onUpdate:y,motionValue:x,element:b,...w}=this.options,T=tP(e,w);e=T.keyframes,e.length===1&&(e[1]=e[0]),i=T.duration,r=T.times,a=T.ease,l="keyframes"}const p=Q5(c.owner.current,u,e,{...this.options,duration:i,times:r,ease:a});return p.startTime=h??this.calcStartTime(),this.pendingTimeline?(u2(p,this.pendingTimeline),this.pendingTimeline=void 0):p.onfinish=()=>{const{onComplete:g}=this.options;c.set(Mm(e,this.options,n)),g&&g(),this.cancel(),this.resolveFinishedPromise()},{animation:p,duration:i,times:r,type:l,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return zs(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return zs(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=Bs(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Oi;const{animation:i}=n;u2(i,e)}return Oi}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:r,type:a,ease:l,times:c}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:p,onComplete:g,element:y,...x}=this.options,b=new Db({...x,keyframes:i,duration:r,type:a,ease:l,times:c,isGenerator:!0}),w=Bs(this.time);h.setWithVelocity(b.sample(w-Wp).value,b.sample(w).value,Wp)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:r,repeatType:a,damping:l,type:c}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:h}=n.owner.getProps();return J5()&&i&&Z5.has(i)&&(i!=="transform"||!h)&&!u&&!r&&a!=="mirror"&&l!==0&&c!=="inertia"}}const iP={type:"spring",stiffness:500,damping:25,restSpeed:10},rP=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),sP={type:"keyframes",duration:.8},aP={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},oP=(t,{keyframes:e})=>e.length>2?sP:Ko.has(t)?t.startsWith("scale")?rP(e[1]):iP:aP;function lP({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:a,repeatType:l,repeatDelay:c,from:u,elapsed:h,...p}){return!!Object.keys(p).length}const Pb=(t,e,n,i={},r,a)=>l=>{const c=ub(i,t)||{},u=c.delay||i.delay||0;let{elapsed:h=0}=i;h=h-Bs(u);let p={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-h,onUpdate:y=>{e.set(y),c.onUpdate&&c.onUpdate(y)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:a?void 0:r};lP(c)||(p={...p,...oP(t,p)}),p.duration&&(p.duration=Bs(p.duration)),p.repeatDelay&&(p.repeatDelay=Bs(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let g=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(g=!0)),p.allowFlatten=!c.type&&!c.ease,g&&!a&&e.get()!==void 0){const y=Mm(p.keyframes,c);if(y!==void 0)return Yt.update(()=>{p.onUpdate(y),p.onComplete()}),new kj([])}return!a&&B2.supports(p)?new B2(p):new Db(p)};function cP({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function RC(t,e,{delay:n=0,transitionOverride:i,type:r}={}){var a;let{transition:l=t.getDefaultTransition(),transitionEnd:c,...u}=e;i&&(l=i);const h=[],p=r&&t.animationState&&t.animationState.getState()[r];for(const g in u){const y=t.getValue(g,(a=t.latestValues[g])!==null&&a!==void 0?a:null),x=u[g];if(x===void 0||p&&cP(p,g))continue;const b={delay:n,...ub(l||{},g)};let w=!1;if(window.MotionHandoffAnimation){const _=KA(t);if(_){const S=window.MotionHandoffAnimation(_,g,Yt);S!==null&&(b.startTime=S,w=!0)}}mx(t,g),y.start(Pb(g,y,x,t.shouldReduceMotion&&JA.has(g)?{type:!1}:b,t,w));const T=y.animation;T&&h.push(T)}return c&&Promise.all(h).then(()=>{Yt.update(()=>{c&&BD(t,c)})}),h}function Tx(t,e,n={}){var i;const r=Bd(t,e,n.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(a=n.transitionOverride);const l=r?()=>Promise.all(RC(t,r,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:p=0,staggerChildren:g,staggerDirection:y}=a;return uP(t,e,p+h,g,y,n)}:()=>Promise.resolve(),{when:u}=a;if(u){const[h,p]=u==="beforeChildren"?[l,c]:[c,l];return h().then(()=>p())}else return Promise.all([l(),c(n.delay)])}function uP(t,e,n=0,i=0,r=1,a){const l=[],c=(t.variantChildren.size-1)*i,u=r===1?(h=0)=>h*i:(h=0)=>c-h*i;return Array.from(t.variantChildren).sort(dP).forEach((h,p)=>{h.notify("AnimationStart",e),l.push(Tx(h,e,{...a,delay:n+u(p)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(l)}function dP(t,e){return t.sortNodePosition(e)}function hP(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(a=>Tx(t,a,n));i=Promise.all(r)}else if(typeof e=="string")i=Tx(t,e,n);else{const r=typeof e=="function"?Bd(t,e,n.custom):e;i=Promise.all(RC(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}function LC(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}const fP=gb.length;function kC(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?kC(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<fP;n++){const i=gb[n],r=t.props[i];(Dd(r)||r===!1)&&(e[i]=r)}return e}const pP=[...mb].reverse(),mP=mb.length;function gP(t){return e=>Promise.all(e.map(({animation:n,options:i})=>hP(t,n,i)))}function yP(t){let e=gP(t),n=z2(),i=!0;const r=u=>(h,p)=>{var g;const y=Bd(t,p,u==="exit"?(g=t.presenceContext)===null||g===void 0?void 0:g.custom:void 0);if(y){const{transition:x,transitionEnd:b,...w}=y;h={...h,...w,...b}}return h};function a(u){e=u(t)}function l(u){const{props:h}=t,p=kC(t.parent)||{},g=[],y=new Set;let x={},b=1/0;for(let T=0;T<mP;T++){const _=pP[T],S=n[_],E=h[_]!==void 0?h[_]:p[_],R=Dd(E),A=_===u?S.isActive:null;A===!1&&(b=T);let N=E===p[_]&&E!==h[_]&&R;if(N&&i&&t.manuallyAnimateOnMount&&(N=!1),S.protectedKeys={...x},!S.isActive&&A===null||!E&&!S.prevProp||_m(E)||typeof E=="boolean")continue;const j=xP(S.prevProp,E);let O=j||_===u&&S.isActive&&!N&&R||T>b&&R,L=!1;const B=Array.isArray(E)?E:[E];let F=B.reduce(r(_),{});A===!1&&(F={});const{prevResolvedValues:J={}}=S,Q={...J,...F},W=$=>{O=!0,y.has($)&&(L=!0,y.delete($)),S.needsAnimating[$]=!0;const U=t.getValue($);U&&(U.liveStyle=!1)};for(const $ in Q){const U=F[$],X=J[$];if(x.hasOwnProperty($))continue;let D=!1;px(U)&&px(X)?D=!LC(U,X):D=U!==X,D?U!=null?W($):y.add($):U!==void 0&&y.has($)?W($):S.protectedKeys[$]=!0}S.prevProp=E,S.prevResolvedValues=F,S.isActive&&(x={...x,...F}),i&&t.blockInitialAnimation&&(O=!1),O&&(!(N&&j)||L)&&g.push(...B.map($=>({animation:$,options:{type:_}})))}if(y.size){const T={};if(typeof h.initial!="boolean"){const _=Bd(t,Array.isArray(h.initial)?h.initial[0]:h.initial);_&&_.transition&&(T.transition=_.transition)}y.forEach(_=>{const S=t.getBaseTarget(_),E=t.getValue(_);E&&(E.liveStyle=!0),T[_]=S??null}),g.push({animation:T})}let w=!!g.length;return i&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(w=!1),i=!1,w?e(g):Promise.resolve()}function c(u,h){var p;if(n[u].isActive===h)return Promise.resolve();(p=t.variantChildren)===null||p===void 0||p.forEach(y=>{var x;return(x=y.animationState)===null||x===void 0?void 0:x.setActive(u,h)}),n[u].isActive=h;const g=l(u);for(const y in n)n[y].protectedKeys={};return g}return{animateChanges:l,setActive:c,setAnimateFunction:a,getState:()=>n,reset:()=>{n=z2(),i=!0}}}function xP(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!LC(e,t):!1}function Mo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function z2(){return{animate:Mo(!0),whileInView:Mo(),whileHover:Mo(),whileTap:Mo(),whileDrag:Mo(),whileFocus:Mo(),exit:Mo()}}class Ka{constructor(e){this.isMounted=!1,this.node=e}update(){}}class vP extends Ka{constructor(e){super(e),e.animationState||(e.animationState=yP(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();_m(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let bP=0;class wP extends Ka{constructor(){super(...arguments),this.id=bP++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const _P={animation:{Feature:vP},exit:{Feature:wP}};function Fd(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function gh(t){return{point:{x:t.pageX,y:t.pageY}}}const SP=t=>e=>pb(e)&&t(e,gh(e));function md(t,e,n,i){return Fd(t,e,SP(n),i)}function jC({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function MP({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function TP(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}const DC=1e-4,EP=1-DC,AP=1+DC,PC=.01,CP=0-PC,NP=0+PC;function li(t){return t.max-t.min}function RP(t,e,n){return Math.abs(t-e)<=n}function F2(t,e,n,i=.5){t.origin=i,t.originPoint=sn(e.min,e.max,t.origin),t.scale=li(n)/li(e),t.translate=sn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=EP&&t.scale<=AP||isNaN(t.scale))&&(t.scale=1),(t.translate>=CP&&t.translate<=NP||isNaN(t.translate))&&(t.translate=0)}function gd(t,e,n,i){F2(t.x,e.x,n.x,i?i.originX:void 0),F2(t.y,e.y,n.y,i?i.originY:void 0)}function I2(t,e,n){t.min=n.min+e.min,t.max=t.min+li(e)}function LP(t,e,n){I2(t.x,e.x,n.x),I2(t.y,e.y,n.y)}function U2(t,e,n){t.min=e.min-n.min,t.max=t.min+li(e)}function yd(t,e,n){U2(t.x,e.x,n.x),U2(t.y,e.y,n.y)}const V2=()=>({translate:0,scale:1,origin:0,originPoint:0}),rc=()=>({x:V2(),y:V2()}),H2=()=>({min:0,max:0}),gn=()=>({x:H2(),y:H2()});function or(t){return[t("x"),t("y")]}function ly(t){return t===void 0||t===1}function Ex({scale:t,scaleX:e,scaleY:n}){return!ly(t)||!ly(e)||!ly(n)}function Lo(t){return Ex(t)||OC(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function OC(t){return G2(t.x)||G2(t.y)}function G2(t){return t&&t!=="0%"}function $p(t,e,n){const i=t-n,r=e*i;return n+r}function W2(t,e,n,i,r){return r!==void 0&&(t=$p(t,r,i)),$p(t,n,i)+e}function Ax(t,e=0,n=1,i,r){t.min=W2(t.min,e,n,i,r),t.max=W2(t.max,e,n,i,r)}function BC(t,{x:e,y:n}){Ax(t.x,e.translate,e.scale,e.originPoint),Ax(t.y,n.translate,n.scale,n.originPoint)}const $2=.999999999999,q2=1.0000000000001;function kP(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let a,l;for(let c=0;c<r;c++){a=n[c],l=a.projectionDelta;const{visualElement:u}=a.options;u&&u.props.style&&u.props.style.display==="contents"||(i&&a.options.layoutScroll&&a.scroll&&a!==a.root&&ac(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,BC(t,l)),i&&Lo(a.latestValues)&&ac(t,a.latestValues))}e.x<q2&&e.x>$2&&(e.x=1),e.y<q2&&e.y>$2&&(e.y=1)}function sc(t,e){t.min=t.min+e,t.max=t.max+e}function Y2(t,e,n,i,r=.5){const a=sn(t.min,t.max,r);Ax(t,e,n,a,i)}function ac(t,e){Y2(t.x,e.x,e.scaleX,e.scale,e.originX),Y2(t.y,e.y,e.scaleY,e.scale,e.originY)}function zC(t,e){return jC(TP(t.getBoundingClientRect(),e))}function jP(t,e,n){const i=zC(t,n),{scroll:r}=e;return r&&(sc(i.x,r.offset.x),sc(i.y,r.offset.y)),i}const FC=({current:t})=>t?t.ownerDocument.defaultView:null,X2=(t,e)=>Math.abs(t-e);function DP(t,e){const n=X2(t.x,e.x),i=X2(t.y,e.y);return Math.sqrt(n**2+i**2)}class IC{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=uy(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,x=DP(g.offset,{x:0,y:0})>=3;if(!y&&!x)return;const{point:b}=g,{timestamp:w}=Gn;this.history.push({...b,timestamp:w});const{onStart:T,onMove:_}=this.handlers;y||(T&&T(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,g)},this.handlePointerMove=(g,y)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=cy(y,this.transformPagePoint),Yt.update(this.updatePoint,!0)},this.handlePointerUp=(g,y)=>{this.end();const{onEnd:x,onSessionEnd:b,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=uy(g.type==="pointercancel"?this.lastMoveEventInfo:cy(y,this.transformPagePoint),this.history);this.startEvent&&x&&x(g,T),b&&b(g,T)},!pb(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const l=gh(e),c=cy(l,this.transformPagePoint),{point:u}=c,{timestamp:h}=Gn;this.history=[{...u,timestamp:h}];const{onSessionStart:p}=n;p&&p(e,uy(c,this.history)),this.removeListeners=mh(md(this.contextWindow,"pointermove",this.handlePointerMove),md(this.contextWindow,"pointerup",this.handlePointerUp),md(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Va(this.updatePoint)}}function cy(t,e){return e?{point:e(t.point)}:t}function Z2(t,e){return{x:t.x-e.x,y:t.y-e.y}}function uy({point:t},e){return{point:t,delta:Z2(t,UC(e)),offset:Z2(t,PP(e)),velocity:OP(e,.1)}}function PP(t){return t[0]}function UC(t){return t[t.length-1]}function OP(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=UC(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>Bs(e)));)n--;if(!i)return{x:0,y:0};const a=zs(r.timestamp-i.timestamp);if(a===0)return{x:0,y:0};const l={x:(r.x-i.x)/a,y:(r.y-i.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function BP(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?sn(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?sn(n,t,i.max):Math.min(t,n)),t}function Q2(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function zP(t,{top:e,left:n,bottom:i,right:r}){return{x:Q2(t.x,n,r),y:Q2(t.y,e,i)}}function J2(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function FP(t,e){return{x:J2(t.x,e.x),y:J2(t.y,e.y)}}function IP(t,e){let n=.5;const i=li(t),r=li(e);return r>i?n=vc(e.min,e.max-i,t.min):i>r&&(n=vc(t.min,t.max-r,e.min)),Is(0,1,n)}function UP(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Cx=.35;function VP(t=Cx){return t===!1?t=0:t===!0&&(t=Cx),{x:K2(t,"left","right"),y:K2(t,"top","bottom")}}function K2(t,e,n){return{min:eM(t,e),max:eM(t,n)}}function eM(t,e){return typeof t=="number"?t:t[e]||0}const HP=new WeakMap;class GP{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=gn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(gh(p).point)},a=(p,g)=>{const{drag:y,dragPropagation:x,onDragStart:b}=this.getProps();if(y&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=zj(y),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),or(T=>{let _=this.getAxisMotionValue(T).get()||0;if(Zr.test(_)){const{projection:S}=this.visualElement;if(S&&S.layout){const E=S.layout.layoutBox[T];E&&(_=li(E)*(parseFloat(_)/100))}}this.originPoint[T]=_}),b&&Yt.postRender(()=>b(p,g)),mx(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},l=(p,g)=>{const{dragPropagation:y,dragDirectionLock:x,onDirectionLock:b,onDrag:w}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:T}=g;if(x&&this.currentDirection===null){this.currentDirection=WP(T),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",g.point,T),this.updateAxis("y",g.point,T),this.visualElement.render(),w&&w(p,g)},c=(p,g)=>this.stop(p,g),u=()=>or(p=>{var g;return this.getAnimationState(p)==="paused"&&((g=this.getAxisMotionValue(p).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new IC(e,{onSessionStart:r,onStart:a,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:FC(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:a}=this.getProps();a&&Yt.postRender(()=>a(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Bf(e,r,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(l=BP(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;n&&nc(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=zP(r.layoutBox,n):this.constraints=!1,this.elastic=VP(i),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&or(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=UP(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!nc(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const a=jP(i,r.root,this.visualElement.getTransformPagePoint());let l=FP(r.layout.layoutBox,a);if(n){const c=n(MP(l));this.hasMutatedConstraints=!!c,c&&(l=jC(c))}return l}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},h=or(p=>{if(!Bf(p,n,this.currentDirection))return;let g=u&&u[p]||{};l&&(g={min:0,max:0});const y=r?200:1e6,x=r?40:1e7,b={type:"inertia",velocity:i?e[p]:0,bounceStiffness:y,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...a,...g};return this.startAxisValueAnimation(p,b)});return Promise.all(h).then(c)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return mx(this.visualElement,e),i.start(Pb(e,i,0,n,this.visualElement,!1))}stopAnimation(){or(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){or(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){or(n=>{const{drag:i}=this.getProps();if(!Bf(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,a=this.getAxisMotionValue(n);if(r&&r.layout){const{min:l,max:c}=r.layout.layoutBox[n];a.set(e[n]-sn(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!nc(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};or(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const u=c.get();r[l]=IP({min:u,max:u},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),or(l=>{if(!Bf(l,e,null))return;const c=this.getAxisMotionValue(l),{min:u,max:h}=this.constraints[l];c.set(sn(u,h,r[l]))})}addListeners(){if(!this.visualElement.current)return;HP.set(this.visualElement,this);const e=this.visualElement.current,n=md(e,"pointerdown",u=>{const{drag:h,dragListener:p=!0}=this.getProps();h&&p&&this.start(u)}),i=()=>{const{dragConstraints:u}=this.getProps();nc(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,a=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Yt.read(i);const l=Fd(window,"resize",()=>this.scalePositionWithinConstraints()),c=r.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&(or(p=>{const g=this.getAxisMotionValue(p);g&&(this.originPoint[p]+=u[p].translate,g.set(g.get()+u[p].translate))}),this.visualElement.render())});return()=>{l(),n(),a(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:a=!1,dragElastic:l=Cx,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:a,dragElastic:l,dragMomentum:c}}}function Bf(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function WP(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class $P extends Ka{constructor(e){super(e),this.removeGroupControls=Oi,this.removeListeners=Oi,this.controls=new GP(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Oi}unmount(){this.removeGroupControls(),this.removeListeners()}}const tM=t=>(e,n)=>{t&&Yt.postRender(()=>t(e,n))};class qP extends Ka{constructor(){super(...arguments),this.removePointerDownListener=Oi}onPointerDown(e){this.session=new IC(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:FC(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:tM(e),onStart:tM(n),onMove:i,onEnd:(a,l)=>{delete this.session,r&&Yt.postRender(()=>r(a,l))}}}mount(){this.removePointerDownListener=md(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Tp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function nM(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const $u={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(it.test(t))t=parseFloat(t);else return t;const n=nM(t,e.target.x),i=nM(t,e.target.y);return`${n}% ${i}%`}},YP={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=Ha.parse(t);if(r.length>5)return i;const a=Ha.createTransformer(t),l=typeof r[0]!="number"?1:0,c=n.x.scale*e.x,u=n.y.scale*e.y;r[0+l]/=c,r[1+l]/=u;const h=sn(c,u,.5);return typeof r[2+l]=="number"&&(r[2+l]/=h),typeof r[3+l]=="number"&&(r[3+l]/=h),a(r)}};class XP extends k.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:a}=e;dD(ZP),a&&(n.group&&n.group.add(a),i&&i.register&&r&&i.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Tp.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:a}=this.props,l=i.projection;return l&&(l.isPresent=a,r||e.layoutDependency!==n||n===void 0||e.isPresent!==a?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||Yt.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),fb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function VC(t){const[e,n]=MA(),i=k.useContext(nb);return f.jsx(XP,{...t,layoutGroup:i,switchLayoutGroup:k.useContext(FA),isPresent:e,safeToRemove:n})}const ZP={borderRadius:{...$u,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:$u,borderTopRightRadius:$u,borderBottomLeftRadius:$u,borderBottomRightRadius:$u,boxShadow:YP};function QP(t,e,n){const i=Jn(t)?t:jd(t);return i.start(Pb("",i,e,n)),i.animation}function JP(t){return t instanceof SVGElement&&t.tagName!=="svg"}const KP=(t,e)=>t.depth-e.depth;class eO{constructor(){this.children=[],this.isDirty=!1}add(e){ab(this.children,e),this.isDirty=!0}remove(e){ob(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(KP),this.isDirty=!1,this.children.forEach(e)}}function tO(t,e){const n=Xr.now(),i=({timestamp:r})=>{const a=r-n;a>=e&&(Va(i),t(a-e))};return Yt.read(i,!0),()=>Va(i)}const HC=["TopLeft","TopRight","BottomLeft","BottomRight"],nO=HC.length,iM=t=>typeof t=="string"?parseFloat(t):t,rM=t=>typeof t=="number"||it.test(t);function iO(t,e,n,i,r,a){r?(t.opacity=sn(0,n.opacity!==void 0?n.opacity:1,rO(i)),t.opacityExit=sn(e.opacity!==void 0?e.opacity:1,0,sO(i))):a&&(t.opacity=sn(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let l=0;l<nO;l++){const c=`border${HC[l]}Radius`;let u=sM(e,c),h=sM(n,c);if(u===void 0&&h===void 0)continue;u||(u=0),h||(h=0),u===0||h===0||rM(u)===rM(h)?(t[c]=Math.max(sn(iM(u),iM(h),i),0),(Zr.test(h)||Zr.test(u))&&(t[c]+="%")):t[c]=h}(e.rotate||n.rotate)&&(t.rotate=sn(e.rotate||0,n.rotate||0,i))}function sM(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const rO=GC(0,.5,aC),sO=GC(.5,.95,Oi);function GC(t,e,n){return i=>i<t?0:i>e?1:n(vc(t,e,i))}function aM(t,e){t.min=e.min,t.max=e.max}function sr(t,e){aM(t.x,e.x),aM(t.y,e.y)}function oM(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function lM(t,e,n,i,r){return t-=e,t=$p(t,1/n,i),r!==void 0&&(t=$p(t,1/r,i)),t}function aO(t,e=0,n=1,i=.5,r,a=t,l=t){if(Zr.test(e)&&(e=parseFloat(e),e=sn(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=sn(a.min,a.max,i);t===a&&(c-=e),t.min=lM(t.min,e,n,c,r),t.max=lM(t.max,e,n,c,r)}function cM(t,e,[n,i,r],a,l){aO(t,e[n],e[i],e[r],e.scale,a,l)}const oO=["x","scaleX","originX"],lO=["y","scaleY","originY"];function uM(t,e,n,i){cM(t.x,e,oO,n?n.x:void 0,i?i.x:void 0),cM(t.y,e,lO,n?n.y:void 0,i?i.y:void 0)}function dM(t){return t.translate===0&&t.scale===1}function WC(t){return dM(t.x)&&dM(t.y)}function hM(t,e){return t.min===e.min&&t.max===e.max}function cO(t,e){return hM(t.x,e.x)&&hM(t.y,e.y)}function fM(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function $C(t,e){return fM(t.x,e.x)&&fM(t.y,e.y)}function pM(t){return li(t.x)/li(t.y)}function mM(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class uO{constructor(){this.members=[]}add(e){ab(this.members,e),e.scheduleRender()}remove(e){if(ob(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const a=this.members[r];if(a.isPresent!==!1){i=a;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function dO(t,e,n){let i="";const r=t.x.translate/e.x,a=t.y.translate/e.y,l=(n==null?void 0:n.z)||0;if((r||a||l)&&(i=`translate3d(${r}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:h,rotate:p,rotateX:g,rotateY:y,skewX:x,skewY:b}=n;h&&(i=`perspective(${h}px) ${i}`),p&&(i+=`rotate(${p}deg) `),g&&(i+=`rotateX(${g}deg) `),y&&(i+=`rotateY(${y}deg) `),x&&(i+=`skewX(${x}deg) `),b&&(i+=`skewY(${b}deg) `)}const c=t.x.scale*e.x,u=t.y.scale*e.y;return(c!==1||u!==1)&&(i+=`scale(${c}, ${u})`),i||"none"}const dy=["","X","Y","Z"],hO={visibility:"hidden"},gM=1e3;let fO=0;function hy(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function qC(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=KA(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Yt,!(r||a))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&qC(i)}function YC({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(l={},c=e==null?void 0:e()){this.id=fO++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(gO),this.nodes.forEach(wO),this.nodes.forEach(_O),this.nodes.forEach(yO)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new eO)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new cb),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const u=this.eventHandlers.get(l);u&&u.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=JP(l),this.instance=l;const{layoutId:u,layout:h,visualElement:p}=this.options;if(p&&!p.current&&p.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(h||u)&&(this.isLayoutDirty=!0),t){let g;const y=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=tO(y,250),Tp.hasAnimatedSinceResize&&(Tp.hasAnimatedSinceResize=!1,this.nodes.forEach(xM))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&p&&(u||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeLayoutChanged:x,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||p.getDefaultTransition()||AO,{onLayoutAnimationStart:T,onLayoutAnimationComplete:_}=p.getProps(),S=!this.targetLayout||!$C(this.targetLayout,b),E=!y&&x;if(this.options.layoutRoot||this.resumeFrom||E||y&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,E);const R={...ub(w,"layout"),onPlay:T,onComplete:_};(p.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R)}else y||xM(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Va(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(SO),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&qC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const g=this.path[p];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(yM);return}this.isUpdating||this.nodes.forEach(vO),this.isUpdating=!1,this.nodes.forEach(bO),this.nodes.forEach(pO),this.nodes.forEach(mO),this.clearAllSnapshots();const c=Xr.now();Gn.delta=Is(0,1e3/60,c-Gn.timestamp),Gn.timestamp=c,Gn.isProcessing=!0,iy.update.process(Gn),iy.preRender.process(Gn),iy.render.process(Gn),Gn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,fb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(xO),this.sharedNodes.forEach(MO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Yt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Yt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!li(this.snapshot.measuredBox.x)&&!li(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=gn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c){const u=i(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!r)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!WC(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,p=h!==this.prevTransformTemplateValue;l&&(c||Lo(this.latestValues)||p)&&(r(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return l&&(u=this.removeTransform(u)),CO(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:c}=this.options;if(!c)return gn();const u=c.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(NO))){const{scroll:p}=this.root;p&&(sc(u.x,p.offset.x),sc(u.y,p.offset.y))}return u}removeElementScroll(l){var c;const u=gn();if(sr(u,l),!((c=this.scroll)===null||c===void 0)&&c.wasRoot)return u;for(let h=0;h<this.path.length;h++){const p=this.path[h],{scroll:g,options:y}=p;p!==this.root&&g&&y.layoutScroll&&(g.wasRoot&&sr(u,l),sc(u.x,g.offset.x),sc(u.y,g.offset.y))}return u}applyTransform(l,c=!1){const u=gn();sr(u,l);for(let h=0;h<this.path.length;h++){const p=this.path[h];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&ac(u,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Lo(p.latestValues)&&ac(u,p.latestValues)}return Lo(this.latestValues)&&ac(u,this.latestValues),u}removeTransform(l){const c=gn();sr(c,l);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!Lo(h.latestValues))continue;Ex(h.latestValues)&&h.updateSnapshot();const p=gn(),g=h.measurePageBox();sr(p,g),uM(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,p)}return Lo(this.latestValues)&&uM(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Gn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var c;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==u;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!(!this.layout||!(g||y))){if(this.resolvedRelativeTargetAt=Gn.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=gn(),this.relativeTargetOrigin=gn(),yd(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),sr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=gn(),this.targetWithTransforms=gn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),LP(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):sr(this.target,this.layout.layoutBox),BC(this.target,this.targetDelta)):sr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=gn(),this.relativeTargetOrigin=gn(),yd(this.relativeTargetOrigin,this.target,x.target),sr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Ex(this.parent.latestValues)||OC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const c=this.getLead(),u=!!this.resumingFrom||this!==c;let h=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(h=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Gn.timestamp&&(h=!1),h)return;const{layout:p,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||g))return;sr(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,x=this.treeScale.y;kP(this.layoutCorrected,this.treeScale,this.path,u),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=gn());const{target:b}=c;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(oM(this.prevProjectionDelta.x,this.projectionDelta.x),oM(this.prevProjectionDelta.y,this.projectionDelta.y)),gd(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==x||!mM(this.projectionDelta.x,this.prevProjectionDelta.x)||!mM(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var c;if((c=this.options.visualElement)===null||c===void 0||c.scheduleRender(),l){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=rc(),this.projectionDelta=rc(),this.projectionDeltaWithTransform=rc()}setAnimationOrigin(l,c=!1){const u=this.snapshot,h=u?u.latestValues:{},p={...this.latestValues},g=rc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const y=gn(),x=u?u.source:void 0,b=this.layout?this.layout.source:void 0,w=x!==b,T=this.getStack(),_=!T||T.members.length<=1,S=!!(w&&!_&&this.options.crossfade===!0&&!this.path.some(EO));this.animationProgress=0;let E;this.mixTargetDelta=R=>{const A=R/1e3;vM(g.x,l.x,A),vM(g.y,l.y,A),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(yd(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),TO(this.relativeTarget,this.relativeTargetOrigin,y,A),E&&cO(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=gn()),sr(E,this.relativeTarget)),w&&(this.animationValues=p,iO(p,h,this.latestValues,A,S,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Va(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Yt.update(()=>{Tp.hasAnimatedSinceResize=!0,this.currentAnimation=QP(0,gM,{...l,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(gM),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:u,layout:h,latestValues:p}=l;if(!(!c||!u||!h)){if(this!==l&&this.layout&&h&&XC(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||gn();const g=li(this.layout.layoutBox.x);u.x.min=l.target.x.min,u.x.max=u.x.min+g;const y=li(this.layout.layoutBox.y);u.y.min=l.target.y.min,u.y.max=u.y.min+y}sr(c,u),ac(c,p),gd(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new uO),this.sharedNodes.get(l).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:c}=this.options;return c?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:c}=this.options;return c?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:u}=l;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const h={};u.z&&hy("z",l,h,this.animationValues);for(let p=0;p<dy.length;p++)hy(`rotate${dy[p]}`,l,h,this.animationValues),hy(`skew${dy[p]}`,l,h,this.animationValues);l.render();for(const p in h)l.setStaticValue(p,h[p]),this.animationValues&&(this.animationValues[p]=h[p]);l.scheduleRender()}getProjectionStyles(l){var c,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return hO;const h={visibility:""},p=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=Mp(l==null?void 0:l.pointerEvents)||"",h.transform=p?p(this.latestValues,""):"none",h;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=Mp(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Lo(this.latestValues)&&(w.transform=p?p({},""):"none",this.hasProjected=!1),w}const y=g.animationValues||g.latestValues;this.applyTransformsToTarget(),h.transform=dO(this.projectionDeltaWithTransform,this.treeScale,y),p&&(h.transform=p(y,h.transform));const{x,y:b}=this.projectionDelta;h.transformOrigin=`${x.origin*100}% ${b.origin*100}% 0`,g.animationValues?h.opacity=g===this?(u=(c=y.opacity)!==null&&c!==void 0?c:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:h.opacity=g===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const w in Pd){if(y[w]===void 0)continue;const{correct:T,applyTo:_,isCSSVariable:S}=Pd[w],E=h.transform==="none"?y[w]:T(y[w],g);if(_){const R=_.length;for(let A=0;A<R;A++)h[_[A]]=E}else S?this.options.visualElement.renderState.vars[w]=E:h[w]=E}return this.options.layoutId&&(h.pointerEvents=g===this?Mp(l==null?void 0:l.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var c;return(c=l.currentAnimation)===null||c===void 0?void 0:c.stop()}),this.root.nodes.forEach(yM),this.root.sharedNodes.clear()}}}function pO(t){t.updateLayout()}function mO(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:a}=t.options,l=n.source!==t.layout.source;a==="size"?or(g=>{const y=l?n.measuredBox[g]:n.layoutBox[g],x=li(y);y.min=i[g].min,y.max=y.min+x}):XC(a,n.layoutBox,i)&&or(g=>{const y=l?n.measuredBox[g]:n.layoutBox[g],x=li(i[g]);y.max=y.min+x,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+x)});const c=rc();gd(c,i,n.layoutBox);const u=rc();l?gd(u,t.applyTransform(r,!0),n.measuredBox):gd(u,i,n.layoutBox);const h=!WC(c);let p=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:y,layout:x}=g;if(y&&x){const b=gn();yd(b,n.layoutBox,y.layoutBox);const w=gn();yd(w,i,x.layoutBox),$C(b,w)||(p=!0),g.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=b,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:u,layoutDelta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:p})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function gO(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function yO(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function xO(t){t.clearSnapshot()}function yM(t){t.clearMeasurements()}function vO(t){t.isLayoutDirty=!1}function bO(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function xM(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function wO(t){t.resolveTargetDelta()}function _O(t){t.calcProjection()}function SO(t){t.resetSkewAndRotation()}function MO(t){t.removeLeadSnapshot()}function vM(t,e,n){t.translate=sn(e.translate,0,n),t.scale=sn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function bM(t,e,n,i){t.min=sn(e.min,n.min,i),t.max=sn(e.max,n.max,i)}function TO(t,e,n,i){bM(t.x,e.x,n.x,i),bM(t.y,e.y,n.y,i)}function EO(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const AO={duration:.45,ease:[.4,0,.1,1]},wM=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),_M=wM("applewebkit/")&&!wM("chrome/")?Math.round:Oi;function SM(t){t.min=_M(t.min),t.max=_M(t.max)}function CO(t){SM(t.x),SM(t.y)}function XC(t,e,n){return t==="position"||t==="preserve-aspect"&&!RP(pM(e),pM(n),.2)}function NO(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const RO=YC({attachResizeListener:(t,e)=>Fd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),fy={current:void 0},ZC=YC({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!fy.current){const t=new RO({});t.mount(window),t.setOptions({layoutScroll:!0}),fy.current=t}return fy.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),LO={pan:{Feature:qP},drag:{Feature:$P,ProjectionNode:ZC,MeasureLayout:VC}};function MM(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,a=i[r];a&&Yt.postRender(()=>a(e,gh(e)))}class kO extends Ka{mount(){const{current:e}=this.node;e&&(this.unmount=Ij(e,(n,i)=>(MM(this.node,i,"Start"),r=>MM(this.node,r,"End"))))}unmount(){}}class jO extends Ka{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=mh(Fd(this.node.current,"focus",()=>this.onFocus()),Fd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function TM(t,e,n){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),a=i[r];a&&Yt.postRender(()=>a(e,gh(e)))}class DO extends Ka{mount(){const{current:e}=this.node;e&&(this.unmount=Gj(e,(n,i)=>(TM(this.node,i,"Start"),(r,{success:a})=>TM(this.node,r,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Nx=new WeakMap,py=new WeakMap,PO=t=>{const e=Nx.get(t.target);e&&e(t)},OO=t=>{t.forEach(PO)};function BO({root:t,...e}){const n=t||document;py.has(n)||py.set(n,{});const i=py.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(OO,{root:t,...e})),i[r]}function zO(t,e,n){const i=BO(e);return Nx.set(t,n),i.observe(t),()=>{Nx.delete(t),i.unobserve(t)}}const FO={some:0,all:1};class IO extends Ka{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:a}=e,l={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:FO[r]},c=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,a&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:p,onViewportLeave:g}=this.node.getProps(),y=h?p:g;y&&y(u)};return zO(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(UO(e,n))&&this.startObserver()}unmount(){}}function UO({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const VO={inView:{Feature:IO},tap:{Feature:DO},focus:{Feature:jO},hover:{Feature:kO}},HO={layout:{ProjectionNode:ZC,MeasureLayout:VC}},Rx={current:null},QC={current:!1};function GO(){if(QC.current=!0,!!rb)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Rx.current=t.matches;t.addListener(e),e()}else Rx.current=!1}const WO=[...wC,Xn,Ha],$O=t=>WO.find(bC(t)),qO=new WeakMap;function YO(t,e,n){for(const i in e){const r=e[i],a=n[i];if(Jn(r))t.addValue(i,r);else if(Jn(a))t.addValue(i,jd(r,{owner:t}));else if(a!==r)if(t.hasValue(i)){const l=t.getValue(i);l.liveStyle===!0?l.jump(r):l.hasAnimated||l.set(r)}else{const l=t.getStaticValue(i);t.addValue(i,jd(l!==void 0?l:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const EM=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class XO{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:a,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=kb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=Xr.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,Yt.render(this.render,!1,!0))};const{latestValues:u,renderState:h,onUpdate:p}=l;this.onUpdate=p,this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=Sm(n),this.isVariantNode=BA(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(n,{},this);for(const x in y){const b=y[x];u[x]!==void 0&&Jn(b)&&b.set(u[x],!1)}}mount(e){this.current=e,qO.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),QC.current||GO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Rx.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Va(this.notifyUpdate),Va(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Ko.has(e);i&&this.onBindTransform&&this.onBindTransform();const r=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&Yt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),a(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in bc){const n=bc[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):gn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<EM.length;i++){const r=EM[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const a="on"+r,l=e[a];l&&(this.propEventSubscriptions[r]=this.on(r,l))}this.prevMotionValues=YO(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=jd(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(xC(r)||lC(r))?r=parseFloat(r):!$O(r)&&Ha.test(n)&&(r=mC(e,n)),this.setBaseTarget(e,Jn(r)?r.get():r)),Jn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const l=Eb(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);l&&(r=l[e])}if(i&&r!==void 0)return r;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!Jn(a)?a:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new cb),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class JC extends XO{constructor(){super(...arguments),this.KeyframeResolver=_C}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Jn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function ZO(t){return window.getComputedStyle(t)}class QO extends JC{constructor(){super(...arguments),this.type="html",this.renderInstance=YA}readValueFromInstance(e,n){if(Ko.has(n))return l5(e,n);{const i=ZO(e),r=(xb(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return zC(e,n)}build(e,n,i){wb(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return Ab(e,n,i)}}class JO extends JC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=gn,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&qA(this.current,this.renderState)}}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ko.has(n)){const i=pC(n);return i&&i.default||0}return n=XA.has(n)?n:yb(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return QA(e,n,i)}onBindTransform(){this.current&&!this.renderState.dimensions&&Yt.postRender(this.updateDimensions)}build(e,n,i){Mb(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,r){ZA(e,n,i,r)}mount(e){this.isSVGTag=Tb(e.tagName),super.mount(e)}}const KO=(t,e)=>Sb(t)?new JO(e):new QO(e,{allowProjection:t!==k.Fragment}),e6=PD({..._P,...VO,...LO,...HO},KO),Ge=Qj(e6),AM=t=>{let e;const n=new Set,i=(h,p)=>{const g=typeof h=="function"?h(e):h;if(!Object.is(g,e)){const y=e;e=p??(typeof g!="object"||g===null)?g:Object.assign({},e,g),n.forEach(x=>x(e,y))}},r=()=>e,c={setState:i,getState:r,getInitialState:()=>u,subscribe:h=>(n.add(h),()=>n.delete(h))},u=e=t(i,r,c);return c},t6=t=>t?AM(t):AM,n6=t=>t;function i6(t,e=n6){const n=ZS.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return ZS.useDebugValue(n),n}const CM=t=>{const e=t6(t),n=i=>i6(e,i);return Object.assign(n,e),n},Tm=t=>t?CM(t):CM,ns=Object.create(null);ns.open="0";ns.close="1";ns.ping="2";ns.pong="3";ns.message="4";ns.upgrade="5";ns.noop="6";const Ep=Object.create(null);Object.keys(ns).forEach(t=>{Ep[ns[t]]=t});const Lx={type:"error",data:"parser error"},KC=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",e3=typeof ArrayBuffer=="function",t3=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Ob=({type:t,data:e},n,i)=>KC&&e instanceof Blob?n?i(e):NM(e,i):e3&&(e instanceof ArrayBuffer||t3(e))?n?i(e):NM(new Blob([e]),i):i(ns[t]+(e||"")),NM=(t,e)=>{const n=new FileReader;return n.onload=function(){const i=n.result.split(",")[1];e("b"+(i||""))},n.readAsDataURL(t)};function RM(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let my;function r6(t,e){if(KC&&t.data instanceof Blob)return t.data.arrayBuffer().then(RM).then(e);if(e3&&(t.data instanceof ArrayBuffer||t3(t.data)))return e(RM(t.data));Ob(t,!1,n=>{my||(my=new TextEncoder),e(my.encode(n))})}const LM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",cd=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<LM.length;t++)cd[LM.charCodeAt(t)]=t;const s6=t=>{let e=t.length*.75,n=t.length,i,r=0,a,l,c,u;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const h=new ArrayBuffer(e),p=new Uint8Array(h);for(i=0;i<n;i+=4)a=cd[t.charCodeAt(i)],l=cd[t.charCodeAt(i+1)],c=cd[t.charCodeAt(i+2)],u=cd[t.charCodeAt(i+3)],p[r++]=a<<2|l>>4,p[r++]=(l&15)<<4|c>>2,p[r++]=(c&3)<<6|u&63;return h},a6=typeof ArrayBuffer=="function",Bb=(t,e)=>{if(typeof t!="string")return{type:"message",data:n3(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:o6(t.substring(1),e)}:Ep[n]?t.length>1?{type:Ep[n],data:t.substring(1)}:{type:Ep[n]}:Lx},o6=(t,e)=>{if(a6){const n=s6(t);return n3(n,e)}else return{base64:!0,data:t}},n3=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},i3="",l6=(t,e)=>{const n=t.length,i=new Array(n);let r=0;t.forEach((a,l)=>{Ob(a,!1,c=>{i[l]=c,++r===n&&e(i.join(i3))})})},c6=(t,e)=>{const n=t.split(i3),i=[];for(let r=0;r<n.length;r++){const a=Bb(n[r],e);if(i.push(a),a.type==="error")break}return i};function u6(){return new TransformStream({transform(t,e){r6(t,n=>{const i=n.length;let r;if(i<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,i);else if(i<65536){r=new Uint8Array(3);const a=new DataView(r.buffer);a.setUint8(0,126),a.setUint16(1,i)}else{r=new Uint8Array(9);const a=new DataView(r.buffer);a.setUint8(0,127),a.setBigUint64(1,BigInt(i))}t.data&&typeof t.data!="string"&&(r[0]|=128),e.enqueue(r),e.enqueue(n)})}})}let gy;function zf(t){return t.reduce((e,n)=>e+n.length,0)}function Ff(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let i=0;for(let r=0;r<e;r++)n[r]=t[0][i++],i===t[0].length&&(t.shift(),i=0);return t.length&&i<t[0].length&&(t[0]=t[0].slice(i)),n}function d6(t,e){gy||(gy=new TextDecoder);const n=[];let i=0,r=-1,a=!1;return new TransformStream({transform(l,c){for(n.push(l);;){if(i===0){if(zf(n)<1)break;const u=Ff(n,1);a=(u[0]&128)===128,r=u[0]&127,r<126?i=3:r===126?i=1:i=2}else if(i===1){if(zf(n)<2)break;const u=Ff(n,2);r=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),i=3}else if(i===2){if(zf(n)<8)break;const u=Ff(n,8),h=new DataView(u.buffer,u.byteOffset,u.length),p=h.getUint32(0);if(p>Math.pow(2,21)-1){c.enqueue(Lx);break}r=p*Math.pow(2,32)+h.getUint32(4),i=3}else{if(zf(n)<r)break;const u=Ff(n,r);c.enqueue(Bb(a?u:gy.decode(u),e)),i=0}if(r===0||r>t){c.enqueue(Lx);break}}}})}const r3=4;function En(t){if(t)return h6(t)}function h6(t){for(var e in En.prototype)t[e]=En.prototype[e];return t}En.prototype.on=En.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};En.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};En.prototype.off=En.prototype.removeListener=En.prototype.removeAllListeners=En.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var i,r=0;r<n.length;r++)if(i=n[r],i===e||i.fn===e){n.splice(r,1);break}return n.length===0&&delete this._callbacks["$"+t],this};En.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(n){n=n.slice(0);for(var i=0,r=n.length;i<r;++i)n[i].apply(this,e)}return this};En.prototype.emitReserved=En.prototype.emit;En.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};En.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Em=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),cr=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),f6="arraybuffer";function s3(t,...e){return e.reduce((n,i)=>(t.hasOwnProperty(i)&&(n[i]=t[i]),n),{})}const p6=cr.setTimeout,m6=cr.clearTimeout;function Am(t,e){e.useNativeTimers?(t.setTimeoutFn=p6.bind(cr),t.clearTimeoutFn=m6.bind(cr)):(t.setTimeoutFn=cr.setTimeout.bind(cr),t.clearTimeoutFn=cr.clearTimeout.bind(cr))}const g6=1.33;function y6(t){return typeof t=="string"?x6(t):Math.ceil((t.byteLength||t.size)*g6)}function x6(t){let e=0,n=0;for(let i=0,r=t.length;i<r;i++)e=t.charCodeAt(i),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(i++,n+=4);return n}function a3(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function v6(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function b6(t){let e={},n=t.split("&");for(let i=0,r=n.length;i<r;i++){let a=n[i].split("=");e[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return e}class w6 extends Error{constructor(e,n,i){super(e),this.description=n,this.context=i,this.type="TransportError"}}class zb extends En{constructor(e){super(),this.writable=!1,Am(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,i){return super.emitReserved("error",new w6(e,n,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=Bb(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=v6(e);return n.length?"?"+n:""}}class _6 extends zb{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||n()})),this.writable||(i++,this.once("drain",function(){--i||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};c6(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,l6(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=a3()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let o3=!1;try{o3=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const S6=o3;function M6(){}class T6 extends _6{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let i=location.port;i||(i=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port}}doWrite(e,n){const i=this.request({method:"POST",data:e});i.on("success",n),i.on("error",(r,a)=>{this.onError("xhr post error",r,a)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,i)=>{this.onError("xhr poll error",n,i)}),this.pollXhr=e}}let fc=class Ap extends En{constructor(e,n,i){super(),this.createRequest=e,Am(this,i),this._opts=i,this._method=i.method||"GET",this._uri=n,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var e;const n=s3(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(n);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let r in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(r)&&i.setRequestHeader(r,this._opts.extraHeaders[r])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var r;i.readyState===3&&((r=this._opts.cookieJar)===null||r===void 0||r.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(r){this.setTimeoutFn(()=>{this._onError(r)},0);return}typeof document<"u"&&(this._index=Ap.requestsCount++,Ap.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=M6,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ap.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};fc.requestsCount=0;fc.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",kM);else if(typeof addEventListener=="function"){const t="onpagehide"in cr?"pagehide":"unload";addEventListener(t,kM,!1)}}function kM(){for(let t in fc.requests)fc.requests.hasOwnProperty(t)&&fc.requests[t].abort()}const E6=function(){const t=l3({xdomain:!1});return t&&t.responseType!==null}();class A6 extends T6{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=E6&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new fc(l3,this.uri(),e)}}function l3(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||S6))return new XMLHttpRequest}catch{}if(!e)try{return new cr[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const c3=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class C6 extends zb{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,i=c3?{}:s3(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,i)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const i=e[n],r=n===e.length-1;Ob(i,this.supportsBinary,a=>{try{this.doWrite(i,a)}catch{}r&&Em(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=a3()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const yy=cr.WebSocket||cr.MozWebSocket;class N6 extends C6{createSocket(e,n,i){return c3?new yy(e,n,i):n?new yy(e,n):new yy(e)}doWrite(e,n){this.ws.send(n)}}class R6 extends zb{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=d6(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=e.readable.pipeThrough(n).getReader(),r=u6();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const a=()=>{i.read().then(({done:c,value:u})=>{c||(this.onPacket(u),a())}).catch(c=>{})};a();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const i=e[n],r=n===e.length-1;this._writer.write(i).then(()=>{r&&Em(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const L6={websocket:N6,webtransport:R6,polling:A6},k6=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,j6=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function kx(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),i=t.indexOf("]");n!=-1&&i!=-1&&(t=t.substring(0,n)+t.substring(n,i).replace(/:/g,";")+t.substring(i,t.length));let r=k6.exec(t||""),a={},l=14;for(;l--;)a[j6[l]]=r[l]||"";return n!=-1&&i!=-1&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=D6(a,a.path),a.queryKey=P6(a,a.query),a}function D6(t,e){const n=/\/{2,9}/g,i=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&i.splice(0,1),e.slice(-1)=="/"&&i.splice(i.length-1,1),i}function P6(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,r,a){r&&(n[r]=a)}),n}const jx=typeof addEventListener=="function"&&typeof removeEventListener=="function",Cp=[];jx&&addEventListener("offline",()=>{Cp.forEach(t=>t())},!1);class Ba extends En{constructor(e,n){if(super(),this.binaryType=f6,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const i=kx(e);n.hostname=i.host,n.secure=i.protocol==="https"||i.protocol==="wss",n.port=i.port,i.query&&(n.query=i.query)}else n.host&&(n.hostname=kx(n.host).host);Am(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(i=>{const r=i.prototype.name;this.transports.push(r),this._transportsByName[r]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=b6(this.opts.query)),jx&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Cp.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=r3,n.transport=e,this.id&&(n.sid=this.id);const i=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Ba.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Ba.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let i=0;i<this.writeBuffer.length;i++){const r=this.writeBuffer[i].data;if(r&&(n+=y6(r)),i>0&&n>this._maxPayload)return this.writeBuffer.slice(0,i);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Em(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,i){return this._sendPacket("message",e,n,i),this}send(e,n,i){return this._sendPacket("message",e,n,i),this}_sendPacket(e,n,i,r){if(typeof n=="function"&&(r=n,n=void 0),typeof i=="function"&&(r=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const a={type:e,data:n,options:i};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},i=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():e()}):this.upgrading?i():e()),this}_onError(e){if(Ba.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),jx&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=Cp.indexOf(this._offlineEventListener);i!==-1&&Cp.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}Ba.protocol=r3;class O6 extends Ba{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),i=!1;Ba.priorWebsocketSuccess=!1;const r=()=>{i||(n.send([{type:"ping",data:"probe"}]),n.once("packet",g=>{if(!i)if(g.type==="pong"&&g.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Ba.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(p(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const y=new Error("probe error");y.transport=n.name,this.emitReserved("upgradeError",y)}}))};function a(){i||(i=!0,p(),n.close(),n=null)}const l=g=>{const y=new Error("probe error: "+g);y.transport=n.name,a(),this.emitReserved("upgradeError",y)};function c(){l("transport closed")}function u(){l("socket closed")}function h(g){n&&g.name!==n.name&&a()}const p=()=>{n.removeListener("open",r),n.removeListener("error",l),n.removeListener("close",c),this.off("close",u),this.off("upgrading",h)};n.once("open",r),n.once("error",l),n.once("close",c),this.once("close",u),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{i||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let i=0;i<e.length;i++)~this.transports.indexOf(e[i])&&n.push(e[i]);return n}}let B6=class extends O6{constructor(e,n={}){const i=typeof e=="object"?e:n;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(r=>L6[r]).filter(r=>!!r)),super(e,i)}};function z6(t,e="",n){let i=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),i=kx(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const a=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+a+":"+i.port+e,i.href=i.protocol+"://"+a+(n&&n.port===i.port?"":":"+i.port),i}const F6=typeof ArrayBuffer=="function",I6=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,u3=Object.prototype.toString,U6=typeof Blob=="function"||typeof Blob<"u"&&u3.call(Blob)==="[object BlobConstructor]",V6=typeof File=="function"||typeof File<"u"&&u3.call(File)==="[object FileConstructor]";function Fb(t){return F6&&(t instanceof ArrayBuffer||I6(t))||U6&&t instanceof Blob||V6&&t instanceof File}function Np(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,i=t.length;n<i;n++)if(Np(t[n]))return!0;return!1}if(Fb(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Np(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Np(t[n]))return!0;return!1}function H6(t){const e=[],n=t.data,i=t;return i.data=Dx(n,e),i.attachments=e.length,{packet:i,buffers:e}}function Dx(t,e){if(!t)return t;if(Fb(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let i=0;i<t.length;i++)n[i]=Dx(t[i],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=Dx(t[i],e));return n}return t}function G6(t,e){return t.data=Px(t.data,e),delete t.attachments,t}function Px(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=Px(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=Px(t[n],e));return t}const W6=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],$6=5;var Tt;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Tt||(Tt={}));class q6{constructor(e){this.replacer=e}encode(e){return(e.type===Tt.EVENT||e.type===Tt.ACK)&&Np(e)?this.encodeAsBinary({type:e.type===Tt.EVENT?Tt.BINARY_EVENT:Tt.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===Tt.BINARY_EVENT||e.type===Tt.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=H6(e),i=this.encodeAsString(n.packet),r=n.buffers;return r.unshift(i),r}}function jM(t){return Object.prototype.toString.call(t)==="[object Object]"}class Ib extends En{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const i=n.type===Tt.BINARY_EVENT;i||n.type===Tt.BINARY_ACK?(n.type=i?Tt.EVENT:Tt.ACK,this.reconstructor=new Y6(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Fb(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const i={type:Number(e.charAt(0))};if(Tt[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===Tt.BINARY_EVENT||i.type===Tt.BINARY_ACK){const a=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const l=e.substring(a,n);if(l!=Number(l)||e.charAt(n)!=="-")throw new Error("Illegal attachments");i.attachments=Number(l)}if(e.charAt(n+1)==="/"){const a=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););i.nsp=e.substring(a,n)}else i.nsp="/";const r=e.charAt(n+1);if(r!==""&&Number(r)==r){const a=n+1;for(;++n;){const l=e.charAt(n);if(l==null||Number(l)!=l){--n;break}if(n===e.length)break}i.id=Number(e.substring(a,n+1))}if(e.charAt(++n)){const a=this.tryParse(e.substr(n));if(Ib.isPayloadValid(i.type,a))i.data=a;else throw new Error("invalid payload")}return i}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case Tt.CONNECT:return jM(n);case Tt.DISCONNECT:return n===void 0;case Tt.CONNECT_ERROR:return typeof n=="string"||jM(n);case Tt.EVENT:case Tt.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&W6.indexOf(n[0])===-1);case Tt.ACK:case Tt.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Y6{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=G6(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const X6=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Ib,Encoder:q6,get PacketType(){return Tt},protocol:$6},Symbol.toStringTag,{value:"Module"}));function Cr(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const Z6=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class d3 extends En{constructor(e,n,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Cr(e,"open",this.onopen.bind(this)),Cr(e,"packet",this.onpacket.bind(this)),Cr(e,"error",this.onerror.bind(this)),Cr(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var i,r,a;if(Z6.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const l={type:Tt.EVENT,data:n};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const p=this.ids++,g=n.pop();this._registerAckCallback(p,g),l.id=p}const c=(r=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||r===void 0?void 0:r.writable,u=this.connected&&!(!((a=this.io.engine)===null||a===void 0)&&a._hasPingExpired());return this.flags.volatile&&!c||(u?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(e,n){var i;const r=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(r===void 0){this.acks[e]=n;return}const a=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===e&&this.sendBuffer.splice(c,1);n.call(this,new Error("operation has timed out"))},r),l=(...c)=>{this.io.clearTimeoutFn(a),n.apply(this,c)};l.withError=!0,this.acks[e]=l}emitWithAck(e,...n){return new Promise((i,r)=>{const a=(l,c)=>l?r(l):i(c);a.withError=!0,n.push(a),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((r,...a)=>i!==this._queue[0]?void 0:(r!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(r)):(this._queue.shift(),n&&n(null,...a)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Tt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(i=>String(i.id)===e)){const i=this.acks[e];delete this.acks[e],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Tt.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Tt.EVENT:case Tt.BINARY_EVENT:this.onevent(e);break;case Tt.ACK:case Tt.BINARY_ACK:this.onack(e);break;case Tt.DISCONNECT:this.ondisconnect();break;case Tt.CONNECT_ERROR:this.destroy();const i=new Error(e.data.message);i.data=e.data.data,this.emitReserved("connect_error",i);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const i of n)i.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let i=!1;return function(...r){i||(i=!0,n.packet({type:Tt.ACK,id:e,data:r}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Tt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let i=0;i<n.length;i++)if(e===n[i])return n.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let i=0;i<n.length;i++)if(e===n[i])return n.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const i of n)i.apply(this,e.data)}}}function Gc(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Gc.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-n:t+n}return Math.min(t,this.max)|0};Gc.prototype.reset=function(){this.attempts=0};Gc.prototype.setMin=function(t){this.ms=t};Gc.prototype.setMax=function(t){this.max=t};Gc.prototype.setJitter=function(t){this.jitter=t};class Ox extends En{constructor(e,n){var i;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Am(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((i=n.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new Gc({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const r=n.parser||X6;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new B6(this.uri,this.opts);const n=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const r=Cr(n,"open",function(){i.onopen(),e&&e()}),a=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),e?e(c):this.maybeReconnectOnOpen()},l=Cr(n,"error",a);if(this._timeout!==!1){const c=this._timeout,u=this.setTimeoutFn(()=>{r(),a(new Error("timeout")),n.close()},c);this.opts.autoUnref&&u.unref(),this.subs.push(()=>{this.clearTimeoutFn(u)})}return this.subs.push(r),this.subs.push(l),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Cr(e,"ping",this.onping.bind(this)),Cr(e,"data",this.ondata.bind(this)),Cr(e,"error",this.onerror.bind(this)),Cr(e,"close",this.onclose.bind(this)),Cr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Em(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let i=this.nsps[e];return i?this._autoConnect&&!i.active&&i.connect():(i=new d3(this,e,n),this.nsps[e]=i),i}_destroy(e){const n=Object.keys(this.nsps);for(const i of n)if(this.nsps[i].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let i=0;i<n.length;i++)this.engine.write(n[i],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(r=>{r?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",r)):e.onreconnect()}))},n);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const qu={};function xd(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=z6(t,e.path||"/socket.io"),i=n.source,r=n.id,a=n.path,l=qu[r]&&a in qu[r].nsps,c=e.forceNew||e["force new connection"]||e.multiplex===!1||l;let u;return c?u=new Ox(i,e):(qu[r]||(qu[r]=new Ox(i,e)),u=qu[r]),n.query&&!e.query&&(e.query=n.queryKey),u.socket(n.path,e)}Object.assign(xd,{Manager:Ox,Socket:d3,io:xd,connect:xd});let Q6={data:""},J6=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||Q6,K6=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,eB=/\/\*[^]*?\*\/|  +/g,DM=/\n+/g,ka=(t,e)=>{let n="",i="",r="";for(let a in t){let l=t[a];a[0]=="@"?a[1]=="i"?n=a+" "+l+";":i+=a[1]=="f"?ka(l,a):a+"{"+ka(l,a[1]=="k"?"":e)+"}":typeof l=="object"?i+=ka(l,e?e.replace(/([^,])+/g,c=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,c):c?c+" "+u:u)):a):l!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=ka.p?ka.p(a,l):a+":"+l+";")}return n+(e&&r?e+"{"+r+"}":r)+i},As={},h3=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+h3(t[n]);return e}return t},tB=(t,e,n,i,r)=>{let a=h3(t),l=As[a]||(As[a]=(u=>{let h=0,p=11;for(;h<u.length;)p=101*p+u.charCodeAt(h++)>>>0;return"go"+p})(a));if(!As[l]){let u=a!==t?t:(h=>{let p,g,y=[{}];for(;p=K6.exec(h.replace(eB,""));)p[4]?y.shift():p[3]?(g=p[3].replace(DM," ").trim(),y.unshift(y[0][g]=y[0][g]||{})):y[0][p[1]]=p[2].replace(DM," ").trim();return y[0]})(t);As[l]=ka(r?{["@keyframes "+l]:u}:u,n?"":"."+l)}let c=n&&As.g?As.g:null;return n&&(As.g=As[l]),((u,h,p,g)=>{g?h.data=h.data.replace(g,u):h.data.indexOf(u)===-1&&(h.data=p?u+h.data:h.data+u)})(As[l],e,i,c),l},nB=(t,e,n)=>t.reduce((i,r,a)=>{let l=e[a];if(l&&l.call){let c=l(n),u=c&&c.props&&c.props.className||/^go/.test(c)&&c;l=u?"."+u:c&&typeof c=="object"?c.props?"":ka(c,""):c===!1?"":c}return i+r+(l??"")},"");function Cm(t){let e=this||{},n=t.call?t(e.p):t;return tB(n.unshift?n.raw?nB(n,[].slice.call(arguments,1),e.p):n.reduce((i,r)=>Object.assign(i,r&&r.call?r(e.p):r),{}):n,J6(e.target),e.g,e.o,e.k)}let f3,Bx,zx;Cm.bind({g:1});let Us=Cm.bind({k:1});function iB(t,e,n,i){ka.p=e,f3=t,Bx=n,zx=i}function eo(t,e){let n=this||{};return function(){let i=arguments;function r(a,l){let c=Object.assign({},a),u=c.className||r.className;n.p=Object.assign({theme:Bx&&Bx()},c),n.o=/ *go\d+/.test(u),c.className=Cm.apply(n,i)+(u?" "+u:"");let h=t;return t[0]&&(h=c.as||t,delete c.as),zx&&h[0]&&zx(c),f3(h,c)}return r}}var rB=t=>typeof t=="function",Fx=(t,e)=>rB(t)?t(e):t,sB=(()=>{let t=0;return()=>(++t).toString()})(),aB=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),oB=20,p3=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,oB)};case 1:return{...t,toasts:t.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:n}=e;return p3(t,{type:t.toasts.find(a=>a.id===n.id)?1:0,toast:n});case 3:let{toastId:i}=e;return{...t,toasts:t.toasts.map(a=>a.id===i||i===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let r=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+r}))}}},lB=[],xy={toasts:[],pausedAt:void 0},Ub=t=>{xy=p3(xy,t),lB.forEach(e=>{e(xy)})},cB=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||sB()}),yh=t=>(e,n)=>{let i=cB(e,t,n);return Ub({type:2,toast:i}),i.id},Rn=(t,e)=>yh("blank")(t,e);Rn.error=yh("error");Rn.success=yh("success");Rn.loading=yh("loading");Rn.custom=yh("custom");Rn.dismiss=t=>{Ub({type:3,toastId:t})};Rn.remove=t=>Ub({type:4,toastId:t});Rn.promise=(t,e,n)=>{let i=Rn.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(r=>{let a=e.success?Fx(e.success,r):void 0;return a?Rn.success(a,{id:i,...n,...n==null?void 0:n.success}):Rn.dismiss(i),r}).catch(r=>{let a=e.error?Fx(e.error,r):void 0;a?Rn.error(a,{id:i,...n,...n==null?void 0:n.error}):Rn.dismiss(i)}),t};var uB=Us`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,dB=Us`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,hB=Us`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,fB=eo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${uB} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${dB} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${hB} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,pB=Us`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,mB=eo("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${pB} 1s linear infinite;
`,gB=Us`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,yB=Us`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,xB=eo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${gB} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${yB} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,vB=eo("div")`
  position: absolute;
`,bB=eo("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,wB=Us`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,_B=eo("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${wB} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,SB=({toast:t})=>{let{icon:e,type:n,iconTheme:i}=t;return e!==void 0?typeof e=="string"?k.createElement(_B,null,e):e:n==="blank"?null:k.createElement(bB,null,k.createElement(mB,{...i}),n!=="loading"&&k.createElement(vB,null,n==="error"?k.createElement(fB,{...i}):k.createElement(xB,{...i})))},MB=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,TB=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,EB="0%{opacity:0;} 100%{opacity:1;}",AB="0%{opacity:1;} 100%{opacity:0;}",CB=eo("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,NB=eo("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,RB=(t,e)=>{let n=t.includes("top")?1:-1,[i,r]=aB()?[EB,AB]:[MB(n),TB(n)];return{animation:e?`${Us(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Us(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};k.memo(({toast:t,position:e,style:n,children:i})=>{let r=t.height?RB(t.position||e||"top-center",t.visible):{opacity:0},a=k.createElement(SB,{toast:t}),l=k.createElement(NB,{...t.ariaProps},Fx(t.message,t));return k.createElement(CB,{className:t.className,style:{...r,...n,...t.style}},typeof i=="function"?i({icon:a,message:l}):k.createElement(k.Fragment,null,a,l))});iB(k.createElement);Cm`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;var rt=Rn;function m3(t,e){return function(){return t.apply(e,arguments)}}const{toString:LB}=Object.prototype,{getPrototypeOf:Vb}=Object,{iterator:Nm,toStringTag:g3}=Symbol,Rm=(t=>e=>{const n=LB.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Dr=t=>(t=t.toLowerCase(),e=>Rm(e)===t),Lm=t=>e=>typeof e===t,{isArray:Wc}=Array,Id=Lm("undefined");function kB(t){return t!==null&&!Id(t)&&t.constructor!==null&&!Id(t.constructor)&&pi(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const y3=Dr("ArrayBuffer");function jB(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&y3(t.buffer),e}const DB=Lm("string"),pi=Lm("function"),x3=Lm("number"),km=t=>t!==null&&typeof t=="object",PB=t=>t===!0||t===!1,Rp=t=>{if(Rm(t)!=="object")return!1;const e=Vb(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(g3 in t)&&!(Nm in t)},OB=Dr("Date"),BB=Dr("File"),zB=Dr("Blob"),FB=Dr("FileList"),IB=t=>km(t)&&pi(t.pipe),UB=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||pi(t.append)&&((e=Rm(t))==="formdata"||e==="object"&&pi(t.toString)&&t.toString()==="[object FormData]"))},VB=Dr("URLSearchParams"),[HB,GB,WB,$B]=["ReadableStream","Request","Response","Headers"].map(Dr),qB=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function xh(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,r;if(typeof t!="object"&&(t=[t]),Wc(t))for(i=0,r=t.length;i<r;i++)e.call(null,t[i],i,t);else{const a=n?Object.getOwnPropertyNames(t):Object.keys(t),l=a.length;let c;for(i=0;i<l;i++)c=a[i],e.call(null,t[c],c,t)}}function v3(t,e){e=e.toLowerCase();const n=Object.keys(t);let i=n.length,r;for(;i-- >0;)if(r=n[i],e===r.toLowerCase())return r;return null}const Oo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,b3=t=>!Id(t)&&t!==Oo;function Ix(){const{caseless:t}=b3(this)&&this||{},e={},n=(i,r)=>{const a=t&&v3(e,r)||r;Rp(e[a])&&Rp(i)?e[a]=Ix(e[a],i):Rp(i)?e[a]=Ix({},i):Wc(i)?e[a]=i.slice():e[a]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&xh(arguments[i],n);return e}const YB=(t,e,n,{allOwnKeys:i}={})=>(xh(e,(r,a)=>{n&&pi(r)?t[a]=m3(r,n):t[a]=r},{allOwnKeys:i}),t),XB=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),ZB=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},QB=(t,e,n,i)=>{let r,a,l;const c={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),a=r.length;a-- >0;)l=r[a],(!i||i(l,t,e))&&!c[l]&&(e[l]=t[l],c[l]=!0);t=n!==!1&&Vb(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},JB=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},KB=t=>{if(!t)return null;if(Wc(t))return t;let e=t.length;if(!x3(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},ez=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Vb(Uint8Array)),tz=(t,e)=>{const i=(t&&t[Nm]).call(t);let r;for(;(r=i.next())&&!r.done;){const a=r.value;e.call(t,a[0],a[1])}},nz=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},iz=Dr("HTMLFormElement"),rz=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,r){return i.toUpperCase()+r}),PM=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),sz=Dr("RegExp"),w3=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};xh(n,(r,a)=>{let l;(l=e(r,a,t))!==!1&&(i[a]=l||r)}),Object.defineProperties(t,i)},az=t=>{w3(t,(e,n)=>{if(pi(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(pi(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},oz=(t,e)=>{const n={},i=r=>{r.forEach(a=>{n[a]=!0})};return Wc(t)?i(t):i(String(t).split(e)),n},lz=()=>{},cz=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function uz(t){return!!(t&&pi(t.append)&&t[g3]==="FormData"&&t[Nm])}const dz=t=>{const e=new Array(10),n=(i,r)=>{if(km(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[r]=i;const a=Wc(i)?[]:{};return xh(i,(l,c)=>{const u=n(l,r+1);!Id(u)&&(a[c]=u)}),e[r]=void 0,a}}return i};return n(t,0)},hz=Dr("AsyncFunction"),fz=t=>t&&(km(t)||pi(t))&&pi(t.then)&&pi(t.catch),_3=((t,e)=>t?setImmediate:e?((n,i)=>(Oo.addEventListener("message",({source:r,data:a})=>{r===Oo&&a===n&&i.length&&i.shift()()},!1),r=>{i.push(r),Oo.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",pi(Oo.postMessage)),pz=typeof queueMicrotask<"u"?queueMicrotask.bind(Oo):typeof process<"u"&&process.nextTick||_3,mz=t=>t!=null&&pi(t[Nm]),ue={isArray:Wc,isArrayBuffer:y3,isBuffer:kB,isFormData:UB,isArrayBufferView:jB,isString:DB,isNumber:x3,isBoolean:PB,isObject:km,isPlainObject:Rp,isReadableStream:HB,isRequest:GB,isResponse:WB,isHeaders:$B,isUndefined:Id,isDate:OB,isFile:BB,isBlob:zB,isRegExp:sz,isFunction:pi,isStream:IB,isURLSearchParams:VB,isTypedArray:ez,isFileList:FB,forEach:xh,merge:Ix,extend:YB,trim:qB,stripBOM:XB,inherits:ZB,toFlatObject:QB,kindOf:Rm,kindOfTest:Dr,endsWith:JB,toArray:KB,forEachEntry:tz,matchAll:nz,isHTMLForm:iz,hasOwnProperty:PM,hasOwnProp:PM,reduceDescriptors:w3,freezeMethods:az,toObjectSet:oz,toCamelCase:rz,noop:lz,toFiniteNumber:cz,findKey:v3,global:Oo,isContextDefined:b3,isSpecCompliantForm:uz,toJSONObject:dz,isAsyncFn:hz,isThenable:fz,setImmediate:_3,asap:pz,isIterable:mz};function ht(t,e,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r,this.status=r.status?r.status:null)}ue.inherits(ht,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ue.toJSONObject(this.config),code:this.code,status:this.status}}});const S3=ht.prototype,M3={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{M3[t]={value:t}});Object.defineProperties(ht,M3);Object.defineProperty(S3,"isAxiosError",{value:!0});ht.from=(t,e,n,i,r,a)=>{const l=Object.create(S3);return ue.toFlatObject(t,l,function(u){return u!==Error.prototype},c=>c!=="isAxiosError"),ht.call(l,t.message,e,n,i,r),l.cause=t,l.name=t.name,a&&Object.assign(l,a),l};const gz=null;function Ux(t){return ue.isPlainObject(t)||ue.isArray(t)}function T3(t){return ue.endsWith(t,"[]")?t.slice(0,-2):t}function OM(t,e,n){return t?t.concat(e).map(function(r,a){return r=T3(r),!n&&a?"["+r+"]":r}).join(n?".":""):e}function yz(t){return ue.isArray(t)&&!t.some(Ux)}const xz=ue.toFlatObject(ue,{},null,function(e){return/^is[A-Z]/.test(e)});function jm(t,e,n){if(!ue.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=ue.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,T){return!ue.isUndefined(T[w])});const i=n.metaTokens,r=n.visitor||p,a=n.dots,l=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&ue.isSpecCompliantForm(e);if(!ue.isFunction(r))throw new TypeError("visitor must be a function");function h(b){if(b===null)return"";if(ue.isDate(b))return b.toISOString();if(!u&&ue.isBlob(b))throw new ht("Blob is not supported. Use a Buffer instead.");return ue.isArrayBuffer(b)||ue.isTypedArray(b)?u&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function p(b,w,T){let _=b;if(b&&!T&&typeof b=="object"){if(ue.endsWith(w,"{}"))w=i?w:w.slice(0,-2),b=JSON.stringify(b);else if(ue.isArray(b)&&yz(b)||(ue.isFileList(b)||ue.endsWith(w,"[]"))&&(_=ue.toArray(b)))return w=T3(w),_.forEach(function(E,R){!(ue.isUndefined(E)||E===null)&&e.append(l===!0?OM([w],R,a):l===null?w:w+"[]",h(E))}),!1}return Ux(b)?!0:(e.append(OM(T,w,a),h(b)),!1)}const g=[],y=Object.assign(xz,{defaultVisitor:p,convertValue:h,isVisitable:Ux});function x(b,w){if(!ue.isUndefined(b)){if(g.indexOf(b)!==-1)throw Error("Circular reference detected in "+w.join("."));g.push(b),ue.forEach(b,function(_,S){(!(ue.isUndefined(_)||_===null)&&r.call(e,_,ue.isString(S)?S.trim():S,w,y))===!0&&x(_,w?w.concat(S):[S])}),g.pop()}}if(!ue.isObject(t))throw new TypeError("data must be an object");return x(t),e}function BM(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function Hb(t,e){this._pairs=[],t&&jm(t,this,e)}const E3=Hb.prototype;E3.append=function(e,n){this._pairs.push([e,n])};E3.toString=function(e){const n=e?function(i){return e.call(this,i,BM)}:BM;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function vz(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function A3(t,e,n){if(!e)return t;const i=n&&n.encode||vz;ue.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let a;if(r?a=r(e,n):a=ue.isURLSearchParams(e)?e.toString():new Hb(e,n).toString(i),a){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class zM{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ue.forEach(this.handlers,function(i){i!==null&&e(i)})}}const C3={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},bz=typeof URLSearchParams<"u"?URLSearchParams:Hb,wz=typeof FormData<"u"?FormData:null,_z=typeof Blob<"u"?Blob:null,Sz={isBrowser:!0,classes:{URLSearchParams:bz,FormData:wz,Blob:_z},protocols:["http","https","file","blob","url","data"]},Gb=typeof window<"u"&&typeof document<"u",Vx=typeof navigator=="object"&&navigator||void 0,Mz=Gb&&(!Vx||["ReactNative","NativeScript","NS"].indexOf(Vx.product)<0),Tz=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ez=Gb&&window.location.href||"http://localhost",Az=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Gb,hasStandardBrowserEnv:Mz,hasStandardBrowserWebWorkerEnv:Tz,navigator:Vx,origin:Ez},Symbol.toStringTag,{value:"Module"})),Zn={...Az,...Sz};function Cz(t,e){return jm(t,new Zn.classes.URLSearchParams,Object.assign({visitor:function(n,i,r,a){return Zn.isNode&&ue.isBuffer(n)?(this.append(i,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function Nz(t){return ue.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Rz(t){const e={},n=Object.keys(t);let i;const r=n.length;let a;for(i=0;i<r;i++)a=n[i],e[a]=t[a];return e}function N3(t){function e(n,i,r,a){let l=n[a++];if(l==="__proto__")return!0;const c=Number.isFinite(+l),u=a>=n.length;return l=!l&&ue.isArray(r)?r.length:l,u?(ue.hasOwnProp(r,l)?r[l]=[r[l],i]:r[l]=i,!c):((!r[l]||!ue.isObject(r[l]))&&(r[l]=[]),e(n,i,r[l],a)&&ue.isArray(r[l])&&(r[l]=Rz(r[l])),!c)}if(ue.isFormData(t)&&ue.isFunction(t.entries)){const n={};return ue.forEachEntry(t,(i,r)=>{e(Nz(i),r,n,0)}),n}return null}function Lz(t,e,n){if(ue.isString(t))try{return(e||JSON.parse)(t),ue.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const vh={transitional:C3,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const i=n.getContentType()||"",r=i.indexOf("application/json")>-1,a=ue.isObject(e);if(a&&ue.isHTMLForm(e)&&(e=new FormData(e)),ue.isFormData(e))return r?JSON.stringify(N3(e)):e;if(ue.isArrayBuffer(e)||ue.isBuffer(e)||ue.isStream(e)||ue.isFile(e)||ue.isBlob(e)||ue.isReadableStream(e))return e;if(ue.isArrayBufferView(e))return e.buffer;if(ue.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Cz(e,this.formSerializer).toString();if((c=ue.isFileList(e))||i.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return jm(c?{"files[]":e}:e,u&&new u,this.formSerializer)}}return a||r?(n.setContentType("application/json",!1),Lz(e)):e}],transformResponse:[function(e){const n=this.transitional||vh.transitional,i=n&&n.forcedJSONParsing,r=this.responseType==="json";if(ue.isResponse(e)||ue.isReadableStream(e))return e;if(e&&ue.isString(e)&&(i&&!this.responseType||r)){const l=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(c){if(l)throw c.name==="SyntaxError"?ht.from(c,ht.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Zn.classes.FormData,Blob:Zn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ue.forEach(["delete","get","head","post","put","patch"],t=>{vh.headers[t]={}});const kz=ue.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),jz=t=>{const e={};let n,i,r;return t&&t.split(`
`).forEach(function(l){r=l.indexOf(":"),n=l.substring(0,r).trim().toLowerCase(),i=l.substring(r+1).trim(),!(!n||e[n]&&kz[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},FM=Symbol("internals");function Yu(t){return t&&String(t).trim().toLowerCase()}function Lp(t){return t===!1||t==null?t:ue.isArray(t)?t.map(Lp):String(t)}function Dz(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const Pz=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function vy(t,e,n,i,r){if(ue.isFunction(i))return i.call(this,e,n);if(r&&(e=n),!!ue.isString(e)){if(ue.isString(i))return e.indexOf(i)!==-1;if(ue.isRegExp(i))return i.test(e)}}function Oz(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function Bz(t,e){const n=ue.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(r,a,l){return this[i].call(this,e,r,a,l)},configurable:!0})})}let mi=class{constructor(e){e&&this.set(e)}set(e,n,i){const r=this;function a(c,u,h){const p=Yu(u);if(!p)throw new Error("header name must be a non-empty string");const g=ue.findKey(r,p);(!g||r[g]===void 0||h===!0||h===void 0&&r[g]!==!1)&&(r[g||u]=Lp(c))}const l=(c,u)=>ue.forEach(c,(h,p)=>a(h,p,u));if(ue.isPlainObject(e)||e instanceof this.constructor)l(e,n);else if(ue.isString(e)&&(e=e.trim())&&!Pz(e))l(jz(e),n);else if(ue.isObject(e)&&ue.isIterable(e)){let c={},u,h;for(const p of e){if(!ue.isArray(p))throw TypeError("Object iterator must return a key-value pair");c[h=p[0]]=(u=c[h])?ue.isArray(u)?[...u,p[1]]:[u,p[1]]:p[1]}l(c,n)}else e!=null&&a(n,e,i);return this}get(e,n){if(e=Yu(e),e){const i=ue.findKey(this,e);if(i){const r=this[i];if(!n)return r;if(n===!0)return Dz(r);if(ue.isFunction(n))return n.call(this,r,i);if(ue.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Yu(e),e){const i=ue.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||vy(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let r=!1;function a(l){if(l=Yu(l),l){const c=ue.findKey(i,l);c&&(!n||vy(i,i[c],c,n))&&(delete i[c],r=!0)}}return ue.isArray(e)?e.forEach(a):a(e),r}clear(e){const n=Object.keys(this);let i=n.length,r=!1;for(;i--;){const a=n[i];(!e||vy(this,this[a],a,e,!0))&&(delete this[a],r=!0)}return r}normalize(e){const n=this,i={};return ue.forEach(this,(r,a)=>{const l=ue.findKey(i,a);if(l){n[l]=Lp(r),delete n[a];return}const c=e?Oz(a):String(a).trim();c!==a&&delete n[a],n[c]=Lp(r),i[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return ue.forEach(this,(i,r)=>{i!=null&&i!==!1&&(n[r]=e&&ue.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(r=>i.set(r)),i}static accessor(e){const i=(this[FM]=this[FM]={accessors:{}}).accessors,r=this.prototype;function a(l){const c=Yu(l);i[c]||(Bz(r,l),i[c]=!0)}return ue.isArray(e)?e.forEach(a):a(e),this}};mi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ue.reduceDescriptors(mi.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});ue.freezeMethods(mi);function by(t,e){const n=this||vh,i=e||n,r=mi.from(i.headers);let a=i.data;return ue.forEach(t,function(c){a=c.call(n,a,r.normalize(),e?e.status:void 0)}),r.normalize(),a}function R3(t){return!!(t&&t.__CANCEL__)}function $c(t,e,n){ht.call(this,t??"canceled",ht.ERR_CANCELED,e,n),this.name="CanceledError"}ue.inherits($c,ht,{__CANCEL__:!0});function L3(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new ht("Request failed with status code "+n.status,[ht.ERR_BAD_REQUEST,ht.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function zz(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Fz(t,e){t=t||10;const n=new Array(t),i=new Array(t);let r=0,a=0,l;return e=e!==void 0?e:1e3,function(u){const h=Date.now(),p=i[a];l||(l=h),n[r]=u,i[r]=h;let g=a,y=0;for(;g!==r;)y+=n[g++],g=g%t;if(r=(r+1)%t,r===a&&(a=(a+1)%t),h-l<e)return;const x=p&&h-p;return x?Math.round(y*1e3/x):void 0}}function Iz(t,e){let n=0,i=1e3/e,r,a;const l=(h,p=Date.now())=>{n=p,r=null,a&&(clearTimeout(a),a=null),t.apply(null,h)};return[(...h)=>{const p=Date.now(),g=p-n;g>=i?l(h,p):(r=h,a||(a=setTimeout(()=>{a=null,l(r)},i-g)))},()=>r&&l(r)]}const qp=(t,e,n=3)=>{let i=0;const r=Fz(50,250);return Iz(a=>{const l=a.loaded,c=a.lengthComputable?a.total:void 0,u=l-i,h=r(u),p=l<=c;i=l;const g={loaded:l,total:c,progress:c?l/c:void 0,bytes:u,rate:h||void 0,estimated:h&&c&&p?(c-l)/h:void 0,event:a,lengthComputable:c!=null,[e?"download":"upload"]:!0};t(g)},n)},IM=(t,e)=>{const n=t!=null;return[i=>e[0]({lengthComputable:n,total:t,loaded:i}),e[1]]},UM=t=>(...e)=>ue.asap(()=>t(...e)),Uz=Zn.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Zn.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Zn.origin),Zn.navigator&&/(msie|trident)/i.test(Zn.navigator.userAgent)):()=>!0,Vz=Zn.hasStandardBrowserEnv?{write(t,e,n,i,r,a){const l=[t+"="+encodeURIComponent(e)];ue.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),ue.isString(i)&&l.push("path="+i),ue.isString(r)&&l.push("domain="+r),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Hz(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Gz(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function k3(t,e,n){let i=!Hz(e);return t&&(i||n==!1)?Gz(t,e):e}const VM=t=>t instanceof mi?{...t}:t;function $o(t,e){e=e||{};const n={};function i(h,p,g,y){return ue.isPlainObject(h)&&ue.isPlainObject(p)?ue.merge.call({caseless:y},h,p):ue.isPlainObject(p)?ue.merge({},p):ue.isArray(p)?p.slice():p}function r(h,p,g,y){if(ue.isUndefined(p)){if(!ue.isUndefined(h))return i(void 0,h,g,y)}else return i(h,p,g,y)}function a(h,p){if(!ue.isUndefined(p))return i(void 0,p)}function l(h,p){if(ue.isUndefined(p)){if(!ue.isUndefined(h))return i(void 0,h)}else return i(void 0,p)}function c(h,p,g){if(g in e)return i(h,p);if(g in t)return i(void 0,h)}const u={url:a,method:a,data:a,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:c,headers:(h,p,g)=>r(VM(h),VM(p),g,!0)};return ue.forEach(Object.keys(Object.assign({},t,e)),function(p){const g=u[p]||r,y=g(t[p],e[p],p);ue.isUndefined(y)&&g!==c||(n[p]=y)}),n}const j3=t=>{const e=$o({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:r,xsrfCookieName:a,headers:l,auth:c}=e;e.headers=l=mi.from(l),e.url=A3(k3(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&l.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let u;if(ue.isFormData(n)){if(Zn.hasStandardBrowserEnv||Zn.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((u=l.getContentType())!==!1){const[h,...p]=u?u.split(";").map(g=>g.trim()).filter(Boolean):[];l.setContentType([h||"multipart/form-data",...p].join("; "))}}if(Zn.hasStandardBrowserEnv&&(i&&ue.isFunction(i)&&(i=i(e)),i||i!==!1&&Uz(e.url))){const h=r&&a&&Vz.read(a);h&&l.set(r,h)}return e},Wz=typeof XMLHttpRequest<"u",$z=Wz&&function(t){return new Promise(function(n,i){const r=j3(t);let a=r.data;const l=mi.from(r.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:h}=r,p,g,y,x,b;function w(){x&&x(),b&&b(),r.cancelToken&&r.cancelToken.unsubscribe(p),r.signal&&r.signal.removeEventListener("abort",p)}let T=new XMLHttpRequest;T.open(r.method.toUpperCase(),r.url,!0),T.timeout=r.timeout;function _(){if(!T)return;const E=mi.from("getAllResponseHeaders"in T&&T.getAllResponseHeaders()),A={data:!c||c==="text"||c==="json"?T.responseText:T.response,status:T.status,statusText:T.statusText,headers:E,config:t,request:T};L3(function(j){n(j),w()},function(j){i(j),w()},A),T=null}"onloadend"in T?T.onloadend=_:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(_)},T.onabort=function(){T&&(i(new ht("Request aborted",ht.ECONNABORTED,t,T)),T=null)},T.onerror=function(){i(new ht("Network Error",ht.ERR_NETWORK,t,T)),T=null},T.ontimeout=function(){let R=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const A=r.transitional||C3;r.timeoutErrorMessage&&(R=r.timeoutErrorMessage),i(new ht(R,A.clarifyTimeoutError?ht.ETIMEDOUT:ht.ECONNABORTED,t,T)),T=null},a===void 0&&l.setContentType(null),"setRequestHeader"in T&&ue.forEach(l.toJSON(),function(R,A){T.setRequestHeader(A,R)}),ue.isUndefined(r.withCredentials)||(T.withCredentials=!!r.withCredentials),c&&c!=="json"&&(T.responseType=r.responseType),h&&([y,b]=qp(h,!0),T.addEventListener("progress",y)),u&&T.upload&&([g,x]=qp(u),T.upload.addEventListener("progress",g),T.upload.addEventListener("loadend",x)),(r.cancelToken||r.signal)&&(p=E=>{T&&(i(!E||E.type?new $c(null,t,T):E),T.abort(),T=null)},r.cancelToken&&r.cancelToken.subscribe(p),r.signal&&(r.signal.aborted?p():r.signal.addEventListener("abort",p)));const S=zz(r.url);if(S&&Zn.protocols.indexOf(S)===-1){i(new ht("Unsupported protocol "+S+":",ht.ERR_BAD_REQUEST,t));return}T.send(a||null)})},qz=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let i=new AbortController,r;const a=function(h){if(!r){r=!0,c();const p=h instanceof Error?h:this.reason;i.abort(p instanceof ht?p:new $c(p instanceof Error?p.message:p))}};let l=e&&setTimeout(()=>{l=null,a(new ht(`timeout ${e} of ms exceeded`,ht.ETIMEDOUT))},e);const c=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(h=>{h.unsubscribe?h.unsubscribe(a):h.removeEventListener("abort",a)}),t=null)};t.forEach(h=>h.addEventListener("abort",a));const{signal:u}=i;return u.unsubscribe=()=>ue.asap(c),u}},Yz=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let i=0,r;for(;i<n;)r=i+e,yield t.slice(i,r),i=r},Xz=async function*(t,e){for await(const n of Zz(t))yield*Yz(n,e)},Zz=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:i}=await e.read();if(n)break;yield i}}finally{await e.cancel()}},HM=(t,e,n,i)=>{const r=Xz(t,e);let a=0,l,c=u=>{l||(l=!0,i&&i(u))};return new ReadableStream({async pull(u){try{const{done:h,value:p}=await r.next();if(h){c(),u.close();return}let g=p.byteLength;if(n){let y=a+=g;n(y)}u.enqueue(new Uint8Array(p))}catch(h){throw c(h),h}},cancel(u){return c(u),r.return()}},{highWaterMark:2})},Dm=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",D3=Dm&&typeof ReadableStream=="function",Qz=Dm&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),P3=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Jz=D3&&P3(()=>{let t=!1;const e=new Request(Zn.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),GM=64*1024,Hx=D3&&P3(()=>ue.isReadableStream(new Response("").body)),Yp={stream:Hx&&(t=>t.body)};Dm&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Yp[e]&&(Yp[e]=ue.isFunction(t[e])?n=>n[e]():(n,i)=>{throw new ht(`Response type '${e}' is not supported`,ht.ERR_NOT_SUPPORT,i)})})})(new Response);const Kz=async t=>{if(t==null)return 0;if(ue.isBlob(t))return t.size;if(ue.isSpecCompliantForm(t))return(await new Request(Zn.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(ue.isArrayBufferView(t)||ue.isArrayBuffer(t))return t.byteLength;if(ue.isURLSearchParams(t)&&(t=t+""),ue.isString(t))return(await Qz(t)).byteLength},eF=async(t,e)=>{const n=ue.toFiniteNumber(t.getContentLength());return n??Kz(e)},tF=Dm&&(async t=>{let{url:e,method:n,data:i,signal:r,cancelToken:a,timeout:l,onDownloadProgress:c,onUploadProgress:u,responseType:h,headers:p,withCredentials:g="same-origin",fetchOptions:y}=j3(t);h=h?(h+"").toLowerCase():"text";let x=qz([r,a&&a.toAbortSignal()],l),b;const w=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let T;try{if(u&&Jz&&n!=="get"&&n!=="head"&&(T=await eF(p,i))!==0){let A=new Request(e,{method:"POST",body:i,duplex:"half"}),N;if(ue.isFormData(i)&&(N=A.headers.get("content-type"))&&p.setContentType(N),A.body){const[j,O]=IM(T,qp(UM(u)));i=HM(A.body,GM,j,O)}}ue.isString(g)||(g=g?"include":"omit");const _="credentials"in Request.prototype;b=new Request(e,{...y,signal:x,method:n.toUpperCase(),headers:p.normalize().toJSON(),body:i,duplex:"half",credentials:_?g:void 0});let S=await fetch(b);const E=Hx&&(h==="stream"||h==="response");if(Hx&&(c||E&&w)){const A={};["status","statusText","headers"].forEach(L=>{A[L]=S[L]});const N=ue.toFiniteNumber(S.headers.get("content-length")),[j,O]=c&&IM(N,qp(UM(c),!0))||[];S=new Response(HM(S.body,GM,j,()=>{O&&O(),w&&w()}),A)}h=h||"text";let R=await Yp[ue.findKey(Yp,h)||"text"](S,t);return!E&&w&&w(),await new Promise((A,N)=>{L3(A,N,{data:R,headers:mi.from(S.headers),status:S.status,statusText:S.statusText,config:t,request:b})})}catch(_){throw w&&w(),_&&_.name==="TypeError"&&/Load failed|fetch/i.test(_.message)?Object.assign(new ht("Network Error",ht.ERR_NETWORK,t,b),{cause:_.cause||_}):ht.from(_,_&&_.code,t,b)}}),Gx={http:gz,xhr:$z,fetch:tF};ue.forEach(Gx,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const WM=t=>`- ${t}`,nF=t=>ue.isFunction(t)||t===null||t===!1,O3={getAdapter:t=>{t=ue.isArray(t)?t:[t];const{length:e}=t;let n,i;const r={};for(let a=0;a<e;a++){n=t[a];let l;if(i=n,!nF(n)&&(i=Gx[(l=String(n)).toLowerCase()],i===void 0))throw new ht(`Unknown adapter '${l}'`);if(i)break;r[l||"#"+a]=i}if(!i){const a=Object.entries(r).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let l=e?a.length>1?`since :
`+a.map(WM).join(`
`):" "+WM(a[0]):"as no adapter specified";throw new ht("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return i},adapters:Gx};function wy(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new $c(null,t)}function $M(t){return wy(t),t.headers=mi.from(t.headers),t.data=by.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),O3.getAdapter(t.adapter||vh.adapter)(t).then(function(i){return wy(t),i.data=by.call(t,t.transformResponse,i),i.headers=mi.from(i.headers),i},function(i){return R3(i)||(wy(t),i&&i.response&&(i.response.data=by.call(t,t.transformResponse,i.response),i.response.headers=mi.from(i.response.headers))),Promise.reject(i)})}const B3="1.9.0",Pm={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Pm[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const qM={};Pm.transitional=function(e,n,i){function r(a,l){return"[Axios v"+B3+"] Transitional option '"+a+"'"+l+(i?". "+i:"")}return(a,l,c)=>{if(e===!1)throw new ht(r(l," has been removed"+(n?" in "+n:"")),ht.ERR_DEPRECATED);return n&&!qM[l]&&(qM[l]=!0,console.warn(r(l," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(a,l,c):!0}};Pm.spelling=function(e){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function iF(t,e,n){if(typeof t!="object")throw new ht("options must be an object",ht.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let r=i.length;for(;r-- >0;){const a=i[r],l=e[a];if(l){const c=t[a],u=c===void 0||l(c,a,t);if(u!==!0)throw new ht("option "+a+" must be "+u,ht.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ht("Unknown option "+a,ht.ERR_BAD_OPTION)}}const kp={assertOptions:iF,validators:Pm},Ur=kp.validators;let Io=class{constructor(e){this.defaults=e||{},this.interceptors={request:new zM,response:new zM}}async request(e,n){try{return await this._request(e,n)}catch(i){if(i instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const a=r.stack?r.stack.replace(/^.+\n/,""):"";try{i.stack?a&&!String(i.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+a):i.stack=a}catch{}}throw i}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=$o(this.defaults,n);const{transitional:i,paramsSerializer:r,headers:a}=n;i!==void 0&&kp.assertOptions(i,{silentJSONParsing:Ur.transitional(Ur.boolean),forcedJSONParsing:Ur.transitional(Ur.boolean),clarifyTimeoutError:Ur.transitional(Ur.boolean)},!1),r!=null&&(ue.isFunction(r)?n.paramsSerializer={serialize:r}:kp.assertOptions(r,{encode:Ur.function,serialize:Ur.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),kp.assertOptions(n,{baseUrl:Ur.spelling("baseURL"),withXsrfToken:Ur.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let l=a&&ue.merge(a.common,a[n.method]);a&&ue.forEach(["delete","get","head","post","put","patch","common"],b=>{delete a[b]}),n.headers=mi.concat(l,a);const c=[];let u=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(n)===!1||(u=u&&w.synchronous,c.unshift(w.fulfilled,w.rejected))});const h=[];this.interceptors.response.forEach(function(w){h.push(w.fulfilled,w.rejected)});let p,g=0,y;if(!u){const b=[$M.bind(this),void 0];for(b.unshift.apply(b,c),b.push.apply(b,h),y=b.length,p=Promise.resolve(n);g<y;)p=p.then(b[g++],b[g++]);return p}y=c.length;let x=n;for(g=0;g<y;){const b=c[g++],w=c[g++];try{x=b(x)}catch(T){w.call(this,T);break}}try{p=$M.call(this,x)}catch(b){return Promise.reject(b)}for(g=0,y=h.length;g<y;)p=p.then(h[g++],h[g++]);return p}getUri(e){e=$o(this.defaults,e);const n=k3(e.baseURL,e.url,e.allowAbsoluteUrls);return A3(n,e.params,e.paramsSerializer)}};ue.forEach(["delete","get","head","options"],function(e){Io.prototype[e]=function(n,i){return this.request($o(i||{},{method:e,url:n,data:(i||{}).data}))}});ue.forEach(["post","put","patch"],function(e){function n(i){return function(a,l,c){return this.request($o(c||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:l}))}}Io.prototype[e]=n(),Io.prototype[e+"Form"]=n(!0)});let rF=class z3{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const i=this;this.promise.then(r=>{if(!i._listeners)return;let a=i._listeners.length;for(;a-- >0;)i._listeners[a](r);i._listeners=null}),this.promise.then=r=>{let a;const l=new Promise(c=>{i.subscribe(c),a=c}).then(r);return l.cancel=function(){i.unsubscribe(a)},l},e(function(a,l,c){i.reason||(i.reason=new $c(a,l,c),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=i=>{e.abort(i)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new z3(function(r){e=r}),cancel:e}}};function sF(t){return function(n){return t.apply(null,n)}}function aF(t){return ue.isObject(t)&&t.isAxiosError===!0}const Wx={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Wx).forEach(([t,e])=>{Wx[e]=t});function F3(t){const e=new Io(t),n=m3(Io.prototype.request,e);return ue.extend(n,Io.prototype,e,{allOwnKeys:!0}),ue.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return F3($o(t,r))},n}const Lt=F3(vh);Lt.Axios=Io;Lt.CanceledError=$c;Lt.CancelToken=rF;Lt.isCancel=R3;Lt.VERSION=B3;Lt.toFormData=jm;Lt.AxiosError=ht;Lt.Cancel=Lt.CanceledError;Lt.all=function(e){return Promise.all(e)};Lt.spread=sF;Lt.isAxiosError=aF;Lt.mergeConfig=$o;Lt.AxiosHeaders=mi;Lt.formToJSON=t=>N3(ue.isHTMLForm(t)?new FormData(t):t);Lt.getAdapter=O3.getAdapter;Lt.HttpStatusCode=Wx;Lt.default=Lt;const{Axios:zq,AxiosError:Fq,CanceledError:Iq,isCancel:Uq,CancelToken:Vq,VERSION:Hq,all:Gq,Cancel:Wq,isAxiosError:$q,spread:qq,toFormData:Yq,AxiosHeaders:Xq,HttpStatusCode:Zq,formToJSON:Qq,getAdapter:Jq,mergeConfig:Kq}=Lt,St=Lt.create({baseURL:"http://localhost:5000",withCredentials:!0,headers:{"Content-Type":"application/json"}});St.interceptors.response.use(t=>t,async t=>{var n;const e=t.config;if(((n=t.response)==null?void 0:n.status)===401&&!e._retry){e._retry=!0;try{return await Lt.post("http://localhost:5000/client/refresh-token",{},{withCredentials:!0}),St(e)}catch(i){return console.error("Token refresh failed:",i),localStorage.removeItem("clientId"),Promise.reject(i)}}return Promise.reject(t)});const Vr="http://localhost:5000",pr=Tm((t,e)=>({doctor:null,doctors:[],currentDoctor:null,isLoading:!1,error:null,isAuthenticated:!1,isSigningUp:!1,isLoggingIn:!1,isUpdatingProfile:!1,isCheckingAuth:!0,isFetchingDoctors:!1,isFetchingDoctor:!1,clearError:()=>t({error:null}),register:async n=>{var i,r;t({isSigningUp:!0,error:null});try{const l=(await St.post(`${Vr}/doctor/register`,n,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})).data.data;return localStorage.setItem("doctorId",l._id),t({isSigningUp:!1,doctor:l,isAuthenticated:!0}),rt.success("Account created successfully! Please verify your OTP."),{success:!0,doctorId:l._id}}catch(a){const l=((r=(i=a.response)==null?void 0:i.data)==null?void 0:r.message)||"Registration failed";return t({isSigningUp:!1,error:l}),rt.error(l),{success:!1,error:l}}},verifyOtp:async(n,i)=>{var r,a;t({isLoading:!0,error:null});try{const l=await St.post(`${Vr}/doctor/verify-otp`,{doctorId:n,otp:i},{withCredentials:!0});return t({isLoading:!1,isAuthenticated:!0}),rt.success("OTP verified successfully!"),{success:!0}}catch(l){const c=((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"OTP verification failed";return t({isLoading:!1,error:c}),rt.error(c),{success:!1,error:c}}},verifyEmail:async(n,i)=>{var r,a;t({isLoading:!0,error:null});try{const l=await St.post(`${Vr}/doctor/verify-email`,{email:n,otp:i},{headers:{"Content-Type":"application/json"},withCredentials:!0});return t({isLoading:!1}),rt.success("Email verified successfully!"),{success:!0,message:l.data.data.message}}catch(l){const c=((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Email verification failed";return t({isLoading:!1,error:c}),rt.error(c),{success:!1,error:c}}},login:async n=>{var i,r;t({isLoggingIn:!0,error:null});try{const a=await St.post(`${Vr}/doctor/login`,n,{withCredentials:!0}),{doctor:l,accessToken:c,refreshToken:u}=a.data.data;return localStorage.setItem("doctorId",l._id),c&&localStorage.setItem("doctorAccessToken",c),u&&localStorage.setItem("doctorRefreshToken",u),t({isLoggingIn:!1,doctor:l,isAuthenticated:!0}),rt.success("Logged in successfully!"),{success:!0}}catch(a){const l=((r=(i=a.response)==null?void 0:i.data)==null?void 0:r.message)||"Login failed";return t({isLoggingIn:!1,error:l,isAuthenticated:!1}),rt.error(l),{success:!1,error:l}}},logout:async()=>{var n,i;t({isLoading:!0,error:null});try{return await St.post(`${Vr}/doctor/logout`,{},{withCredentials:!0}),localStorage.removeItem("doctorId"),localStorage.removeItem("doctorAccessToken"),localStorage.removeItem("doctorRefreshToken"),t({isLoading:!1,doctor:null,isAuthenticated:!1}),rt.success("Logged out successfully!"),{success:!0}}catch(r){const a=((i=(n=r.response)==null?void 0:n.data)==null?void 0:i.message)||"Logout failed";return localStorage.removeItem("doctorId"),localStorage.removeItem("doctorAccessToken"),localStorage.removeItem("doctorRefreshToken"),t({isLoading:!1,error:a,doctor:null,isAuthenticated:!1}),rt.error(a),{success:!1}}},checkAuth:async()=>{console.log("Checking Docter"),t({isCheckingAuth:!0});try{const n=await St.get(`${Vr}/doctor/me`,{withCredentials:!0});return console.log(n.data.data),t({doctor:n.data.data,isAuthenticated:!0}),{success:!0}}catch(n){return console.error("Error in checkAuth:",n),localStorage.removeItem("doctorId"),localStorage.removeItem("doctorAccessToken"),localStorage.removeItem("doctorRefreshToken"),t({doctor:null,isAuthenticated:!1}),{success:!1}}finally{t({isCheckingAuth:!1})}},updateProfile:async n=>{var i,r;t({isUpdatingProfile:!0,error:null});try{const a=await St.patch(`${Vr}/doctor/update`,n,{withCredentials:!0});return t({isUpdatingProfile:!1,doctor:a.data.data}),rt.success("Profile updated successfully!"),{success:!0}}catch(a){const l=((r=(i=a.response)==null?void 0:i.data)==null?void 0:r.message)||"Profile update failed";return t({isUpdatingProfile:!1,error:l}),rt.error(l),{success:!1,error:l}}},getCurrentDoctor:async()=>{var n,i;t({isFetchingDoctor:!0,error:null});try{const r=await St.get(`${Vr}/doctor/me`,{withCredentials:!0});return t({currentDoctor:r.data.data,isFetchingDoctor:!1}),{success:!0,data:r.data.data}}catch(r){const a=((i=(n=r.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to fetch current doctor";return t({isFetchingDoctor:!1,error:a}),{success:!1,error:a}}},getAllDoctors:async(n={})=>{var i,r;t({isFetchingDoctors:!0,error:null});try{const a=`${Vr}/doctor`,l=await St.get(a,{withCredentials:!0});return t({doctors:l.data.data.doctors,isFetchingDoctors:!1}),{success:!0,data:l.data.data.doctors,pagination:l.data.data.pagination}}catch(a){const l=((r=(i=a.response)==null?void 0:i.data)==null?void 0:r.message)||"Failed to fetch doctors";return t({isFetchingDoctors:!1,error:l}),rt.error(l),{success:!1,error:l}}},getDoctorById:async n=>{var i,r;t({isFetchingDoctor:!0,error:null});try{const a=await St.get(`${Vr}/doctor/doctors/${n}`,{withCredentials:!0});return t({isFetchingDoctor:!1}),{success:!0,data:a.data.data}}catch(a){const l=((r=(i=a.response)==null?void 0:i.data)==null?void 0:r.message)||"Failed to fetch doctor";return t({isFetchingDoctor:!1,error:l}),{success:!1,error:l}}},searchDoctors:async n=>await e().getAllDoctors(n),getDoctorsBySpecialization:async(n,i={})=>await e().getAllDoctors({specialization:n,...i}),getVerifiedDoctors:async(n={})=>await e().getAllDoctors({verified:"true",...n})})),I3=k.createContext(),vn=()=>k.useContext(I3),oF=({children:t})=>{const[e,n]=k.useState(()=>localStorage.getItem("theme")||"light");k.useEffect(()=>{document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e)},[e]);const i=()=>{n(r=>r==="light"?"dark":"light")};return f.jsx(I3.Provider,{value:{theme:e,toggleTheme:i},children:t})},U3=()=>{const t=Ja(),{theme:e}=vn(),{login:n,doctor:i,error:r,isLoading:a,clearError:l}=pr(),[c,u]=k.useState({email:"",password:""}),[h,p]=k.useState({});k.useEffect(()=>{i&&t("/doctordashboard")},[i,t]);const g=b=>{const{name:w,value:T}=b.target;u({...c,[w]:T}),h[w]&&p({...h,[w]:""})},y=()=>{const b={};return c.email.trim()||(b.email="Email is required"),c.password||(b.password="Password is required"),b},x=async b=>{b.preventDefault(),l();const w=y();if(Object.keys(w).length>0){p(w);return}(await n({email:c.email,password:c.password})).success&&t("/doctordashboard")};return f.jsx("div",{className:`max-w-4xl mx-auto p-6 rounded-lg shadow-md ${e==="dark"?"bg-gray-800 text-white":"bg-white text-gray-800"}`,children:f.jsxs("div",{className:`max-w-md w-full space-y-8 p-8 rounded-xl shadow-md ${e==="dark"?"bg-gray-800":"bg-white"}`,children:[f.jsxs("div",{children:[f.jsx("h2",{className:`mt-6 text-center text-3xl font-extrabold ${e==="dark"?"text-white":"text-gray-900"}`,children:"Doctor Login"}),f.jsx("p",{className:`mt-2 text-center text-sm ${e==="dark"?"text-gray-300":"text-gray-600"}`,children:"Access your doctor dashboard"})]}),r&&f.jsx("div",{className:`p-3 rounded ${e==="dark"?"bg-red-900 text-red-200":"bg-red-100 text-red-700"}`,role:"alert",children:f.jsx("span",{className:"block sm:inline",children:r})}),f.jsxs("form",{className:"mt-8 space-y-6",onSubmit:x,children:[f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:`block mb-2 text-sm font-medium ${e==="dark"?"text-gray-300":"text-gray-700"}`,children:"Email address"}),f.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:c.email,onChange:g,className:`w-full px-3 py-2 rounded-md ${e==="dark"?"bg-gray-700 text-white border-gray-600 focus:border-blue-500":"bg-white text-gray-900 border-gray-300 focus:border-blue-500"} border focus:outline-none focus:ring-1 ${h.email?"border-red-500":e==="dark"?"border-gray-600":"border-gray-300"}`,placeholder:"Email address"}),h.email&&f.jsx("p",{className:"mt-1 text-red-500 text-xs",children:h.email})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:`block mb-2 text-sm font-medium ${e==="dark"?"text-gray-300":"text-gray-700"}`,children:"Password"}),f.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:c.password,onChange:g,className:`w-full px-3 py-2 rounded-md ${e==="dark"?"bg-gray-700 text-white border-gray-600 focus:border-blue-500":"bg-white text-gray-900 border-gray-300 focus:border-blue-500"} border focus:outline-none focus:ring-1 ${h.password?"border-red-500":e==="dark"?"border-gray-600":"border-gray-300"}`,placeholder:"Password"}),h.password&&f.jsx("p",{className:"mt-1 text-red-500 text-xs",children:h.password})]})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 rounded"}),f.jsx("label",{htmlFor:"remember-me",className:`ml-2 text-sm ${e==="dark"?"text-gray-300":"text-gray-700"}`,children:"Remember me"})]}),f.jsx("div",{className:"text-sm",children:f.jsx("a",{href:"/forgot-password",className:`font-medium ${e==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"}`,children:"Forgot your password?"})})]}),f.jsx("div",{children:f.jsx(Ge.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:a,className:`group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white ${e==="dark"?"bg-blue-500 hover:bg-blue-600":"bg-blue-600 hover:bg-blue-700"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-300 ${a?"opacity-70 cursor-not-allowed":""}`,children:a?f.jsxs("span",{className:"flex items-center",children:[f.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):"Sign in"})})]})]})})},V3=()=>{const{theme:t}=vn(),e=Ja(),{register:n,verifyOtp:i,verifyEmail:r,isLoading:a,error:l,clearError:c}=pr(),[u,h]=k.useState({name:"",email:"",phone:"",password:"",confirmPassword:"",specialization:"",experience:"",degree:"",age:"",gender:"Male",avatar:null}),[p,g]=k.useState(""),[y,x]=k.useState({}),[b,w]=k.useState(!1),[T,_]=k.useState(""),[S,E]=k.useState(""),[R,A]=k.useState(""),[N,j]=k.useState(""),[O,L]=k.useState("email"),B=U=>{const{name:X,value:D}=U.target;h(q=>({...q,[X]:D.trim()}))},F=U=>{const X=U.target.files[0];if(console.log("handleFileChange triggered, file:",X),X){h({...u,avatar:X});const D=new FileReader;D.onloadend=()=>{g(D.result),console.log("Avatar preview set")},D.readAsDataURL(X)}else console.warn("No file selected")},J=()=>{const U={};return u.name.trim()||(U.name="Name is required"),u.email.trim()?/\S+@\S+\.\S+/.test(u.email)||(U.email="Email is invalid"):U.email="Email is required",u.phone.trim()?/^\+91\d{10}$/.test(u.phone)||(U.phone="Phone number must be in the format +91XXXXXXXXXX"):U.phone="Phone number is required",u.password?u.password.length<6&&(U.password="Password must be at least 6 characters"):U.password="Password is required",u.password!==u.confirmPassword&&(U.confirmPassword="Passwords do not match"),u.specialization||(U.specialization="Specialization is required"),u.experience||(U.experience="Experience is required"),u.degree||(U.degree="Degree is required"),u.age?(u.age<20||u.age>100)&&(U.age="Age must be between 20 and 100"):U.age="Age is required",u.avatar||(U.avatar="Profile picture is required",console.error("Validation error: avatar is missing")),console.log("Validation errors:",U),U},Q=async U=>{U.preventDefault(),c(),j(""),console.log("Submitting form with data:",u);const X=J();if(Object.keys(X).length>0){console.warn("Form validation failed:",X),x(X);return}const D=new FormData;console.log("Sending FormData:");for(let[q,ce]of D.entries())console.log(`${q}:`,ce),q==="avatar"&&(console.log("avatar is File?",ce instanceof File),console.log("avatar name:",ce.name));Object.keys(u).forEach(q=>{q!=="confirmPassword"&&u[q]!==null&&D.append(q,u[q])}),console.log("FormData entries:",Array.from(D.entries()));try{const q=await n(D);console.log("Register API result:",q),q.success?(_(q.doctorId),w(!0)):j(q.error||"Registration failed. Please try again.")}catch(q){console.error("Registration error:",q),j("Registration failed. Please try again.")}},W=async()=>{if(!S||S.length!==6){x({...y,otp:"Please enter a valid 6-digit OTP"});return}c(),j("");try{const U=await i(T,S);console.log(T),console.log(S),U.success?e("/doctordashboard"):x({...y,otp:U.error||"Invalid OTP. Please try again."})}catch{x({...y,otp:"Error verifying OTP. Please try again."})}},Z=async()=>{if(!R||R.length!==6){x({...y,emailCode:"Please enter a valid 6-digit verification code"});return}c(),j("");try{console.log("Verifying:",u.email,R);const U=await r(u.email,R);U.success?e("/doctordashboard"):x({...y,emailCode:U.error||"Invalid verification code. Please try again."})}catch{x({...y,emailCode:"Error verifying email. Please try again."})}},z=()=>{O==="phone"?W():Z()},$=N||l;return f.jsxs("div",{className:`max-w-4xl mx-auto p-6 rounded-lg shadow-md ${t==="dark"?"bg-gray-800 text-white":"bg-white text-gray-800"}`,children:[f.jsx("h2",{className:`text-2xl font-bold text-center mb-6 ${t==="dark"?"text-white":"text-gray-800"}`,children:"Doctor Registration"}),$&&f.jsx("div",{className:`mb-4 p-3 rounded ${t==="dark"?"bg-red-900 text-red-200":"bg-red-100 text-red-700"}`,children:$}),f.jsxs("form",{onSubmit:Q,children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("h3",{className:`text-lg font-medium mb-3 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Personal Information"}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:`block mb-1 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Full Name"}),f.jsx("input",{type:"text",name:"name",value:u.name,onChange:B,className:`w-full px-4 py-2 rounded-md ${t==="dark"?"bg-gray-700 text-white border-gray-600 focus:border-blue-500":"bg-white text-gray-900 border-gray-300 focus:border-blue-600"} border focus:outline-none focus:ring-1 ${t==="dark"?"focus:ring-blue-500":"focus:ring-blue-600"} ${y.name?"border-red-500":""}`,placeholder:"Dr. John Doe"}),y.name&&f.jsx("p",{className:"mt-1 text-red-500 text-sm",children:y.name})]}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:`block mb-1 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Email"}),f.jsx("input",{type:"email",name:"email",value:u.email,onChange:B,className:`w-full px-4 py-2 rounded-md ${t==="dark"?"bg-gray-700 text-white border-gray-600 focus:border-blue-500":"bg-white text-gray-900 border-gray-300 focus:border-blue-600"} border focus:outline-none focus:ring-1 ${t==="dark"?"focus:ring-blue-500":"focus:ring-blue-600"} ${y.email?"border-red-500":""}`,placeholder:"doctor@example.com"}),y.email&&f.jsx("p",{className:"mt-1 text-red-500 text-sm",children:y.email})]}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:`block mb-1 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Phone Number"}),f.jsx("input",{type:"tel",name:"phone",value:u.phone,onChange:B,className:`w-full px-4 py-2 rounded-md ${t==="dark"?"bg-gray-700 text-white border-gray-600 focus:border-blue-500":"bg-white text-gray-900 border-gray-300 focus:border-blue-600"} border focus:outline-none focus:ring-1 ${t==="dark"?"focus:ring-blue-500":"focus:ring-blue-600"} ${y.phone?"border-red-500":""}`,placeholder:"1234567890"}),y.phone&&f.jsx("p",{className:"mt-1 text-red-500 text-sm",children:y.phone})]}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:`block mb-1 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Age"}),f.jsx("input",{type:"number",name:"age",value:u.age,onChange:B,className:`w-full px-4 py-2 rounded-md ${t==="dark"?"bg-gray-700 text-white border-gray-600 focus:border-blue-500":"bg-white text-gray-900 border-gray-300 focus:border-blue-600"} border focus:outline-none focus:ring-1 ${t==="dark"?"focus:ring-blue-500":"focus:ring-blue-600"} ${y.age?"border-red-500":""}`,placeholder:"35"}),y.age&&f.jsx("p",{className:"mt-1 text-red-500 text-sm",children:y.age})]}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:`block mb-1 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Gender"}),f.jsxs("select",{name:"gender",value:u.gender,onChange:B,className:`w-full px-4 py-2 rounded-md ${t==="dark"?"bg-gray-700 text-white border-gray-600 focus:border-blue-500":"bg-white text-gray-900 border-gray-300 focus:border-blue-600"} border focus:outline-none focus:ring-1 ${t==="dark"?"focus:ring-blue-500":"focus:ring-blue-600"}`,children:[f.jsx("option",{value:"Male",children:"Male"}),f.jsx("option",{value:"Female",children:"Female"}),f.jsx("option",{value:"Other",children:"Other"})]})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:`text-lg font-medium mb-3 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Professional Information"}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:`block mb-1 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Specialization"}),f.jsx("input",{type:"text",name:"specialization",value:u.specialization,onChange:B,className:`w-full px-4 py-2 rounded-md ${t==="dark"?"bg-gray-700 text-white border-gray-600 focus:border-blue-500":"bg-white text-gray-900 border-gray-300 focus:border-blue-600"} border focus:outline-none focus:ring-1 ${t==="dark"?"focus:ring-blue-500":"focus:ring-blue-600"} ${y.specialization?"border-red-500":""}`,placeholder:"Cardiology"}),y.specialization&&f.jsx("p",{className:"mt-1 text-red-500 text-sm",children:y.specialization})]}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:`block mb-1 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Experience (years)"}),f.jsx("input",{type:"number",name:"experience",value:u.experience,onChange:B,className:`w-full px-4 py-2 rounded-md ${t==="dark"?"bg-gray-700 text-white border-gray-600 focus:border-blue-500":"bg-white text-gray-900 border-gray-300 focus:border-blue-600"} border focus:outline-none focus:ring-1 ${t==="dark"?"focus:ring-blue-500":"focus:ring-blue-600"} ${y.experience?"border-red-500":""}`,placeholder:"10"}),y.experience&&f.jsx("p",{className:"mt-1 text-red-500 text-sm",children:y.experience})]}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:`block mb-1 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Degree"}),f.jsx("input",{type:"text",name:"degree",value:u.degree,onChange:B,className:`w-full px-4 py-2 rounded-md ${t==="dark"?"bg-gray-700 text-white border-gray-600 focus:border-blue-500":"bg-white text-gray-900 border-gray-300 focus:border-blue-600"} border focus:outline-none focus:ring-1 ${t==="dark"?"focus:ring-blue-500":"focus:ring-blue-600"} ${y.degree?"border-red-500":""}`,placeholder:"MD, MBBS"}),y.degree&&f.jsx("p",{className:"mt-1 text-red-500 text-sm",children:y.degree})]}),f.jsx("h3",{className:`text-lg font-medium mb-3 mt-6 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Security"}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:`block mb-1 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Password"}),f.jsx("input",{type:"password",name:"password",value:u.password,onChange:B,className:`w-full px-4 py-2 rounded-md ${t==="dark"?"bg-gray-700 text-white border-gray-600 focus:border-blue-500":"bg-white text-gray-900 border-gray-300 focus:border-blue-600"} border focus:outline-none focus:ring-1 ${t==="dark"?"focus:ring-blue-500":"focus:ring-blue-600"} ${y.password?"border-red-500":""}`}),y.password&&f.jsx("p",{className:"mt-1 text-red-500 text-sm",children:y.password})]}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:`block mb-1 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Confirm Password"}),f.jsx("input",{type:"password",name:"confirmPassword",value:u.confirmPassword,onChange:B,className:`w-full px-4 py-2 rounded-md ${t==="dark"?"bg-gray-700 text-white border-gray-600 focus:border-blue-500":"bg-white text-gray-900 border-gray-300 focus:border-blue-600"} border focus:outline-none focus:ring-1 ${t==="dark"?"focus:ring-blue-500":"focus:ring-blue-600"} ${y.confirmPassword?"border-red-500":""}`}),y.confirmPassword&&f.jsx("p",{className:"mt-1 text-red-500 text-sm",children:y.confirmPassword})]})]})]}),f.jsxs("div",{className:"mb-6 mt-4",children:[f.jsx("label",{className:`block mb-2 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Profile Picture"}),f.jsxs("div",{className:"flex items-center",children:[p&&f.jsx("div",{className:`w-24 h-24 rounded-full overflow-hidden mr-4 ${t==="dark"?"border border-gray-600":"border border-gray-300"}`,children:f.jsx("img",{src:p,alt:"Avatar preview",className:"w-full h-full object-cover"})}),f.jsxs("div",{children:[f.jsx("input",{type:"file",id:"avatar",name:"avatar",accept:"image/*",onChange:F,className:"hidden"}),f.jsx("label",{htmlFor:"avatar",className:`px-4 py-2 rounded cursor-pointer ${t==="dark"?"bg-gray-700 text-blue-400 hover:bg-gray-600":"bg-blue-100 text-blue-600 hover:bg-blue-200"}`,children:"Select Image"}),y.avatar&&f.jsx("p",{className:"mt-1 text-red-500 text-sm",children:y.avatar})]})]})]}),f.jsx("div",{className:"mt-6",children:f.jsx(Ge.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:a,className:`w-full py-3 rounded-lg font-medium bg-blue-600 hover:bg-blue-700 text-white transition-colors duration-200 ${a?"opacity-70 cursor-not-allowed":""}`,children:a?"Registering...":"Register"})})]}),b&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsxs("div",{className:`p-6 rounded-lg max-w-md w-full ${t==="dark"?"bg-gray-800 text-white":"bg-white text-gray-800"}`,children:[f.jsx("h3",{className:`text-xl font-bold mb-4 ${t==="dark"?"text-white":"text-gray-800"}`,children:"Verify Your Account"}),f.jsxs("div",{className:"flex mb-6 border-b border-gray-600",children:[f.jsx("button",{onClick:()=>L("email"),className:`flex-1 py-2 px-4 text-center ${O==="email"?t==="dark"?"bg-gray-700 border-b-2 border-blue-500":"bg-gray-100 border-b-2 border-blue-600":""}`,children:"Email Verification"}),f.jsx("button",{onClick:()=>L("phone"),className:`flex-1 py-2 px-4 text-center ${O==="phone"?t==="dark"?"bg-gray-700 border-b-2 border-blue-500":"bg-gray-100 border-b-2 border-blue-600":""}`,children:"Phone Verification"})]}),O==="email"?f.jsxs("div",{children:[f.jsx("p",{className:`mb-4 ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:"We've sent a 6-digit verification code to your email address. Please enter it below to verify your account."}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:`block mb-1 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Enter Email Verification Code"}),f.jsx("input",{type:"text",value:R,onChange:U=>A(U.target.value),className:`w-full px-4 py-2 rounded-md ${t==="dark"?"bg-gray-700 text-white border-gray-600 focus:border-blue-500":"bg-white text-gray-900 border-gray-300 focus:border-blue-600"} border focus:outline-none focus:ring-1 ${t==="dark"?"focus:ring-blue-500":"focus:ring-blue-600"} ${y.emailCode?"border-red-500":""}`,placeholder:"Enter 6-digit code",maxLength:6}),y.emailCode&&f.jsx("p",{className:"mt-1 text-red-500 text-sm",children:y.emailCode})]})]}):f.jsxs("div",{children:[f.jsx("p",{className:`mb-4 ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:"We've sent a 6-digit OTP to your phone number. Please enter it below to verify your account."}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:`block mb-1 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Enter OTP"}),f.jsx("input",{type:"text",value:S,onChange:U=>E(U.target.value),className:`w-full px-4 py-2 rounded-md ${t==="dark"?"bg-gray-700 text-white border-gray-600 focus:border-blue-500":"bg-white text-gray-900 border-gray-300 focus:border-blue-600"} border focus:outline-none focus:ring-1 ${t==="dark"?"focus:ring-blue-500":"focus:ring-blue-600"} ${y.otp?"border-red-500":""}`,placeholder:"Enter 6-digit OTP",maxLength:6}),y.otp&&f.jsx("p",{className:"mt-1 text-red-500 text-sm",children:y.otp})]})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx(Ge.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>w(!1),className:`px-4 py-2 rounded ${t==="dark"?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:"Cancel"}),f.jsx(Ge.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:z,disabled:a,className:`px-4 py-2 rounded bg-blue-600 hover:bg-blue-700 text-white ${a?"opacity-70 cursor-not-allowed":""}`,children:a?"Verifying...":"Verify"})]}),f.jsx("div",{className:"mt-4 text-center",children:f.jsxs("p",{className:t==="dark"?"text-gray-400":"text-gray-600",children:["Didn't receive the ",O==="email"?"code":"OTP","?"," ",f.jsx("button",{type:"button",className:`${t==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"} hover:underline`,onClick:()=>{alert(`${O==="email"?"Verification code":"OTP"} resent to your ${O==="email"?"email address":"phone number"}.`)},children:"Resend"})]})})]})})]})},H3=()=>{const[t,e]=k.useState(!1),{theme:n,toggleTheme:i}=vn(),r=Ja(),{logout:a,isLoading:l}=pr(),c=async()=>{(await a()).success&&r("/ ")};return f.jsx(f.Fragment,{children:f.jsxs("nav",{className:`${n==="dark"?"bg-gray-800 text-white":"bg-white text-gray-900"} shadow-md fixed w-full z-50 transition-colors duration-300`,children:[f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex justify-between h-16",children:[f.jsxs("div",{className:"flex",children:[f.jsx("div",{className:"flex-shrink-0 flex items-center",children:f.jsx(Ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:f.jsxs("span",{className:`${n==="dark"?"text-blue-400":"text-primary"} text-2xl font-bold`,children:["MediConnect ",f.jsx("span",{className:"text-sm font-normal",children:"Doctor Portal"})]})})}),f.jsxs("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:[f.jsx(Rt,{to:"/doctordashboard",className:`border-transparent ${n==="dark"?"text-white":"text-gray-900"} inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium`,children:"Dashboard"}),f.jsx(Rt,{to:"/doctorschedule",className:`border-transparent ${n==="dark"?"text-gray-300 hover:text-white":"text-gray-500 hover:text-gray-700"} hover:border-gray-300 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium`,children:"My Schedule"}),f.jsx(Rt,{to:"/doctorappointments",className:`border-transparent ${n==="dark"?"text-gray-300 hover:text-white":"text-gray-500 hover:text-gray-700"} hover:border-gray-300 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium`,children:"Appointments"}),f.jsx(Rt,{to:"/chat",className:`border-transparent ${n==="dark"?"text-gray-300 hover:text-white":"text-gray-500 hover:text-gray-700"} hover:border-gray-300 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium`,children:"Messages"}),f.jsx(Rt,{to:"/doctordirectory",className:`border-transparent ${n==="dark"?"text-gray-300 hover:text-white":"text-gray-500 hover:text-gray-700"} hover:border-gray-300 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium`,children:"Find Clients"}),f.jsx(Rt,{to:"/video-call",className:`border-transparent ${n==="dark"?"text-gray-300 hover:bg-gray-700 hover:border-gray-500 hover:text-white":"text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700"} block pl-3 pr-4 py-2 border-l-4 text-base font-medium`,children:"Video Call"})]})]}),f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx(Ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:i,className:`p-2 rounded-full ${n==="dark"?"bg-gray-700 text-yellow-300":"bg-gray-200 text-gray-800"}`,"aria-label":"Toggle theme",children:n==="dark"?f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}):f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})}),f.jsxs(Ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"relative p-2",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),f.jsx("span",{className:"absolute top-1 right-1 h-2 w-2 rounded-full bg-red-500"})]}),f.jsx("div",{className:"relative",children:f.jsxs(Ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>r("/doctorprofile"),className:`flex items-center space-x-2 ${n==="dark"?"hover:bg-gray-700":"hover:bg-gray-100"} rounded-md p-2`,children:[f.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-500 flex items-center justify-center text-white",children:f.jsx("span",{className:"font-medium",children:"DR"})}),f.jsx("span",{className:"hidden md:inline-block",children:"My Profile"})]})}),f.jsxs(Ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:c,disabled:l,className:`flex items-center space-x-1 ${n==="dark"?"bg-red-700 hover:bg-red-800":"bg-red-600 hover:bg-red-700"} text-white px-3 py-1 rounded-md transition-colors duration-200`,children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),f.jsx("span",{className:"hidden md:inline-block",children:"Logout"})]})]}),f.jsx("div",{className:"-mr-2 flex items-center sm:hidden",children:f.jsxs("button",{onClick:()=>e(!t),className:`inline-flex items-center justify-center p-2 rounded-md ${n==="dark"?"text-gray-400 hover:text-white hover:bg-gray-700":"text-gray-400 hover:text-gray-500 hover:bg-gray-100"} focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500`,children:[f.jsx("span",{className:"sr-only",children:"Open main menu"}),t?f.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}):f.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})})]})}),t&&f.jsx("div",{className:`sm:hidden ${n==="dark"?"bg-gray-800":"bg-white"}`,children:f.jsxs("div",{className:"pt-2 pb-3 space-y-1",children:[f.jsx(Rt,{to:"/doctordashboard",className:`${n==="dark"?"bg-gray-900 border-blue-500 text-white":"bg-primary-light border-primary text-primary-dark"} block pl-3 pr-4 py-2 border-l-4 text-base font-medium`,children:"Dashboard"}),f.jsx(Rt,{to:"/doctorschedule",className:`border-transparent ${n==="dark"?"text-gray-300 hover:bg-gray-700 hover:border-gray-500 hover:text-white":"text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700"} block pl-3 pr-4 py-2 border-l-4 text-base font-medium`,children:"My Schedule"}),f.jsx(Rt,{to:"/doctorappointments",className:`border-transparent ${n==="dark"?"text-gray-300 hover:bg-gray-700 hover:border-gray-500 hover:text-white":"text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700"} block pl-3 pr-4 py-2 border-l-4 text-base font-medium`,children:"Appointments"}),f.jsx(Rt,{to:"/doctormessages",className:`border-transparent ${n==="dark"?"text-gray-300 hover:bg-gray-700 hover:border-gray-500 hover:text-white":"text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700"} block pl-3 pr-4 py-2 border-l-4 text-base font-medium`,children:"Messages"}),f.jsx(Rt,{to:"/doctordirectory",className:`border-transparent ${n==="dark"?"text-gray-300 hover:bg-gray-700 hover:border-gray-500 hover:text-white":"text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700"} block pl-3 pr-4 py-2 border-l-4 text-base font-medium`,children:"Find Clients"}),f.jsx(Rt,{to:"/doctorprofile",className:`border-transparent ${n==="dark"?"text-gray-300 hover:bg-gray-700 hover:border-gray-500 hover:text-white":"text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700"} block pl-3 pr-4 py-2 border-l-4 text-base font-medium`,children:"My Profile"}),f.jsx("button",{onClick:c,disabled:l,className:`w-full text-left border-transparent ${n==="dark"?"text-red-300 hover:bg-red-900 hover:border-red-700 hover:text-white":"text-red-600 hover:bg-red-50 hover:border-red-300 hover:text-red-800"} block pl-3 pr-4 py-2 border-l-4 text-base font-medium`,children:"Logout"}),f.jsx("div",{className:"flex items-center pl-3 py-2",children:f.jsx("button",{onClick:i,className:`p-2 rounded-full ${n==="dark"?"bg-gray-700 text-yellow-300":"bg-gray-200 text-gray-800"}`,"aria-label":"Toggle theme",children:n==="dark"?"Light Mode":"Dark Mode"})})]})})]})})},G3=()=>{const[e,n]=k.useState(!1),[i,r]=k.useState([]),[a,l]=k.useState(""),[c,u]=k.useState(!1),h=k.useRef(null),{theme:p}=vn(),[g]=k.useState(()=>"user_"+Math.random().toString(36).substring(2,9)),y=()=>{n(!e)},x=T=>{l(T.target.value)},b=()=>{var T;(T=h.current)==null||T.scrollIntoView({behavior:"smooth"})};k.useEffect(()=>{b()},[i]);const w=async T=>{if(T.preventDefault(),!a.trim())return;const _={role:"user",content:a};r(S=>[...S,_]),l(""),u(!0);try{const S=await Lt.post(void 0,{userId:g,message:a},{withCredentials:!0});S.data&&S.data.response&&r(E=>[...E,{role:"assistant",content:S.data.response}])}catch(S){console.error("Error sending message:",S),r(E=>[...E,{role:"assistant",content:"Sorry, I encountered an error. Please try again later."}])}finally{u(!1)}};return f.jsxs("div",{className:`fixed bottom-4 right-4 z-50 ${p==="dark"?"text-white":"text-gray-800"}`,children:[f.jsx("button",{onClick:y,className:`w-12 h-12 rounded-full flex items-center justify-center shadow-lg ${e?"bg-red-500":"bg-blue-500"} text-white hover:opacity-90 transition-all`,children:e?f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),e&&f.jsxs("div",{className:`absolute bottom-16 right-0 w-80 sm:w-96 h-96 rounded-lg shadow-xl overflow-hidden flex flex-col ${p==="dark"?"bg-gray-800":"bg-white"} border ${p==="dark"?"border-gray-700":"border-gray-200"}`,children:[f.jsxs("div",{className:`p-3 ${p==="dark"?"bg-gray-700":"bg-blue-500"} text-white flex items-center justify-between`,children:[f.jsx("h3",{className:"font-medium",children:"Chat Assistant"}),f.jsx("button",{onClick:y,className:"hover:opacity-80",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:`flex-1 p-4 overflow-y-auto ${p==="dark"?"bg-gray-900":"bg-gray-50"}`,children:[i.length===0?f.jsx("div",{className:"text-center py-8 text-gray-500",children:f.jsx("p",{children:"How can I help you today?"})}):i.map((T,_)=>f.jsx("div",{className:`mb-3 max-w-3/4 ${T.role==="user"?"ml-auto text-right":"mr-auto"}`,children:f.jsx("div",{className:`inline-block rounded-lg py-2 px-3 ${T.role==="user"?p==="dark"?"bg-blue-600 text-white":"bg-blue-500 text-white":p==="dark"?"bg-gray-700 text-white":"bg-gray-200 text-gray-800"}`,children:T.content})},_)),c&&f.jsxs("div",{className:"flex items-center justify-center space-x-1 text-gray-500 my-2",children:[f.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400 animate-bounce",style:{animationDelay:"0.1s"}}),f.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400 animate-bounce",style:{animationDelay:"0.2s"}}),f.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400 animate-bounce",style:{animationDelay:"0.3s"}})]}),f.jsx("div",{ref:h})]}),f.jsxs("form",{onSubmit:w,className:`p-3 border-t ${p==="dark"?"border-gray-700 bg-gray-800":"border-gray-200"} flex`,children:[f.jsx("input",{type:"text",value:a,onChange:x,placeholder:"Type a message...",className:`flex-1 py-2 px-3 rounded-l-lg focus:outline-none ${p==="dark"?"bg-gray-700 text-white placeholder-gray-400 border-gray-600":"bg-gray-100 text-gray-800 placeholder-gray-500"} border`,disabled:c}),f.jsx("button",{type:"submit",className:`px-4 py-2 rounded-r-lg ${p==="dark"?"bg-blue-600":"bg-blue-500"} text-white font-medium hover:opacity-90 focus:outline-none`,disabled:c,children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})]})]})},lF=()=>{const{isAuthenticated:t,isCheckingAuth:e,checkAuth:n}=pr(),{theme:i}=vn(),[r,a]=k.useState(!0),[l,c]=k.useState(!0);if(k.useEffect(()=>{(async()=>{await n(),a(!1)})()},[]),k.useEffect(()=>{const p=setTimeout(()=>{c(!1)},3e3);return()=>clearTimeout(p)},[]),r||e)return f.jsx("div",{className:`min-h-screen flex items-center justify-center ${i==="dark"?"bg-gray-900":"bg-gray-50"}`,children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),f.jsx("p",{className:`mt-4 ${i==="dark"?"text-white":"text-gray-800"}`,children:"Loading..."})]})});if(!t)return f.jsx(Kv,{to:"/"});if(l)return f.jsx("div",{className:`min-h-screen flex items-center justify-center ${i==="dark"?"bg-gradient-to-br from-gray-900 to-blue-900":"bg-gradient-to-br from-blue-50 to-indigo-100"}`,children:f.jsxs(Ge.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:1,ease:"easeOut"},className:"text-center",children:[f.jsx(Ge.h1,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5,duration:.8},className:`text-6xl font-bold mb-4 ${i==="dark"?"text-white":"text-gray-800"}`,children:"Welcome to"}),f.jsx(Ge.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:1,duration:.8},className:"flex items-center justify-center",children:f.jsx("span",{className:"text-7xl font-bold bg-gradient-to-r from-blue-500 to-purple-600 bg-clip-text text-transparent",children:"MediConnect"})}),f.jsx(Ge.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.5,duration:.8},className:`text-xl mt-4 ${i==="dark"?"text-gray-300":"text-gray-600"}`,children:"Doctor Portal"}),f.jsx(Ge.div,{initial:{scale:0},animate:{scale:1},transition:{delay:2,duration:.5},className:"mt-8",children:f.jsx("div",{className:"animate-pulse",children:f.jsx("div",{className:"h-2 w-32 bg-blue-500 rounded-full mx-auto"})})})]})});const u=[{title:"My Schedule",description:"View and manage your daily appointments and availability",icon:"",link:"/doctorschedule",color:"from-blue-500 to-blue-600"},{title:"Appointments",description:"Manage patient appointments and consultations",icon:"",link:"/doctorappointments",color:"from-green-500 to-green-600"},{title:"Messages",description:"Communicate with patients and colleagues",icon:"",link:"/chat",color:"from-purple-500 to-purple-600"},{title:"Video Call",description:"Conduct virtual consultations with patients",icon:"",link:"/video-call",color:"from-red-500 to-red-600"},{title:"My Profile",description:"Update your professional information and settings",icon:"",link:"/doctorprofile",color:"from-indigo-500 to-indigo-600"}],h=[{label:"Today's Appointments",value:"12",icon:""},{label:"Pending Messages",value:"5",icon:""},{label:"Video Calls",value:"3",icon:""},{label:"New Patients",value:"8",icon:""}];return f.jsxs("div",{className:`min-h-screen ${i==="dark"?"bg-gray-900":"bg-gray-50"}`,children:[f.jsx(H3,{}),f.jsxs("div",{className:"pt-20 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto",children:[f.jsxs(Ge.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-8",children:[f.jsx("h1",{className:`text-4xl font-bold mb-2 ${i==="dark"?"text-white":"text-gray-800"}`,children:"Doctor Dashboard"}),f.jsx("p",{className:`text-lg ${i==="dark"?"text-gray-300":"text-gray-600"}`,children:"Welcome back! Here's what's happening with your practice today."})]}),f.jsx(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:h.map((p,g)=>f.jsx(Ge.div,{whileHover:{scale:1.05},className:`p-6 rounded-xl shadow-lg ${i==="dark"?"bg-gray-800 border border-gray-700":"bg-white border border-gray-200"}`,children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:`text-sm font-medium ${i==="dark"?"text-gray-400":"text-gray-500"}`,children:p.label}),f.jsx("p",{className:`text-2xl font-bold ${i==="dark"?"text-white":"text-gray-900"}`,children:p.value})]}),f.jsx("div",{className:"text-3xl",children:p.icon})]})},g))}),f.jsx(Ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:u.map((p,g)=>f.jsx(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1*g},whileHover:{scale:1.02,y:-5},className:"group",children:f.jsx(Rt,{to:p.link,children:f.jsxs("div",{className:`p-6 rounded-xl shadow-lg transition-all duration-300 ${i==="dark"?"bg-gray-800 border border-gray-700 hover:border-gray-600":"bg-white border border-gray-200 hover:shadow-xl"}`,children:[f.jsxs("div",{className:"flex items-start justify-between mb-4",children:[f.jsx("div",{className:"text-4xl",children:p.icon}),f.jsx("div",{className:`w-3 h-3 rounded-full bg-gradient-to-r ${p.color} opacity-60 group-hover:opacity-100 transition-opacity`})]}),f.jsx("h3",{className:`text-xl font-semibold mb-2 ${i==="dark"?"text-white":"text-gray-800"}`,children:p.title}),f.jsx("p",{className:`text-sm ${i==="dark"?"text-gray-400":"text-gray-600"}`,children:p.description}),f.jsxs("div",{className:"mt-4 flex items-center text-blue-500 text-sm font-medium group-hover:text-blue-600 transition-colors",children:[f.jsxs("span",{children:["Access ",p.title]}),f.jsx("svg",{className:"ml-1 w-4 h-4 transform group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})]})})},g))}),f.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:`rounded-xl shadow-lg p-6 mb-8 ${i==="dark"?"bg-gray-800 border border-gray-700":"bg-white border border-gray-200"}`,children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 ${i==="dark"?"text-white":"text-gray-800"}`,children:"Recent Activity"}),f.jsx("div",{className:"space-y-4",children:[{action:"New appointment booked",time:"2 hours ago",icon:""},{action:"Message from Patient John Doe",time:"3 hours ago",icon:""},{action:"Video consultation completed",time:"5 hours ago",icon:""},{action:"Profile updated",time:"1 day ago",icon:""}].map((p,g)=>f.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[f.jsx("div",{className:"text-2xl",children:p.icon}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:`font-medium ${i==="dark"?"text-white":"text-gray-800"}`,children:p.action}),f.jsx("p",{className:`text-sm ${i==="dark"?"text-gray-400":"text-gray-500"}`,children:p.time})]})]},g))})]})]}),f.jsx(G3,{})]})},_r="http://localhost:5000",kr=Tm(t=>({client:null,clients:[],currentClient:null,isLoading:!1,error:null,isAuthenticated:!1,isSigningUp:!1,isLoggingIn:!1,isUpdatingProfile:!1,isCheckingAuth:!0,isFetchingClients:!1,isFetchingClient:!1,clearError:()=>t({error:null}),register:async e=>{var n,i,r,a;t({isSigningUp:!0,error:null});try{const c=(i=(n=(await St.post(`${_r}/client/register`,e,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})).data)==null?void 0:n.data)==null?void 0:i.clientId;return c&&localStorage.setItem("clientTempId",c),t({isSigningUp:!1,isAuthenticated:!1}),rt.success("OTP sent! Please verify to complete registration."),{success:!0,clientId:c}}catch(l){const c=((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Registration failed";return t({isSigningUp:!1,error:c}),rt.error(c),{success:!1,error:c}}},clientOtpRegister:async(e,n)=>{var i,r;t({isLoading:!0,error:null});try{const a=await St.post(`${_r}/client/register/verify-otp`,{clientId:e,otp:n},{withCredentials:!0}),{accessToken:l,refreshToken:c,client:u}=a.data;return l&&localStorage.setItem("clientAccessToken",l),c&&localStorage.setItem("clientRefreshToken",c),u!=null&&u._id&&localStorage.setItem("clientId",u._id),t({isLoading:!1,isAuthenticated:!0,client:u}),console.log("success"),{success:!0}}catch(a){const l=((r=(i=a.response)==null?void 0:i.data)==null?void 0:r.message)||"OTP verification failed";return t({isLoading:!1,error:l}),{success:!1,error:l}}},verifyOtp:async(e,n)=>{var i,r;t({isLoading:!0,error:null});try{const a=await St.post(`${_r}/client/verify-otp`,{clientId:e,otp:n},{withCredentials:!0}),{accessToken:l,refreshToken:c}=a.data;return l&&localStorage.setItem("clientAccessToken",l),c&&localStorage.setItem("clientRefreshToken",c),t({isLoading:!1,isAuthenticated:!0}),rt.success("OTP verified successfully!"),{success:!0}}catch(a){const l=((r=(i=a.response)==null?void 0:i.data)==null?void 0:r.message)||"OTP verification failed";return t({isLoading:!1,error:l}),rt.error(l),{success:!1,error:l}}},verifyEmail:async(e,n)=>{var i,r;t({isLoading:!0,error:null});try{const a=await St.post(`${_r}/client/verify-email`,{email:e,otp:n},{withCredentials:!0}),{accessToken:l,refreshToken:c}=a.data;return l&&localStorage.setItem("clientAccessToken",l),c&&localStorage.setItem("clientRefreshToken",c),t({isLoading:!1}),rt.success("Email verified successfully!"),{success:!0,message:a.data.data.message}}catch(a){const l=((r=(i=a.response)==null?void 0:i.data)==null?void 0:r.message)||"Email verification failed";return t({isLoading:!1,error:l}),rt.error(l),{success:!1,error:l}}},login:async e=>{var n,i;t({isLoggingIn:!0,error:null});try{const r=await St.post(`${_r}/client/login`,e,{withCredentials:!0}),{client:a,accessToken:l,refreshToken:c}=r.data.data;return localStorage.setItem("clientId",a._id),l&&localStorage.setItem("clientAccessToken",l),c&&localStorage.setItem("clientRefreshToken",c),console.log(a),t({isLoggingIn:!1,client:a,isAuthenticated:!0}),console.log(a),rt.success("Logged in successfully!"),{success:!0}}catch(r){const a=((i=(n=r.response)==null?void 0:n.data)==null?void 0:i.message)||"Login failed";return t({isLoggingIn:!1,error:a,isAuthenticated:!1}),rt.error(a),{success:!1,error:a}}},logout:async()=>{var e,n;t({isLoading:!0,error:null});try{return await St.post(`${_r}/client/logout`,{},{withCredentials:!0}),localStorage.removeItem("clientId"),localStorage.removeItem("clientAccessToken"),localStorage.removeItem("clientRefreshToken"),t({isLoading:!1,client:null,isAuthenticated:!1}),rt.success("Logged out successfully!"),{success:!0}}catch(i){const r=((n=(e=i.response)==null?void 0:e.data)==null?void 0:n.message)||"Logout failed";return localStorage.removeItem("clientId"),localStorage.removeItem("clientAccessToken"),localStorage.removeItem("clientRefreshToken"),t({isLoading:!1,error:r,client:null,isAuthenticated:!1}),rt.error(r),{success:!1}}},checkAuth:async()=>{var e,n,i;t({isCheckingAuth:!0});try{console.log("Checking Client");const r=await St.get(`${_r}/client/me`,{withCredentials:!0});return console.log(r.data),t({client:(e=r==null?void 0:r.data)==null?void 0:e.data,isAuthenticated:!0}),{success:!0}}catch(r){return console.error(" Error in checkAuth:",((i=(n=r==null?void 0:r.response)==null?void 0:n.data)==null?void 0:i.message)||r.message),localStorage.removeItem("clientId"),localStorage.removeItem("clientAccessToken"),localStorage.removeItem("clientRefreshToken"),t({client:null,isAuthenticated:!1}),{success:!1}}finally{t({isCheckingAuth:!1})}},getCurrentClient:async()=>{var e,n;t({isFetchingClient:!0,error:null});try{const i=await St.get(`${_r}/client/me`,{withCredentials:!0});return t({currentClient:i.data.data,isFetchingClient:!1}),{success:!0,data:i.data.data}}catch(i){const r=((n=(e=i.response)==null?void 0:e.data)==null?void 0:n.message)||"Failed to fetch current client";return t({isFetchingClient:!1,error:r}),{success:!1,error:r}}},getAllClients:async(e={})=>{var n,i;t({isFetchingClients:!0,error:null});try{const r=new URL(`${_r}/client`);Object.entries(e).forEach(([l,c])=>{r.searchParams.append(l,c)});const a=await St.get(r.toString(),{withCredentials:!0});return t({clients:a.data.data.clients,isFetchingClients:!1}),{success:!0,data:a.data.data.clients,pagination:a.data.data.pagination}}catch(r){const a=((i=(n=r.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to fetch clients";return t({isFetchingClients:!1,error:a}),rt.error(a),{success:!1,error:a}}},getClientById:async e=>{var n,i;t({isFetchingClient:!0,error:null});try{const r=await St.get(`${_r}/client/${e}`,{withCredentials:!0});return t({isFetchingClient:!1}),{success:!0,data:r.data.data}}catch(r){const a=((i=(n=r.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to fetch client";return t({isFetchingClient:!1,error:a}),{success:!1,error:a}}},updateProfile:async e=>{var n,i;t({isLoading:!0,error:null}),console.log("Updating profile with data:",e);try{const r=await St.patch(`${_r}/client/update`,e,{withCredentials:!0});return t({isLoading:!1,client:r.data.data}),rt.success("Profile updated successfully!"),{success:!0}}catch(r){const a=((i=(n=r.response)==null?void 0:n.data)==null?void 0:i.message)||"Profile update failed";return t({isLoading:!1,error:a}),rt.error(a),{success:!1,error:a}}}})),W3=()=>{const[t,e]=k.useState(!1),{theme:n,toggleTheme:i}=vn(),r=Ja(),{logout:a,isLoading:l}=kr(),c=async()=>{(await a()).success&&r("/ ")};return f.jsx(f.Fragment,{children:f.jsxs("nav",{className:`${n==="dark"?"bg-gray-800 text-white":"bg-white text-gray-900"} shadow-md fixed w-full z-50 transition-colors duration-300`,children:[f.jsx("div",{className:"max-w-9xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex justify-between h-16",children:[f.jsxs("div",{className:"flex",children:[f.jsx("div",{className:"flex-shrink-0 flex items-center",children:f.jsx(Ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:f.jsxs("span",{className:`${n==="dark"?"text-blue-400":"text-primary"} text-2xl font-bold`,children:["MediConnect ",f.jsx("span",{className:"text-sm font-normal",children:"Client Portal"})]})})}),f.jsxs("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:[f.jsx(Rt,{to:"/clientdashboard",className:`border-transparent ${n==="dark"?"text-white":"text-gray-900"} inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium`,children:"Dashboard"}),f.jsx(Rt,{to:"/bookappointment",className:`border-transparent ${n==="dark"?"text-gray-300 hover:text-white":"text-gray-500 hover:text-gray-700"} hover:border-gray-300 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium`,children:"Book Appointment"}),f.jsx(Rt,{to:"/clientappointments",className:`border-transparent ${n==="dark"?"text-gray-300 hover:text-white":"text-gray-500 hover:text-gray-700"} hover:border-gray-300 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium`,children:"My Appointments"}),f.jsx(Rt,{to:"/nearby-clinics",className:`border-transparent ${n==="dark"?"text-gray-300 hover:text-white":"text-gray-500 hover:text-gray-700"} hover:border-gray-300 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium`,children:"Nearby Clinics"}),f.jsx(Rt,{to:"/chat",className:`border-transparent ${n==="dark"?"text-gray-300 hover:text-white":"text-gray-500 hover:text-gray-700"} hover:border-gray-300 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium`,children:"Messages"}),f.jsx(Rt,{to:"/finddoctors",className:`border-transparent ${n==="dark"?"text-gray-300 hover:text-white":"text-gray-500 hover:text-gray-700"} hover:border-gray-300 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium`,children:"Find Doctors"}),f.jsx(Rt,{to:"/video-call",className:`border-transparent ${n==="dark"?"text-gray-300 hover:text-white":"text-gray-500 hover:text-gray-700"} hover:border-gray-300 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium`,children:"Video Call"}),f.jsx(Rt,{to:"/medicines-search",className:`border-transparent ${n==="dark"?"text-gray-300 hover:text-white":"text-gray-500 hover:text-gray-700"} hover:border-gray-300 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium`,children:"Search Medicine"})]})]}),f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx(Ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:i,className:`p-2 rounded-full ${n==="dark"?"bg-gray-700 text-yellow-300":"bg-gray-200 text-gray-800"}`,"aria-label":"Toggle theme",children:n==="dark"?f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}):f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})}),f.jsx("div",{className:"relative",children:f.jsxs(Ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>r("/clientprofile"),className:`flex items-center space-x-2 ${n==="dark"?"hover:bg-gray-700":"hover:bg-gray-100"} rounded-md p-2`,children:[f.jsx("div",{className:"h-8 w-8 rounded-full bg-green-500 flex items-center justify-center text-white",children:f.jsx("span",{className:"font-medium",children:"CL"})}),f.jsx("span",{className:"hidden md:inline-block",children:"My Profile"})]})}),f.jsxs(Ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:c,disabled:l,className:`flex items-center space-x-1 ${n==="dark"?"bg-red-700 hover:bg-red-800":"bg-red-600 hover:bg-red-700"} text-white px-3 py-1 rounded-md transition-colors duration-200`,children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),f.jsx("span",{className:"hidden md:inline-block",children:"Logout"})]})]}),f.jsx("div",{className:"-mr-2 flex items-center sm:hidden",children:f.jsxs("button",{onClick:()=>e(!t),className:`inline-flex items-center justify-center p-2 rounded-md ${n==="dark"?"text-gray-400 hover:text-white hover:bg-gray-700":"text-gray-400 hover:text-gray-500 hover:bg-gray-100"} focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500`,children:[f.jsx("span",{className:"sr-only",children:"Open main menu"}),t?f.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}):f.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})})]})}),t&&f.jsx("div",{className:`sm:hidden ${n==="dark"?"bg-gray-800":"bg-white"}`,children:f.jsxs("div",{className:"pt-2 pb-3 space-y-1",children:[f.jsx(Rt,{to:"/clientdashboard",className:`${n==="dark"?"bg-gray-900 border-blue-500 text-white":"bg-primary-light border-primary text-primary-dark"} block pl-3 pr-4 py-2 border-l-4 text-base font-medium`,children:"Dashboard"}),f.jsx(Rt,{to:"/bookappointment",className:`border-transparent ${n==="dark"?"text-gray-300 hover:bg-gray-700 hover:border-gray-500 hover:text-white":"text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700"} block pl-3 pr-4 py-2 border-l-4 text-base font-medium`,children:"Book Appointment"}),f.jsx(Rt,{to:"/clientappointments",className:`border-transparent ${n==="dark"?"text-gray-300 hover:bg-gray-700 hover:border-gray-500 hover:text-white":"text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700"} block pl-3 pr-4 py-2 border-l-4 text-base font-medium`,children:"My Appointments"}),f.jsx(Rt,{to:"/clientmessages",className:`border-transparent ${n==="dark"?"text-gray-300 hover:bg-gray-700 hover:border-gray-500 hover:text-white":"text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700"} block pl-3 pr-4 py-2 border-l-4 text-base font-medium`,children:"Messages"}),f.jsx(Rt,{to:"/clientmessages",className:`border-transparent ${n==="dark"?"text-gray-300 hover:bg-gray-700 hover:border-gray-500 hover:text-white":"text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700"} block pl-3 pr-4 py-2 border-l-4 text-base font-medium`,children:"Messages"}),f.jsx(Rt,{to:"/finddoctors",className:`border-transparent ${n==="dark"?"text-gray-300 hover:bg-gray-700 hover:border-gray-500 hover:text-white":"text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700"} block pl-3 pr-4 py-2 border-l-4 text-base font-medium`,children:"Find Doctors"}),f.jsx(Rt,{to:"/clientprofile",className:`border-transparent ${n==="dark"?"text-gray-300 hover:bg-gray-700 hover:border-gray-500 hover:text-white":"text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700"} block pl-3 pr-4 py-2 border-l-4 text-base font-medium`,children:"My Profile"}),f.jsx("button",{onClick:c,disabled:l,className:`w-full text-left border-transparent ${n==="dark"?"text-red-300 hover:bg-red-900 hover:border-red-700 hover:text-white":"text-red-600 hover:bg-red-50 hover:border-red-300 hover:text-red-800"} block pl-3 pr-4 py-2 border-l-4 text-base font-medium`,children:"Logout"}),f.jsx("div",{className:"flex items-center pl-3 py-2",children:f.jsx("button",{onClick:i,className:`p-2 rounded-full ${n==="dark"?"bg-gray-700 text-yellow-300":"bg-gray-200 text-gray-800"}`,"aria-label":"Toggle theme",children:n==="dark"?"Light Mode":"Dark Mode"})})]})})]})})},cF=()=>{const{isAuthenticated:t,isCheckingAuth:e,checkAuth:n}=kr(),{theme:i}=vn(),[r,a]=k.useState(!0),[l,c]=k.useState(!0);if(k.useEffect(()=>{(async()=>{await n(),a(!1)})()},[]),k.useEffect(()=>{const p=setTimeout(()=>{c(!1)},3e3);return()=>clearTimeout(p)},[]),r||e)return f.jsx("div",{className:`min-h-screen flex items-center justify-center ${i==="dark"?"bg-gray-900":"bg-gray-50"}`,children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto"}),f.jsx("p",{className:`mt-4 ${i==="dark"?"text-white":"text-gray-800"}`,children:"Loading..."})]})});if(!t)return f.jsx(Kv,{to:"/"});if(l)return f.jsx("div",{className:`min-h-screen flex items-center justify-center ${i==="dark"?"bg-gradient-to-br from-gray-900 to-green-900":"bg-gradient-to-br from-green-50 to-blue-100"}`,children:f.jsxs(Ge.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:1,ease:"easeOut"},className:"text-center",children:[f.jsx(Ge.h1,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5,duration:.8},className:`text-6xl font-bold mb-4 ${i==="dark"?"text-white":"text-gray-800"}`,children:"Welcome to"}),f.jsx(Ge.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:1,duration:.8},className:"flex items-center justify-center",children:f.jsx("span",{className:"text-7xl font-bold bg-gradient-to-r from-green-500 to-blue-600 bg-clip-text text-transparent",children:"MediConnect"})}),f.jsx(Ge.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.5,duration:.8},className:`text-xl mt-4 ${i==="dark"?"text-gray-300":"text-gray-600"}`,children:"Client Portal"}),f.jsx(Ge.div,{initial:{scale:0},animate:{scale:1},transition:{delay:2,duration:.5},className:"mt-8",children:f.jsx("div",{className:"animate-pulse",children:f.jsx("div",{className:"h-2 w-32 bg-green-500 rounded-full mx-auto"})})})]})});const u=[{title:"Book Appointment",description:"Schedule appointments with healthcare providers",icon:"",link:"/bookappointment",color:"from-green-500 to-green-600"},{title:"My Appointments",description:"View and manage your scheduled appointments",icon:"",link:"/clientappointments",color:"from-blue-500 to-blue-600"},{title:"Nearby Clinics",description:"Find healthcare facilities near your location",icon:"",link:"/nearby-clinics",color:"from-purple-500 to-purple-600"},{title:"Messages",description:"Communicate with your healthcare providers",icon:"",link:"/chat",color:"from-indigo-500 to-indigo-600"},{title:"Find Doctors",description:"Search and connect with medical professionals",icon:"",link:"/finddoctors",color:"from-cyan-500 to-cyan-600"},{title:"Video Call",description:"Connect with doctors through video consultations",icon:"",link:"/video-call",color:"from-red-500 to-red-600"},{title:"Search Medicine",description:"Find information about medications and prescriptions",icon:"",link:"/medicines-search",color:"from-orange-500 to-orange-600"},{title:"My Profile",description:"Update your personal information and preferences",icon:"",link:"/clientprofile",color:"from-pink-500 to-pink-600"}],h=[{label:"Upcoming Appointments",value:"3",icon:"",link:"/clientappointments"},{label:"Unread Messages",value:"2",icon:"",link:"/chat"},{label:"Completed Consultations",value:"15",icon:"",link:"/clientappointments"},{label:"Nearby Clinics",value:"8",icon:"",link:"/nearby-clinics"}];return f.jsxs("div",{className:`min-h-screen ${i==="dark"?"bg-gray-900":"bg-gray-50"}`,children:[f.jsx(W3,{}),f.jsxs("div",{className:"pt-20 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto",children:[f.jsxs(Ge.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-8",children:[f.jsx("h1",{className:`text-4xl font-bold mb-2 ${i==="dark"?"text-white":"text-gray-800"}`,children:"Client Dashboard"}),f.jsx("p",{className:`text-lg ${i==="dark"?"text-gray-300":"text-gray-600"}`,children:"Welcome back! Manage your healthcare journey with ease."})]}),f.jsx(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:h.map((p,g)=>f.jsx(Ge.div,{whileHover:{scale:1.05},onClick:()=>p.link&&(window.location.href=p.link),className:`p-6 rounded-xl shadow-lg ${i==="dark"?"bg-gray-800 border border-gray-700":"bg-white border border-gray-200"}`,children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:`text-sm font-medium ${i==="dark"?"text-gray-400":"text-gray-500"}`,children:p.label}),f.jsx("p",{className:`text-2xl font-bold ${i==="dark"?"text-white":"text-gray-900"}`,children:p.value})]}),f.jsx("div",{className:"text-3xl",children:p.icon})]})},g))}),f.jsx(Ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-8",children:u.map((p,g)=>f.jsx(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1*g},whileHover:{scale:1.02,y:-5},className:"group",children:f.jsx(Rt,{to:p.link,children:f.jsxs("div",{className:`p-6 rounded-xl shadow-lg transition-all duration-300 ${i==="dark"?"bg-gray-800 border border-gray-700 hover:border-gray-600":"bg-white border border-gray-200 hover:shadow-xl"}`,children:[f.jsxs("div",{className:"flex items-start justify-between mb-4",children:[f.jsx("div",{className:"text-4xl",children:p.icon}),f.jsx("div",{className:`w-3 h-3 rounded-full bg-gradient-to-r ${p.color} opacity-60 group-hover:opacity-100 transition-opacity`})]}),f.jsx("h3",{className:`text-xl font-semibold mb-2 ${i==="dark"?"text-white":"text-gray-800"}`,children:p.title}),f.jsx("p",{className:`text-sm ${i==="dark"?"text-gray-400":"text-gray-600"}`,children:p.description}),f.jsxs("div",{className:"mt-4 flex items-center text-green-500 text-sm font-medium group-hover:text-green-600 transition-colors",children:[f.jsxs("span",{children:["Access ",p.title]}),f.jsx("svg",{className:"ml-1 w-4 h-4 transform group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})]})})},g))}),f.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:`rounded-xl shadow-lg p-6 mb-8 ${i==="dark"?"bg-gray-800 border border-gray-700":"bg-white border border-gray-200"}`,children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 ${i==="dark"?"text-white":"text-gray-800"}`,children:"Recent Activity"}),f.jsx("div",{className:"space-y-4",children:[{action:"Appointment scheduled with Dr. Smith",time:"1 hour ago",icon:""},{action:"Video consultation completed",time:"2 hours ago",icon:""},{action:"New message from Dr. Johnson",time:"4 hours ago",icon:""},{action:"Medicine search: Paracetamol",time:"6 hours ago",icon:""},{action:"Profile information updated",time:"1 day ago",icon:""}].map((p,g)=>f.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[f.jsx("div",{className:"text-2xl",children:p.icon}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:`font-medium ${i==="dark"?"text-white":"text-gray-800"}`,children:p.action}),f.jsx("p",{className:`text-sm ${i==="dark"?"text-gray-400":"text-gray-500"}`,children:p.time})]})]},g))})]}),f.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:`rounded-xl shadow-lg p-6 mb-8 ${i==="dark"?"bg-gradient-to-r from-green-800 to-blue-800 border border-gray-700":"bg-gradient-to-r from-green-50 to-blue-50 border border-gray-200"}`,children:[f.jsx("h2",{className:`text-2xl font-semibold mb-4 ${i==="dark"?"text-white":"text-gray-800"}`,children:" Health Tip of the Day"}),f.jsx("p",{className:`text-lg ${i==="dark"?"text-gray-200":"text-gray-700"}`,children:"Stay hydrated! Drinking adequate water helps maintain your body temperature, lubricates joints, and aids in nutrient transportation. Aim for 8 glasses of water daily."}),f.jsxs("div",{className:"mt-4 flex items-center space-x-2",children:[f.jsxs("div",{className:"flex text-yellow-400",children:[f.jsx("span",{children:""}),f.jsx("span",{children:""}),f.jsx("span",{children:""}),f.jsx("span",{children:""}),f.jsx("span",{children:""})]}),f.jsx("span",{className:`text-sm ${i==="dark"?"text-gray-300":"text-gray-600"}`,children:"Wellness tip from our medical experts"})]})]})]}),f.jsx(G3,{})]})},uF=()=>{const t=Ja(),{theme:e}=vn(),{login:n,client:i,error:r,isLoading:a,clearError:l}=kr(),[c,u]=k.useState({email:"",password:""}),[h,p]=k.useState({});k.useEffect(()=>{i&&t("/clientdashboard")},[i,t]);const g=b=>{const{name:w,value:T}=b.target;u({...c,[w]:T}),h[w]&&p({...h,[w]:""})},y=()=>{const b={};return c.email.trim()||(b.email="Email is required"),c.password||(b.password="Password is required"),b},x=async b=>{b.preventDefault(),l();const w=y();if(Object.keys(w).length>0){p(w);return}const T=await n({email:c.email,password:c.password});T.success&&(localStorage.setItem("clientAccessId",T.client._id),t("/clientdashboard"))};return f.jsx("div",{className:`max-w-4xl mx-auto p-6 rounded-lg shadow-md ${e==="dark"?"bg-gray-800 text-white":"bg-white text-gray-800"}`,children:f.jsxs("div",{className:`max-w-md w-full space-y-8 p-8 rounded-xl shadow-md ${e==="dark"?"bg-gray-800":"bg-white"}`,children:[f.jsxs("div",{children:[f.jsx("h2",{className:`mt-6 text-center text-3xl font-extrabold ${e==="dark"?"text-white":"text-gray-900"}`,children:"Client Login"}),f.jsx("p",{className:`mt-2 text-center text-sm ${e==="dark"?"text-gray-300":"text-gray-600"}`,children:"Access your client dashboard"})]}),r&&f.jsx("div",{className:`p-3 rounded ${e==="dark"?"bg-red-900 text-red-200":"bg-red-100 text-red-700"}`,role:"alert",children:f.jsx("span",{className:"block sm:inline",children:r})}),f.jsxs("form",{className:"mt-8 space-y-6",onSubmit:x,children:[f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:`block mb-2 text-sm font-medium ${e==="dark"?"text-gray-300":"text-gray-700"}`,children:"Email address"}),f.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:c.email,onChange:g,className:`w-full px-3 py-2 rounded-md ${e==="dark"?"bg-gray-700 text-white border-gray-600 focus:border-blue-500":"bg-white text-gray-900 border-gray-300 focus:border-blue-500"} border focus:outline-none focus:ring-1 ${h.email?"border-red-500":e==="dark"?"border-gray-600":"border-gray-300"}`,placeholder:"Email address"}),h.email&&f.jsx("p",{className:"mt-1 text-red-500 text-xs",children:h.email})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:`block mb-2 text-sm font-medium ${e==="dark"?"text-gray-300":"text-gray-700"}`,children:"Password"}),f.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:c.password,onChange:g,className:`w-full px-3 py-2 rounded-md ${e==="dark"?"bg-gray-700 text-white border-gray-600 focus:border-blue-500":"bg-white text-gray-900 border-gray-300 focus:border-blue-500"} border focus:outline-none focus:ring-1 ${h.password?"border-red-500":e==="dark"?"border-gray-600":"border-gray-300"}`,placeholder:"Password"}),h.password&&f.jsx("p",{className:"mt-1 text-red-500 text-xs",children:h.password})]})]}),f.jsx("div",{children:f.jsx(Ge.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:a,className:`group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white ${e==="dark"?"bg-blue-500 hover:bg-blue-600":"bg-blue-600 hover:bg-blue-700"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-300 ${a?"opacity-70 cursor-not-allowed":""}`,children:a?f.jsx("span",{className:"flex items-center",children:"Signing in..."}):"Sign in"})})]})]})})},dF=()=>{const{theme:t}=vn(),e=Ja(),{register:n,clientOtpRegister:i,verifyOtp:r,verifyEmail:a,isLoading:l,error:c,clearError:u}=kr(),[h,p]=k.useState({name:"",email:"",phone:"",password:"",confirmPassword:"",age:"",gender:"Male",avatar:null}),[g,y]=k.useState(""),[x,b]=k.useState({}),[w,T]=k.useState(!1),[_,S]=k.useState(""),[E,R]=k.useState(""),[A,N]=k.useState(""),[j,O]=k.useState(""),[L,B]=k.useState("email"),F=X=>{const{name:D,value:q}=X.target;p(ce=>({...ce,[D]:q.trim()}))},J=X=>{const D=X.target.files[0];if(D){p({...h,avatar:D});const q=new FileReader;q.onloadend=()=>{y(q.result)},q.readAsDataURL(D)}},Q=()=>{const X={};return h.name.trim()||(X.name="Name is required"),h.email.trim()?/\S+@\S+\.\S+/.test(h.email)||(X.email="Email is invalid"):X.email="Email is required",h.phone.trim()?/^\+91\d{10}$/.test(h.phone)||(X.phone="Phone number must be in the format +91XXXXXXXXXX"):X.phone="Phone number is required",h.password?h.password.length<6&&(X.password="Password must be at least 6 characters"):X.password="Password is required",h.password!==h.confirmPassword&&(X.confirmPassword="Passwords do not match"),h.age?(h.age<18||h.age>120)&&(X.age="Age must be between 18 and 120"):X.age="Age is required",X},W=async X=>{X.preventDefault(),u(),O("");const D=Q();if(Object.keys(D).length>0){b(D);return}const q=new FormData;Object.keys(h).forEach(ce=>{ce!=="confirmPassword"&&h[ce]!==null&&q.append(ce,h[ce])});try{const ce=await n(q);console.log("Registration result:",ce),ce.success&&ce.clientId?(S(ce.clientId),localStorage.setItem("clientTempId",ce.clientId),T(!0)):O(ce.error||"Registration failed. Please try again.")}catch(ce){console.error("Registration error:",ce),O("Registration failed. Please try again.")}},Z=async()=>{if(!E||E.length!==6){b(X=>({...X,otp:"Please enter a valid 6-digit OTP"}));return}u(),O("");try{const X=await i(_,E);X.success?e("/clientdashboard"):b(D=>({...D,otp:X.error||"Invalid OTP. Please try again."}))}catch(X){b(D=>({...D,otp:"Error verifying OTP. Please try again."})),console.error("OTP verification error:",X)}},z=async()=>{if(!A||A.length!==6){b({...x,emailCode:"Please enter a valid 6-digit verification code"});return}u(),O("");try{console.log("Verifying:",h.email,A);const X=await a(h.email,A);X.success?e("/clientdashboard"):b({...x,emailCode:X.error||"Invalid verification code. Please try again."})}catch{b({...x,emailCode:"Error verifying email. Please try again."})}},$=()=>{L==="phone"?Z():z()},U=j||c;return f.jsxs("div",{className:`max-w-4xl mx-auto p-6 rounded-lg shadow-md ${t==="dark"?"bg-gray-800 text-white":"bg-white text-gray-800"}`,children:[f.jsx("h2",{className:`text-2xl font-bold text-center mb-6 ${t==="dark"?"text-white":"text-gray-800"}`,children:"Client Registration"}),U&&f.jsx("div",{className:`mb-4 p-3 rounded ${t==="dark"?"bg-red-900 text-red-200":"bg-red-100 text-red-700"}`,children:U}),f.jsxs("form",{onSubmit:W,children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("h3",{className:`text-lg font-medium mb-3 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Personal Information"}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:`block mb-1 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Full Name"}),f.jsx("input",{type:"text",name:"name",value:h.name,onChange:F,className:`w-full px-4 py-2 rounded-md ${t==="dark"?"bg-gray-700 text-white border-gray-600 focus:border-blue-500":"bg-white text-gray-900 border-gray-300 focus:border-blue-600"} border focus:outline-none focus:ring-1 ${t==="dark"?"focus:ring-blue-500":"focus:ring-blue-600"} ${x.name?"border-red-500":""}`,placeholder:"John Doe"}),x.name&&f.jsx("p",{className:"mt-1 text-red-500 text-sm",children:x.name})]}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:`block mb-1 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Email"}),f.jsx("input",{type:"email",name:"email",value:h.email,onChange:F,className:`w-full px-4 py-2 rounded-md ${t==="dark"?"bg-gray-700 text-white border-gray-600 focus:border-blue-500":"bg-white text-gray-900 border-gray-300 focus:border-blue-600"} border focus:outline-none focus:ring-1 ${t==="dark"?"focus:ring-blue-500":"focus:ring-blue-600"} ${x.email?"border-red-500":""}`,placeholder:"client@example.com"}),x.email&&f.jsx("p",{className:"mt-1 text-red-500 text-sm",children:x.email})]}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:`block mb-1 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Phone Number"}),f.jsx("input",{type:"tel",name:"phone",value:h.phone,onChange:F,className:`w-full px-4 py-2 rounded-md ${t==="dark"?"bg-gray-700 text-white border-gray-600 focus:border-blue-500":"bg-white text-gray-900 border-gray-300 focus:border-blue-600"} border focus:outline-none focus:ring-1 ${t==="dark"?"focus:ring-blue-500":"focus:ring-blue-600"} ${x.phone?"border-red-500":""}`,placeholder:"+911234567890"}),x.phone&&f.jsx("p",{className:"mt-1 text-red-500 text-sm",children:x.phone})]}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:`block mb-1 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Age"}),f.jsx("input",{type:"number",name:"age",value:h.age,onChange:F,className:`w-full px-4 py-2 rounded-md ${t==="dark"?"bg-gray-700 text-white border-gray-600 focus:border-blue-500":"bg-white text-gray-900 border-gray-300 focus:border-blue-600"} border focus:outline-none focus:ring-1 ${t==="dark"?"focus:ring-blue-500":"focus:ring-blue-600"} ${x.age?"border-red-500":""}`,placeholder:"35"}),x.age&&f.jsx("p",{className:"mt-1 text-red-500 text-sm",children:x.age})]}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:`block mb-1 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Gender"}),f.jsxs("select",{name:"gender",value:h.gender,onChange:F,className:`w-full px-4 py-2 rounded-md ${t==="dark"?"bg-gray-700 text-white border-gray-600 focus:border-blue-500":"bg-white text-gray-900 border-gray-300 focus:border-blue-600"} border focus:outline-none focus:ring-1 ${t==="dark"?"focus:ring-blue-500":"focus:ring-blue-600"}`,children:[f.jsx("option",{value:"Male",children:"Male"}),f.jsx("option",{value:"Female",children:"Female"}),f.jsx("option",{value:"Other",children:"Other"})]})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:`text-lg font-medium mb-3 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Security"}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:`block mb-1 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Password"}),f.jsx("input",{type:"password",name:"password",value:h.password,onChange:F,className:`w-full px-4 py-2 rounded-md ${t==="dark"?"bg-gray-700 text-white border-gray-600 focus:border-blue-500":"bg-white text-gray-900 border-gray-300 focus:border-blue-600"} border focus:outline-none focus:ring-1 ${t==="dark"?"focus:ring-blue-500":"focus:ring-blue-600"} ${x.password?"border-red-500":""}`}),x.password&&f.jsx("p",{className:"mt-1 text-red-500 text-sm",children:x.password})]}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:`block mb-1 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Confirm Password"}),f.jsx("input",{type:"password",name:"confirmPassword",value:h.confirmPassword,onChange:F,className:`w-full px-4 py-2 rounded-md ${t==="dark"?"bg-gray-700 text-white border-gray-600 focus:border-blue-500":"bg-white text-gray-900 border-gray-300 focus:border-blue-600"} border focus:outline-none focus:ring-1 ${t==="dark"?"focus:ring-blue-500":"focus:ring-blue-600"} ${x.confirmPassword?"border-red-500":""}`}),x.confirmPassword&&f.jsx("p",{className:"mt-1 text-red-500 text-sm",children:x.confirmPassword})]}),f.jsxs("div",{className:"mb-6 mt-4",children:[f.jsx("label",{className:`block mb-2 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Profile Picture (Optional)"}),f.jsxs("div",{className:"flex items-center",children:[g&&f.jsx("div",{className:`w-24 h-24 rounded-full overflow-hidden mr-4 ${t==="dark"?"border border-gray-600":"border border-gray-300"}`,children:f.jsx("img",{src:g,alt:"Avatar preview",className:"w-full h-full object-cover"})}),f.jsxs("div",{children:[f.jsx("input",{type:"file",id:"avatar",name:"avatar",accept:"image/*",onChange:J,className:"hidden"}),f.jsx("label",{htmlFor:"avatar",className:`px-4 py-2 rounded cursor-pointer ${t==="dark"?"bg-gray-700 text-blue-400 hover:bg-gray-600":"bg-blue-100 text-blue-600 hover:bg-blue-200"}`,children:"Select Image"})]})]})]})]})]}),f.jsx("div",{className:"mt-6",children:f.jsx(Ge.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:l,className:`w-full py-3 rounded-lg font-medium bg-blue-600 hover:bg-blue-700 text-white transition-colors duration-200 ${l?"opacity-70 cursor-not-allowed":""}`,children:l?"Registering...":"Register"})})]}),w&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsxs("div",{className:`p-6 rounded-lg max-w-md w-full ${t==="dark"?"bg-gray-800 text-white":"bg-white text-gray-800"}`,children:[f.jsx("h3",{className:`text-xl font-bold mb-4 ${t==="dark"?"text-white":"text-gray-800"}`,children:"Verify Your Account"}),f.jsxs("div",{className:"flex mb-6 border-b border-gray-600",children:[f.jsx("button",{onClick:()=>B("email"),className:`flex-1 py-2 px-4 text-center ${L==="email"?t==="dark"?"bg-gray-700 border-b-2 border-blue-500":"bg-gray-100 border-b-2 border-blue-600":""}`,children:"Email Verification"}),f.jsx("button",{onClick:()=>B("phone"),className:`flex-1 py-2 px-4 text-center ${L==="phone"?t==="dark"?"bg-gray-700 border-b-2 border-blue-500":"bg-gray-100 border-b-2 border-blue-600":""}`,children:"Phone Verification"})]}),L==="email"?f.jsxs("div",{children:[f.jsx("p",{className:`mb-4 ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:"We've sent a 6-digit verification code to your email address. Please enter it below to verify your account."}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:`block mb-1 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Enter Email Verification Code"}),f.jsx("input",{type:"text",value:A,onChange:X=>N(X.target.value),className:`w-full px-4 py-2 rounded-md ${t==="dark"?"bg-gray-700 text-white border-gray-600 focus:border-blue-500":"bg-white text-gray-900 border-gray-300 focus:border-blue-600"} border focus:outline-none focus:ring-1 ${t==="dark"?"focus:ring-blue-500":"focus:ring-blue-600"} ${x.emailCode?"border-red-500":""}`,placeholder:"Enter 6-digit code",maxLength:6}),x.emailCode&&f.jsx("p",{className:"mt-1 text-red-500 text-sm",children:x.emailCode})]})]}):f.jsxs("div",{children:[f.jsx("p",{className:`mb-4 ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:"We've sent a 6-digit OTP to your phone number. Please enter it below to verify your account."}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:`block mb-1 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Enter OTP"}),f.jsx("input",{type:"text",value:E,onChange:X=>R(X.target.value),className:`w-full px-4 py-2 rounded-md ${t==="dark"?"bg-gray-700 text-white border-gray-600 focus:border-blue-500":"bg-white text-gray-900 border-gray-300 focus:border-blue-600"} border focus:outline-none focus:ring-1 ${t==="dark"?"focus:ring-blue-500":"focus:ring-blue-600"} ${x.otp?"border-red-500":""}`,placeholder:"Enter 6-digit OTP",maxLength:6}),x.otp&&f.jsx("p",{className:"mt-1 text-red-500 text-sm",children:x.otp})]})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx(Ge.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>T(!1),className:`px-4 py-2 rounded ${t==="dark"?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:"Cancel"}),f.jsx(Ge.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:$,disabled:l,className:`px-4 py-2 rounded bg-blue-600 hover:bg-blue-700 text-white ${l?"opacity-70 cursor-not-allowed":""}`,children:l?"Verifying...":"Verify"})]}),f.jsx("div",{className:"mt-4 text-center",children:f.jsxs("p",{className:t==="dark"?"text-gray-400":"text-gray-600",children:["Didn't receive the ",L==="email"?"code":"OTP","?"," ",f.jsx("button",{type:"button",className:`${t==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"} hover:underline`,onClick:()=>{alert(`${L==="email"?"Verification code":"OTP"} resent to your ${L==="email"?"email address":"phone number"}.`)},children:"Resend"})]})})]})})]})},hF=({isOpen:t,onClose:e})=>{const{theme:n}=vn(),[i,r]=k.useState("client"),[a,l]=k.useState("login"),c=()=>i==="client"?a==="login"?f.jsx(uF,{onSuccess:e}):f.jsx(dF,{onSuccess:()=>l("login")}):a==="login"?f.jsx(U3,{onSuccess:e}):f.jsx(V3,{onSuccess:()=>l("login")}),u={hidden:{opacity:0,y:-50},visible:{opacity:1,y:0,transition:{duration:.3}},exit:{opacity:0,y:50,transition:{duration:.2}}};return f.jsx(Cj,{children:t&&f.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[f.jsx(Ge.div,{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),f.jsx("div",{className:"flex min-h-screen items-center justify-center p-4",children:f.jsxs(Ge.div,{className:`relative mx-auto max-w-lg rounded-lg ${n==="dark"?"bg-gray-800 text-white":"bg-white text-gray-900"} shadow-xl`,variants:u,initial:"hidden",animate:"visible",exit:"exit",onClick:h=>h.stopPropagation(),children:[f.jsx("button",{className:`absolute right-3 top-3 rounded-full p-1 ${n==="dark"?"text-gray-400 hover:text-white":"text-gray-400 hover:text-gray-500"}`,onClick:e,children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),f.jsx("div",{className:"px-6 py-4",children:f.jsx("h3",{className:`text-2xl font-bold ${n==="dark"?"text-blue-400":"text-primary"}`,children:a==="login"?"Welcome Back":"Join MediConnect"})}),f.jsxs("div",{className:"flex border-b border-gray-200 px-6",children:[f.jsx("button",{className:`py-2 px-4 font-medium transition-colors ${i==="client"?n==="dark"?"border-b-2 border-blue-400 text-blue-400":"border-b-2 border-primary text-primary":n==="dark"?"text-gray-400 hover:text-white":"text-gray-500 hover:text-gray-700"}`,onClick:()=>r("client"),children:"I'm a Patient"}),f.jsx("button",{className:`py-2 px-4 font-medium transition-colors ${i==="doctor"?n==="dark"?"border-b-2 border-blue-400 text-blue-400":"border-b-2 border-primary text-primary":n==="dark"?"text-gray-400 hover:text-white":"text-gray-500 hover:text-gray-700"}`,onClick:()=>r("doctor"),children:"I'm a Doctor"})]}),f.jsx("div",{className:"p-6",children:c()}),f.jsx("div",{className:`border-t ${n==="dark"?"border-gray-700":"border-gray-200"} p-4 text-center`,children:a==="login"?f.jsxs("p",{children:["Don't have an account?"," ",f.jsx("button",{className:`font-medium ${n==="dark"?"text-blue-400 hover:text-blue-300":"text-primary hover:text-primary-dark"}`,onClick:()=>l("signup"),children:"Sign up"})]}):f.jsxs("p",{children:["Already have an account?"," ",f.jsx("button",{className:`font-medium ${n==="dark"?"text-blue-400 hover:text-blue-300":"text-primary hover:text-primary-dark"}`,onClick:()=>l("login"),children:"Log in"})]})})]})})]})})},fF=()=>{const[t,e]=k.useState(!1),{theme:n,toggleTheme:i}=vn(),[r,a]=k.useState(!1);return f.jsxs(f.Fragment,{children:[f.jsxs("nav",{className:`${n==="dark"?"bg-gray-800 text-white":"bg-white text-gray-900"} shadow-md fixed w-full z-50 transition-colors duration-300`,children:[f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex justify-between h-16",children:[f.jsxs("div",{className:"flex",children:[f.jsx("div",{className:"flex-shrink-0 flex items-center",children:f.jsx(Ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:f.jsx("span",{className:`${n==="dark"?"text-blue-400":"text-primary"} text-2xl font-bold`,children:"MediConnect"})})}),f.jsxs("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:[f.jsx("a",{href:"#home",className:`border-transparent ${n==="dark"?"text-white":"text-gray-900"} inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium`,children:"Home"}),f.jsx("a",{href:"#services",className:`border-transparent ${n==="dark"?"text-gray-300 hover:text-white":"text-gray-500 hover:text-gray-700"} hover:border-gray-300 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium`,children:"Services"}),f.jsx("a",{href:"#about",className:`border-transparent ${n==="dark"?"text-gray-300 hover:text-white":"text-gray-500 hover:text-gray-700"} hover:border-gray-300 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium`,children:"About Us"}),f.jsx("a",{href:"#contact",className:`border-transparent ${n==="dark"?"text-gray-300 hover:text-white":"text-gray-500 hover:text-gray-700"} hover:border-gray-300 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium`,children:"Contact"})]})]}),f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx(Ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:i,className:`p-2 rounded-full ${n==="dark"?"bg-gray-700 text-yellow-300":"bg-gray-200 text-gray-800"}`,"aria-label":"Toggle theme",children:n==="dark"?f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}):f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})}),f.jsx(Ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors duration-300",onClick:()=>a(!0),children:"Login"})]}),f.jsx("div",{className:"-mr-2 flex items-center sm:hidden",children:f.jsxs("button",{onClick:()=>e(!t),className:`inline-flex items-center justify-center p-2 rounded-md ${n==="dark"?"text-gray-400 hover:text-white hover:bg-gray-700":"text-gray-400 hover:text-gray-500 hover:bg-gray-100"} focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500`,children:[f.jsx("span",{className:"sr-only",children:"Open main menu"}),t?f.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}):f.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})})]})}),t&&f.jsx("div",{className:`sm:hidden ${n==="dark"?"bg-gray-800":"bg-white"}`,children:f.jsxs("div",{className:"pt-2 pb-3 space-y-1",children:[f.jsx("a",{href:"#home",className:`${n==="dark"?"bg-gray-900 border-blue-500 text-white":"bg-primary-light border-primary text-primary-dark"} block pl-3 pr-4 py-2 border-l-4 text-base font-medium`,children:"Home"}),f.jsx("a",{href:"#services",className:`border-transparent ${n==="dark"?"text-gray-300 hover:bg-gray-700 hover:border-gray-500 hover:text-white":"text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700"} block pl-3 pr-4 py-2 border-l-4 text-base font-medium`,children:"Services"}),f.jsx("a",{href:"#about",className:`border-transparent ${n==="dark"?"text-gray-300 hover:bg-gray-700 hover:border-gray-500 hover:text-white":"text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700"} block pl-3 pr-4 py-2 border-l-4 text-base font-medium`,children:"About Us"}),f.jsx("a",{href:"#contact",className:`border-transparent ${n==="dark"?"text-gray-300 hover:bg-gray-700 hover:border-gray-500 hover:text-white":"text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700"} block pl-3 pr-4 py-2 border-l-4 text-base font-medium`,children:"Contact"}),f.jsx("div",{className:"pl-3 pr-4 py-2",children:f.jsx("button",{onClick:()=>a(!0),className:`w-full ${n==="dark"?"bg-blue-500 hover:bg-blue-600":"bg-primary hover:bg-primary-dark"} text-white px-4 py-2 rounded-md text-sm font-medium transition-colors duration-300`,children:"Book Appointment"})}),f.jsx("div",{className:"flex items-center pl-3 py-2",children:f.jsx("button",{onClick:i,className:`p-2 rounded-full ${n==="dark"?"bg-gray-700 text-yellow-300":"bg-gray-200 text-gray-800"}`,"aria-label":"Toggle theme",children:n==="dark"?"Light Mode":"Dark Mode"})})]})})]}),f.jsx(hF,{isOpen:r,onClose:()=>a(!1)})]})},$3="125",pF=0,YM=1,mF=2,q3=1,Y3=2,ud=3,Om=0,On=1,Bm=2,X3=1,vd=0,bd=1,XM=2,ZM=3,QM=4,gF=5,tc=100,yF=101,xF=102,JM=103,KM=104,vF=200,bF=201,wF=202,_F=203,Z3=204,Q3=205,SF=206,MF=207,TF=208,EF=209,AF=210,CF=0,NF=1,RF=2,$x=3,LF=4,kF=5,jF=6,DF=7,zm=0,PF=1,OF=2,wd=0,BF=1,zF=2,FF=3,IF=4,UF=5,J3=300,Wb=301,$b=302,eT=303,tT=304,qb=306,Yb=307,qx=1e3,ji=1001,Yx=1002,si=1003,nT=1004,iT=1005,Kn=1006,VF=1007,Fm=1008,Xb=1009,HF=1010,GF=1011,Xp=1012,WF=1013,jp=1014,ja=1015,Zp=1016,$F=1017,qF=1018,YF=1019,_d=1020,XF=1021,Uo=1022,Rr=1023,ZF=1024,QF=1025,pc=1026,Ud=1027,JF=1028,KF=1029,eI=1030,tI=1031,nI=1032,iI=1033,rT=33776,sT=33777,aT=33778,oT=33779,lT=35840,cT=35841,uT=35842,dT=35843,rI=36196,hT=37492,fT=37496,sI=37808,aI=37809,oI=37810,lI=37811,cI=37812,uI=37813,dI=37814,hI=37815,fI=37816,pI=37817,mI=37818,gI=37819,yI=37820,xI=37821,vI=36492,bI=37840,wI=37841,_I=37842,SI=37843,MI=37844,TI=37845,EI=37846,AI=37847,CI=37848,NI=37849,RI=37850,LI=37851,kI=37852,jI=37853,DI=2200,PI=2201,OI=2202,Qp=2300,Dp=2301,_y=2302,oc=2400,lc=2401,Jp=2402,Zb=2500,K3=2501,BI=0,bh=3e3,eN=3001,zI=3007,FI=3002,II=3003,UI=3004,VI=3005,HI=3006,GI=3200,WI=3201,qc=0,$I=1,Sy=7680,qI=519,Im=35044,Vd=35048,pT="300 es";function to(){}Object.assign(to.prototype,{addEventListener:function(t,e){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)},hasEventListener:function(t,e){if(this._listeners===void 0)return!1;const n=this._listeners;return n[t]!==void 0&&n[t].indexOf(e)!==-1},removeEventListener:function(t,e){if(this._listeners===void 0)return;const i=this._listeners[t];if(i!==void 0){const r=i.indexOf(e);r!==-1&&i.splice(r,1)}},dispatchEvent:function(t){if(this._listeners===void 0)return;const n=this._listeners[t.type];if(n!==void 0){t.target=this;const i=n.slice(0);for(let r=0,a=i.length;r<a;r++)i[r].call(this,t)}}});const Hn=[];for(let t=0;t<256;t++)Hn[t]=(t<16?"0":"")+t.toString(16);let If=1234567;const ft={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Hn[t&255]+Hn[t>>8&255]+Hn[t>>16&255]+Hn[t>>24&255]+"-"+Hn[e&255]+Hn[e>>8&255]+"-"+Hn[e>>16&15|64]+Hn[e>>24&255]+"-"+Hn[n&63|128]+Hn[n>>8&255]+"-"+Hn[n>>16&255]+Hn[n>>24&255]+Hn[i&255]+Hn[i>>8&255]+Hn[i>>16&255]+Hn[i>>24&255]).toUpperCase()},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},damp:function(t,e,n,i){return ft.lerp(t,e,1-Math.exp(-n*i))},pingpong:function(t,e=1){return e-Math.abs(ft.euclideanModulo(t,e*2)-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return t!==void 0&&(If=t%2147483647),If=If*16807%2147483647,(If-1)/2147483646},degToRad:function(t){return t*ft.DEG2RAD},radToDeg:function(t){return t*ft.RAD2DEG},isPowerOfTwo:function(t){return(t&t-1)===0&&t!==0},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,i,r){const a=Math.cos,l=Math.sin,c=a(n/2),u=l(n/2),h=a((e+i)/2),p=l((e+i)/2),g=a((e-i)/2),y=l((e-i)/2),x=a((i-e)/2),b=l((i-e)/2);switch(r){case"XYX":t.set(c*p,u*g,u*y,c*h);break;case"YZY":t.set(u*y,c*p,u*g,c*h);break;case"ZXZ":t.set(u*g,u*y,c*p,c*h);break;case"XZX":t.set(c*p,u*b,u*x,c*h);break;case"YXY":t.set(u*x,c*p,u*b,c*h);break;case"ZYZ":t.set(u*b,u*x,c*p,c*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}};class Ae{constructor(e=0,n=0){Object.defineProperty(this,"isVector2",{value:!0}),this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,n){return n!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,n)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e,n){return n!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,n)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,r=e.elements;return this.x=r[0]*n+r[3]*i+r[6],this.y=r[1]*n+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n,i){return i!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),r=Math.sin(n),a=this.x-e.x,l=this.y-e.y;return this.x=a*i-l*r+e.x,this.y=a*r+l*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}class ur{constructor(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,n,i,r,a,l,c,u,h){const p=this.elements;return p[0]=e,p[1]=r,p[2]=c,p[3]=n,p[4]=a,p[5]=u,p[6]=i,p[7]=l,p[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}clone(){return new this.constructor().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,a=this.elements,l=i[0],c=i[3],u=i[6],h=i[1],p=i[4],g=i[7],y=i[2],x=i[5],b=i[8],w=r[0],T=r[3],_=r[6],S=r[1],E=r[4],R=r[7],A=r[2],N=r[5],j=r[8];return a[0]=l*w+c*S+u*A,a[3]=l*T+c*E+u*N,a[6]=l*_+c*R+u*j,a[1]=h*w+p*S+g*A,a[4]=h*T+p*E+g*N,a[7]=h*_+p*R+g*j,a[2]=y*w+x*S+b*A,a[5]=y*T+x*E+b*N,a[8]=y*_+x*R+b*j,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],r=e[2],a=e[3],l=e[4],c=e[5],u=e[6],h=e[7],p=e[8];return n*l*p-n*c*h-i*a*p+i*c*u+r*a*h-r*l*u}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],a=e[3],l=e[4],c=e[5],u=e[6],h=e[7],p=e[8],g=p*l-c*h,y=c*u-p*a,x=h*a-l*u,b=n*g+i*y+r*x;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const w=1/b;return e[0]=g*w,e[1]=(r*h-p*i)*w,e[2]=(c*i-r*l)*w,e[3]=y*w,e[4]=(p*n-r*u)*w,e[5]=(r*a-c*n)*w,e[6]=x*w,e[7]=(i*u-h*n)*w,e[8]=(l*n-i*a)*w,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).copy(this).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,r,a,l,c){const u=Math.cos(a),h=Math.sin(a);return this.set(i*u,i*h,-i*(u*l+h*c)+l+e,-r*h,r*u,-r*(-h*l+u*c)+c+n,0,0,1),this}scale(e,n){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=n,i[4]*=n,i[7]*=n,this}rotate(e){const n=Math.cos(e),i=Math.sin(e),r=this.elements,a=r[0],l=r[3],c=r[6],u=r[1],h=r[4],p=r[7];return r[0]=n*a+i*u,r[3]=n*l+i*h,r[6]=n*c+i*p,r[1]=-i*a+n*u,r[4]=-i*l+n*h,r[7]=-i*c+n*p,this}translate(e,n){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=n*i[2],i[4]+=n*i[5],i[7]+=n*i[8],this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<9;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}}let Ol;const Yc={getDataURL:function(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{Ol===void 0&&(Ol=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Ol.width=t.width,Ol.height=t.height;const n=Ol.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Ol}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}};let YI=0;function Xt(t=Xt.DEFAULT_IMAGE,e=Xt.DEFAULT_MAPPING,n=ji,i=ji,r=Kn,a=Fm,l=Rr,c=Xb,u=1,h=bh){Object.defineProperty(this,"id",{value:YI++}),this.uuid=ft.generateUUID(),this.name="",this.image=t,this.mipmaps=[],this.mapping=e,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=a,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new Ae(0,0),this.repeat=new Ae(1,1),this.center=new Ae(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ur,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=h,this.version=0,this.onUpdate=null}Xt.DEFAULT_IMAGE=void 0;Xt.DEFAULT_MAPPING=J3;Xt.prototype=Object.assign(Object.create(to.prototype),{constructor:Xt,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const i=this.image;if(i.uuid===void 0&&(i.uuid=ft.generateUUID()),!e&&t.images[i.uuid]===void 0){let r;if(Array.isArray(i)){r=[];for(let a=0,l=i.length;a<l;a++)i[a].isDataTexture?r.push(My(i[a].image)):r.push(My(i[a]))}else r=My(i);t.images[i.uuid]={uuid:i.uuid,url:r}}n.image=i.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==J3)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case qx:t.x=t.x-Math.floor(t.x);break;case ji:t.x=t.x<0?0:1;break;case Yx:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case qx:t.y=t.y-Math.floor(t.y);break;case ji:t.y=t.y<0?0:1;break;case Yx:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}});Object.defineProperty(Xt.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}});function My(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?Yc.getDataURL(t):t.data?{data:Array.prototype.slice.call(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}class Ut{constructor(e=0,n=0,i=0,r=1){Object.defineProperty(this,"isVector4",{value:!0}),this.x=e,this.y=n,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,n){return n!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,n)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e,n){return n!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,n)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,a=this.w,l=e.elements;return this.x=l[0]*n+l[4]*i+l[8]*r+l[12]*a,this.y=l[1]*n+l[5]*i+l[9]*r+l[13]*a,this.z=l[2]*n+l[6]*i+l[10]*r+l[14]*a,this.w=l[3]*n+l[7]*i+l[11]*r+l[15]*a,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,r,a;const u=e.elements,h=u[0],p=u[4],g=u[8],y=u[1],x=u[5],b=u[9],w=u[2],T=u[6],_=u[10];if(Math.abs(p-y)<.01&&Math.abs(g-w)<.01&&Math.abs(b-T)<.01){if(Math.abs(p+y)<.1&&Math.abs(g+w)<.1&&Math.abs(b+T)<.1&&Math.abs(h+x+_-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const E=(h+1)/2,R=(x+1)/2,A=(_+1)/2,N=(p+y)/4,j=(g+w)/4,O=(b+T)/4;return E>R&&E>A?E<.01?(i=0,r=.707106781,a=.707106781):(i=Math.sqrt(E),r=N/i,a=j/i):R>A?R<.01?(i=.707106781,r=0,a=.707106781):(r=Math.sqrt(R),i=N/r,a=O/r):A<.01?(i=.707106781,r=.707106781,a=0):(a=Math.sqrt(A),i=j/a,r=O/a),this.set(i,r,a,n),this}let S=Math.sqrt((T-b)*(T-b)+(g-w)*(g-w)+(y-p)*(y-p));return Math.abs(S)<.001&&(S=1),this.x=(T-b)/S,this.y=(g-w)/S,this.z=(y-p)/S,this.w=Math.acos((h+x+_-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n,i){return i!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}class Sd extends to{constructor(e,n,i){super(),Object.defineProperty(this,"isWebGLRenderTarget",{value:!0}),this.width=e,this.height=n,this.scissor=new Ut(0,0,e,n),this.scissorTest=!1,this.viewport=new Ut(0,0,e,n),i=i||{},this.texture=new Xt(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=n,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Kn,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null}setSize(e,n){(this.width!==e||this.height!==n)&&(this.width=e,this.height=n,this.texture.image.width=e,this.texture.image.height=n,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Bi{constructor(e=0,n=0,i=0,r=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=e,this._y=n,this._z=i,this._w=r}static slerp(e,n,i,r){return i.copy(e).slerp(n,r)}static slerpFlat(e,n,i,r,a,l,c){let u=i[r+0],h=i[r+1],p=i[r+2],g=i[r+3];const y=a[l+0],x=a[l+1],b=a[l+2],w=a[l+3];if(g!==w||u!==y||h!==x||p!==b){let T=1-c;const _=u*y+h*x+p*b+g*w,S=_>=0?1:-1,E=1-_*_;if(E>Number.EPSILON){const A=Math.sqrt(E),N=Math.atan2(A,_*S);T=Math.sin(T*N)/A,c=Math.sin(c*N)/A}const R=c*S;if(u=u*T+y*R,h=h*T+x*R,p=p*T+b*R,g=g*T+w*R,T===1-c){const A=1/Math.sqrt(u*u+h*h+p*p+g*g);u*=A,h*=A,p*=A,g*=A}}e[n]=u,e[n+1]=h,e[n+2]=p,e[n+3]=g}static multiplyQuaternionsFlat(e,n,i,r,a,l){const c=i[r],u=i[r+1],h=i[r+2],p=i[r+3],g=a[l],y=a[l+1],x=a[l+2],b=a[l+3];return e[n]=c*b+p*g+u*x-h*y,e[n+1]=u*b+p*y+h*g-c*x,e[n+2]=h*b+p*x+c*y-u*g,e[n+3]=p*b-c*g-u*y-h*x,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,r){return this._x=e,this._y=n,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,r=e._y,a=e._z,l=e._order,c=Math.cos,u=Math.sin,h=c(i/2),p=c(r/2),g=c(a/2),y=u(i/2),x=u(r/2),b=u(a/2);switch(l){case"XYZ":this._x=y*p*g+h*x*b,this._y=h*x*g-y*p*b,this._z=h*p*b+y*x*g,this._w=h*p*g-y*x*b;break;case"YXZ":this._x=y*p*g+h*x*b,this._y=h*x*g-y*p*b,this._z=h*p*b-y*x*g,this._w=h*p*g+y*x*b;break;case"ZXY":this._x=y*p*g-h*x*b,this._y=h*x*g+y*p*b,this._z=h*p*b+y*x*g,this._w=h*p*g-y*x*b;break;case"ZYX":this._x=y*p*g-h*x*b,this._y=h*x*g+y*p*b,this._z=h*p*b-y*x*g,this._w=h*p*g+y*x*b;break;case"YZX":this._x=y*p*g+h*x*b,this._y=h*x*g+y*p*b,this._z=h*p*b-y*x*g,this._w=h*p*g-y*x*b;break;case"XZY":this._x=y*p*g-h*x*b,this._y=h*x*g-y*p*b,this._z=h*p*b+y*x*g,this._w=h*p*g+y*x*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],r=n[4],a=n[8],l=n[1],c=n[5],u=n[9],h=n[2],p=n[6],g=n[10],y=i+c+g;if(y>0){const x=.5/Math.sqrt(y+1);this._w=.25/x,this._x=(p-u)*x,this._y=(a-h)*x,this._z=(l-r)*x}else if(i>c&&i>g){const x=2*Math.sqrt(1+i-c-g);this._w=(p-u)/x,this._x=.25*x,this._y=(r+l)/x,this._z=(a+h)/x}else if(c>g){const x=2*Math.sqrt(1+c-i-g);this._w=(a-h)/x,this._x=(r+l)/x,this._y=.25*x,this._z=(u+p)/x}else{const x=2*Math.sqrt(1+g-i-c);this._w=(l-r)/x,this._x=(a+h)/x,this._y=(u+p)/x,this._z=.25*x}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<1e-6?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ft.clamp(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,n/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,n){return n!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,n)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,r=e._y,a=e._z,l=e._w,c=n._x,u=n._y,h=n._z,p=n._w;return this._x=i*p+l*c+r*h-a*u,this._y=r*p+l*u+a*c-i*h,this._z=a*p+l*h+i*u-r*c,this._w=l*p-i*c-r*u-a*h,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const i=this._x,r=this._y,a=this._z,l=this._w;let c=l*e._w+i*e._x+r*e._y+a*e._z;if(c<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,c=-c):this.copy(e),c>=1)return this._w=l,this._x=i,this._y=r,this._z=a,this;const u=1-c*c;if(u<=Number.EPSILON){const x=1-n;return this._w=x*l+n*this._w,this._x=x*i+n*this._x,this._y=x*r+n*this._y,this._z=x*a+n*this._z,this.normalize(),this._onChangeCallback(),this}const h=Math.sqrt(u),p=Math.atan2(h,c),g=Math.sin((1-n)*p)/h,y=Math.sin(n*p)/h;return this._w=l*g+this._w*y,this._x=i*g+this._x*y,this._y=r*g+this._y*y,this._z=a*g+this._z*y,this._onChangeCallback(),this}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}class Y{constructor(e=0,n=0,i=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,n){return n!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,n)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e,n){return n!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,n)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e,n){return n!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,n)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(mT.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(mT.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*n+a[3]*i+a[6]*r,this.y=a[1]*n+a[4]*i+a[7]*r,this.z=a[2]*n+a[5]*i+a[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,a=e.elements,l=1/(a[3]*n+a[7]*i+a[11]*r+a[15]);return this.x=(a[0]*n+a[4]*i+a[8]*r+a[12])*l,this.y=(a[1]*n+a[5]*i+a[9]*r+a[13])*l,this.z=(a[2]*n+a[6]*i+a[10]*r+a[14])*l,this}applyQuaternion(e){const n=this.x,i=this.y,r=this.z,a=e.x,l=e.y,c=e.z,u=e.w,h=u*n+l*r-c*i,p=u*i+c*n-a*r,g=u*r+a*i-l*n,y=-a*n-l*i-c*r;return this.x=h*u+y*-a+p*-c-g*-l,this.y=p*u+y*-l+g*-a-h*-c,this.z=g*u+y*-c+h*-l-p*-a,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*n+a[4]*i+a[8]*r,this.y=a[1]*n+a[5]*i+a[9]*r,this.z=a[2]*n+a[6]*i+a[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e,n){return n!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,n)):this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,r=e.y,a=e.z,l=n.x,c=n.y,u=n.z;return this.x=r*u-a*c,this.y=a*l-i*u,this.z=i*c-r*l,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Ty.copy(this).projectOnVector(e),this.sub(Ty)}reflect(e){return this.sub(Ty.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(ft.clamp(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return n*n+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const r=Math.sin(n)*e;return this.x=r*Math.sin(i),this.y=Math.cos(n)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=r,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n,i){return i!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}const Ty=new Y,mT=new Bi;class el{constructor(e,n){Object.defineProperty(this,"isBox3",{value:!0}),this.min=e!==void 0?e:new Y(1/0,1/0,1/0),this.max=n!==void 0?n:new Y(-1/0,-1/0,-1/0)}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){let n=1/0,i=1/0,r=1/0,a=-1/0,l=-1/0,c=-1/0;for(let u=0,h=e.length;u<h;u+=3){const p=e[u],g=e[u+1],y=e[u+2];p<n&&(n=p),g<i&&(i=g),y<r&&(r=y),p>a&&(a=p),g>l&&(l=g),y>c&&(c=y)}return this.min.set(n,i,r),this.max.set(a,l,c),this}setFromBufferAttribute(e){let n=1/0,i=1/0,r=1/0,a=-1/0,l=-1/0,c=-1/0;for(let u=0,h=e.count;u<h;u++){const p=e.getX(u),g=e.getY(u),y=e.getZ(u);p<n&&(n=p),g<i&&(i=g),y<r&&(r=y),p>a&&(a=p),g>l&&(l=g),y>c&&(c=y)}return this.min.set(n,i,r),this.max.set(a,l,c),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=Xu.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return e===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Y),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return e===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Y),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const n=e.geometry;n!==void 0&&(n.boundingBox===null&&n.computeBoundingBox(),Ay.copy(n.boundingBox),Ay.applyMatrix4(e.matrixWorld),this.union(Ay));const i=e.children;for(let r=0,a=i.length;r<a;r++)this.expandByObject(i[r]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),n=new Y),n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Xu),Xu.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Zu),Uf.subVectors(this.max,Zu),Bl.subVectors(e.a,Zu),zl.subVectors(e.b,Zu),Fl.subVectors(e.c,Zu),_a.subVectors(zl,Bl),Sa.subVectors(Fl,zl),To.subVectors(Bl,Fl);let n=[0,-_a.z,_a.y,0,-Sa.z,Sa.y,0,-To.z,To.y,_a.z,0,-_a.x,Sa.z,0,-Sa.x,To.z,0,-To.x,-_a.y,_a.x,0,-Sa.y,Sa.x,0,-To.y,To.x,0];return!Ey(n,Bl,zl,Fl,Uf)||(n=[1,0,0,0,1,0,0,0,1],!Ey(n,Bl,zl,Fl,Uf))?!1:(Vf.crossVectors(_a,Sa),n=[Vf.x,Vf.y,Vf.z],Ey(n,Bl,zl,Fl,Uf))}clampPoint(e,n){return n===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),n=new Y),n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Xu.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return e===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=this.getSize(Xu).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Cs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Cs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Cs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Cs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Cs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Cs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Cs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Cs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Cs),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}function Ey(t,e,n,i,r){for(let a=0,l=t.length-3;a<=l;a+=3){Eo.fromArray(t,a);const c=r.x*Math.abs(Eo.x)+r.y*Math.abs(Eo.y)+r.z*Math.abs(Eo.z),u=e.dot(Eo),h=n.dot(Eo),p=i.dot(Eo);if(Math.max(-Math.max(u,h,p),Math.min(u,h,p))>c)return!1}return!0}const Cs=[new Y,new Y,new Y,new Y,new Y,new Y,new Y,new Y],Xu=new Y,Ay=new el,Bl=new Y,zl=new Y,Fl=new Y,_a=new Y,Sa=new Y,To=new Y,Zu=new Y,Uf=new Y,Vf=new Y,Eo=new Y,XI=new el;class tl{constructor(e,n){this.center=e!==void 0?e:new Y,this.radius=n!==void 0?n:-1}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):XI.setFromPoints(e).getCenter(i);let r=0;for(let a=0,l=e.length;a<l;a++)r=Math.max(r,i.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),n=new Y),n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return e===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new el),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}}const Ns=new Y,Cy=new Y,Hf=new Y,Ma=new Y,Ny=new Y,Gf=new Y,Ry=new Y;class wh{constructor(e,n){this.origin=e!==void 0?e:new Y,this.direction=n!==void 0?n:new Y(0,0,-1)}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n===void 0&&(console.warn("THREE.Ray: .at() target is now required"),n=new Y),n.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ns)),this}closestPointToPoint(e,n){n===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),n=new Y),n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Ns.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Ns.copy(this.direction).multiplyScalar(n).add(this.origin),Ns.distanceToSquared(e))}distanceSqToSegment(e,n,i,r){Cy.copy(e).add(n).multiplyScalar(.5),Hf.copy(n).sub(e).normalize(),Ma.copy(this.origin).sub(Cy);const a=e.distanceTo(n)*.5,l=-this.direction.dot(Hf),c=Ma.dot(this.direction),u=-Ma.dot(Hf),h=Ma.lengthSq(),p=Math.abs(1-l*l);let g,y,x,b;if(p>0)if(g=l*u-c,y=l*c-u,b=a*p,g>=0)if(y>=-b)if(y<=b){const w=1/p;g*=w,y*=w,x=g*(g+l*y+2*c)+y*(l*g+y+2*u)+h}else y=a,g=Math.max(0,-(l*y+c)),x=-g*g+y*(y+2*u)+h;else y=-a,g=Math.max(0,-(l*y+c)),x=-g*g+y*(y+2*u)+h;else y<=-b?(g=Math.max(0,-(-l*a+c)),y=g>0?-a:Math.min(Math.max(-a,-u),a),x=-g*g+y*(y+2*u)+h):y<=b?(g=0,y=Math.min(Math.max(-a,-u),a),x=y*(y+2*u)+h):(g=Math.max(0,-(l*a+c)),y=g>0?a:Math.min(Math.max(-a,-u),a),x=-g*g+y*(y+2*u)+h);else y=l>0?-a:a,g=Math.max(0,-(l*y+c)),x=-g*g+y*(y+2*u)+h;return i&&i.copy(this.direction).multiplyScalar(g).add(this.origin),r&&r.copy(Hf).multiplyScalar(y).add(Cy),x}intersectSphere(e,n){Ns.subVectors(e.center,this.origin);const i=Ns.dot(this.direction),r=Ns.dot(Ns)-i*i,a=e.radius*e.radius;if(r>a)return null;const l=Math.sqrt(a-r),c=i-l,u=i+l;return c<0&&u<0?null:c<0?this.at(u,n):this.at(c,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,r,a,l,c,u;const h=1/this.direction.x,p=1/this.direction.y,g=1/this.direction.z,y=this.origin;return h>=0?(i=(e.min.x-y.x)*h,r=(e.max.x-y.x)*h):(i=(e.max.x-y.x)*h,r=(e.min.x-y.x)*h),p>=0?(a=(e.min.y-y.y)*p,l=(e.max.y-y.y)*p):(a=(e.max.y-y.y)*p,l=(e.min.y-y.y)*p),i>l||a>r||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),g>=0?(c=(e.min.z-y.z)*g,u=(e.max.z-y.z)*g):(c=(e.max.z-y.z)*g,u=(e.min.z-y.z)*g),i>u||c>r)||((c>i||i!==i)&&(i=c),(u<r||r!==r)&&(r=u),r<0)?null:this.at(i>=0?i:r,n)}intersectsBox(e){return this.intersectBox(e,Ns)!==null}intersectTriangle(e,n,i,r,a){Ny.subVectors(n,e),Gf.subVectors(i,e),Ry.crossVectors(Ny,Gf);let l=this.direction.dot(Ry),c;if(l>0){if(r)return null;c=1}else if(l<0)c=-1,l=-l;else return null;Ma.subVectors(this.origin,e);const u=c*this.direction.dot(Gf.crossVectors(Ma,Gf));if(u<0)return null;const h=c*this.direction.dot(Ny.cross(Ma));if(h<0||u+h>l)return null;const p=-c*Ma.dot(Ry);return p<0?null:this.at(p/l,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}class bt{constructor(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,n,i,r,a,l,c,u,h,p,g,y,x,b,w,T){const _=this.elements;return _[0]=e,_[4]=n,_[8]=i,_[12]=r,_[1]=a,_[5]=l,_[9]=c,_[13]=u,_[2]=h,_[6]=p,_[10]=g,_[14]=y,_[3]=x,_[7]=b,_[11]=w,_[15]=T,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new bt().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,i=e.elements,r=1/Il.setFromMatrixColumn(e,0).length(),a=1/Il.setFromMatrixColumn(e,1).length(),l=1/Il.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*a,n[5]=i[5]*a,n[6]=i[6]*a,n[7]=0,n[8]=i[8]*l,n[9]=i[9]*l,n[10]=i[10]*l,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const n=this.elements,i=e.x,r=e.y,a=e.z,l=Math.cos(i),c=Math.sin(i),u=Math.cos(r),h=Math.sin(r),p=Math.cos(a),g=Math.sin(a);if(e.order==="XYZ"){const y=l*p,x=l*g,b=c*p,w=c*g;n[0]=u*p,n[4]=-u*g,n[8]=h,n[1]=x+b*h,n[5]=y-w*h,n[9]=-c*u,n[2]=w-y*h,n[6]=b+x*h,n[10]=l*u}else if(e.order==="YXZ"){const y=u*p,x=u*g,b=h*p,w=h*g;n[0]=y+w*c,n[4]=b*c-x,n[8]=l*h,n[1]=l*g,n[5]=l*p,n[9]=-c,n[2]=x*c-b,n[6]=w+y*c,n[10]=l*u}else if(e.order==="ZXY"){const y=u*p,x=u*g,b=h*p,w=h*g;n[0]=y-w*c,n[4]=-l*g,n[8]=b+x*c,n[1]=x+b*c,n[5]=l*p,n[9]=w-y*c,n[2]=-l*h,n[6]=c,n[10]=l*u}else if(e.order==="ZYX"){const y=l*p,x=l*g,b=c*p,w=c*g;n[0]=u*p,n[4]=b*h-x,n[8]=y*h+w,n[1]=u*g,n[5]=w*h+y,n[9]=x*h-b,n[2]=-h,n[6]=c*u,n[10]=l*u}else if(e.order==="YZX"){const y=l*u,x=l*h,b=c*u,w=c*h;n[0]=u*p,n[4]=w-y*g,n[8]=b*g+x,n[1]=g,n[5]=l*p,n[9]=-c*p,n[2]=-h*p,n[6]=x*g+b,n[10]=y-w*g}else if(e.order==="XZY"){const y=l*u,x=l*h,b=c*u,w=c*h;n[0]=u*p,n[4]=-g,n[8]=h*p,n[1]=y*g+w,n[5]=l*p,n[9]=x*g-b,n[2]=b*g-x,n[6]=c*p,n[10]=w*g+y}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(ZI,e,QI)}lookAt(e,n,i){const r=this.elements;return Ni.subVectors(e,n),Ni.lengthSq()===0&&(Ni.z=1),Ni.normalize(),Ta.crossVectors(i,Ni),Ta.lengthSq()===0&&(Math.abs(i.z)===1?Ni.x+=1e-4:Ni.z+=1e-4,Ni.normalize(),Ta.crossVectors(i,Ni)),Ta.normalize(),Wf.crossVectors(Ni,Ta),r[0]=Ta.x,r[4]=Wf.x,r[8]=Ni.x,r[1]=Ta.y,r[5]=Wf.y,r[9]=Ni.y,r[2]=Ta.z,r[6]=Wf.z,r[10]=Ni.z,this}multiply(e,n){return n!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,n)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,a=this.elements,l=i[0],c=i[4],u=i[8],h=i[12],p=i[1],g=i[5],y=i[9],x=i[13],b=i[2],w=i[6],T=i[10],_=i[14],S=i[3],E=i[7],R=i[11],A=i[15],N=r[0],j=r[4],O=r[8],L=r[12],B=r[1],F=r[5],J=r[9],Q=r[13],W=r[2],Z=r[6],z=r[10],$=r[14],U=r[3],X=r[7],D=r[11],q=r[15];return a[0]=l*N+c*B+u*W+h*U,a[4]=l*j+c*F+u*Z+h*X,a[8]=l*O+c*J+u*z+h*D,a[12]=l*L+c*Q+u*$+h*q,a[1]=p*N+g*B+y*W+x*U,a[5]=p*j+g*F+y*Z+x*X,a[9]=p*O+g*J+y*z+x*D,a[13]=p*L+g*Q+y*$+x*q,a[2]=b*N+w*B+T*W+_*U,a[6]=b*j+w*F+T*Z+_*X,a[10]=b*O+w*J+T*z+_*D,a[14]=b*L+w*Q+T*$+_*q,a[3]=S*N+E*B+R*W+A*U,a[7]=S*j+E*F+R*Z+A*X,a[11]=S*O+E*J+R*z+A*D,a[15]=S*L+E*Q+R*$+A*q,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],r=e[8],a=e[12],l=e[1],c=e[5],u=e[9],h=e[13],p=e[2],g=e[6],y=e[10],x=e[14],b=e[3],w=e[7],T=e[11],_=e[15];return b*(+a*u*g-r*h*g-a*c*y+i*h*y+r*c*x-i*u*x)+w*(+n*u*x-n*h*y+a*l*y-r*l*x+r*h*p-a*u*p)+T*(+n*h*g-n*c*x-a*l*g+i*l*x+a*c*p-i*h*p)+_*(-r*c*p-n*u*g+n*c*y+r*l*g-i*l*y+i*u*p)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=n,r[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],a=e[3],l=e[4],c=e[5],u=e[6],h=e[7],p=e[8],g=e[9],y=e[10],x=e[11],b=e[12],w=e[13],T=e[14],_=e[15],S=g*T*h-w*y*h+w*u*x-c*T*x-g*u*_+c*y*_,E=b*y*h-p*T*h-b*u*x+l*T*x+p*u*_-l*y*_,R=p*w*h-b*g*h+b*c*x-l*w*x-p*c*_+l*g*_,A=b*g*u-p*w*u-b*c*y+l*w*y+p*c*T-l*g*T,N=n*S+i*E+r*R+a*A;if(N===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const j=1/N;return e[0]=S*j,e[1]=(w*y*a-g*T*a-w*r*x+i*T*x+g*r*_-i*y*_)*j,e[2]=(c*T*a-w*u*a+w*r*h-i*T*h-c*r*_+i*u*_)*j,e[3]=(g*u*a-c*y*a-g*r*h+i*y*h+c*r*x-i*u*x)*j,e[4]=E*j,e[5]=(p*T*a-b*y*a+b*r*x-n*T*x-p*r*_+n*y*_)*j,e[6]=(b*u*a-l*T*a-b*r*h+n*T*h+l*r*_-n*u*_)*j,e[7]=(l*y*a-p*u*a+p*r*h-n*y*h-l*r*x+n*u*x)*j,e[8]=R*j,e[9]=(b*g*a-p*w*a-b*i*x+n*w*x+p*i*_-n*g*_)*j,e[10]=(l*w*a-b*c*a+b*i*h-n*w*h-l*i*_+n*c*_)*j,e[11]=(p*c*a-l*g*a-p*i*h+n*g*h+l*i*x-n*c*x)*j,e[12]=A*j,e[13]=(p*w*r-b*g*r+b*i*y-n*w*y-p*i*T+n*g*T)*j,e[14]=(b*c*r-l*w*r-b*i*u+n*w*u+l*i*T-n*c*T)*j,e[15]=(l*g*r-p*c*r+p*i*u-n*g*u-l*i*y+n*c*y)*j,this}scale(e){const n=this.elements,i=e.x,r=e.y,a=e.z;return n[0]*=i,n[4]*=r,n[8]*=a,n[1]*=i,n[5]*=r,n[9]*=a,n[2]*=i,n[6]*=r,n[10]*=a,n[3]*=i,n[7]*=r,n[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,r))}makeTranslation(e,n,i){return this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),r=Math.sin(n),a=1-i,l=e.x,c=e.y,u=e.z,h=a*l,p=a*c;return this.set(h*l+i,h*c-r*u,h*u+r*c,0,h*c+r*u,p*c+i,p*u-r*l,0,h*u-r*c,p*u+r*l,a*u*u+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i){return this.set(1,n,i,0,e,1,i,0,e,n,1,0,0,0,0,1),this}compose(e,n,i){const r=this.elements,a=n._x,l=n._y,c=n._z,u=n._w,h=a+a,p=l+l,g=c+c,y=a*h,x=a*p,b=a*g,w=l*p,T=l*g,_=c*g,S=u*h,E=u*p,R=u*g,A=i.x,N=i.y,j=i.z;return r[0]=(1-(w+_))*A,r[1]=(x+R)*A,r[2]=(b-E)*A,r[3]=0,r[4]=(x-R)*N,r[5]=(1-(y+_))*N,r[6]=(T+S)*N,r[7]=0,r[8]=(b+E)*j,r[9]=(T-S)*j,r[10]=(1-(y+w))*j,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,n,i){const r=this.elements;let a=Il.set(r[0],r[1],r[2]).length();const l=Il.set(r[4],r[5],r[6]).length(),c=Il.set(r[8],r[9],r[10]).length();this.determinant()<0&&(a=-a),e.x=r[12],e.y=r[13],e.z=r[14],Sr.copy(this);const h=1/a,p=1/l,g=1/c;return Sr.elements[0]*=h,Sr.elements[1]*=h,Sr.elements[2]*=h,Sr.elements[4]*=p,Sr.elements[5]*=p,Sr.elements[6]*=p,Sr.elements[8]*=g,Sr.elements[9]*=g,Sr.elements[10]*=g,n.setFromRotationMatrix(Sr),i.x=a,i.y=l,i.z=c,this}makePerspective(e,n,i,r,a,l){l===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const c=this.elements,u=2*a/(n-e),h=2*a/(i-r),p=(n+e)/(n-e),g=(i+r)/(i-r),y=-(l+a)/(l-a),x=-2*l*a/(l-a);return c[0]=u,c[4]=0,c[8]=p,c[12]=0,c[1]=0,c[5]=h,c[9]=g,c[13]=0,c[2]=0,c[6]=0,c[10]=y,c[14]=x,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,n,i,r,a,l){const c=this.elements,u=1/(n-e),h=1/(i-r),p=1/(l-a),g=(n+e)*u,y=(i+r)*h,x=(l+a)*p;return c[0]=2*u,c[4]=0,c[8]=0,c[12]=-g,c[1]=0,c[5]=2*h,c[9]=0,c[13]=-y,c[2]=0,c[6]=0,c[10]=-2*p,c[14]=-x,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<16;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}const Il=new Y,Sr=new bt,ZI=new Y(0,0,0),QI=new Y(1,1,1),Ta=new Y,Wf=new Y,Ni=new Y;class _h{constructor(e=0,n=0,i=0,r=_h.DefaultOrder){Object.defineProperty(this,"isEuler",{value:!0}),this._x=e,this._y=n,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,r){return this._x=e,this._y=n,this._z=i,this._order=r||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n,i){const r=ft.clamp,a=e.elements,l=a[0],c=a[4],u=a[8],h=a[1],p=a[5],g=a[9],y=a[2],x=a[6],b=a[10];switch(n=n||this._order,n){case"XYZ":this._y=Math.asin(r(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-g,b),this._z=Math.atan2(-c,l)):(this._x=Math.atan2(x,p),this._z=0);break;case"YXZ":this._x=Math.asin(-r(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(u,b),this._z=Math.atan2(h,p)):(this._y=Math.atan2(-y,l),this._z=0);break;case"ZXY":this._x=Math.asin(r(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(-y,b),this._z=Math.atan2(-c,p)):(this._y=0,this._z=Math.atan2(h,l));break;case"ZYX":this._y=Math.asin(-r(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(x,b),this._z=Math.atan2(h,l)):(this._x=0,this._z=Math.atan2(-c,p));break;case"YZX":this._z=Math.asin(r(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-g,p),this._y=Math.atan2(-y,l)):(this._x=0,this._y=Math.atan2(u,b));break;case"XZY":this._z=Math.asin(-r(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(x,p),this._y=Math.atan2(u,l)):(this._x=Math.atan2(-g,b),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i!==!1&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return gT.makeRotationFromQuaternion(e),this.setFromRotationMatrix(gT,n,i)}setFromVector3(e,n){return this.set(e.x,e.y,e.z,n||this._order)}reorder(e){return yT.setFromEuler(this),this.setFromQuaternion(yT,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new Y(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}_h.DefaultOrder="XYZ";_h.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];const gT=new bt,yT=new Bi;class tN{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}}let JI=0;const xT=new Y,Ul=new Bi,Rs=new bt,$f=new Y,Qu=new Y,KI=new Y,eU=new Bi,vT=new Y(1,0,0),bT=new Y(0,1,0),wT=new Y(0,0,1),tU={type:"added"},_T={type:"removed"};function st(){Object.defineProperty(this,"id",{value:JI++}),this.uuid=ft.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=st.DefaultUp.clone();const t=new Y,e=new _h,n=new Bi,i=new Y(1,1,1);function r(){n.setFromEuler(e,!1)}function a(){e.setFromQuaternion(n,void 0,!1)}e._onChange(r),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new bt},normalMatrix:{value:new ur}}),this.matrix=new bt,this.matrixWorld=new bt,this.matrixAutoUpdate=st.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new tN,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}st.DefaultUp=new Y(0,1,0);st.DefaultMatrixAutoUpdate=!0;st.prototype=Object.assign(Object.create(to.prototype),{constructor:st,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return Ul.setFromAxisAngle(t,e),this.quaternion.multiply(Ul),this},rotateOnWorldAxis:function(t,e){return Ul.setFromAxisAngle(t,e),this.quaternion.premultiply(Ul),this},rotateX:function(t){return this.rotateOnAxis(vT,t)},rotateY:function(t){return this.rotateOnAxis(bT,t)},rotateZ:function(t){return this.rotateOnAxis(wT,t)},translateOnAxis:function(t,e){return xT.copy(t).applyQuaternion(this.quaternion),this.position.add(xT.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(vT,t)},translateY:function(t){return this.translateOnAxis(bT,t)},translateZ:function(t){return this.translateOnAxis(wT,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(Rs.copy(this.matrixWorld).invert())},lookAt:function(t,e,n){t.isVector3?$f.copy(t):$f.set(t,e,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Qu.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Rs.lookAt(Qu,$f,this.up):Rs.lookAt($f,Qu,this.up),this.quaternion.setFromRotationMatrix(Rs),i&&(Rs.extractRotation(i.matrixWorld),Ul.setFromRotationMatrix(Rs),this.quaternion.premultiply(Ul.invert()))},add:function(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(tU)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(_T)),this},clear:function(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(_T)}return this.children.length=0,this},attach:function(t){return this.updateWorldMatrix(!0,!1),Rs.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Rs.multiply(t.parent.matrixWorld)),t.applyMatrix4(Rs),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(let n=0,i=this.children.length;n<i;n++){const a=this.children[n].getObjectByProperty(t,e);if(a!==void 0)return a}},getWorldPosition:function(t){return t===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new Y),this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return t===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new Bi),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qu,t,KI),t},getWorldScale:function(t){return t===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new Y),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qu,eU,t),t},getWorldDirection:function(t){t===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new Y),this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverse(t)},traverseVisible:function(t){if(this.visible===!1)return;t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)},traverseAncestors:function(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){const n=this.parent;if(t===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e===!0){const i=this.children;for(let r=0,a=i.length;r<a;r++)i[r].updateWorldMatrix(!1,!0)}},toJSON:function(t){const e=t===void 0||typeof t=="string",n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON());function r(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(t)),c.uuid}if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let u=0,h=c.length;u<h;u++){const p=c[u];r(t.shapes,p)}else r(t.shapes,c)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,u=this.material.length;c<u;c++)l.push(r(t.materials,this.material[c]));i.material=l}else i.material=r(t.materials,this.material);if(this.children.length>0){i.children=[];for(let l=0;l<this.children.length;l++)i.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];i.animations.push(r(t.animations,c))}}if(e){const l=a(t.geometries),c=a(t.materials),u=a(t.textures),h=a(t.images),p=a(t.shapes),g=a(t.skeletons),y=a(t.animations);l.length>0&&(n.geometries=l),c.length>0&&(n.materials=c),u.length>0&&(n.textures=u),h.length>0&&(n.images=h),p.length>0&&(n.shapes=p),g.length>0&&(n.skeletons=g),y.length>0&&(n.animations=y)}return n.object=i,n;function a(l){const c=[];for(const u in l){const h=l[u];delete h.metadata,c.push(h)}return c}},clone:function(t){return new this.constructor().copy(this,t)},copy:function(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let n=0;n<t.children.length;n++){const i=t.children[n];this.add(i.clone())}return this}});const Ly=new Y,nU=new Y,iU=new ur;class Ds{constructor(e,n){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=e!==void 0?e:new Y(1,0,0),this.constant=n!==void 0?n:0}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,r){return this.normal.set(e,n,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const r=Ly.subVectors(i,n).cross(nU.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}clone(){return new this.constructor().copy(this)}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),n=new Y),n.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,n){n===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new Y);const i=e.delta(Ly),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):void 0;const a=-(e.start.dot(this.normal)+this.constant)/r;if(!(a<0||a>1))return n.copy(i).multiplyScalar(a).add(e.start)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Y),e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||iU.getNormalMatrix(e),r=this.coplanarPoint(Ly).applyMatrix4(e),a=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}const Mr=new Y,Ls=new Y,ky=new Y,ks=new Y,Vl=new Y,Hl=new Y,ST=new Y,jy=new Y,Dy=new Y,Py=new Y;class ai{constructor(e,n,i){this.a=e!==void 0?e:new Y,this.b=n!==void 0?n:new Y,this.c=i!==void 0?i:new Y}static getNormal(e,n,i,r){r===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new Y),r.subVectors(i,n),Mr.subVectors(e,n),r.cross(Mr);const a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}static getBarycoord(e,n,i,r,a){Mr.subVectors(r,n),Ls.subVectors(i,n),ky.subVectors(e,n);const l=Mr.dot(Mr),c=Mr.dot(Ls),u=Mr.dot(ky),h=Ls.dot(Ls),p=Ls.dot(ky),g=l*h-c*c;if(a===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),a=new Y),g===0)return a.set(-2,-1,-1);const y=1/g,x=(h*u-c*p)*y,b=(l*p-c*u)*y;return a.set(1-x-b,b,x)}static containsPoint(e,n,i,r){return this.getBarycoord(e,n,i,r,ks),ks.x>=0&&ks.y>=0&&ks.x+ks.y<=1}static getUV(e,n,i,r,a,l,c,u){return this.getBarycoord(e,n,i,r,ks),u.set(0,0),u.addScaledVector(a,ks.x),u.addScaledVector(l,ks.y),u.addScaledVector(c,ks.z),u}static isFrontFacing(e,n,i,r){return Mr.subVectors(i,n),Ls.subVectors(e,n),Mr.cross(Ls).dot(r)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,r){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[r]),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Mr.subVectors(this.c,this.b),Ls.subVectors(this.a,this.b),Mr.cross(Ls).length()*.5}getMidpoint(e){return e===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Y),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ai.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Ds),e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return ai.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,i,r,a){return ai.getUV(e,this.a,this.b,this.c,n,i,r,a)}containsPoint(e){return ai.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ai.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){n===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),n=new Y);const i=this.a,r=this.b,a=this.c;let l,c;Vl.subVectors(r,i),Hl.subVectors(a,i),jy.subVectors(e,i);const u=Vl.dot(jy),h=Hl.dot(jy);if(u<=0&&h<=0)return n.copy(i);Dy.subVectors(e,r);const p=Vl.dot(Dy),g=Hl.dot(Dy);if(p>=0&&g<=p)return n.copy(r);const y=u*g-p*h;if(y<=0&&u>=0&&p<=0)return l=u/(u-p),n.copy(i).addScaledVector(Vl,l);Py.subVectors(e,a);const x=Vl.dot(Py),b=Hl.dot(Py);if(b>=0&&x<=b)return n.copy(a);const w=x*h-u*b;if(w<=0&&h>=0&&b<=0)return c=h/(h-b),n.copy(i).addScaledVector(Hl,c);const T=p*b-x*g;if(T<=0&&g-p>=0&&x-b>=0)return ST.subVectors(a,r),c=(g-p)/(g-p+(x-b)),n.copy(r).addScaledVector(ST,c);const _=1/(T+w+y);return l=w*_,c=y*_,n.copy(i).addScaledVector(Vl,l).addScaledVector(Hl,c)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const nN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Tr={h:0,s:0,l:0},qf={h:0,s:0,l:0};function Oy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}function By(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function zy(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}class Xe{constructor(e,n,i){return Object.defineProperty(this,"isColor",{value:!0}),n===void 0&&i===void 0?this.set(e):this.setRGB(e,n,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this}setRGB(e,n,i){return this.r=e,this.g=n,this.b=i,this}setHSL(e,n,i){if(e=ft.euclideanModulo(e,1),n=ft.clamp(n,0,1),i=ft.clamp(i,0,1),n===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+n):i+n-i*n,a=2*i-r;this.r=Oy(a,r,e+1/3),this.g=Oy(a,r,e),this.b=Oy(a,r,e-1/3)}return this}setStyle(e){function n(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let r;const a=i[1],l=i[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,n(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,n(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l)){const c=parseFloat(r[1])/360,u=parseInt(r[2],10)/100,h=parseInt(r[3],10)/100;return n(r[4]),this.setHSL(c,u,h)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=i[1],a=r.length;if(a===3)return this.r=parseInt(r.charAt(0)+r.charAt(0),16)/255,this.g=parseInt(r.charAt(1)+r.charAt(1),16)/255,this.b=parseInt(r.charAt(2)+r.charAt(2),16)/255,this;if(a===6)return this.r=parseInt(r.charAt(0)+r.charAt(1),16)/255,this.g=parseInt(r.charAt(2)+r.charAt(3),16)/255,this.b=parseInt(r.charAt(4)+r.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const n=nN[e];return n!==void 0?this.setHex(n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,n=2){return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}copyLinearToGamma(e,n=2){const i=n>0?1/n:1;return this.r=Math.pow(e.r,i),this.g=Math.pow(e.g,i),this.b=Math.pow(e.b,i),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=By(e.r),this.g=By(e.g),this.b=By(e.b),this}copyLinearToSRGB(e){return this.r=zy(e.r),this.g=zy(e.g),this.b=zy(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){e===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});const n=this.r,i=this.g,r=this.b,a=Math.max(n,i,r),l=Math.min(n,i,r);let c,u;const h=(l+a)/2;if(l===a)c=0,u=0;else{const p=a-l;switch(u=h<=.5?p/(a+l):p/(2-a-l),a){case n:c=(i-r)/p+(i<r?6:0);break;case i:c=(r-n)/p+2;break;case r:c=(n-i)/p+4;break}c/=6}return e.h=c,e.s=u,e.l=h,e}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(e,n,i){return this.getHSL(Tr),Tr.h+=e,Tr.s+=n,Tr.l+=i,this.setHSL(Tr.h,Tr.s,Tr.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(Tr),e.getHSL(qf);const i=ft.lerp(Tr.h,qf.h,n),r=ft.lerp(Tr.s,qf.s,n),a=ft.lerp(Tr.l,qf.l,n);return this.setHSL(i,r,a),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Xe.NAMES=nN;Xe.prototype.r=1;Xe.prototype.g=1;Xe.prototype.b=1;class rU{constructor(e,n,i,r,a,l=0){this.a=e,this.b=n,this.c=i,this.normal=r&&r.isVector3?r:new Y,this.vertexNormals=Array.isArray(r)?r:[],this.color=a&&a.isColor?a:new Xe,this.vertexColors=Array.isArray(a)?a:[],this.materialIndex=l}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let n=0,i=e.vertexNormals.length;n<i;n++)this.vertexNormals[n]=e.vertexNormals[n].clone();for(let n=0,i=e.vertexColors.length;n<i;n++)this.vertexColors[n]=e.vertexColors[n].clone();return this}}let sU=0;function ot(){Object.defineProperty(this,"id",{value:sU++}),this.uuid=ft.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=bd,this.side=Om,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Z3,this.blendDst=Q3,this.blendEquation=tc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=$x,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=qI,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Sy,this.stencilZFail=Sy,this.stencilZPass=Sy,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}ot.prototype=Object.assign(Object.create(to.prototype),{constructor:ot,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(t){if(t!==void 0)for(const e in t){const n=t[e];if(n===void 0){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if(e==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===X3;continue}const i=this[e];if(i===void 0){console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.");continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n}},toJSON:function(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,this.combine!==void 0&&(n.combine=this.combine),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),this.size!==void 0&&(n.size=this.size),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==bd&&(n.blending=this.blending),this.flatShading===!0&&(n.flatShading=this.flatShading),this.side!==Om&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(n.morphTargets=!0),this.morphNormals===!0&&(n.morphNormals=!0),this.skinning===!0&&(n.skinning=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData);function i(r){const a=[];for(const l in r){const c=r[l];delete c.metadata,a.push(c)}return a}if(e){const r=i(t.textures),a=i(t.images);r.length>0&&(n.textures=r),a.length>0&&(n.images=a)}return n},clone:function(){return new this.constructor().copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(e!==null){const i=e.length;n=new Array(i);for(let r=0;r!==i;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(ot.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}});function Ga(t){ot.call(this),this.type="MeshBasicMaterial",this.color=new Xe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=zm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}Ga.prototype=Object.create(ot.prototype);Ga.prototype.constructor=Ga;Ga.prototype.isMeshBasicMaterial=!0;Ga.prototype.copy=function(t){return ot.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this};const qt=new Y,Yf=new Ae;function yt(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=n===!0,this.usage=Im,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(yt.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}});Object.assign(yt.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let a=t[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new Xe),e[n++]=a.r,e[n++]=a.g,e[n++]=a.b}return this},copyVector2sArray:function(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let a=t[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new Ae),e[n++]=a.x,e[n++]=a.y}return this},copyVector3sArray:function(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let a=t[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new Y),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z}return this},copyVector4sArray:function(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let a=t[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),a=new Ut),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z,e[n++]=a.w}return this},applyMatrix3:function(t){if(this.itemSize===2)for(let e=0,n=this.count;e<n;e++)Yf.fromBufferAttribute(this,e),Yf.applyMatrix3(t),this.setXY(e,Yf.x,Yf.y);else if(this.itemSize===3)for(let e=0,n=this.count;e<n;e++)qt.fromBufferAttribute(this,e),qt.applyMatrix3(t),this.setXYZ(e,qt.x,qt.y,qt.z);return this},applyMatrix4:function(t){for(let e=0,n=this.count;e<n;e++)qt.x=this.getX(e),qt.y=this.getY(e),qt.z=this.getZ(e),qt.applyMatrix4(t),this.setXYZ(e,qt.x,qt.y,qt.z);return this},applyNormalMatrix:function(t){for(let e=0,n=this.count;e<n;e++)qt.x=this.getX(e),qt.y=this.getY(e),qt.z=this.getZ(e),qt.applyNormalMatrix(t),this.setXYZ(e,qt.x,qt.y,qt.z);return this},transformDirection:function(t){for(let e=0,n=this.count;e<n;e++)qt.x=this.getX(e),qt.y=this.getY(e),qt.z=this.getZ(e),qt.transformDirection(t),this.setXYZ(e,qt.x,qt.y,qt.z);return this},set:function(t,e=0){return this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});function Xx(t,e,n){yt.call(this,new Int8Array(t),e,n)}Xx.prototype=Object.create(yt.prototype);Xx.prototype.constructor=Xx;function Zx(t,e,n){yt.call(this,new Uint8Array(t),e,n)}Zx.prototype=Object.create(yt.prototype);Zx.prototype.constructor=Zx;function Qx(t,e,n){yt.call(this,new Uint8ClampedArray(t),e,n)}Qx.prototype=Object.create(yt.prototype);Qx.prototype.constructor=Qx;function Jx(t,e,n){yt.call(this,new Int16Array(t),e,n)}Jx.prototype=Object.create(yt.prototype);Jx.prototype.constructor=Jx;function Hd(t,e,n){yt.call(this,new Uint16Array(t),e,n)}Hd.prototype=Object.create(yt.prototype);Hd.prototype.constructor=Hd;function Kx(t,e,n){yt.call(this,new Int32Array(t),e,n)}Kx.prototype=Object.create(yt.prototype);Kx.prototype.constructor=Kx;function Gd(t,e,n){yt.call(this,new Uint32Array(t),e,n)}Gd.prototype=Object.create(yt.prototype);Gd.prototype.constructor=Gd;function Kp(t,e,n){yt.call(this,new Uint16Array(t),e,n)}Kp.prototype=Object.create(yt.prototype);Kp.prototype.constructor=Kp;Kp.prototype.isFloat16BufferAttribute=!0;function Vt(t,e,n){yt.call(this,new Float32Array(t),e,n)}Vt.prototype=Object.create(yt.prototype);Vt.prototype.constructor=Vt;function ev(t,e,n){yt.call(this,new Float64Array(t),e,n)}ev.prototype=Object.create(yt.prototype);ev.prototype.constructor=ev;function iN(t){if(t.length===0)return-1/0;let e=t[0];for(let n=1,i=t.length;n<i;++n)t[n]>e&&(e=t[n]);return e}const aU={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray<"u"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Xf(t,e){return new aU[t](e)}let oU=0;const Hr=new bt,Fy=new st,Gl=new Y,Ri=new el,Ju=new el,Pn=new Y;function Ot(){Object.defineProperty(this,"id",{value:oU++}),this.uuid=ft.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Ot.prototype=Object.assign(Object.create(to.prototype),{constructor:Ot,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){return Array.isArray(t)?this.index=new(iN(t)>65535?Gd:Hd)(t,1):this.index=t,this},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},hasAttribute:function(t){return this.attributes[t]!==void 0},addGroup:function(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const r=new ur().getNormalMatrix(t);n.applyNormalMatrix(r),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(t),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(t){return Hr.makeRotationX(t),this.applyMatrix4(Hr),this},rotateY:function(t){return Hr.makeRotationY(t),this.applyMatrix4(Hr),this},rotateZ:function(t){return Hr.makeRotationZ(t),this.applyMatrix4(Hr),this},translate:function(t,e,n){return Hr.makeTranslation(t,e,n),this.applyMatrix4(Hr),this},scale:function(t,e,n){return Hr.makeScale(t,e,n),this.applyMatrix4(Hr),this},lookAt:function(t){return Fy.lookAt(t),Fy.updateMatrix(),this.applyMatrix4(Fy.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Gl).negate(),this.translate(Gl.x,Gl.y,Gl.z),this},setFromPoints:function(t){const e=[];for(let n=0,i=t.length;n<i;n++){const r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Vt(e,3)),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new el);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Y(-1/0,-1/0,-1/0),new Y(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,i=e.length;n<i;n++){const r=e[n];Ri.setFromBufferAttribute(r),this.morphTargetsRelative?(Pn.addVectors(this.boundingBox.min,Ri.min),this.boundingBox.expandByPoint(Pn),Pn.addVectors(this.boundingBox.max,Ri.max),this.boundingBox.expandByPoint(Pn)):(this.boundingBox.expandByPoint(Ri.min),this.boundingBox.expandByPoint(Ri.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new tl);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Y,1/0);return}if(t){const n=this.boundingSphere.center;if(Ri.setFromBufferAttribute(t),e)for(let r=0,a=e.length;r<a;r++){const l=e[r];Ju.setFromBufferAttribute(l),this.morphTargetsRelative?(Pn.addVectors(Ri.min,Ju.min),Ri.expandByPoint(Pn),Pn.addVectors(Ri.max,Ju.max),Ri.expandByPoint(Pn)):(Ri.expandByPoint(Ju.min),Ri.expandByPoint(Ju.max))}Ri.getCenter(n);let i=0;for(let r=0,a=t.count;r<a;r++)Pn.fromBufferAttribute(t,r),i=Math.max(i,n.distanceToSquared(Pn));if(e)for(let r=0,a=e.length;r<a;r++){const l=e[r],c=this.morphTargetsRelative;for(let u=0,h=l.count;u<h;u++)Pn.fromBufferAttribute(l,u),c&&(Gl.fromBufferAttribute(t,u),Pn.add(Gl)),i=Math.max(i,n.distanceToSquared(Pn))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeTangents:function(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.array,i=e.position.array,r=e.normal.array,a=e.uv.array,l=i.length/3;e.tangent===void 0&&this.setAttribute("tangent",new yt(new Float32Array(4*l),4));const c=e.tangent.array,u=[],h=[];for(let L=0;L<l;L++)u[L]=new Y,h[L]=new Y;const p=new Y,g=new Y,y=new Y,x=new Ae,b=new Ae,w=new Ae,T=new Y,_=new Y;function S(L,B,F){p.fromArray(i,L*3),g.fromArray(i,B*3),y.fromArray(i,F*3),x.fromArray(a,L*2),b.fromArray(a,B*2),w.fromArray(a,F*2),g.sub(p),y.sub(p),b.sub(x),w.sub(x);const J=1/(b.x*w.y-w.x*b.y);isFinite(J)&&(T.copy(g).multiplyScalar(w.y).addScaledVector(y,-b.y).multiplyScalar(J),_.copy(y).multiplyScalar(b.x).addScaledVector(g,-w.x).multiplyScalar(J),u[L].add(T),u[B].add(T),u[F].add(T),h[L].add(_),h[B].add(_),h[F].add(_))}let E=this.groups;E.length===0&&(E=[{start:0,count:n.length}]);for(let L=0,B=E.length;L<B;++L){const F=E[L],J=F.start,Q=F.count;for(let W=J,Z=J+Q;W<Z;W+=3)S(n[W+0],n[W+1],n[W+2])}const R=new Y,A=new Y,N=new Y,j=new Y;function O(L){N.fromArray(r,L*3),j.copy(N);const B=u[L];R.copy(B),R.sub(N.multiplyScalar(N.dot(B))).normalize(),A.crossVectors(j,B);const J=A.dot(h[L])<0?-1:1;c[L*4]=R.x,c[L*4+1]=R.y,c[L*4+2]=R.z,c[L*4+3]=J}for(let L=0,B=E.length;L<B;++L){const F=E[L],J=F.start,Q=F.count;for(let W=J,Z=J+Q;W<Z;W+=3)O(n[W+0]),O(n[W+1]),O(n[W+2])}},computeVertexNormals:function(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new yt(new Float32Array(e.count*3),3),this.setAttribute("normal",n);else for(let g=0,y=n.count;g<y;g++)n.setXYZ(g,0,0,0);const i=new Y,r=new Y,a=new Y,l=new Y,c=new Y,u=new Y,h=new Y,p=new Y;if(t)for(let g=0,y=t.count;g<y;g+=3){const x=t.getX(g+0),b=t.getX(g+1),w=t.getX(g+2);i.fromBufferAttribute(e,x),r.fromBufferAttribute(e,b),a.fromBufferAttribute(e,w),h.subVectors(a,r),p.subVectors(i,r),h.cross(p),l.fromBufferAttribute(n,x),c.fromBufferAttribute(n,b),u.fromBufferAttribute(n,w),l.add(h),c.add(h),u.add(h),n.setXYZ(x,l.x,l.y,l.z),n.setXYZ(b,c.x,c.y,c.z),n.setXYZ(w,u.x,u.y,u.z)}else for(let g=0,y=e.count;g<y;g+=3)i.fromBufferAttribute(e,g+0),r.fromBufferAttribute(e,g+1),a.fromBufferAttribute(e,g+2),h.subVectors(a,r),p.subVectors(i,r),h.cross(p),n.setXYZ(g+0,h.x,h.y,h.z),n.setXYZ(g+1,h.x,h.y,h.z),n.setXYZ(g+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(t,e){if(!(t&&t.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);return}e===void 0&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const i in n){if(t.attributes[i]===void 0)continue;const a=n[i].array,l=t.attributes[i],c=l.array,u=l.itemSize*e,h=Math.min(c.length,a.length-u);for(let p=0,g=u;p<h;p++,g++)a[g]=c[p]}return this},normalizeNormals:function(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Pn.fromBufferAttribute(t,e),Pn.normalize(),t.setXYZ(e,Pn.x,Pn.y,Pn.z)},toNonIndexed:function(){function t(l,c){const u=l.array,h=l.itemSize,p=l.normalized,g=new u.constructor(c.length*h);let y=0,x=0;for(let b=0,w=c.length;b<w;b++){y=c[b]*h;for(let T=0;T<h;T++)g[x++]=u[y++]}return new yt(g,h,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Ot,n=this.index.array,i=this.attributes;for(const l in i){const c=i[l],u=t(c,n);e.setAttribute(l,u)}const r=this.morphAttributes;for(const l in r){const c=[],u=r[l];for(let h=0,p=u.length;h<p;h++){const g=u[h],y=t(g,n);c.push(y)}e.morphAttributes[l]=c}e.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let l=0,c=a.length;l<c;l++){const u=a[l];e.addGroup(u.start,u.count,u.materialIndex)}return e},toJSON:function(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const u in c)c[u]!==void 0&&(t[u]=c[u]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const c in n){const u=n[c],h=u.toJSON(t.data);u.name!==""&&(h.name=u.name),t.data.attributes[c]=h}const i={};let r=!1;for(const c in this.morphAttributes){const u=this.morphAttributes[c],h=[];for(let p=0,g=u.length;p<g;p++){const y=u[p],x=y.toJSON(t.data);y.name!==""&&(x.name=y.name),h.push(x)}h.length>0&&(i[c]=h,r=!0)}r&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));const l=this.boundingSphere;return l!==null&&(t.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),t},clone:function(){return new Ot().copy(this)},copy:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;n!==null&&this.setIndex(n.clone(e));const i=t.attributes;for(const u in i){const h=i[u];this.setAttribute(u,h.clone(e))}const r=t.morphAttributes;for(const u in r){const h=[],p=r[u];for(let g=0,y=p.length;g<y;g++)h.push(p[g].clone(e));this.morphAttributes[u]=h}this.morphTargetsRelative=t.morphTargetsRelative;const a=t.groups;for(let u=0,h=a.length;u<h;u++){const p=a[u];this.addGroup(p.start,p.count,p.materialIndex)}const l=t.boundingBox;l!==null&&(this.boundingBox=l.clone());const c=t.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const MT=new bt,Wl=new wh,Iy=new tl,Ea=new Y,Aa=new Y,Ca=new Y,Uy=new Y,Vy=new Y,Hy=new Y,Zf=new Y,Qf=new Y,Jf=new Y,Kf=new Ae,ep=new Ae,tp=new Ae,Gy=new Y,np=new Y;function xn(t=new Ot,e=new Ga){st.call(this),this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}xn.prototype=Object.assign(Object.create(st.prototype),{constructor:xn,isMesh:!0,copy:function(t){return st.prototype.copy.call(this,t),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const i=e[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=i.length;r<a;r++){const l=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=r}}}}else{const e=t.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(t,e){const n=this.geometry,i=this.material,r=this.matrixWorld;if(i===void 0||(n.boundingSphere===null&&n.computeBoundingSphere(),Iy.copy(n.boundingSphere),Iy.applyMatrix4(r),t.ray.intersectsSphere(Iy)===!1)||(MT.copy(r).invert(),Wl.copy(t.ray).applyMatrix4(MT),n.boundingBox!==null&&Wl.intersectsBox(n.boundingBox)===!1))return;let a;if(n.isBufferGeometry){const l=n.index,c=n.attributes.position,u=n.morphAttributes.position,h=n.morphTargetsRelative,p=n.attributes.uv,g=n.attributes.uv2,y=n.groups,x=n.drawRange;if(l!==null)if(Array.isArray(i))for(let b=0,w=y.length;b<w;b++){const T=y[b],_=i[T.materialIndex],S=Math.max(T.start,x.start),E=Math.min(T.start+T.count,x.start+x.count);for(let R=S,A=E;R<A;R+=3){const N=l.getX(R),j=l.getX(R+1),O=l.getX(R+2);a=ip(this,_,t,Wl,c,u,h,p,g,N,j,O),a&&(a.faceIndex=Math.floor(R/3),a.face.materialIndex=T.materialIndex,e.push(a))}}else{const b=Math.max(0,x.start),w=Math.min(l.count,x.start+x.count);for(let T=b,_=w;T<_;T+=3){const S=l.getX(T),E=l.getX(T+1),R=l.getX(T+2);a=ip(this,i,t,Wl,c,u,h,p,g,S,E,R),a&&(a.faceIndex=Math.floor(T/3),e.push(a))}}else if(c!==void 0)if(Array.isArray(i))for(let b=0,w=y.length;b<w;b++){const T=y[b],_=i[T.materialIndex],S=Math.max(T.start,x.start),E=Math.min(T.start+T.count,x.start+x.count);for(let R=S,A=E;R<A;R+=3){const N=R,j=R+1,O=R+2;a=ip(this,_,t,Wl,c,u,h,p,g,N,j,O),a&&(a.faceIndex=Math.floor(R/3),a.face.materialIndex=T.materialIndex,e.push(a))}}else{const b=Math.max(0,x.start),w=Math.min(c.count,x.start+x.count);for(let T=b,_=w;T<_;T+=3){const S=T,E=T+1,R=T+2;a=ip(this,i,t,Wl,c,u,h,p,g,S,E,R),a&&(a.faceIndex=Math.floor(T/3),e.push(a))}}}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}});function lU(t,e,n,i,r,a,l,c){let u;if(e.side===On?u=i.intersectTriangle(l,a,r,!0,c):u=i.intersectTriangle(r,a,l,e.side!==Bm,c),u===null)return null;np.copy(c),np.applyMatrix4(t.matrixWorld);const h=n.ray.origin.distanceTo(np);return h<n.near||h>n.far?null:{distance:h,point:np.clone(),object:t}}function ip(t,e,n,i,r,a,l,c,u,h,p,g){Ea.fromBufferAttribute(r,h),Aa.fromBufferAttribute(r,p),Ca.fromBufferAttribute(r,g);const y=t.morphTargetInfluences;if(e.morphTargets&&a&&y){Zf.set(0,0,0),Qf.set(0,0,0),Jf.set(0,0,0);for(let b=0,w=a.length;b<w;b++){const T=y[b],_=a[b];T!==0&&(Uy.fromBufferAttribute(_,h),Vy.fromBufferAttribute(_,p),Hy.fromBufferAttribute(_,g),l?(Zf.addScaledVector(Uy,T),Qf.addScaledVector(Vy,T),Jf.addScaledVector(Hy,T)):(Zf.addScaledVector(Uy.sub(Ea),T),Qf.addScaledVector(Vy.sub(Aa),T),Jf.addScaledVector(Hy.sub(Ca),T)))}Ea.add(Zf),Aa.add(Qf),Ca.add(Jf)}t.isSkinnedMesh&&(t.boneTransform(h,Ea),t.boneTransform(p,Aa),t.boneTransform(g,Ca));const x=lU(t,e,n,i,Ea,Aa,Ca,Gy);if(x){c&&(Kf.fromBufferAttribute(c,h),ep.fromBufferAttribute(c,p),tp.fromBufferAttribute(c,g),x.uv=ai.getUV(Gy,Ea,Aa,Ca,Kf,ep,tp,new Ae)),u&&(Kf.fromBufferAttribute(u,h),ep.fromBufferAttribute(u,p),tp.fromBufferAttribute(u,g),x.uv2=ai.getUV(Gy,Ea,Aa,Ca,Kf,ep,tp,new Ae));const b=new rU(h,p,g);ai.getNormal(Ea,Aa,Ca,b.normal),x.face=b}return x}class Qb extends Ot{constructor(e=1,n=1,i=1,r=1,a=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:r,heightSegments:a,depthSegments:l};const c=this;r=Math.floor(r),a=Math.floor(a),l=Math.floor(l);const u=[],h=[],p=[],g=[];let y=0,x=0;b("z","y","x",-1,-1,i,n,e,l,a,0),b("z","y","x",1,-1,i,n,-e,l,a,1),b("x","z","y",1,1,e,i,n,r,l,2),b("x","z","y",1,-1,e,i,-n,r,l,3),b("x","y","z",1,-1,e,n,i,r,a,4),b("x","y","z",-1,-1,e,n,-i,r,a,5),this.setIndex(u),this.setAttribute("position",new Vt(h,3)),this.setAttribute("normal",new Vt(p,3)),this.setAttribute("uv",new Vt(g,2));function b(w,T,_,S,E,R,A,N,j,O,L){const B=R/j,F=A/O,J=R/2,Q=A/2,W=N/2,Z=j+1,z=O+1;let $=0,U=0;const X=new Y;for(let D=0;D<z;D++){const q=D*F-Q;for(let ce=0;ce<Z;ce++){const me=ce*B-J;X[w]=me*S,X[T]=q*E,X[_]=W,h.push(X.x,X.y,X.z),X[w]=0,X[T]=0,X[_]=N>0?1:-1,p.push(X.x,X.y,X.z),g.push(ce/j),g.push(1-D/O),$+=1}}for(let D=0;D<O;D++)for(let q=0;q<j;q++){const ce=y+q+Z*D,me=y+q+Z*(D+1),fe=y+(q+1)+Z*(D+1),ie=y+(q+1)+Z*D;u.push(ce,me,ie),u.push(me,fe,ie),U+=6}c.addGroup(x,U,L),x+=U,y+=$}}}function _c(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function Yn(t){const e={};for(let n=0;n<t.length;n++){const i=_c(t[n]);for(const r in i)e[r]=i[r]}return e}const cU={clone:_c,merge:Yn};var uU=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,dU=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function bi(t){ot.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=uU,this.fragmentShader=dU,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&(t.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}bi.prototype=Object.create(ot.prototype);bi.prototype.constructor=bi;bi.prototype.isShaderMaterial=!0;bi.prototype.copy=function(t){return ot.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=_c(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this};bi.prototype.toJSON=function(t){const e=ot.prototype.toJSON.call(this,t);e.glslVersion=this.glslVersion,e.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?e.uniforms[i]={type:"t",value:a.toJSON(t).uuid}:a&&a.isColor?e.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?e.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?e.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?e.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?e.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?e.uniforms[i]={type:"m4",value:a.toArray()}:e.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(e.extensions=n),e};function Vs(){st.call(this),this.type="Camera",this.matrixWorldInverse=new bt,this.projectionMatrix=new bt,this.projectionMatrixInverse=new bt}Vs.prototype=Object.assign(Object.create(st.prototype),{constructor:Vs,isCamera:!0,copy:function(t,e){return st.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){t===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new Y),this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){st.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()},updateWorldMatrix:function(t,e){st.prototype.updateWorldMatrix.call(this,t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()},clone:function(){return new this.constructor().copy(this)}});function Bn(t=50,e=1,n=.1,i=2e3){Vs.call(this),this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}Bn.prototype=Object.assign(Object.create(Vs.prototype),{constructor:Bn,isPerspectiveCamera:!0,copy:function(t,e){return Vs.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){const e=.5*this.getFilmHeight()/t;this.fov=ft.RAD2DEG*2*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){const t=Math.tan(ft.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/t},getEffectiveFOV:function(){return ft.RAD2DEG*2*Math.atan(Math.tan(ft.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,i,r,a){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const t=this.near;let e=t*Math.tan(ft.DEG2RAD*.5*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const c=a.fullWidth,u=a.fullHeight;r+=a.offsetX*i/c,e-=a.offsetY*n/u,i*=a.width/c,n*=a.height/u}const l=this.filmOffset;l!==0&&(r+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(t){const e=st.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});const $l=90,ql=1;function Sc(t,e,n){if(st.call(this),this.type="CubeCamera",n.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=n;const i=new Bn($l,ql,t,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Y(1,0,0)),this.add(i);const r=new Bn($l,ql,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Y(-1,0,0)),this.add(r);const a=new Bn($l,ql,t,e);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new Y(0,1,0)),this.add(a);const l=new Bn($l,ql,t,e);l.layers=this.layers,l.up.set(0,0,-1),l.lookAt(new Y(0,-1,0)),this.add(l);const c=new Bn($l,ql,t,e);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new Y(0,0,1)),this.add(c);const u=new Bn($l,ql,t,e);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new Y(0,0,-1)),this.add(u),this.update=function(h,p){this.parent===null&&this.updateMatrixWorld();const g=h.xr.enabled,y=h.getRenderTarget();h.xr.enabled=!1;const x=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,h.setRenderTarget(n,0),h.render(p,i),h.setRenderTarget(n,1),h.render(p,r),h.setRenderTarget(n,2),h.render(p,a),h.setRenderTarget(n,3),h.render(p,l),h.setRenderTarget(n,4),h.render(p,c),n.texture.generateMipmaps=x,h.setRenderTarget(n,5),h.render(p,u),h.setRenderTarget(y),h.xr.enabled=g}}Sc.prototype=Object.create(st.prototype);Sc.prototype.constructor=Sc;function Wa(t,e,n,i,r,a,l,c,u,h){t=t!==void 0?t:[],e=e!==void 0?e:Wb,l=l!==void 0?l:Uo,Xt.call(this,t,e,n,i,r,a,l,c,u,h),this.flipY=!1,this._needsFlipEnvMap=!0}Wa.prototype=Object.create(Xt.prototype);Wa.prototype.constructor=Wa;Wa.prototype.isCubeTexture=!0;Object.defineProperty(Wa.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});class hU extends Sd{constructor(e,n,i){Number.isInteger(n)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),n=i),super(e,e,n),Object.defineProperty(this,"isWebGLCubeRenderTarget",{value:!0}),n=n||{},this.texture=new Wa(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.format=Rr,this.texture.encoding=n.encoding,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Qb(5,5,5),a=new bi({name:"CubemapFromEquirect",uniforms:_c(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:On,blending:vd});a.uniforms.tEquirect.value=n;const l=new xn(r,a),c=n.minFilter;return n.minFilter===Fm&&(n.minFilter=Kn),new Sc(1,10,this).update(e,l),n.minFilter=c,l.geometry.dispose(),l.material.dispose(),this}clear(e,n,i,r){const a=e.getRenderTarget();for(let l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(n,i,r);e.setRenderTarget(a)}}function Mc(t,e,n,i,r,a,l,c,u,h,p,g){Xt.call(this,null,a,l,c,u,h,i,r,p,g),this.image={data:t||null,width:e||1,height:n||1},this.magFilter=u!==void 0?u:si,this.minFilter=h!==void 0?h:si,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}Mc.prototype=Object.create(Xt.prototype);Mc.prototype.constructor=Mc;Mc.prototype.isDataTexture=!0;const Yl=new tl,rp=new Y;class Um{constructor(e,n,i,r,a,l){this.planes=[e!==void 0?e:new Ds,n!==void 0?n:new Ds,i!==void 0?i:new Ds,r!==void 0?r:new Ds,a!==void 0?a:new Ds,l!==void 0?l:new Ds]}set(e,n,i,r,a,l){const c=this.planes;return c[0].copy(e),c[1].copy(n),c[2].copy(i),c[3].copy(r),c[4].copy(a),c[5].copy(l),this}clone(){return new this.constructor().copy(this)}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const n=this.planes,i=e.elements,r=i[0],a=i[1],l=i[2],c=i[3],u=i[4],h=i[5],p=i[6],g=i[7],y=i[8],x=i[9],b=i[10],w=i[11],T=i[12],_=i[13],S=i[14],E=i[15];return n[0].setComponents(c-r,g-u,w-y,E-T).normalize(),n[1].setComponents(c+r,g+u,w+y,E+T).normalize(),n[2].setComponents(c+a,g+h,w+x,E+_).normalize(),n[3].setComponents(c-a,g-h,w-x,E-_).normalize(),n[4].setComponents(c-l,g-p,w-b,E-S).normalize(),n[5].setComponents(c+l,g+p,w+b,E+S).normalize(),this}intersectsObject(e){const n=e.geometry;return n.boundingSphere===null&&n.computeBoundingSphere(),Yl.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Yl)}intersectsSprite(e){return Yl.center.set(0,0,0),Yl.radius=.7071067811865476,Yl.applyMatrix4(e.matrixWorld),this.intersectsSphere(Yl)}intersectsSphere(e){const n=this.planes,i=e.center,r=-e.radius;for(let a=0;a<6;a++)if(n[a].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const r=n[i];if(rp.x=r.normal.x>0?e.max.x:e.min.x,rp.y=r.normal.y>0?e.max.y:e.min.y,rp.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(rp)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}}function rN(){let t=null,e=!1,n=null,i=null;function r(a,l){n(a,l),i=t.requestAnimationFrame(r)}return{start:function(){e!==!0&&n!==null&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(a){n=a},setContext:function(a){t=a}}}function fU(t,e){const n=e.isWebGL2,i=new WeakMap;function r(h,p){const g=h.array,y=h.usage,x=t.createBuffer();t.bindBuffer(p,x),t.bufferData(p,g,y),h.onUploadCallback();let b=5126;return g instanceof Float32Array?b=5126:g instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):g instanceof Uint16Array?h.isFloat16BufferAttribute?n?b=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):b=5123:g instanceof Int16Array?b=5122:g instanceof Uint32Array?b=5125:g instanceof Int32Array?b=5124:g instanceof Int8Array?b=5120:g instanceof Uint8Array&&(b=5121),{buffer:x,type:b,bytesPerElement:g.BYTES_PER_ELEMENT,version:h.version}}function a(h,p,g){const y=p.array,x=p.updateRange;t.bindBuffer(g,h),x.count===-1?t.bufferSubData(g,0,y):(n?t.bufferSubData(g,x.offset*y.BYTES_PER_ELEMENT,y,x.offset,x.count):t.bufferSubData(g,x.offset*y.BYTES_PER_ELEMENT,y.subarray(x.offset,x.offset+x.count)),x.count=-1)}function l(h){return h.isInterleavedBufferAttribute&&(h=h.data),i.get(h)}function c(h){h.isInterleavedBufferAttribute&&(h=h.data);const p=i.get(h);p&&(t.deleteBuffer(p.buffer),i.delete(h))}function u(h,p){if(h.isGLBufferAttribute){const y=i.get(h);(!y||y.version<h.version)&&i.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}h.isInterleavedBufferAttribute&&(h=h.data);const g=i.get(h);g===void 0?i.set(h,r(h,p)):g.version<h.version&&(a(g.buffer,h,p),g.version=h.version)}return{get:l,remove:c,update:u}}class pU extends Ot{constructor(e=1,n=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:r};const a=e/2,l=n/2,c=Math.floor(i),u=Math.floor(r),h=c+1,p=u+1,g=e/c,y=n/u,x=[],b=[],w=[],T=[];for(let _=0;_<p;_++){const S=_*y-l;for(let E=0;E<h;E++){const R=E*g-a;b.push(R,-S,0),w.push(0,0,1),T.push(E/c),T.push(1-_/u)}}for(let _=0;_<u;_++)for(let S=0;S<c;S++){const E=S+h*_,R=S+h*(_+1),A=S+1+h*(_+1),N=S+1+h*_;x.push(E,R,N),x.push(R,A,N)}this.setIndex(x),this.setAttribute("position",new Vt(b,3)),this.setAttribute("normal",new Vt(w,3)),this.setAttribute("uv",new Vt(T,2))}}var mU=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,gU=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,yU=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,xU=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,vU=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,bU="vec3 transformed = vec3( position );",wU=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,_U=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,SU=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,MU=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,TU=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,EU=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,AU=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,CU=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,NU=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,RU=`#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,LU=`#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor.xyz *= color.xyz;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,kU=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,jU=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,DU=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,PU=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,OU=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,BU=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,zU=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,FU="gl_FragColor = linearToOutputTexel( gl_FragColor );",IU=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,UU=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,VU=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,HU=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,GU=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,WU=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,$U=`#ifdef USE_FOG
	fogDepth = - mvPosition.z;
#endif`,qU=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,YU=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,XU=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,ZU=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,QU=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,JU=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,KU=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,e8=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,t8=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( -viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
			vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,n8=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,i8=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,r8=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,s8=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,a8=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,o8=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float specularRoughness;
	vec3 specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,l8=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,c8=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,u8=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,d8=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,h8=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,f8=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,p8=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,m8=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,g8=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,y8=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,x8=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,v8=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,b8=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,w8=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,_8=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
		uniform float morphTargetInfluences[ 8 ];
	#else
		uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,S8=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
		transformed += morphTarget4 * morphTargetInfluences[ 4 ];
		transformed += morphTarget5 * morphTargetInfluences[ 5 ];
		transformed += morphTarget6 * morphTargetInfluences[ 6 ];
		transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,M8=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,T8=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,E8=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,A8=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,C8=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,N8=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,R8=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,L8=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,k8=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,j8=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,D8=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,P8=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,O8=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,B8=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,z8=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,F8=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,I8=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,U8=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,V8=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,H8=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,G8=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,W8=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,$8=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,q8=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Y8=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,X8=`#ifdef USE_TRANSMISSIONMAP
	totalTransmission *= texture2D( transmissionMap, vUv ).r;
#endif`,Z8=`#ifdef USE_TRANSMISSIONMAP
	uniform sampler2D transmissionMap;
#endif`,Q8=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,J8=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,K8=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,e7=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,t7=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,n7=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,i7=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,r7=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,s7=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,a7=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,o7=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,l7=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,c7=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,u7=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,d7=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,h7=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,f7=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,p7=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,m7=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,g7=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,y7=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,x7=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,v7=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,b7=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,w7=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,_7=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,S7=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,M7=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,T7=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,E7=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSMISSION
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSMISSION
	uniform float transmission;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <transmissionmap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#ifdef TRANSMISSION
		float totalTransmission = transmission;
	#endif
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <transmissionmap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSMISSION
		diffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,A7=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,C7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,N7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,R7=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,L7=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,k7=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,j7=`#include <common>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,D7=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,P7=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`;const _t={alphamap_fragment:mU,alphamap_pars_fragment:gU,alphatest_fragment:yU,aomap_fragment:xU,aomap_pars_fragment:vU,begin_vertex:bU,beginnormal_vertex:wU,bsdfs:_U,bumpmap_pars_fragment:SU,clipping_planes_fragment:MU,clipping_planes_pars_fragment:TU,clipping_planes_pars_vertex:EU,clipping_planes_vertex:AU,color_fragment:CU,color_pars_fragment:NU,color_pars_vertex:RU,color_vertex:LU,common:kU,cube_uv_reflection_fragment:jU,defaultnormal_vertex:DU,displacementmap_pars_vertex:PU,displacementmap_vertex:OU,emissivemap_fragment:BU,emissivemap_pars_fragment:zU,encodings_fragment:FU,encodings_pars_fragment:IU,envmap_fragment:UU,envmap_common_pars_fragment:VU,envmap_pars_fragment:HU,envmap_pars_vertex:GU,envmap_physical_pars_fragment:t8,envmap_vertex:WU,fog_vertex:$U,fog_pars_vertex:qU,fog_fragment:YU,fog_pars_fragment:XU,gradientmap_pars_fragment:ZU,lightmap_fragment:QU,lightmap_pars_fragment:JU,lights_lambert_vertex:KU,lights_pars_begin:e8,lights_toon_fragment:n8,lights_toon_pars_fragment:i8,lights_phong_fragment:r8,lights_phong_pars_fragment:s8,lights_physical_fragment:a8,lights_physical_pars_fragment:o8,lights_fragment_begin:l8,lights_fragment_maps:c8,lights_fragment_end:u8,logdepthbuf_fragment:d8,logdepthbuf_pars_fragment:h8,logdepthbuf_pars_vertex:f8,logdepthbuf_vertex:p8,map_fragment:m8,map_pars_fragment:g8,map_particle_fragment:y8,map_particle_pars_fragment:x8,metalnessmap_fragment:v8,metalnessmap_pars_fragment:b8,morphnormal_vertex:w8,morphtarget_pars_vertex:_8,morphtarget_vertex:S8,normal_fragment_begin:M8,normal_fragment_maps:T8,normalmap_pars_fragment:E8,clearcoat_normal_fragment_begin:A8,clearcoat_normal_fragment_maps:C8,clearcoat_pars_fragment:N8,packing:R8,premultiplied_alpha_fragment:L8,project_vertex:k8,dithering_fragment:j8,dithering_pars_fragment:D8,roughnessmap_fragment:P8,roughnessmap_pars_fragment:O8,shadowmap_pars_fragment:B8,shadowmap_pars_vertex:z8,shadowmap_vertex:F8,shadowmask_pars_fragment:I8,skinbase_vertex:U8,skinning_pars_vertex:V8,skinning_vertex:H8,skinnormal_vertex:G8,specularmap_fragment:W8,specularmap_pars_fragment:$8,tonemapping_fragment:q8,tonemapping_pars_fragment:Y8,transmissionmap_fragment:X8,transmissionmap_pars_fragment:Z8,uv_pars_fragment:Q8,uv_pars_vertex:J8,uv_vertex:K8,uv2_pars_fragment:e7,uv2_pars_vertex:t7,uv2_vertex:n7,worldpos_vertex:i7,background_frag:r7,background_vert:s7,cube_frag:a7,cube_vert:o7,depth_frag:l7,depth_vert:c7,distanceRGBA_frag:u7,distanceRGBA_vert:d7,equirect_frag:h7,equirect_vert:f7,linedashed_frag:p7,linedashed_vert:m7,meshbasic_frag:g7,meshbasic_vert:y7,meshlambert_frag:x7,meshlambert_vert:v7,meshmatcap_frag:b7,meshmatcap_vert:w7,meshtoon_frag:_7,meshtoon_vert:S7,meshphong_frag:M7,meshphong_vert:T7,meshphysical_frag:E7,meshphysical_vert:A7,normal_frag:C7,normal_vert:N7,points_frag:R7,points_vert:L7,shadow_frag:k7,shadow_vert:j7,sprite_frag:D7,sprite_vert:P7},Pe={common:{diffuse:{value:new Xe(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new ur},uv2Transform:{value:new ur},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ae(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Xe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Xe(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new ur}},sprite:{diffuse:{value:new Xe(15658734)},opacity:{value:1},center:{value:new Ae(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new ur}}},Wr={basic:{uniforms:Yn([Pe.common,Pe.specularmap,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.fog]),vertexShader:_t.meshbasic_vert,fragmentShader:_t.meshbasic_frag},lambert:{uniforms:Yn([Pe.common,Pe.specularmap,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.fog,Pe.lights,{emissive:{value:new Xe(0)}}]),vertexShader:_t.meshlambert_vert,fragmentShader:_t.meshlambert_frag},phong:{uniforms:Yn([Pe.common,Pe.specularmap,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.fog,Pe.lights,{emissive:{value:new Xe(0)},specular:{value:new Xe(1118481)},shininess:{value:30}}]),vertexShader:_t.meshphong_vert,fragmentShader:_t.meshphong_frag},standard:{uniforms:Yn([Pe.common,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.roughnessmap,Pe.metalnessmap,Pe.fog,Pe.lights,{emissive:{value:new Xe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:_t.meshphysical_vert,fragmentShader:_t.meshphysical_frag},toon:{uniforms:Yn([Pe.common,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.gradientmap,Pe.fog,Pe.lights,{emissive:{value:new Xe(0)}}]),vertexShader:_t.meshtoon_vert,fragmentShader:_t.meshtoon_frag},matcap:{uniforms:Yn([Pe.common,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.fog,{matcap:{value:null}}]),vertexShader:_t.meshmatcap_vert,fragmentShader:_t.meshmatcap_frag},points:{uniforms:Yn([Pe.points,Pe.fog]),vertexShader:_t.points_vert,fragmentShader:_t.points_frag},dashed:{uniforms:Yn([Pe.common,Pe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:_t.linedashed_vert,fragmentShader:_t.linedashed_frag},depth:{uniforms:Yn([Pe.common,Pe.displacementmap]),vertexShader:_t.depth_vert,fragmentShader:_t.depth_frag},normal:{uniforms:Yn([Pe.common,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,{opacity:{value:1}}]),vertexShader:_t.normal_vert,fragmentShader:_t.normal_frag},sprite:{uniforms:Yn([Pe.sprite,Pe.fog]),vertexShader:_t.sprite_vert,fragmentShader:_t.sprite_frag},background:{uniforms:{uvTransform:{value:new ur},t2D:{value:null}},vertexShader:_t.background_vert,fragmentShader:_t.background_frag},cube:{uniforms:Yn([Pe.envmap,{opacity:{value:1}}]),vertexShader:_t.cube_vert,fragmentShader:_t.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:_t.equirect_vert,fragmentShader:_t.equirect_frag},distanceRGBA:{uniforms:Yn([Pe.common,Pe.displacementmap,{referencePosition:{value:new Y},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:_t.distanceRGBA_vert,fragmentShader:_t.distanceRGBA_frag},shadow:{uniforms:Yn([Pe.lights,Pe.fog,{color:{value:new Xe(0)},opacity:{value:1}}]),vertexShader:_t.shadow_vert,fragmentShader:_t.shadow_frag}};Wr.physical={uniforms:Yn([Wr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ae(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Xe(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:_t.meshphysical_vert,fragmentShader:_t.meshphysical_frag};function O7(t,e,n,i,r){const a=new Xe(0);let l=0,c,u,h=null,p=0,g=null;function y(b,w,T,_){let S=w.isScene===!0?w.background:null;S&&S.isTexture&&(S=e.get(S));const E=t.xr,R=E.getSession&&E.getSession();R&&R.environmentBlendMode==="additive"&&(S=null),S===null?x(a,l):S&&S.isColor&&(x(S,1),_=!0),(t.autoClear||_)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),S&&(S.isCubeTexture||S.isWebGLCubeRenderTarget||S.mapping===qb)?(u===void 0&&(u=new xn(new Qb(1,1,1),new bi({name:"BackgroundCubeMaterial",uniforms:_c(Wr.cube.uniforms),vertexShader:Wr.cube.vertexShader,fragmentShader:Wr.cube.fragmentShader,side:On,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(A,N,j){this.matrixWorld.copyPosition(j.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),S.isWebGLCubeRenderTarget&&(S=S.texture),u.material.uniforms.envMap.value=S,u.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S._needsFlipEnvMap?-1:1,(h!==S||p!==S.version||g!==t.toneMapping)&&(u.material.needsUpdate=!0,h=S,p=S.version,g=t.toneMapping),b.unshift(u,u.geometry,u.material,0,0,null)):S&&S.isTexture&&(c===void 0&&(c=new xn(new pU(2,2),new bi({name:"BackgroundMaterial",uniforms:_c(Wr.background.uniforms),vertexShader:Wr.background.vertexShader,fragmentShader:Wr.background.fragmentShader,side:Om,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=S,S.matrixAutoUpdate===!0&&S.updateMatrix(),c.material.uniforms.uvTransform.value.copy(S.matrix),(h!==S||p!==S.version||g!==t.toneMapping)&&(c.material.needsUpdate=!0,h=S,p=S.version,g=t.toneMapping),b.unshift(c,c.geometry,c.material,0,0,null))}function x(b,w){n.buffers.color.setClear(b.r,b.g,b.b,w,r)}return{getClearColor:function(){return a},setClearColor:function(b,w=1){a.set(b),l=w,x(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(b){l=b,x(a,l)},render:y}}function B7(t,e,n,i){const r=t.getParameter(34921),a=i.isWebGL2?null:e.get("OES_vertex_array_object"),l=i.isWebGL2||a!==null,c={},u=w(null);let h=u;function p(Q,W,Z,z,$){let U=!1;if(l){const X=b(z,Z,W);h!==X&&(h=X,y(h.object)),U=T(z,$),U&&_(z,$)}else{const X=W.wireframe===!0;(h.geometry!==z.id||h.program!==Z.id||h.wireframe!==X)&&(h.geometry=z.id,h.program=Z.id,h.wireframe=X,U=!0)}Q.isInstancedMesh===!0&&(U=!0),$!==null&&n.update($,34963),U&&(j(Q,W,Z,z),$!==null&&t.bindBuffer(34963,n.get($).buffer))}function g(){return i.isWebGL2?t.createVertexArray():a.createVertexArrayOES()}function y(Q){return i.isWebGL2?t.bindVertexArray(Q):a.bindVertexArrayOES(Q)}function x(Q){return i.isWebGL2?t.deleteVertexArray(Q):a.deleteVertexArrayOES(Q)}function b(Q,W,Z){const z=Z.wireframe===!0;let $=c[Q.id];$===void 0&&($={},c[Q.id]=$);let U=$[W.id];U===void 0&&(U={},$[W.id]=U);let X=U[z];return X===void 0&&(X=w(g()),U[z]=X),X}function w(Q){const W=[],Z=[],z=[];for(let $=0;$<r;$++)W[$]=0,Z[$]=0,z[$]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:W,enabledAttributes:Z,attributeDivisors:z,object:Q,attributes:{},index:null}}function T(Q,W){const Z=h.attributes,z=Q.attributes;let $=0;for(const U in z){const X=Z[U],D=z[U];if(X===void 0||X.attribute!==D||X.data!==D.data)return!0;$++}return h.attributesNum!==$||h.index!==W}function _(Q,W){const Z={},z=Q.attributes;let $=0;for(const U in z){const X=z[U],D={};D.attribute=X,X.data&&(D.data=X.data),Z[U]=D,$++}h.attributes=Z,h.attributesNum=$,h.index=W}function S(){const Q=h.newAttributes;for(let W=0,Z=Q.length;W<Z;W++)Q[W]=0}function E(Q){R(Q,0)}function R(Q,W){const Z=h.newAttributes,z=h.enabledAttributes,$=h.attributeDivisors;Z[Q]=1,z[Q]===0&&(t.enableVertexAttribArray(Q),z[Q]=1),$[Q]!==W&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Q,W),$[Q]=W)}function A(){const Q=h.newAttributes,W=h.enabledAttributes;for(let Z=0,z=W.length;Z<z;Z++)W[Z]!==Q[Z]&&(t.disableVertexAttribArray(Z),W[Z]=0)}function N(Q,W,Z,z,$,U){i.isWebGL2===!0&&(Z===5124||Z===5125)?t.vertexAttribIPointer(Q,W,Z,$,U):t.vertexAttribPointer(Q,W,Z,z,$,U)}function j(Q,W,Z,z){if(i.isWebGL2===!1&&(Q.isInstancedMesh||z.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;S();const $=z.attributes,U=Z.getAttributes(),X=W.defaultAttributeValues;for(const D in U){const q=U[D];if(q>=0){const ce=$[D];if(ce!==void 0){const me=ce.normalized,fe=ce.itemSize,ie=n.get(ce);if(ie===void 0)continue;const Ne=ie.buffer,Fe=ie.type,Be=ie.bytesPerElement;if(ce.isInterleavedBufferAttribute){const Ie=ce.data,$e=Ie.stride,Ke=ce.offset;Ie&&Ie.isInstancedInterleavedBuffer?(R(q,Ie.meshPerAttribute),z._maxInstanceCount===void 0&&(z._maxInstanceCount=Ie.meshPerAttribute*Ie.count)):E(q),t.bindBuffer(34962,Ne),N(q,fe,Fe,me,$e*Be,Ke*Be)}else ce.isInstancedBufferAttribute?(R(q,ce.meshPerAttribute),z._maxInstanceCount===void 0&&(z._maxInstanceCount=ce.meshPerAttribute*ce.count)):E(q),t.bindBuffer(34962,Ne),N(q,fe,Fe,me,0,0)}else if(D==="instanceMatrix"){const me=n.get(Q.instanceMatrix);if(me===void 0)continue;const fe=me.buffer,ie=me.type;R(q+0,1),R(q+1,1),R(q+2,1),R(q+3,1),t.bindBuffer(34962,fe),t.vertexAttribPointer(q+0,4,ie,!1,64,0),t.vertexAttribPointer(q+1,4,ie,!1,64,16),t.vertexAttribPointer(q+2,4,ie,!1,64,32),t.vertexAttribPointer(q+3,4,ie,!1,64,48)}else if(D==="instanceColor"){const me=n.get(Q.instanceColor);if(me===void 0)continue;const fe=me.buffer,ie=me.type;R(q,1),t.bindBuffer(34962,fe),t.vertexAttribPointer(q,3,ie,!1,12,0)}else if(X!==void 0){const me=X[D];if(me!==void 0)switch(me.length){case 2:t.vertexAttrib2fv(q,me);break;case 3:t.vertexAttrib3fv(q,me);break;case 4:t.vertexAttrib4fv(q,me);break;default:t.vertexAttrib1fv(q,me)}}}}A()}function O(){F();for(const Q in c){const W=c[Q];for(const Z in W){const z=W[Z];for(const $ in z)x(z[$].object),delete z[$];delete W[Z]}delete c[Q]}}function L(Q){if(c[Q.id]===void 0)return;const W=c[Q.id];for(const Z in W){const z=W[Z];for(const $ in z)x(z[$].object),delete z[$];delete W[Z]}delete c[Q.id]}function B(Q){for(const W in c){const Z=c[W];if(Z[Q.id]===void 0)continue;const z=Z[Q.id];for(const $ in z)x(z[$].object),delete z[$];delete Z[Q.id]}}function F(){J(),h!==u&&(h=u,y(h.object))}function J(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:p,reset:F,resetDefaultState:J,dispose:O,releaseStatesOfGeometry:L,releaseStatesOfProgram:B,initAttributes:S,enableAttribute:E,disableUnusedAttributes:A}}function z7(t,e,n,i){const r=i.isWebGL2;let a;function l(h){a=h}function c(h,p){t.drawArrays(a,h,p),n.update(p,a,1)}function u(h,p,g){if(g===0)return;let y,x;if(r)y=t,x="drawArraysInstanced";else if(y=e.get("ANGLE_instanced_arrays"),x="drawArraysInstancedANGLE",y===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[x](a,h,p,g),n.update(p,a,g)}this.setMode=l,this.render=c,this.renderInstances=u}function F7(t,e,n){let i;function r(){if(i!==void 0)return i;const N=e.get("EXT_texture_filter_anisotropic");return N!==null?i=t.getParameter(N.MAX_TEXTURE_MAX_ANISOTROPY_EXT):i=0,i}function a(N){if(N==="highp"){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";N="mediump"}return N==="mediump"&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const l=typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&t instanceof WebGL2ComputeRenderingContext;let c=n.precision!==void 0?n.precision:"highp";const u=a(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const h=n.logarithmicDepthBuffer===!0,p=t.getParameter(34930),g=t.getParameter(35660),y=t.getParameter(3379),x=t.getParameter(34076),b=t.getParameter(34921),w=t.getParameter(36347),T=t.getParameter(36348),_=t.getParameter(36349),S=g>0,E=l||!!e.get("OES_texture_float"),R=S&&E,A=l?t.getParameter(36183):0;return{isWebGL2:l,getMaxAnisotropy:r,getMaxPrecision:a,precision:c,logarithmicDepthBuffer:h,maxTextures:p,maxVertexTextures:g,maxTextureSize:y,maxCubemapSize:x,maxAttributes:b,maxVertexUniforms:w,maxVaryings:T,maxFragmentUniforms:_,vertexTextures:S,floatFragmentTextures:E,floatVertexTextures:R,maxSamples:A}}function I7(t){const e=this;let n=null,i=0,r=!1,a=!1;const l=new Ds,c=new ur,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(g,y,x){const b=g.length!==0||y||i!==0||r;return r=y,n=p(g,x,0),i=g.length,b},this.beginShadows=function(){a=!0,p(null)},this.endShadows=function(){a=!1,h()},this.setState=function(g,y,x){const b=g.clippingPlanes,w=g.clipIntersection,T=g.clipShadows,_=t.get(g);if(!r||b===null||b.length===0||a&&!T)a?p(null):h();else{const S=a?0:i,E=S*4;let R=_.clippingState||null;u.value=R,R=p(b,y,E,x);for(let A=0;A!==E;++A)R[A]=n[A];_.clippingState=R,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=S}};function h(){u.value!==n&&(u.value=n,u.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function p(g,y,x,b){const w=g!==null?g.length:0;let T=null;if(w!==0){if(T=u.value,b!==!0||T===null){const _=x+w*4,S=y.matrixWorldInverse;c.getNormalMatrix(S),(T===null||T.length<_)&&(T=new Float32Array(_));for(let E=0,R=x;E!==w;++E,R+=4)l.copy(g[E]).applyMatrix4(S,c),l.normal.toArray(T,R),T[R+3]=l.constant}u.value=T,u.needsUpdate=!0}return e.numPlanes=w,e.numIntersection=0,T}}function U7(t){let e=new WeakMap;function n(l,c){return c===eT?l.mapping=Wb:c===tT&&(l.mapping=$b),l}function i(l){if(l&&l.isTexture){const c=l.mapping;if(c===eT||c===tT)if(e.has(l)){const u=e.get(l).texture;return n(u,l.mapping)}else{const u=l.image;if(u&&u.height>0){const h=t.getRenderList(),p=t.getRenderTarget(),g=new hU(u.height/2);return g.fromEquirectangularTexture(t,l),e.set(l,g),t.setRenderTarget(p),t.setRenderList(h),l.addEventListener("dispose",r),n(g.texture,l.mapping)}else return null}}return l}function r(l){const c=l.target;c.removeEventListener("dispose",r);const u=e.get(c);u!==void 0&&(e.delete(c),u.dispose())}function a(){e=new WeakMap}return{get:i,dispose:a}}function V7(t){const e={};function n(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(i)}return e[i]=r,r}return{has:function(i){return n(i)!==null},init:function(i){i.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(i){const r=n(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function H7(t,e,n,i){const r={},a=new WeakMap;function l(g){const y=g.target;y.index!==null&&e.remove(y.index);for(const b in y.attributes)e.remove(y.attributes[b]);y.removeEventListener("dispose",l),delete r[y.id];const x=a.get(y);x&&(e.remove(x),a.delete(y)),i.releaseStatesOfGeometry(y),y.isInstancedBufferGeometry===!0&&delete y._maxInstanceCount,n.memory.geometries--}function c(g,y){return r[y.id]===!0||(y.addEventListener("dispose",l),r[y.id]=!0,n.memory.geometries++),y}function u(g){const y=g.attributes;for(const b in y)e.update(y[b],34962);const x=g.morphAttributes;for(const b in x){const w=x[b];for(let T=0,_=w.length;T<_;T++)e.update(w[T],34962)}}function h(g){const y=[],x=g.index,b=g.attributes.position;let w=0;if(x!==null){const S=x.array;w=x.version;for(let E=0,R=S.length;E<R;E+=3){const A=S[E+0],N=S[E+1],j=S[E+2];y.push(A,N,N,j,j,A)}}else{const S=b.array;w=b.version;for(let E=0,R=S.length/3-1;E<R;E+=3){const A=E+0,N=E+1,j=E+2;y.push(A,N,N,j,j,A)}}const T=new(iN(y)>65535?Gd:Hd)(y,1);T.version=w;const _=a.get(g);_&&e.remove(_),a.set(g,T)}function p(g){const y=a.get(g);if(y){const x=g.index;x!==null&&y.version<x.version&&h(g)}else h(g);return a.get(g)}return{get:c,update:u,getWireframeAttribute:p}}function G7(t,e,n,i){const r=i.isWebGL2;let a;function l(y){a=y}let c,u;function h(y){c=y.type,u=y.bytesPerElement}function p(y,x){t.drawElements(a,x,c,y*u),n.update(x,a,1)}function g(y,x,b){if(b===0)return;let w,T;if(r)w=t,T="drawElementsInstanced";else if(w=e.get("ANGLE_instanced_arrays"),T="drawElementsInstancedANGLE",w===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}w[T](a,x,c,y*u,b),n.update(x,a,b)}this.setMode=l,this.setIndex=h,this.render=p,this.renderInstances=g}function W7(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(a,l,c){switch(n.calls++,l){case 4:n.triangles+=c*(a/3);break;case 1:n.lines+=c*(a/2);break;case 3:n.lines+=c*(a-1);break;case 2:n.lines+=c*a;break;case 0:n.points+=c*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",l);break}}function r(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:r,update:i}}function $7(t,e){return t[0]-e[0]}function q7(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Y7(t){const e={},n=new Float32Array(8),i=[];for(let a=0;a<8;a++)i[a]=[a,0];function r(a,l,c,u){const h=a.morphTargetInfluences,p=h===void 0?0:h.length;let g=e[l.id];if(g===void 0){g=[];for(let T=0;T<p;T++)g[T]=[T,0];e[l.id]=g}for(let T=0;T<p;T++){const _=g[T];_[0]=T,_[1]=h[T]}g.sort(q7);for(let T=0;T<8;T++)T<p&&g[T][1]?(i[T][0]=g[T][0],i[T][1]=g[T][1]):(i[T][0]=Number.MAX_SAFE_INTEGER,i[T][1]=0);i.sort($7);const y=c.morphTargets&&l.morphAttributes.position,x=c.morphNormals&&l.morphAttributes.normal;let b=0;for(let T=0;T<8;T++){const _=i[T],S=_[0],E=_[1];S!==Number.MAX_SAFE_INTEGER&&E?(y&&l.getAttribute("morphTarget"+T)!==y[S]&&l.setAttribute("morphTarget"+T,y[S]),x&&l.getAttribute("morphNormal"+T)!==x[S]&&l.setAttribute("morphNormal"+T,x[S]),n[T]=E,b+=E):(y&&l.hasAttribute("morphTarget"+T)===!0&&l.deleteAttribute("morphTarget"+T),x&&l.hasAttribute("morphNormal"+T)===!0&&l.deleteAttribute("morphNormal"+T),n[T]=0)}const w=l.morphTargetsRelative?1:1-b;u.getUniforms().setValue(t,"morphTargetBaseInfluence",w),u.getUniforms().setValue(t,"morphTargetInfluences",n)}return{update:r}}function X7(t,e,n,i){let r=new WeakMap;function a(u){const h=i.render.frame,p=u.geometry,g=e.get(u,p);return r.get(g)!==h&&(e.update(g),r.set(g,h)),u.isInstancedMesh&&(u.hasEventListener("dispose",c)===!1&&u.addEventListener("dispose",c),n.update(u.instanceMatrix,34962),u.instanceColor!==null&&n.update(u.instanceColor,34962)),g}function l(){r=new WeakMap}function c(u){const h=u.target;h.removeEventListener("dispose",c),n.remove(h.instanceMatrix),h.instanceColor!==null&&n.remove(h.instanceColor)}return{update:a,dispose:l}}function Wd(t=null,e=1,n=1,i=1){Xt.call(this,null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=si,this.minFilter=si,this.wrapR=ji,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Wd.prototype=Object.create(Xt.prototype);Wd.prototype.constructor=Wd;Wd.prototype.isDataTexture2DArray=!0;function $d(t=null,e=1,n=1,i=1){Xt.call(this,null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=si,this.minFilter=si,this.wrapR=ji,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}$d.prototype=Object.create(Xt.prototype);$d.prototype.constructor=$d;$d.prototype.isDataTexture3D=!0;const sN=new Xt,Z7=new Wd,Q7=new $d,aN=new Wa,TT=[],ET=[],AT=new Float32Array(16),CT=new Float32Array(9),NT=new Float32Array(4);function Xc(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let a=TT[r];if(a===void 0&&(a=new Float32Array(r),TT[r]=a),e!==0){i.toArray(a,0);for(let l=1,c=0;l!==e;++l)c+=n,t[l].toArray(a,c)}return a}function mr(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Fi(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function oN(t,e){let n=ET[e];n===void 0&&(n=new Int32Array(e),ET[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function J7(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function K7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(mr(n,e))return;t.uniform2fv(this.addr,e),Fi(n,e)}}function eV(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(mr(n,e))return;t.uniform3fv(this.addr,e),Fi(n,e)}}function tV(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(mr(n,e))return;t.uniform4fv(this.addr,e),Fi(n,e)}}function nV(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(mr(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Fi(n,e)}else{if(mr(n,i))return;NT.set(i),t.uniformMatrix2fv(this.addr,!1,NT),Fi(n,i)}}function iV(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(mr(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Fi(n,e)}else{if(mr(n,i))return;CT.set(i),t.uniformMatrix3fv(this.addr,!1,CT),Fi(n,i)}}function rV(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(mr(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Fi(n,e)}else{if(mr(n,i))return;AT.set(i),t.uniformMatrix4fv(this.addr,!1,AT),Fi(n,i)}}function sV(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(e||sN,r)}function aV(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||Z7,r)}function oV(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||Q7,r)}function lV(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(e||aN,r)}function cV(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function uV(t,e){const n=this.cache;mr(n,e)||(t.uniform2iv(this.addr,e),Fi(n,e))}function dV(t,e){const n=this.cache;mr(n,e)||(t.uniform3iv(this.addr,e),Fi(n,e))}function hV(t,e){const n=this.cache;mr(n,e)||(t.uniform4iv(this.addr,e),Fi(n,e))}function fV(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function pV(t){switch(t){case 5126:return J7;case 35664:return K7;case 35665:return eV;case 35666:return tV;case 35674:return nV;case 35675:return iV;case 35676:return rV;case 5124:case 35670:return cV;case 35667:case 35671:return uV;case 35668:case 35672:return dV;case 35669:case 35673:return hV;case 5125:return fV;case 35678:case 36198:case 36298:case 36306:case 35682:return sV;case 35679:case 36299:case 36307:return oV;case 35680:case 36300:case 36308:case 36293:return lV;case 36289:case 36303:case 36311:case 36292:return aV}}function mV(t,e){t.uniform1fv(this.addr,e)}function gV(t,e){t.uniform1iv(this.addr,e)}function yV(t,e){t.uniform2iv(this.addr,e)}function xV(t,e){t.uniform3iv(this.addr,e)}function vV(t,e){t.uniform4iv(this.addr,e)}function bV(t,e){const n=Xc(e,this.size,2);t.uniform2fv(this.addr,n)}function wV(t,e){const n=Xc(e,this.size,3);t.uniform3fv(this.addr,n)}function _V(t,e){const n=Xc(e,this.size,4);t.uniform4fv(this.addr,n)}function SV(t,e){const n=Xc(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function MV(t,e){const n=Xc(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function TV(t,e){const n=Xc(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function EV(t,e,n){const i=e.length,r=oN(n,i);t.uniform1iv(this.addr,r);for(let a=0;a!==i;++a)n.safeSetTexture2D(e[a]||sN,r[a])}function AV(t,e,n){const i=e.length,r=oN(n,i);t.uniform1iv(this.addr,r);for(let a=0;a!==i;++a)n.safeSetTextureCube(e[a]||aN,r[a])}function CV(t){switch(t){case 5126:return mV;case 35664:return bV;case 35665:return wV;case 35666:return _V;case 35674:return SV;case 35675:return MV;case 35676:return TV;case 5124:case 35670:return gV;case 35667:case 35671:return yV;case 35668:case 35672:return xV;case 35669:case 35673:return vV;case 35678:case 36198:case 36298:case 36306:case 35682:return EV;case 35680:case 36300:case 36308:case 36293:return AV}}function NV(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=pV(e.type)}function lN(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=CV(e.type)}lN.prototype.updateCache=function(t){const e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),Fi(e,t)};function cN(t){this.id=t,this.seq=[],this.map={}}cN.prototype.setValue=function(t,e,n){const i=this.seq;for(let r=0,a=i.length;r!==a;++r){const l=i[r];l.setValue(t,e[l.id],n)}};const Wy=/(\w+)(\])?(\[|\.)?/g;function RT(t,e){t.seq.push(e),t.map[e.id]=e}function RV(t,e,n){const i=t.name,r=i.length;for(Wy.lastIndex=0;;){const a=Wy.exec(i),l=Wy.lastIndex;let c=a[1];const u=a[2]==="]",h=a[3];if(u&&(c=c|0),h===void 0||h==="["&&l+2===r){RT(n,h===void 0?new NV(c,t,e):new lN(c,t,e));break}else{let g=n.map[c];g===void 0&&(g=new cN(c),RT(n,g)),n=g}}}function za(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let i=0;i<n;++i){const r=t.getActiveUniform(e,i),a=t.getUniformLocation(e,r.name);RV(r,a,this)}}za.prototype.setValue=function(t,e,n,i){const r=this.map[e];r!==void 0&&r.setValue(t,n,i)};za.prototype.setOptional=function(t,e,n){const i=e[n];i!==void 0&&this.setValue(t,n,i)};za.upload=function(t,e,n,i){for(let r=0,a=e.length;r!==a;++r){const l=e[r],c=n[l.id];c.needsUpdate!==!1&&l.setValue(t,c.value,i)}};za.seqWithValue=function(t,e){const n=[];for(let i=0,r=t.length;i!==r;++i){const a=t[i];a.id in e&&n.push(a)}return n};function LT(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}let LV=0;function kV(t){const e=t.split(`
`);for(let n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join(`
`)}function uN(t){switch(t){case bh:return["Linear","( value )"];case eN:return["sRGB","( value )"];case FI:return["RGBE","( value )"];case UI:return["RGBM","( value, 7.0 )"];case VI:return["RGBM","( value, 16.0 )"];case HI:return["RGBD","( value, 256.0 )"];case zI:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case II:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function kT(t,e,n){const i=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();if(i&&r==="")return"";const a=t.getShaderSource(e);return"THREE.WebGLShader: gl.getShaderInfoLog() "+n+`
`+r+kV(a)}function Ku(t,e){const n=uN(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function jV(t,e){const n=uN(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function DV(t,e){let n;switch(e){case BF:n="Linear";break;case zF:n="Reinhard";break;case FF:n="OptimizedCineon";break;case IF:n="ACESFilmic";break;case UF:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function PV(t){return[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(dd).join(`
`)}function OV(t){const e=[];for(const n in t){const i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function BV(t,e){const n={},i=t.getProgramParameter(e,35721);for(let r=0;r<i;r++){const l=t.getActiveAttrib(e,r).name;n[l]=t.getAttribLocation(e,l)}return n}function dd(t){return t!==""}function jT(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function DT(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const zV=/^[ \t]*#include +<([\w\d./]+)>/gm;function tv(t){return t.replace(zV,FV)}function FV(t,e){const n=_t[e];if(n===void 0)throw new Error("Can not resolve #include <"+e+">");return tv(n)}const IV=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,UV=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function PT(t){return t.replace(UV,dN).replace(IV,VV)}function VV(t,e,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),dN(t,e,n,i)}function dN(t,e,n,i){let r="";for(let a=parseInt(e);a<parseInt(n);a++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function OT(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function HV(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===q3?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===Y3?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===ud&&(e="SHADOWMAP_TYPE_VSM"),e}function GV(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Wb:case $b:e="ENVMAP_TYPE_CUBE";break;case qb:case Yb:e="ENVMAP_TYPE_CUBE_UV";break}return e}function WV(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case $b:case Yb:e="ENVMAP_MODE_REFRACTION";break}return e}function $V(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case zm:e="ENVMAP_BLENDING_MULTIPLY";break;case PF:e="ENVMAP_BLENDING_MIX";break;case OF:e="ENVMAP_BLENDING_ADD";break}return e}function qV(t,e,n,i){const r=t.getContext(),a=n.defines;let l=n.vertexShader,c=n.fragmentShader;const u=HV(n),h=GV(n),p=WV(n),g=$V(n),y=t.gammaFactor>0?t.gammaFactor:1,x=n.isWebGL2?"":PV(n),b=OV(a),w=r.createProgram();let T,_,S=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(T=[b].filter(dd).join(`
`),T.length>0&&(T+=`
`),_=[x,b].filter(dd).join(`
`),_.length>0&&(_+=`
`)):(T=[OT(n),"#define SHADER_NAME "+n.shaderName,b,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+y,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+p:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(dd).join(`
`),_=[x,OT(n),"#define SHADER_NAME "+n.shaderName,b,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+y,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.envMap?"#define "+p:"",n.envMap?"#define "+g:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==wd?"#define TONE_MAPPING":"",n.toneMapping!==wd?_t.tonemapping_pars_fragment:"",n.toneMapping!==wd?DV("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",_t.encodings_pars_fragment,n.map?Ku("mapTexelToLinear",n.mapEncoding):"",n.matcap?Ku("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Ku("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Ku("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?Ku("lightMapTexelToLinear",n.lightMapEncoding):"",jV("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(dd).join(`
`)),l=tv(l),l=jT(l,n),l=DT(l,n),c=tv(c),c=jT(c,n),c=DT(c,n),l=PT(l),c=PT(c),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,T=["#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+T,_=["#define varying in",n.glslVersion===pT?"":"out highp vec4 pc_fragColor;",n.glslVersion===pT?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);const E=S+T+l,R=S+_+c,A=LT(r,35633,E),N=LT(r,35632,R);if(r.attachShader(w,A),r.attachShader(w,N),n.index0AttributeName!==void 0?r.bindAttribLocation(w,0,n.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(w,0,"position"),r.linkProgram(w),t.debug.checkShaderErrors){const L=r.getProgramInfoLog(w).trim(),B=r.getShaderInfoLog(A).trim(),F=r.getShaderInfoLog(N).trim();let J=!0,Q=!0;if(r.getProgramParameter(w,35714)===!1){J=!1;const W=kT(r,A,"vertex"),Z=kT(r,N,"fragment");console.error("THREE.WebGLProgram: shader error: ",r.getError(),"35715",r.getProgramParameter(w,35715),"gl.getProgramInfoLog",L,W,Z)}else L!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",L):(B===""||F==="")&&(Q=!1);Q&&(this.diagnostics={runnable:J,programLog:L,vertexShader:{log:B,prefix:T},fragmentShader:{log:F,prefix:_}})}r.deleteShader(A),r.deleteShader(N);let j;this.getUniforms=function(){return j===void 0&&(j=new za(r,w)),j};let O;return this.getAttributes=function(){return O===void 0&&(O=BV(r,w)),O},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(w),this.program=void 0},this.name=n.shaderName,this.id=LV++,this.cacheKey=e,this.usedTimes=1,this.program=w,this.vertexShader=A,this.fragmentShader=N,this}function YV(t,e,n,i,r,a){const l=[],c=i.isWebGL2,u=i.logarithmicDepthBuffer,h=i.floatVertexTextures,p=i.maxVertexUniforms,g=i.vertexTextures;let y=i.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},b=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function w(N){const O=N.skeleton.bones;if(h)return 1024;{const B=Math.floor((p-20)/4),F=Math.min(B,O.length);return F<O.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+O.length+" bones. This GPU supports "+F+"."),0):F}}function T(N){let j;return N&&N.isTexture?j=N.encoding:N&&N.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),j=N.texture.encoding):j=bh,j}function _(N,j,O,L,B){const F=L.fog,J=N.isMeshStandardMaterial?L.environment:null,Q=e.get(N.envMap||J),W=x[N.type],Z=B.isSkinnedMesh?w(B):0;N.precision!==null&&(y=i.getMaxPrecision(N.precision),y!==N.precision&&console.warn("THREE.WebGLProgram.getParameters:",N.precision,"not supported, using",y,"instead."));let z,$;if(W){const D=Wr[W];z=D.vertexShader,$=D.fragmentShader}else z=N.vertexShader,$=N.fragmentShader;const U=t.getRenderTarget();return{isWebGL2:c,shaderID:W,shaderName:N.type,vertexShader:z,fragmentShader:$,defines:N.defines,isRawShaderMaterial:N.isRawShaderMaterial===!0,glslVersion:N.glslVersion,precision:y,instancing:B.isInstancedMesh===!0,instancingColor:B.isInstancedMesh===!0&&B.instanceColor!==null,supportsVertexTextures:g,outputEncoding:U!==null?T(U.texture):t.outputEncoding,map:!!N.map,mapEncoding:T(N.map),matcap:!!N.matcap,matcapEncoding:T(N.matcap),envMap:!!Q,envMapMode:Q&&Q.mapping,envMapEncoding:T(Q),envMapCubeUV:!!Q&&(Q.mapping===qb||Q.mapping===Yb),lightMap:!!N.lightMap,lightMapEncoding:T(N.lightMap),aoMap:!!N.aoMap,emissiveMap:!!N.emissiveMap,emissiveMapEncoding:T(N.emissiveMap),bumpMap:!!N.bumpMap,normalMap:!!N.normalMap,objectSpaceNormalMap:N.normalMapType===$I,tangentSpaceNormalMap:N.normalMapType===qc,clearcoatMap:!!N.clearcoatMap,clearcoatRoughnessMap:!!N.clearcoatRoughnessMap,clearcoatNormalMap:!!N.clearcoatNormalMap,displacementMap:!!N.displacementMap,roughnessMap:!!N.roughnessMap,metalnessMap:!!N.metalnessMap,specularMap:!!N.specularMap,alphaMap:!!N.alphaMap,gradientMap:!!N.gradientMap,sheen:!!N.sheen,transmissionMap:!!N.transmissionMap,combine:N.combine,vertexTangents:N.normalMap&&N.vertexTangents,vertexColors:N.vertexColors,vertexUvs:!!N.map||!!N.bumpMap||!!N.normalMap||!!N.specularMap||!!N.alphaMap||!!N.emissiveMap||!!N.roughnessMap||!!N.metalnessMap||!!N.clearcoatMap||!!N.clearcoatRoughnessMap||!!N.clearcoatNormalMap||!!N.displacementMap||!!N.transmissionMap,uvsVertexOnly:!(N.map||N.bumpMap||N.normalMap||N.specularMap||N.alphaMap||N.emissiveMap||N.roughnessMap||N.metalnessMap||N.clearcoatNormalMap||N.transmissionMap)&&!!N.displacementMap,fog:!!F,useFog:N.fog,fogExp2:F&&F.isFogExp2,flatShading:N.flatShading,sizeAttenuation:N.sizeAttenuation,logarithmicDepthBuffer:u,skinning:N.skinning&&Z>0,maxBones:Z,useVertexTexture:h,morphTargets:N.morphTargets,morphNormals:N.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:j.directional.length,numPointLights:j.point.length,numSpotLights:j.spot.length,numRectAreaLights:j.rectArea.length,numHemiLights:j.hemi.length,numDirLightShadows:j.directionalShadowMap.length,numPointLightShadows:j.pointShadowMap.length,numSpotLightShadows:j.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:N.dithering,shadowMapEnabled:t.shadowMap.enabled&&O.length>0,shadowMapType:t.shadowMap.type,toneMapping:N.toneMapped?t.toneMapping:wd,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:N.premultipliedAlpha,alphaTest:N.alphaTest,doubleSided:N.side===Bm,flipSided:N.side===On,depthPacking:N.depthPacking!==void 0?N.depthPacking:!1,index0AttributeName:N.index0AttributeName,extensionDerivatives:N.extensions&&N.extensions.derivatives,extensionFragDepth:N.extensions&&N.extensions.fragDepth,extensionDrawBuffers:N.extensions&&N.extensions.drawBuffers,extensionShaderTextureLOD:N.extensions&&N.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||n.has("EXT_shader_texture_lod"),customProgramCacheKey:N.customProgramCacheKey()}}function S(N){const j=[];if(N.shaderID?j.push(N.shaderID):(j.push(N.fragmentShader),j.push(N.vertexShader)),N.defines!==void 0)for(const O in N.defines)j.push(O),j.push(N.defines[O]);if(N.isRawShaderMaterial===!1){for(let O=0;O<b.length;O++)j.push(N[b[O]]);j.push(t.outputEncoding),j.push(t.gammaFactor)}return j.push(N.customProgramCacheKey),j.join()}function E(N){const j=x[N.type];let O;if(j){const L=Wr[j];O=cU.clone(L.uniforms)}else O=N.uniforms;return O}function R(N,j){let O;for(let L=0,B=l.length;L<B;L++){const F=l[L];if(F.cacheKey===j){O=F,++O.usedTimes;break}}return O===void 0&&(O=new qV(t,j,N,r),l.push(O)),O}function A(N){if(--N.usedTimes===0){const j=l.indexOf(N);l[j]=l[l.length-1],l.pop(),N.destroy()}}return{getParameters:_,getProgramCacheKey:S,getUniforms:E,acquireProgram:R,releaseProgram:A,programs:l}}function XV(){let t=new WeakMap;function e(a){let l=t.get(a);return l===void 0&&(l={},t.set(a,l)),l}function n(a){t.delete(a)}function i(a,l,c){t.get(a)[l]=c}function r(){t=new WeakMap}return{get:e,remove:n,update:i,dispose:r}}function ZV(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function QV(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function BT(t){const e=[];let n=0;const i=[],r=[],a={id:-1};function l(){n=0,i.length=0,r.length=0}function c(y,x,b,w,T,_){let S=e[n];const E=t.get(b);return S===void 0?(S={id:y.id,object:y,geometry:x,material:b,program:E.program||a,groupOrder:w,renderOrder:y.renderOrder,z:T,group:_},e[n]=S):(S.id=y.id,S.object=y,S.geometry=x,S.material=b,S.program=E.program||a,S.groupOrder=w,S.renderOrder=y.renderOrder,S.z=T,S.group=_),n++,S}function u(y,x,b,w,T,_){const S=c(y,x,b,w,T,_);(b.transparent===!0?r:i).push(S)}function h(y,x,b,w,T,_){const S=c(y,x,b,w,T,_);(b.transparent===!0?r:i).unshift(S)}function p(y,x){i.length>1&&i.sort(y||ZV),r.length>1&&r.sort(x||QV)}function g(){for(let y=n,x=e.length;y<x;y++){const b=e[y];if(b.id===null)break;b.id=null,b.object=null,b.geometry=null,b.material=null,b.program=null,b.group=null}}return{opaque:i,transparent:r,init:l,push:u,unshift:h,finish:g,sort:p}}function JV(t){let e=new WeakMap;function n(r,a){const l=e.get(r);let c;return l===void 0?(c=new BT(t),e.set(r,new WeakMap),e.get(r).set(a,c)):(c=l.get(a),c===void 0&&(c=new BT(t),l.set(a,c))),c}function i(){e=new WeakMap}return{get:n,dispose:i}}function KV(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Y,color:new Xe};break;case"SpotLight":n={position:new Y,direction:new Y,color:new Xe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Y,color:new Xe,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Y,skyColor:new Xe,groundColor:new Xe};break;case"RectAreaLight":n={color:new Xe,position:new Y,halfWidth:new Y,halfHeight:new Y};break}return t[e.id]=n,n}}}function eH(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ae};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ae};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ae,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let tH=0;function nH(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function iH(t,e){const n=new KV,i=eH(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let p=0;p<9;p++)r.probe.push(new Y);const a=new Y,l=new bt,c=new bt;function u(p){let g=0,y=0,x=0;for(let j=0;j<9;j++)r.probe[j].set(0,0,0);let b=0,w=0,T=0,_=0,S=0,E=0,R=0,A=0;p.sort(nH);for(let j=0,O=p.length;j<O;j++){const L=p[j],B=L.color,F=L.intensity,J=L.distance,Q=L.shadow&&L.shadow.map?L.shadow.map.texture:null;if(L.isAmbientLight)g+=B.r*F,y+=B.g*F,x+=B.b*F;else if(L.isLightProbe)for(let W=0;W<9;W++)r.probe[W].addScaledVector(L.sh.coefficients[W],F);else if(L.isDirectionalLight){const W=n.get(L);if(W.color.copy(L.color).multiplyScalar(L.intensity),L.castShadow){const Z=L.shadow,z=i.get(L);z.shadowBias=Z.bias,z.shadowNormalBias=Z.normalBias,z.shadowRadius=Z.radius,z.shadowMapSize=Z.mapSize,r.directionalShadow[b]=z,r.directionalShadowMap[b]=Q,r.directionalShadowMatrix[b]=L.shadow.matrix,E++}r.directional[b]=W,b++}else if(L.isSpotLight){const W=n.get(L);if(W.position.setFromMatrixPosition(L.matrixWorld),W.color.copy(B).multiplyScalar(F),W.distance=J,W.coneCos=Math.cos(L.angle),W.penumbraCos=Math.cos(L.angle*(1-L.penumbra)),W.decay=L.decay,L.castShadow){const Z=L.shadow,z=i.get(L);z.shadowBias=Z.bias,z.shadowNormalBias=Z.normalBias,z.shadowRadius=Z.radius,z.shadowMapSize=Z.mapSize,r.spotShadow[T]=z,r.spotShadowMap[T]=Q,r.spotShadowMatrix[T]=L.shadow.matrix,A++}r.spot[T]=W,T++}else if(L.isRectAreaLight){const W=n.get(L);W.color.copy(B).multiplyScalar(F),W.halfWidth.set(L.width*.5,0,0),W.halfHeight.set(0,L.height*.5,0),r.rectArea[_]=W,_++}else if(L.isPointLight){const W=n.get(L);if(W.color.copy(L.color).multiplyScalar(L.intensity),W.distance=L.distance,W.decay=L.decay,L.castShadow){const Z=L.shadow,z=i.get(L);z.shadowBias=Z.bias,z.shadowNormalBias=Z.normalBias,z.shadowRadius=Z.radius,z.shadowMapSize=Z.mapSize,z.shadowCameraNear=Z.camera.near,z.shadowCameraFar=Z.camera.far,r.pointShadow[w]=z,r.pointShadowMap[w]=Q,r.pointShadowMatrix[w]=L.shadow.matrix,R++}r.point[w]=W,w++}else if(L.isHemisphereLight){const W=n.get(L);W.skyColor.copy(L.color).multiplyScalar(F),W.groundColor.copy(L.groundColor).multiplyScalar(F),r.hemi[S]=W,S++}}_>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Pe.LTC_FLOAT_1,r.rectAreaLTC2=Pe.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Pe.LTC_HALF_1,r.rectAreaLTC2=Pe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=g,r.ambient[1]=y,r.ambient[2]=x;const N=r.hash;(N.directionalLength!==b||N.pointLength!==w||N.spotLength!==T||N.rectAreaLength!==_||N.hemiLength!==S||N.numDirectionalShadows!==E||N.numPointShadows!==R||N.numSpotShadows!==A)&&(r.directional.length=b,r.spot.length=T,r.rectArea.length=_,r.point.length=w,r.hemi.length=S,r.directionalShadow.length=E,r.directionalShadowMap.length=E,r.pointShadow.length=R,r.pointShadowMap.length=R,r.spotShadow.length=A,r.spotShadowMap.length=A,r.directionalShadowMatrix.length=E,r.pointShadowMatrix.length=R,r.spotShadowMatrix.length=A,N.directionalLength=b,N.pointLength=w,N.spotLength=T,N.rectAreaLength=_,N.hemiLength=S,N.numDirectionalShadows=E,N.numPointShadows=R,N.numSpotShadows=A,r.version=tH++)}function h(p,g){let y=0,x=0,b=0,w=0,T=0;const _=g.matrixWorldInverse;for(let S=0,E=p.length;S<E;S++){const R=p[S];if(R.isDirectionalLight){const A=r.directional[y];A.direction.setFromMatrixPosition(R.matrixWorld),a.setFromMatrixPosition(R.target.matrixWorld),A.direction.sub(a),A.direction.transformDirection(_),y++}else if(R.isSpotLight){const A=r.spot[b];A.position.setFromMatrixPosition(R.matrixWorld),A.position.applyMatrix4(_),A.direction.setFromMatrixPosition(R.matrixWorld),a.setFromMatrixPosition(R.target.matrixWorld),A.direction.sub(a),A.direction.transformDirection(_),b++}else if(R.isRectAreaLight){const A=r.rectArea[w];A.position.setFromMatrixPosition(R.matrixWorld),A.position.applyMatrix4(_),c.identity(),l.copy(R.matrixWorld),l.premultiply(_),c.extractRotation(l),A.halfWidth.set(R.width*.5,0,0),A.halfHeight.set(0,R.height*.5,0),A.halfWidth.applyMatrix4(c),A.halfHeight.applyMatrix4(c),w++}else if(R.isPointLight){const A=r.point[x];A.position.setFromMatrixPosition(R.matrixWorld),A.position.applyMatrix4(_),x++}else if(R.isHemisphereLight){const A=r.hemi[T];A.direction.setFromMatrixPosition(R.matrixWorld),A.direction.transformDirection(_),A.direction.normalize(),T++}}}return{setup:u,setupView:h,state:r}}function zT(t,e){const n=new iH(t,e),i=[],r=[];function a(){i.length=0,r.length=0}function l(g){i.push(g)}function c(g){r.push(g)}function u(){n.setup(i)}function h(g){n.setupView(i,g)}return{init:a,state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:u,setupLightsView:h,pushLight:l,pushShadow:c}}function rH(t,e){let n=new WeakMap;function i(a,l=0){let c;return n.has(a)===!1?(c=new zT(t,e),n.set(a,[]),n.get(a).push(c)):l>=n.get(a).length?(c=new zT(t,e),n.get(a).push(c)):c=n.get(a)[l],c}function r(){n=new WeakMap}return{get:i,dispose:r}}function qo(t){ot.call(this),this.type="MeshDepthMaterial",this.depthPacking=GI,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}qo.prototype=Object.create(ot.prototype);qo.prototype.constructor=qo;qo.prototype.isMeshDepthMaterial=!0;qo.prototype.copy=function(t){return ot.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this};function Yo(t){ot.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Y,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}Yo.prototype=Object.create(ot.prototype);Yo.prototype.constructor=Yo;Yo.prototype.isMeshDistanceMaterial=!0;Yo.prototype.copy=function(t){return ot.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this};var sH=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	float mean = 0.0;
	float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );
	for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean * HALF_SAMPLE_RATE;
	squared_mean = squared_mean * HALF_SAMPLE_RATE;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,aH=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function hN(t,e,n){let i=new Um;const r=new Ae,a=new Ae,l=new Ut,c=[],u=[],h={},p={0:On,1:Om,2:Bm},g=new bi({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ae},radius:{value:4}},vertexShader:aH,fragmentShader:sH}),y=g.clone();y.defines.HORIZONTAL_PASS=1;const x=new Ot;x.setAttribute("position",new yt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new xn(x,g),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=q3,this.render=function(A,N,j){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||A.length===0)return;const O=t.getRenderTarget(),L=t.getActiveCubeFace(),B=t.getActiveMipmapLevel(),F=t.state;F.setBlending(vd),F.buffers.color.setClear(1,1,1,1),F.buffers.depth.setTest(!0),F.setScissorTest(!1);for(let J=0,Q=A.length;J<Q;J++){const W=A[J],Z=W.shadow;if(Z===void 0){console.warn("THREE.WebGLShadowMap:",W,"has no shadow.");continue}if(Z.autoUpdate===!1&&Z.needsUpdate===!1)continue;r.copy(Z.mapSize);const z=Z.getFrameExtents();if(r.multiply(z),a.copy(Z.mapSize),(r.x>n||r.y>n)&&(r.x>n&&(a.x=Math.floor(n/z.x),r.x=a.x*z.x,Z.mapSize.x=a.x),r.y>n&&(a.y=Math.floor(n/z.y),r.y=a.y*z.y,Z.mapSize.y=a.y)),Z.map===null&&!Z.isPointLightShadow&&this.type===ud){const U={minFilter:Kn,magFilter:Kn,format:Rr};Z.map=new Sd(r.x,r.y,U),Z.map.texture.name=W.name+".shadowMap",Z.mapPass=new Sd(r.x,r.y,U),Z.camera.updateProjectionMatrix()}if(Z.map===null){const U={minFilter:si,magFilter:si,format:Rr};Z.map=new Sd(r.x,r.y,U),Z.map.texture.name=W.name+".shadowMap",Z.camera.updateProjectionMatrix()}t.setRenderTarget(Z.map),t.clear();const $=Z.getViewportCount();for(let U=0;U<$;U++){const X=Z.getViewport(U);l.set(a.x*X.x,a.y*X.y,a.x*X.z,a.y*X.w),F.viewport(l),Z.updateMatrices(W,U),i=Z.getFrustum(),R(N,j,Z.camera,W,this.type)}!Z.isPointLightShadow&&this.type===ud&&T(Z,j),Z.needsUpdate=!1}w.needsUpdate=!1,t.setRenderTarget(O,L,B)};function T(A,N){const j=e.update(b);g.uniforms.shadow_pass.value=A.map.texture,g.uniforms.resolution.value=A.mapSize,g.uniforms.radius.value=A.radius,t.setRenderTarget(A.mapPass),t.clear(),t.renderBufferDirect(N,null,j,g,b,null),y.uniforms.shadow_pass.value=A.mapPass.texture,y.uniforms.resolution.value=A.mapSize,y.uniforms.radius.value=A.radius,t.setRenderTarget(A.map),t.clear(),t.renderBufferDirect(N,null,j,y,b,null)}function _(A,N,j){const O=A<<0|N<<1|j<<2;let L=c[O];return L===void 0&&(L=new qo({depthPacking:WI,morphTargets:A,skinning:N}),c[O]=L),L}function S(A,N,j){const O=A<<0|N<<1|j<<2;let L=u[O];return L===void 0&&(L=new Yo({morphTargets:A,skinning:N}),u[O]=L),L}function E(A,N,j,O,L,B,F){let J=null,Q=_,W=A.customDepthMaterial;if(O.isPointLight===!0&&(Q=S,W=A.customDistanceMaterial),W===void 0){let Z=!1;j.morphTargets===!0&&(Z=N.morphAttributes&&N.morphAttributes.position&&N.morphAttributes.position.length>0);let z=!1;A.isSkinnedMesh===!0&&(j.skinning===!0?z=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",A));const $=A.isInstancedMesh===!0;J=Q(Z,z,$)}else J=W;if(t.localClippingEnabled&&j.clipShadows===!0&&j.clippingPlanes.length!==0){const Z=J.uuid,z=j.uuid;let $=h[Z];$===void 0&&($={},h[Z]=$);let U=$[z];U===void 0&&(U=J.clone(),$[z]=U),J=U}return J.visible=j.visible,J.wireframe=j.wireframe,F===ud?J.side=j.shadowSide!==null?j.shadowSide:j.side:J.side=j.shadowSide!==null?j.shadowSide:p[j.side],J.clipShadows=j.clipShadows,J.clippingPlanes=j.clippingPlanes,J.clipIntersection=j.clipIntersection,J.wireframeLinewidth=j.wireframeLinewidth,J.linewidth=j.linewidth,O.isPointLight===!0&&J.isMeshDistanceMaterial===!0&&(J.referencePosition.setFromMatrixPosition(O.matrixWorld),J.nearDistance=L,J.farDistance=B),J}function R(A,N,j,O,L){if(A.visible===!1)return;if(A.layers.test(N.layers)&&(A.isMesh||A.isLine||A.isPoints)&&(A.castShadow||A.receiveShadow&&L===ud)&&(!A.frustumCulled||i.intersectsObject(A))){A.modelViewMatrix.multiplyMatrices(j.matrixWorldInverse,A.matrixWorld);const J=e.update(A),Q=A.material;if(Array.isArray(Q)){const W=J.groups;for(let Z=0,z=W.length;Z<z;Z++){const $=W[Z],U=Q[$.materialIndex];if(U&&U.visible){const X=E(A,J,U,O,j.near,j.far,L);t.renderBufferDirect(j,null,J,X,A,$)}}}else if(Q.visible){const W=E(A,J,Q,O,j.near,j.far,L);t.renderBufferDirect(j,null,J,W,A,null)}}const F=A.children;for(let J=0,Q=F.length;J<Q;J++)R(F[J],N,j,O,L)}}function oH(t,e,n){const i=n.isWebGL2;function r(){let K=!1;const we=new Ut;let Le=null;const ze=new Ut(0,0,0,0);return{setMask:function(Ce){Le!==Ce&&!K&&(t.colorMask(Ce,Ce,Ce,Ce),Le=Ce)},setLocked:function(Ce){K=Ce},setClear:function(Ce,Oe,qe,tt,Ue){Ue===!0&&(Ce*=tt,Oe*=tt,qe*=tt),we.set(Ce,Oe,qe,tt),ze.equals(we)===!1&&(t.clearColor(Ce,Oe,qe,tt),ze.copy(we))},reset:function(){K=!1,Le=null,ze.set(-1,0,0,0)}}}function a(){let K=!1,we=null,Le=null,ze=null;return{setTest:function(Ce){Ce?D(2929):q(2929)},setMask:function(Ce){we!==Ce&&!K&&(t.depthMask(Ce),we=Ce)},setFunc:function(Ce){if(Le!==Ce){if(Ce)switch(Ce){case CF:t.depthFunc(512);break;case NF:t.depthFunc(519);break;case RF:t.depthFunc(513);break;case $x:t.depthFunc(515);break;case LF:t.depthFunc(514);break;case kF:t.depthFunc(518);break;case jF:t.depthFunc(516);break;case DF:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);Le=Ce}},setLocked:function(Ce){K=Ce},setClear:function(Ce){ze!==Ce&&(t.clearDepth(Ce),ze=Ce)},reset:function(){K=!1,we=null,Le=null,ze=null}}}function l(){let K=!1,we=null,Le=null,ze=null,Ce=null,Oe=null,qe=null,tt=null,Ue=null;return{setTest:function(Ye){K||(Ye?D(2960):q(2960))},setMask:function(Ye){we!==Ye&&!K&&(t.stencilMask(Ye),we=Ye)},setFunc:function(Ye,kt,Bt){(Le!==Ye||ze!==kt||Ce!==Bt)&&(t.stencilFunc(Ye,kt,Bt),Le=Ye,ze=kt,Ce=Bt)},setOp:function(Ye,kt,Bt){(Oe!==Ye||qe!==kt||tt!==Bt)&&(t.stencilOp(Ye,kt,Bt),Oe=Ye,qe=kt,tt=Bt)},setLocked:function(Ye){K=Ye},setClear:function(Ye){Ue!==Ye&&(t.clearStencil(Ye),Ue=Ye)},reset:function(){K=!1,we=null,Le=null,ze=null,Ce=null,Oe=null,qe=null,tt=null,Ue=null}}}const c=new r,u=new a,h=new l;let p={},g=null,y=null,x=null,b=null,w=null,T=null,_=null,S=null,E=null,R=!1,A=null,N=null,j=null,O=null,L=null;const B=t.getParameter(35661);let F=!1,J=0;const Q=t.getParameter(7938);Q.indexOf("WebGL")!==-1?(J=parseFloat(/^WebGL (\d)/.exec(Q)[1]),F=J>=1):Q.indexOf("OpenGL ES")!==-1&&(J=parseFloat(/^OpenGL ES (\d)/.exec(Q)[1]),F=J>=2);let W=null,Z={};const z=new Ut,$=new Ut;function U(K,we,Le){const ze=new Uint8Array(4),Ce=t.createTexture();t.bindTexture(K,Ce),t.texParameteri(K,10241,9728),t.texParameteri(K,10240,9728);for(let Oe=0;Oe<Le;Oe++)t.texImage2D(we+Oe,0,6408,1,1,0,6408,5121,ze);return Ce}const X={};X[3553]=U(3553,3553,1),X[34067]=U(34067,34069,6),c.setClear(0,0,0,1),u.setClear(1),h.setClear(0),D(2929),u.setFunc($x),Fe(!1),Be(YM),D(2884),ie(vd);function D(K){p[K]!==!0&&(t.enable(K),p[K]=!0)}function q(K){p[K]!==!1&&(t.disable(K),p[K]=!1)}function ce(K){return g!==K?(t.useProgram(K),g=K,!0):!1}const me={[tc]:32774,[yF]:32778,[xF]:32779};if(i)me[JM]=32775,me[KM]=32776;else{const K=e.get("EXT_blend_minmax");K!==null&&(me[JM]=K.MIN_EXT,me[KM]=K.MAX_EXT)}const fe={[vF]:0,[bF]:1,[wF]:768,[Z3]:770,[AF]:776,[TF]:774,[SF]:772,[_F]:769,[Q3]:771,[EF]:775,[MF]:773};function ie(K,we,Le,ze,Ce,Oe,qe,tt){if(K===vd){y&&(q(3042),y=!1);return}if(y||(D(3042),y=!0),K!==gF){if(K!==x||tt!==R){if((b!==tc||_!==tc)&&(t.blendEquation(32774),b=tc,_=tc),tt)switch(K){case bd:t.blendFuncSeparate(1,771,1,771);break;case XM:t.blendFunc(1,1);break;case ZM:t.blendFuncSeparate(0,0,769,771);break;case QM:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",K);break}else switch(K){case bd:t.blendFuncSeparate(770,771,1,771);break;case XM:t.blendFunc(770,1);break;case ZM:t.blendFunc(0,769);break;case QM:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",K);break}w=null,T=null,S=null,E=null,x=K,R=tt}return}Ce=Ce||we,Oe=Oe||Le,qe=qe||ze,(we!==b||Ce!==_)&&(t.blendEquationSeparate(me[we],me[Ce]),b=we,_=Ce),(Le!==w||ze!==T||Oe!==S||qe!==E)&&(t.blendFuncSeparate(fe[Le],fe[ze],fe[Oe],fe[qe]),w=Le,T=ze,S=Oe,E=qe),x=K,R=null}function Ne(K,we){K.side===Bm?q(2884):D(2884);let Le=K.side===On;we&&(Le=!Le),Fe(Le),K.blending===bd&&K.transparent===!1?ie(vd):ie(K.blending,K.blendEquation,K.blendSrc,K.blendDst,K.blendEquationAlpha,K.blendSrcAlpha,K.blendDstAlpha,K.premultipliedAlpha),u.setFunc(K.depthFunc),u.setTest(K.depthTest),u.setMask(K.depthWrite),c.setMask(K.colorWrite);const ze=K.stencilWrite;h.setTest(ze),ze&&(h.setMask(K.stencilWriteMask),h.setFunc(K.stencilFunc,K.stencilRef,K.stencilFuncMask),h.setOp(K.stencilFail,K.stencilZFail,K.stencilZPass)),$e(K.polygonOffset,K.polygonOffsetFactor,K.polygonOffsetUnits)}function Fe(K){A!==K&&(K?t.frontFace(2304):t.frontFace(2305),A=K)}function Be(K){K!==pF?(D(2884),K!==N&&(K===YM?t.cullFace(1029):K===mF?t.cullFace(1028):t.cullFace(1032))):q(2884),N=K}function Ie(K){K!==j&&(F&&t.lineWidth(K),j=K)}function $e(K,we,Le){K?(D(32823),(O!==we||L!==Le)&&(t.polygonOffset(we,Le),O=we,L=Le)):q(32823)}function Ke(K){K?D(3089):q(3089)}function Se(K){K===void 0&&(K=33984+B-1),W!==K&&(t.activeTexture(K),W=K)}function Ee(K,we){W===null&&Se();let Le=Z[W];Le===void 0&&(Le={type:void 0,texture:void 0},Z[W]=Le),(Le.type!==K||Le.texture!==we)&&(t.bindTexture(K,we||X[K]),Le.type=K,Le.texture=we)}function Re(){const K=Z[W];K!==void 0&&K.type!==void 0&&(t.bindTexture(K.type,null),K.type=void 0,K.texture=void 0)}function De(){try{t.compressedTexImage2D.apply(t,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function ke(){try{t.texImage2D.apply(t,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function H(){try{t.texImage3D.apply(t,arguments)}catch(K){console.error("THREE.WebGLState:",K)}}function I(K){z.equals(K)===!1&&(t.scissor(K.x,K.y,K.z,K.w),z.copy(K))}function ve(K){$.equals(K)===!1&&(t.viewport(K.x,K.y,K.z,K.w),$.copy(K))}function _e(){p={},W=null,Z={},g=null,y=null,x=null,b=null,w=null,T=null,_=null,S=null,E=null,R=!1,A=null,N=null,j=null,O=null,L=null,c.reset(),u.reset(),h.reset()}return{buffers:{color:c,depth:u,stencil:h},enable:D,disable:q,useProgram:ce,setBlending:ie,setMaterial:Ne,setFlipSided:Fe,setCullFace:Be,setLineWidth:Ie,setPolygonOffset:$e,setScissorTest:Ke,activeTexture:Se,bindTexture:Ee,unbindTexture:Re,compressedTexImage2D:De,texImage2D:ke,texImage3D:H,scissor:I,viewport:ve,reset:_e}}function lH(t,e,n,i,r,a,l){const c=r.isWebGL2,u=r.maxTextures,h=r.maxCubemapSize,p=r.maxTextureSize,g=r.maxSamples,y=new WeakMap;let x,b=!1;try{b=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function w(H,I){return b?new OffscreenCanvas(H,I):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function T(H,I,ve,_e){let K=1;if((H.width>_e||H.height>_e)&&(K=_e/Math.max(H.width,H.height)),K<1||I===!0)if(typeof HTMLImageElement<"u"&&H instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&H instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&H instanceof ImageBitmap){const we=I?ft.floorPowerOfTwo:Math.floor,Le=we(K*H.width),ze=we(K*H.height);x===void 0&&(x=w(Le,ze));const Ce=ve?w(Le,ze):x;return Ce.width=Le,Ce.height=ze,Ce.getContext("2d").drawImage(H,0,0,Le,ze),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+H.width+"x"+H.height+") to ("+Le+"x"+ze+")."),Ce}else return"data"in H&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+H.width+"x"+H.height+")."),H;return H}function _(H){return ft.isPowerOfTwo(H.width)&&ft.isPowerOfTwo(H.height)}function S(H){return c?!1:H.wrapS!==ji||H.wrapT!==ji||H.minFilter!==si&&H.minFilter!==Kn}function E(H,I){return H.generateMipmaps&&I&&H.minFilter!==si&&H.minFilter!==Kn}function R(H,I,ve,_e){t.generateMipmap(H);const K=i.get(I);K.__maxMipLevel=Math.log(Math.max(ve,_e))*Math.LOG2E}function A(H,I,ve){if(c===!1)return I;if(H!==null){if(t[H]!==void 0)return t[H];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+H+"'")}let _e=I;return I===6403&&(ve===5126&&(_e=33326),ve===5131&&(_e=33325),ve===5121&&(_e=33321)),I===6407&&(ve===5126&&(_e=34837),ve===5131&&(_e=34843),ve===5121&&(_e=32849)),I===6408&&(ve===5126&&(_e=34836),ve===5131&&(_e=34842),ve===5121&&(_e=32856)),(_e===33325||_e===33326||_e===34842||_e===34836)&&e.get("EXT_color_buffer_float"),_e}function N(H){return H===si||H===nT||H===iT?9728:9729}function j(H){const I=H.target;I.removeEventListener("dispose",j),L(I),I.isVideoTexture&&y.delete(I),l.memory.textures--}function O(H){const I=H.target;I.removeEventListener("dispose",O),B(I),l.memory.textures--}function L(H){const I=i.get(H);I.__webglInit!==void 0&&(t.deleteTexture(I.__webglTexture),i.remove(H))}function B(H){const I=i.get(H),ve=i.get(H.texture);if(H){if(ve.__webglTexture!==void 0&&t.deleteTexture(ve.__webglTexture),H.depthTexture&&H.depthTexture.dispose(),H.isWebGLCubeRenderTarget)for(let _e=0;_e<6;_e++)t.deleteFramebuffer(I.__webglFramebuffer[_e]),I.__webglDepthbuffer&&t.deleteRenderbuffer(I.__webglDepthbuffer[_e]);else t.deleteFramebuffer(I.__webglFramebuffer),I.__webglDepthbuffer&&t.deleteRenderbuffer(I.__webglDepthbuffer),I.__webglMultisampledFramebuffer&&t.deleteFramebuffer(I.__webglMultisampledFramebuffer),I.__webglColorRenderbuffer&&t.deleteRenderbuffer(I.__webglColorRenderbuffer),I.__webglDepthRenderbuffer&&t.deleteRenderbuffer(I.__webglDepthRenderbuffer);i.remove(H.texture),i.remove(H)}}let F=0;function J(){F=0}function Q(){const H=F;return H>=u&&console.warn("THREE.WebGLTextures: Trying to use "+H+" texture units while this GPU supports only "+u),F+=1,H}function W(H,I){const ve=i.get(H);if(H.isVideoTexture&&Se(H),H.version>0&&ve.__version!==H.version){const _e=H.image;if(_e===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(_e.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ce(ve,H,I);return}}n.activeTexture(33984+I),n.bindTexture(3553,ve.__webglTexture)}function Z(H,I){const ve=i.get(H);if(H.version>0&&ve.__version!==H.version){ce(ve,H,I);return}n.activeTexture(33984+I),n.bindTexture(35866,ve.__webglTexture)}function z(H,I){const ve=i.get(H);if(H.version>0&&ve.__version!==H.version){ce(ve,H,I);return}n.activeTexture(33984+I),n.bindTexture(32879,ve.__webglTexture)}function $(H,I){const ve=i.get(H);if(H.version>0&&ve.__version!==H.version){me(ve,H,I);return}n.activeTexture(33984+I),n.bindTexture(34067,ve.__webglTexture)}const U={[qx]:10497,[ji]:33071,[Yx]:33648},X={[si]:9728,[nT]:9984,[iT]:9986,[Kn]:9729,[VF]:9985,[Fm]:9987};function D(H,I,ve){ve?(t.texParameteri(H,10242,U[I.wrapS]),t.texParameteri(H,10243,U[I.wrapT]),(H===32879||H===35866)&&t.texParameteri(H,32882,U[I.wrapR]),t.texParameteri(H,10240,X[I.magFilter]),t.texParameteri(H,10241,X[I.minFilter])):(t.texParameteri(H,10242,33071),t.texParameteri(H,10243,33071),(H===32879||H===35866)&&t.texParameteri(H,32882,33071),(I.wrapS!==ji||I.wrapT!==ji)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(H,10240,N(I.magFilter)),t.texParameteri(H,10241,N(I.minFilter)),I.minFilter!==si&&I.minFilter!==Kn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));const _e=e.get("EXT_texture_filter_anisotropic");if(_e){if(I.type===ja&&e.get("OES_texture_float_linear")===null||I.type===Zp&&(c||e.get("OES_texture_half_float_linear"))===null)return;(I.anisotropy>1||i.get(I).__currentAnisotropy)&&(t.texParameterf(H,_e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(I.anisotropy,r.getMaxAnisotropy())),i.get(I).__currentAnisotropy=I.anisotropy)}}function q(H,I){H.__webglInit===void 0&&(H.__webglInit=!0,I.addEventListener("dispose",j),H.__webglTexture=t.createTexture(),l.memory.textures++)}function ce(H,I,ve){let _e=3553;I.isDataTexture2DArray&&(_e=35866),I.isDataTexture3D&&(_e=32879),q(H,I),n.activeTexture(33984+ve),n.bindTexture(_e,H.__webglTexture),t.pixelStorei(37440,I.flipY),t.pixelStorei(37441,I.premultiplyAlpha),t.pixelStorei(3317,I.unpackAlignment);const K=S(I)&&_(I.image)===!1,we=T(I.image,K,!1,p),Le=_(we)||c,ze=a.convert(I.format);let Ce=a.convert(I.type),Oe=A(I.internalFormat,ze,Ce);D(_e,I,Le);let qe;const tt=I.mipmaps;if(I.isDepthTexture)Oe=6402,c?I.type===ja?Oe=36012:I.type===jp?Oe=33190:I.type===_d?Oe=35056:Oe=33189:I.type===ja&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),I.format===pc&&Oe===6402&&I.type!==Xp&&I.type!==jp&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),I.type=Xp,Ce=a.convert(I.type)),I.format===Ud&&Oe===6402&&(Oe=34041,I.type!==_d&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),I.type=_d,Ce=a.convert(I.type))),n.texImage2D(3553,0,Oe,we.width,we.height,0,ze,Ce,null);else if(I.isDataTexture)if(tt.length>0&&Le){for(let Ue=0,Ye=tt.length;Ue<Ye;Ue++)qe=tt[Ue],n.texImage2D(3553,Ue,Oe,qe.width,qe.height,0,ze,Ce,qe.data);I.generateMipmaps=!1,H.__maxMipLevel=tt.length-1}else n.texImage2D(3553,0,Oe,we.width,we.height,0,ze,Ce,we.data),H.__maxMipLevel=0;else if(I.isCompressedTexture){for(let Ue=0,Ye=tt.length;Ue<Ye;Ue++)qe=tt[Ue],I.format!==Rr&&I.format!==Uo?ze!==null?n.compressedTexImage2D(3553,Ue,Oe,qe.width,qe.height,0,qe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,Ue,Oe,qe.width,qe.height,0,ze,Ce,qe.data);H.__maxMipLevel=tt.length-1}else if(I.isDataTexture2DArray)n.texImage3D(35866,0,Oe,we.width,we.height,we.depth,0,ze,Ce,we.data),H.__maxMipLevel=0;else if(I.isDataTexture3D)n.texImage3D(32879,0,Oe,we.width,we.height,we.depth,0,ze,Ce,we.data),H.__maxMipLevel=0;else if(tt.length>0&&Le){for(let Ue=0,Ye=tt.length;Ue<Ye;Ue++)qe=tt[Ue],n.texImage2D(3553,Ue,Oe,ze,Ce,qe);I.generateMipmaps=!1,H.__maxMipLevel=tt.length-1}else n.texImage2D(3553,0,Oe,ze,Ce,we),H.__maxMipLevel=0;E(I,Le)&&R(_e,I,we.width,we.height),H.__version=I.version,I.onUpdate&&I.onUpdate(I)}function me(H,I,ve){if(I.image.length!==6)return;q(H,I),n.activeTexture(33984+ve),n.bindTexture(34067,H.__webglTexture),t.pixelStorei(37440,I.flipY),t.pixelStorei(37441,I.premultiplyAlpha),t.pixelStorei(3317,I.unpackAlignment);const _e=I&&(I.isCompressedTexture||I.image[0].isCompressedTexture),K=I.image[0]&&I.image[0].isDataTexture,we=[];for(let Ue=0;Ue<6;Ue++)!_e&&!K?we[Ue]=T(I.image[Ue],!1,!0,h):we[Ue]=K?I.image[Ue].image:I.image[Ue];const Le=we[0],ze=_(Le)||c,Ce=a.convert(I.format),Oe=a.convert(I.type),qe=A(I.internalFormat,Ce,Oe);D(34067,I,ze);let tt;if(_e){for(let Ue=0;Ue<6;Ue++){tt=we[Ue].mipmaps;for(let Ye=0;Ye<tt.length;Ye++){const kt=tt[Ye];I.format!==Rr&&I.format!==Uo?Ce!==null?n.compressedTexImage2D(34069+Ue,Ye,qe,kt.width,kt.height,0,kt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+Ue,Ye,qe,kt.width,kt.height,0,Ce,Oe,kt.data)}}H.__maxMipLevel=tt.length-1}else{tt=I.mipmaps;for(let Ue=0;Ue<6;Ue++)if(K){n.texImage2D(34069+Ue,0,qe,we[Ue].width,we[Ue].height,0,Ce,Oe,we[Ue].data);for(let Ye=0;Ye<tt.length;Ye++){const Bt=tt[Ye].image[Ue].image;n.texImage2D(34069+Ue,Ye+1,qe,Bt.width,Bt.height,0,Ce,Oe,Bt.data)}}else{n.texImage2D(34069+Ue,0,qe,Ce,Oe,we[Ue]);for(let Ye=0;Ye<tt.length;Ye++){const kt=tt[Ye];n.texImage2D(34069+Ue,Ye+1,qe,Ce,Oe,kt.image[Ue])}}H.__maxMipLevel=tt.length}E(I,ze)&&R(34067,I,Le.width,Le.height),H.__version=I.version,I.onUpdate&&I.onUpdate(I)}function fe(H,I,ve,_e){const K=a.convert(I.texture.format),we=a.convert(I.texture.type),Le=A(I.texture.internalFormat,K,we);n.texImage2D(_e,0,Le,I.width,I.height,0,K,we,null),t.bindFramebuffer(36160,H),t.framebufferTexture2D(36160,ve,_e,i.get(I.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function ie(H,I,ve){if(t.bindRenderbuffer(36161,H),I.depthBuffer&&!I.stencilBuffer){let _e=33189;if(ve){const K=I.depthTexture;K&&K.isDepthTexture&&(K.type===ja?_e=36012:K.type===jp&&(_e=33190));const we=Ke(I);t.renderbufferStorageMultisample(36161,we,_e,I.width,I.height)}else t.renderbufferStorage(36161,_e,I.width,I.height);t.framebufferRenderbuffer(36160,36096,36161,H)}else if(I.depthBuffer&&I.stencilBuffer){if(ve){const _e=Ke(I);t.renderbufferStorageMultisample(36161,_e,35056,I.width,I.height)}else t.renderbufferStorage(36161,34041,I.width,I.height);t.framebufferRenderbuffer(36160,33306,36161,H)}else{const _e=a.convert(I.texture.format),K=a.convert(I.texture.type),we=A(I.texture.internalFormat,_e,K);if(ve){const Le=Ke(I);t.renderbufferStorageMultisample(36161,Le,we,I.width,I.height)}else t.renderbufferStorage(36161,we,I.width,I.height)}t.bindRenderbuffer(36161,null)}function Ne(H,I){if(I&&I.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,H),!(I.depthTexture&&I.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(I.depthTexture).__webglTexture||I.depthTexture.image.width!==I.width||I.depthTexture.image.height!==I.height)&&(I.depthTexture.image.width=I.width,I.depthTexture.image.height=I.height,I.depthTexture.needsUpdate=!0),W(I.depthTexture,0);const _e=i.get(I.depthTexture).__webglTexture;if(I.depthTexture.format===pc)t.framebufferTexture2D(36160,36096,3553,_e,0);else if(I.depthTexture.format===Ud)t.framebufferTexture2D(36160,33306,3553,_e,0);else throw new Error("Unknown depthTexture format")}function Fe(H){const I=i.get(H),ve=H.isWebGLCubeRenderTarget===!0;if(H.depthTexture){if(ve)throw new Error("target.depthTexture not supported in Cube render targets");Ne(I.__webglFramebuffer,H)}else if(ve){I.__webglDepthbuffer=[];for(let _e=0;_e<6;_e++)t.bindFramebuffer(36160,I.__webglFramebuffer[_e]),I.__webglDepthbuffer[_e]=t.createRenderbuffer(),ie(I.__webglDepthbuffer[_e],H,!1)}else t.bindFramebuffer(36160,I.__webglFramebuffer),I.__webglDepthbuffer=t.createRenderbuffer(),ie(I.__webglDepthbuffer,H,!1);t.bindFramebuffer(36160,null)}function Be(H){const I=i.get(H),ve=i.get(H.texture);H.addEventListener("dispose",O),ve.__webglTexture=t.createTexture(),l.memory.textures++;const _e=H.isWebGLCubeRenderTarget===!0,K=H.isWebGLMultisampleRenderTarget===!0,we=_(H)||c;if(c&&H.texture.format===Uo&&(H.texture.type===ja||H.texture.type===Zp)&&(H.texture.format=Rr,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),_e){I.__webglFramebuffer=[];for(let Le=0;Le<6;Le++)I.__webglFramebuffer[Le]=t.createFramebuffer()}else if(I.__webglFramebuffer=t.createFramebuffer(),K)if(c){I.__webglMultisampledFramebuffer=t.createFramebuffer(),I.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,I.__webglColorRenderbuffer);const Le=a.convert(H.texture.format),ze=a.convert(H.texture.type),Ce=A(H.texture.internalFormat,Le,ze),Oe=Ke(H);t.renderbufferStorageMultisample(36161,Oe,Ce,H.width,H.height),t.bindFramebuffer(36160,I.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,I.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),H.depthBuffer&&(I.__webglDepthRenderbuffer=t.createRenderbuffer(),ie(I.__webglDepthRenderbuffer,H,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(_e){n.bindTexture(34067,ve.__webglTexture),D(34067,H.texture,we);for(let Le=0;Le<6;Le++)fe(I.__webglFramebuffer[Le],H,36064,34069+Le);E(H.texture,we)&&R(34067,H.texture,H.width,H.height),n.bindTexture(34067,null)}else n.bindTexture(3553,ve.__webglTexture),D(3553,H.texture,we),fe(I.__webglFramebuffer,H,36064,3553),E(H.texture,we)&&R(3553,H.texture,H.width,H.height),n.bindTexture(3553,null);H.depthBuffer&&Fe(H)}function Ie(H){const I=H.texture,ve=_(H)||c;if(E(I,ve)){const _e=H.isWebGLCubeRenderTarget?34067:3553,K=i.get(I).__webglTexture;n.bindTexture(_e,K),R(_e,I,H.width,H.height),n.bindTexture(_e,null)}}function $e(H){if(H.isWebGLMultisampleRenderTarget)if(c){const I=i.get(H);t.bindFramebuffer(36008,I.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,I.__webglFramebuffer);const ve=H.width,_e=H.height;let K=16384;H.depthBuffer&&(K|=256),H.stencilBuffer&&(K|=1024),t.blitFramebuffer(0,0,ve,_e,0,0,ve,_e,K,9728),t.bindFramebuffer(36160,I.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function Ke(H){return c&&H.isWebGLMultisampleRenderTarget?Math.min(g,H.samples):0}function Se(H){const I=l.render.frame;y.get(H)!==I&&(y.set(H,I),H.update())}let Ee=!1,Re=!1;function De(H,I){H&&H.isWebGLRenderTarget&&(Ee===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Ee=!0),H=H.texture),W(H,I)}function ke(H,I){H&&H.isWebGLCubeRenderTarget&&(Re===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Re=!0),H=H.texture),$(H,I)}this.allocateTextureUnit=Q,this.resetTextureUnits=J,this.setTexture2D=W,this.setTexture2DArray=Z,this.setTexture3D=z,this.setTextureCube=$,this.setupRenderTarget=Be,this.updateRenderTargetMipmap=Ie,this.updateMultisampleRenderTarget=$e,this.safeSetTexture2D=De,this.safeSetTextureCube=ke}function cH(t,e,n){const i=n.isWebGL2;function r(a){let l;if(a===Xb)return 5121;if(a===$F)return 32819;if(a===qF)return 32820;if(a===YF)return 33635;if(a===HF)return 5120;if(a===GF)return 5122;if(a===Xp)return 5123;if(a===WF)return 5124;if(a===jp)return 5125;if(a===ja)return 5126;if(a===Zp)return i?5131:(l=e.get("OES_texture_half_float"),l!==null?l.HALF_FLOAT_OES:null);if(a===XF)return 6406;if(a===Uo)return 6407;if(a===Rr)return 6408;if(a===ZF)return 6409;if(a===QF)return 6410;if(a===pc)return 6402;if(a===Ud)return 34041;if(a===JF)return 6403;if(a===KF)return 36244;if(a===eI)return 33319;if(a===tI)return 33320;if(a===nI)return 36248;if(a===iI)return 36249;if(a===rT||a===sT||a===aT||a===oT)if(l=e.get("WEBGL_compressed_texture_s3tc"),l!==null){if(a===rT)return l.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===sT)return l.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===aT)return l.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===oT)return l.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(a===lT||a===cT||a===uT||a===dT)if(l=e.get("WEBGL_compressed_texture_pvrtc"),l!==null){if(a===lT)return l.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===cT)return l.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===uT)return l.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===dT)return l.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(a===rI)return l=e.get("WEBGL_compressed_texture_etc1"),l!==null?l.COMPRESSED_RGB_ETC1_WEBGL:null;if((a===hT||a===fT)&&(l=e.get("WEBGL_compressed_texture_etc"),l!==null)){if(a===hT)return l.COMPRESSED_RGB8_ETC2;if(a===fT)return l.COMPRESSED_RGBA8_ETC2_EAC}if(a===sI||a===aI||a===oI||a===lI||a===cI||a===uI||a===dI||a===hI||a===fI||a===pI||a===mI||a===gI||a===yI||a===xI||a===bI||a===wI||a===_I||a===SI||a===MI||a===TI||a===EI||a===AI||a===CI||a===NI||a===RI||a===LI||a===kI||a===jI)return l=e.get("WEBGL_compressed_texture_astc"),l!==null?a:null;if(a===vI)return l=e.get("EXT_texture_compression_bptc"),l!==null?a:null;if(a===_d)return i?34042:(l=e.get("WEBGL_depth_texture"),l!==null?l.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:r}}function nv(t=[]){Bn.call(this),this.cameras=t}nv.prototype=Object.assign(Object.create(Bn.prototype),{constructor:nv,isArrayCamera:!0});function cc(){st.call(this),this.type="Group"}cc.prototype=Object.assign(Object.create(st.prototype),{constructor:cc,isGroup:!0});function Md(){this._targetRay=null,this._grip=null,this._hand=null}Object.assign(Md.prototype,{constructor:Md,getHandSpace:function(){return this._hand===null&&(this._hand=new cc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand},getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new cc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new cc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this},disconnect:function(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this},update:function(t,e,n){let i=null,r=null,a=null;const l=this._targetRay,c=this._grip,u=this._hand;if(t&&e.session.visibilityState!=="visible-blurred")if(u&&t.hand){a=!0;for(const b of t.hand.values()){const w=e.getJointPose(b,n);if(u.joints[b.jointName]===void 0){const _=new cc;_.matrixAutoUpdate=!1,_.visible=!1,u.joints[b.jointName]=_,u.add(_)}const T=u.joints[b.jointName];w!==null&&(T.matrix.fromArray(w.transform.matrix),T.matrix.decompose(T.position,T.rotation,T.scale),T.jointRadius=w.radius),T.visible=w!==null}const h=u.joints["index-finger-tip"],p=u.joints["thumb-tip"],g=h.position.distanceTo(p.position),y=.02,x=.005;u.inputState.pinching&&g>y+x?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!u.inputState.pinching&&g<=y-x&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else l!==null&&(i=e.getPose(t.targetRaySpace,n),i!==null&&(l.matrix.fromArray(i.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale))),c!==null&&t.gripSpace&&(r=e.getPose(t.gripSpace,n),r!==null&&(c.matrix.fromArray(r.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale)));return l!==null&&(l.visible=i!==null),c!==null&&(c.visible=r!==null),u!==null&&(u.visible=a!==null),this}});function fN(t,e){const n=this;let i=null,r=1,a=null,l="local-floor",c=null;const u=[],h=new Map,p=new Bn;p.layers.enable(1),p.viewport=new Ut;const g=new Bn;g.layers.enable(2),g.viewport=new Ut;const y=[p,g],x=new nv;x.layers.enable(1),x.layers.enable(2);let b=null,w=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(B){let F=u[B];return F===void 0&&(F=new Md,u[B]=F),F.getTargetRaySpace()},this.getControllerGrip=function(B){let F=u[B];return F===void 0&&(F=new Md,u[B]=F),F.getGripSpace()},this.getHand=function(B){let F=u[B];return F===void 0&&(F=new Md,u[B]=F),F.getHandSpace()};function T(B){const F=h.get(B.inputSource);F&&F.dispatchEvent({type:B.type,data:B.inputSource})}function _(){h.forEach(function(B,F){B.disconnect(F)}),h.clear(),b=null,w=null,t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),L.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(B){r=B,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(B){l=B,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a},this.getSession=function(){return i},this.setSession=async function(B){if(i=B,i!==null){i.addEventListener("select",T),i.addEventListener("selectstart",T),i.addEventListener("selectend",T),i.addEventListener("squeeze",T),i.addEventListener("squeezestart",T),i.addEventListener("squeezeend",T),i.addEventListener("end",_),i.addEventListener("inputsourceschange",S);const F=e.getContextAttributes();F.xrCompatible!==!0&&await e.makeXRCompatible();const J={antialias:F.antialias,alpha:F.alpha,depth:F.depth,stencil:F.stencil,framebufferScaleFactor:r},Q=new XRWebGLLayer(i,e,J);i.updateRenderState({baseLayer:Q}),a=await i.requestReferenceSpace(l),L.setContext(i),L.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};function S(B){const F=i.inputSources;for(let J=0;J<u.length;J++)h.set(F[J],u[J]);for(let J=0;J<B.removed.length;J++){const Q=B.removed[J],W=h.get(Q);W&&(W.dispatchEvent({type:"disconnected",data:Q}),h.delete(Q))}for(let J=0;J<B.added.length;J++){const Q=B.added[J],W=h.get(Q);W&&W.dispatchEvent({type:"connected",data:Q})}}const E=new Y,R=new Y;function A(B,F,J){E.setFromMatrixPosition(F.matrixWorld),R.setFromMatrixPosition(J.matrixWorld);const Q=E.distanceTo(R),W=F.projectionMatrix.elements,Z=J.projectionMatrix.elements,z=W[14]/(W[10]-1),$=W[14]/(W[10]+1),U=(W[9]+1)/W[5],X=(W[9]-1)/W[5],D=(W[8]-1)/W[0],q=(Z[8]+1)/Z[0],ce=z*D,me=z*q,fe=Q/(-D+q),ie=fe*-D;F.matrixWorld.decompose(B.position,B.quaternion,B.scale),B.translateX(ie),B.translateZ(fe),B.matrixWorld.compose(B.position,B.quaternion,B.scale),B.matrixWorldInverse.copy(B.matrixWorld).invert();const Ne=z+fe,Fe=$+fe,Be=ce-ie,Ie=me+(Q-ie),$e=U*$/Fe*Ne,Ke=X*$/Fe*Ne;B.projectionMatrix.makePerspective(Be,Ie,$e,Ke,Ne,Fe)}function N(B,F){F===null?B.matrixWorld.copy(B.matrix):B.matrixWorld.multiplyMatrices(F.matrixWorld,B.matrix),B.matrixWorldInverse.copy(B.matrixWorld).invert()}this.getCamera=function(B){x.near=g.near=p.near=B.near,x.far=g.far=p.far=B.far,(b!==x.near||w!==x.far)&&(i.updateRenderState({depthNear:x.near,depthFar:x.far}),b=x.near,w=x.far);const F=B.parent,J=x.cameras;N(x,F);for(let W=0;W<J.length;W++)N(J[W],F);B.matrixWorld.copy(x.matrixWorld),B.matrix.copy(x.matrix),B.matrix.decompose(B.position,B.quaternion,B.scale);const Q=B.children;for(let W=0,Z=Q.length;W<Z;W++)Q[W].updateMatrixWorld(!0);return J.length===2?A(x,p,g):x.projectionMatrix.copy(p.projectionMatrix),x};let j=null;function O(B,F){if(c=F.getViewerPose(a),c!==null){const Q=c.views,W=i.renderState.baseLayer;t.setFramebuffer(W.framebuffer);let Z=!1;Q.length!==x.cameras.length&&(x.cameras.length=0,Z=!0);for(let z=0;z<Q.length;z++){const $=Q[z],U=W.getViewport($),X=y[z];X.matrix.fromArray($.transform.matrix),X.projectionMatrix.fromArray($.projectionMatrix),X.viewport.set(U.x,U.y,U.width,U.height),z===0&&x.matrix.copy(X.matrix),Z===!0&&x.cameras.push(X)}}const J=i.inputSources;for(let Q=0;Q<u.length;Q++){const W=u[Q],Z=J[Q];W.update(Z,F,a)}j&&j(B,F)}const L=new rN;L.setAnimationLoop(O),this.setAnimationLoop=function(B){j=B},this.dispose=function(){}}Object.assign(fN.prototype,to.prototype);function uH(t){function e(_,S){_.fogColor.value.copy(S.color),S.isFog?(_.fogNear.value=S.near,_.fogFar.value=S.far):S.isFogExp2&&(_.fogDensity.value=S.density)}function n(_,S,E,R){S.isMeshBasicMaterial?i(_,S):S.isMeshLambertMaterial?(i(_,S),u(_,S)):S.isMeshToonMaterial?(i(_,S),p(_,S)):S.isMeshPhongMaterial?(i(_,S),h(_,S)):S.isMeshStandardMaterial?(i(_,S),S.isMeshPhysicalMaterial?y(_,S):g(_,S)):S.isMeshMatcapMaterial?(i(_,S),x(_,S)):S.isMeshDepthMaterial?(i(_,S),b(_,S)):S.isMeshDistanceMaterial?(i(_,S),w(_,S)):S.isMeshNormalMaterial?(i(_,S),T(_,S)):S.isLineBasicMaterial?(r(_,S),S.isLineDashedMaterial&&a(_,S)):S.isPointsMaterial?l(_,S,E,R):S.isSpriteMaterial?c(_,S):S.isShadowMaterial?(_.color.value.copy(S.color),_.opacity.value=S.opacity):S.isShaderMaterial&&(S.uniformsNeedUpdate=!1)}function i(_,S){_.opacity.value=S.opacity,S.color&&_.diffuse.value.copy(S.color),S.emissive&&_.emissive.value.copy(S.emissive).multiplyScalar(S.emissiveIntensity),S.map&&(_.map.value=S.map),S.alphaMap&&(_.alphaMap.value=S.alphaMap),S.specularMap&&(_.specularMap.value=S.specularMap);const E=t.get(S).envMap;if(E){_.envMap.value=E,_.flipEnvMap.value=E.isCubeTexture&&E._needsFlipEnvMap?-1:1,_.reflectivity.value=S.reflectivity,_.refractionRatio.value=S.refractionRatio;const N=t.get(E).__maxMipLevel;N!==void 0&&(_.maxMipLevel.value=N)}S.lightMap&&(_.lightMap.value=S.lightMap,_.lightMapIntensity.value=S.lightMapIntensity),S.aoMap&&(_.aoMap.value=S.aoMap,_.aoMapIntensity.value=S.aoMapIntensity);let R;S.map?R=S.map:S.specularMap?R=S.specularMap:S.displacementMap?R=S.displacementMap:S.normalMap?R=S.normalMap:S.bumpMap?R=S.bumpMap:S.roughnessMap?R=S.roughnessMap:S.metalnessMap?R=S.metalnessMap:S.alphaMap?R=S.alphaMap:S.emissiveMap?R=S.emissiveMap:S.clearcoatMap?R=S.clearcoatMap:S.clearcoatNormalMap?R=S.clearcoatNormalMap:S.clearcoatRoughnessMap&&(R=S.clearcoatRoughnessMap),R!==void 0&&(R.isWebGLRenderTarget&&(R=R.texture),R.matrixAutoUpdate===!0&&R.updateMatrix(),_.uvTransform.value.copy(R.matrix));let A;S.aoMap?A=S.aoMap:S.lightMap&&(A=S.lightMap),A!==void 0&&(A.isWebGLRenderTarget&&(A=A.texture),A.matrixAutoUpdate===!0&&A.updateMatrix(),_.uv2Transform.value.copy(A.matrix))}function r(_,S){_.diffuse.value.copy(S.color),_.opacity.value=S.opacity}function a(_,S){_.dashSize.value=S.dashSize,_.totalSize.value=S.dashSize+S.gapSize,_.scale.value=S.scale}function l(_,S,E,R){_.diffuse.value.copy(S.color),_.opacity.value=S.opacity,_.size.value=S.size*E,_.scale.value=R*.5,S.map&&(_.map.value=S.map),S.alphaMap&&(_.alphaMap.value=S.alphaMap);let A;S.map?A=S.map:S.alphaMap&&(A=S.alphaMap),A!==void 0&&(A.matrixAutoUpdate===!0&&A.updateMatrix(),_.uvTransform.value.copy(A.matrix))}function c(_,S){_.diffuse.value.copy(S.color),_.opacity.value=S.opacity,_.rotation.value=S.rotation,S.map&&(_.map.value=S.map),S.alphaMap&&(_.alphaMap.value=S.alphaMap);let E;S.map?E=S.map:S.alphaMap&&(E=S.alphaMap),E!==void 0&&(E.matrixAutoUpdate===!0&&E.updateMatrix(),_.uvTransform.value.copy(E.matrix))}function u(_,S){S.emissiveMap&&(_.emissiveMap.value=S.emissiveMap)}function h(_,S){_.specular.value.copy(S.specular),_.shininess.value=Math.max(S.shininess,1e-4),S.emissiveMap&&(_.emissiveMap.value=S.emissiveMap),S.bumpMap&&(_.bumpMap.value=S.bumpMap,_.bumpScale.value=S.bumpScale,S.side===On&&(_.bumpScale.value*=-1)),S.normalMap&&(_.normalMap.value=S.normalMap,_.normalScale.value.copy(S.normalScale),S.side===On&&_.normalScale.value.negate()),S.displacementMap&&(_.displacementMap.value=S.displacementMap,_.displacementScale.value=S.displacementScale,_.displacementBias.value=S.displacementBias)}function p(_,S){S.gradientMap&&(_.gradientMap.value=S.gradientMap),S.emissiveMap&&(_.emissiveMap.value=S.emissiveMap),S.bumpMap&&(_.bumpMap.value=S.bumpMap,_.bumpScale.value=S.bumpScale,S.side===On&&(_.bumpScale.value*=-1)),S.normalMap&&(_.normalMap.value=S.normalMap,_.normalScale.value.copy(S.normalScale),S.side===On&&_.normalScale.value.negate()),S.displacementMap&&(_.displacementMap.value=S.displacementMap,_.displacementScale.value=S.displacementScale,_.displacementBias.value=S.displacementBias)}function g(_,S){_.roughness.value=S.roughness,_.metalness.value=S.metalness,S.roughnessMap&&(_.roughnessMap.value=S.roughnessMap),S.metalnessMap&&(_.metalnessMap.value=S.metalnessMap),S.emissiveMap&&(_.emissiveMap.value=S.emissiveMap),S.bumpMap&&(_.bumpMap.value=S.bumpMap,_.bumpScale.value=S.bumpScale,S.side===On&&(_.bumpScale.value*=-1)),S.normalMap&&(_.normalMap.value=S.normalMap,_.normalScale.value.copy(S.normalScale),S.side===On&&_.normalScale.value.negate()),S.displacementMap&&(_.displacementMap.value=S.displacementMap,_.displacementScale.value=S.displacementScale,_.displacementBias.value=S.displacementBias),t.get(S).envMap&&(_.envMapIntensity.value=S.envMapIntensity)}function y(_,S){g(_,S),_.reflectivity.value=S.reflectivity,_.clearcoat.value=S.clearcoat,_.clearcoatRoughness.value=S.clearcoatRoughness,S.sheen&&_.sheen.value.copy(S.sheen),S.clearcoatMap&&(_.clearcoatMap.value=S.clearcoatMap),S.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=S.clearcoatRoughnessMap),S.clearcoatNormalMap&&(_.clearcoatNormalScale.value.copy(S.clearcoatNormalScale),_.clearcoatNormalMap.value=S.clearcoatNormalMap,S.side===On&&_.clearcoatNormalScale.value.negate()),_.transmission.value=S.transmission,S.transmissionMap&&(_.transmissionMap.value=S.transmissionMap)}function x(_,S){S.matcap&&(_.matcap.value=S.matcap),S.bumpMap&&(_.bumpMap.value=S.bumpMap,_.bumpScale.value=S.bumpScale,S.side===On&&(_.bumpScale.value*=-1)),S.normalMap&&(_.normalMap.value=S.normalMap,_.normalScale.value.copy(S.normalScale),S.side===On&&_.normalScale.value.negate()),S.displacementMap&&(_.displacementMap.value=S.displacementMap,_.displacementScale.value=S.displacementScale,_.displacementBias.value=S.displacementBias)}function b(_,S){S.displacementMap&&(_.displacementMap.value=S.displacementMap,_.displacementScale.value=S.displacementScale,_.displacementBias.value=S.displacementBias)}function w(_,S){S.displacementMap&&(_.displacementMap.value=S.displacementMap,_.displacementScale.value=S.displacementScale,_.displacementBias.value=S.displacementBias),_.referencePosition.value.copy(S.referencePosition),_.nearDistance.value=S.nearDistance,_.farDistance.value=S.farDistance}function T(_,S){S.bumpMap&&(_.bumpMap.value=S.bumpMap,_.bumpScale.value=S.bumpScale,S.side===On&&(_.bumpScale.value*=-1)),S.normalMap&&(_.normalMap.value=S.normalMap,_.normalScale.value.copy(S.normalScale),S.side===On&&_.normalScale.value.negate()),S.displacementMap&&(_.displacementMap.value=S.displacementMap,_.displacementScale.value=S.displacementScale,_.displacementBias.value=S.displacementBias)}return{refreshFogUniforms:e,refreshMaterialUniforms:n}}function dH(){const t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return t.style.display="block",t}function Sh(t){t=t||{};const e=t.canvas!==void 0?t.canvas:dH(),n=t.context!==void 0?t.context:null,i=t.alpha!==void 0?t.alpha:!1,r=t.depth!==void 0?t.depth:!0,a=t.stencil!==void 0?t.stencil:!0,l=t.antialias!==void 0?t.antialias:!1,c=t.premultipliedAlpha!==void 0?t.premultipliedAlpha:!0,u=t.preserveDrawingBuffer!==void 0?t.preserveDrawingBuffer:!1,h=t.powerPreference!==void 0?t.powerPreference:"default",p=t.failIfMajorPerformanceCaveat!==void 0?t.failIfMajorPerformanceCaveat:!1;let g=null,y=null;const x=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=bh,this.physicallyCorrectLights=!1,this.toneMapping=wd,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const b=this;let w=!1,T=null,_=0,S=0,E=null,R=null,A=-1,N=null;const j=new Ut,O=new Ut;let L=null,B=e.width,F=e.height,J=1,Q=null,W=null;const Z=new Ut(0,0,B,F),z=new Ut(0,0,B,F);let $=!1;const U=new Um;let X=!1,D=!1;const q=new bt,ce=new Y,me={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function fe(){return E===null?J:1}let ie=n;function Ne(V,de){for(let le=0;le<V.length;le++){const ye=V[le],je=e.getContext(ye,de);if(je!==null)return je}return null}try{const V={alpha:i,depth:r,stencil:a,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:p};if(e.addEventListener("webglcontextlost",kt,!1),e.addEventListener("webglcontextrestored",Bt,!1),ie===null){const de=["webgl2","webgl","experimental-webgl"];if(b.isWebGL1Renderer===!0&&de.shift(),ie=Ne(de,V),ie===null)throw Ne(de)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}ie.getShaderPrecisionFormat===void 0&&(ie.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(V){throw console.error("THREE.WebGLRenderer: "+V.message),V}let Fe,Be,Ie,$e,Ke,Se,Ee,Re,De,ke,H,I,ve,_e,K,we,Le,ze,Ce,Oe,qe;function tt(){Fe=new V7(ie),Be=new F7(ie,Fe,t),Fe.init(Be),Oe=new cH(ie,Fe,Be),Ie=new oH(ie,Fe,Be),Ie.scissor(O.copy(z).multiplyScalar(J).floor()),Ie.viewport(j.copy(Z).multiplyScalar(J).floor()),$e=new W7,Ke=new XV,Se=new lH(ie,Fe,Ie,Ke,Be,Oe,$e),Ee=new U7(b),Re=new fU(ie,Be),qe=new B7(ie,Fe,Re,Be),De=new H7(ie,Re,$e,qe),ke=new X7(ie,De,Re,$e),Le=new Y7(ie),K=new I7(Ke),H=new YV(b,Ee,Fe,Be,qe,K),I=new uH(Ke),ve=new JV(Ke),_e=new rH(Fe,Be),we=new O7(b,Ee,Ie,ke,c),ze=new z7(ie,Fe,$e,Be),Ce=new G7(ie,Fe,$e,Be),$e.programs=H.programs,b.capabilities=Be,b.extensions=Fe,b.properties=Ke,b.renderLists=ve,b.state=Ie,b.info=$e}tt();const Ue=new fN(b,ie);this.xr=Ue;const Ye=new hN(b,ke,Be.maxTextureSize);this.shadowMap=Ye,this.getContext=function(){return ie},this.getContextAttributes=function(){return ie.getContextAttributes()},this.forceContextLoss=function(){const V=Fe.get("WEBGL_lose_context");V&&V.loseContext()},this.forceContextRestore=function(){const V=Fe.get("WEBGL_lose_context");V&&V.restoreContext()},this.getPixelRatio=function(){return J},this.setPixelRatio=function(V){V!==void 0&&(J=V,this.setSize(B,F,!1))},this.getSize=function(V){return V===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),V=new Ae),V.set(B,F)},this.setSize=function(V,de,le){if(Ue.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}B=V,F=de,e.width=Math.floor(V*J),e.height=Math.floor(de*J),le!==!1&&(e.style.width=V+"px",e.style.height=de+"px"),this.setViewport(0,0,V,de)},this.getDrawingBufferSize=function(V){return V===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),V=new Ae),V.set(B*J,F*J).floor()},this.setDrawingBufferSize=function(V,de,le){B=V,F=de,J=le,e.width=Math.floor(V*le),e.height=Math.floor(de*le),this.setViewport(0,0,V,de)},this.getCurrentViewport=function(V){return V===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),V=new Ut),V.copy(j)},this.getViewport=function(V){return V.copy(Z)},this.setViewport=function(V,de,le,ye){V.isVector4?Z.set(V.x,V.y,V.z,V.w):Z.set(V,de,le,ye),Ie.viewport(j.copy(Z).multiplyScalar(J).floor())},this.getScissor=function(V){return V.copy(z)},this.setScissor=function(V,de,le,ye){V.isVector4?z.set(V.x,V.y,V.z,V.w):z.set(V,de,le,ye),Ie.scissor(O.copy(z).multiplyScalar(J).floor())},this.getScissorTest=function(){return $},this.setScissorTest=function(V){Ie.setScissorTest($=V)},this.setOpaqueSort=function(V){Q=V},this.setTransparentSort=function(V){W=V},this.getClearColor=function(V){return V===void 0&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),V=new Xe),V.copy(we.getClearColor())},this.setClearColor=function(){we.setClearColor.apply(we,arguments)},this.getClearAlpha=function(){return we.getClearAlpha()},this.setClearAlpha=function(){we.setClearAlpha.apply(we,arguments)},this.clear=function(V,de,le){let ye=0;(V===void 0||V)&&(ye|=16384),(de===void 0||de)&&(ye|=256),(le===void 0||le)&&(ye|=1024),ie.clear(ye)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",kt,!1),e.removeEventListener("webglcontextrestored",Bt,!1),ve.dispose(),_e.dispose(),Ke.dispose(),Ee.dispose(),ke.dispose(),qe.dispose(),Ue.dispose(),Si.stop()};function kt(V){V.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function Bt(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1,tt()}function _i(V){const de=V.target;de.removeEventListener("dispose",_i),bn(de)}function bn(V){Js(V),Ke.remove(V)}function Js(V){const de=Ke.get(V).program;de!==void 0&&H.releaseProgram(de)}function ui(V,de){V.render(function(le){b.renderBufferImmediate(le,de)})}this.renderBufferImmediate=function(V,de){qe.initAttributes();const le=Ke.get(V);V.hasPositions&&!le.position&&(le.position=ie.createBuffer()),V.hasNormals&&!le.normal&&(le.normal=ie.createBuffer()),V.hasUvs&&!le.uv&&(le.uv=ie.createBuffer()),V.hasColors&&!le.color&&(le.color=ie.createBuffer());const ye=de.getAttributes();V.hasPositions&&(ie.bindBuffer(34962,le.position),ie.bufferData(34962,V.positionArray,35048),qe.enableAttribute(ye.position),ie.vertexAttribPointer(ye.position,3,5126,!1,0,0)),V.hasNormals&&(ie.bindBuffer(34962,le.normal),ie.bufferData(34962,V.normalArray,35048),qe.enableAttribute(ye.normal),ie.vertexAttribPointer(ye.normal,3,5126,!1,0,0)),V.hasUvs&&(ie.bindBuffer(34962,le.uv),ie.bufferData(34962,V.uvArray,35048),qe.enableAttribute(ye.uv),ie.vertexAttribPointer(ye.uv,2,5126,!1,0,0)),V.hasColors&&(ie.bindBuffer(34962,le.color),ie.bufferData(34962,V.colorArray,35048),qe.enableAttribute(ye.color),ie.vertexAttribPointer(ye.color,3,5126,!1,0,0)),qe.disableUnusedAttributes(),ie.drawArrays(4,0,V.count),V.count=0},this.renderBufferDirect=function(V,de,le,ye,je,dt){de===null&&(de=me);const lt=je.isMesh&&je.matrixWorld.determinant()<0,pt=Fn(V,de,ye,je);Ie.setMaterial(ye,lt);let ct=le.index;const Zt=le.attributes.position;if(ct===null){if(Zt===void 0||Zt.count===0)return}else if(ct.count===0)return;let ne=1;ye.wireframe===!0&&(ct=De.getWireframeAttribute(le),ne=2),(ye.morphTargets||ye.morphNormals)&&Le.update(je,le,ye,pt),qe.setup(je,ye,pt,le,ct);let oe,Me=ze;ct!==null&&(oe=Re.get(ct),Me=Ce,Me.setIndex(oe));const Te=ct!==null?ct.count:Zt.count,Ve=le.drawRange.start*ne,zt=le.drawRange.count*ne,mt=dt!==null?dt.start*ne:0,ln=dt!==null?dt.count*ne:1/0,Gt=Math.max(Ve,mt),Wi=Math.min(Te,Ve+zt,mt+ln)-1,di=Math.max(0,Wi-Gt+1);if(di!==0){if(je.isMesh)ye.wireframe===!0?(Ie.setLineWidth(ye.wireframeLinewidth*fe()),Me.setMode(1)):Me.setMode(4);else if(je.isLine){let $i=ye.linewidth;$i===void 0&&($i=1),Ie.setLineWidth($i*fe()),je.isLineSegments?Me.setMode(1):je.isLineLoop?Me.setMode(2):Me.setMode(3)}else je.isPoints?Me.setMode(0):je.isSprite&&Me.setMode(4);if(je.isInstancedMesh)Me.renderInstances(Gt,di,je.count);else if(le.isInstancedBufferGeometry){const $i=Math.min(le.instanceCount,le._maxInstanceCount);Me.renderInstances(Gt,di,$i)}else Me.render(Gt,di)}},this.compile=function(V,de){y=_e.get(V),y.init(),V.traverseVisible(function(ye){ye.isLight&&ye.layers.test(de.layers)&&(y.pushLight(ye),ye.castShadow&&y.pushShadow(ye))}),y.setupLights();const le=new WeakMap;V.traverse(function(ye){const je=ye.material;if(je)if(Array.isArray(je))for(let dt=0;dt<je.length;dt++){const lt=je[dt];le.has(lt)===!1&&(at(lt,V,ye),le.set(lt))}else le.has(je)===!1&&(at(je,V,ye),le.set(je))})};let pn=null;function Ks(V){Ue.isPresenting||pn&&pn(V)}const Si=new rN;Si.setAnimationLoop(Ks),typeof window<"u"&&Si.setContext(window),this.setAnimationLoop=function(V){pn=V,Ue.setAnimationLoop(V),V===null?Si.stop():Si.start()},this.render=function(V,de){let le,ye;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),le=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),ye=arguments[3]),de!==void 0&&de.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;qe.resetDefaultState(),A=-1,N=null,V.autoUpdate===!0&&V.updateMatrixWorld(),de.parent===null&&de.updateMatrixWorld(),Ue.enabled===!0&&Ue.isPresenting===!0&&(de=Ue.getCamera(de)),V.isScene===!0&&V.onBeforeRender(b,V,de,le||E),y=_e.get(V,x.length),y.init(),x.push(y),q.multiplyMatrices(de.projectionMatrix,de.matrixWorldInverse),U.setFromProjectionMatrix(q),D=this.localClippingEnabled,X=K.init(this.clippingPlanes,D,de),g=ve.get(V,de),g.init(),cs(V,de,0,b.sortObjects),g.finish(),b.sortObjects===!0&&g.sort(Q,W),X===!0&&K.beginShadows();const je=y.state.shadowsArray;Ye.render(je,V,de),y.setupLights(),y.setupLightsView(de),X===!0&&K.endShadows(),this.info.autoReset===!0&&this.info.reset(),le!==void 0&&this.setRenderTarget(le),we.render(g,V,de,ye);const dt=g.opaque,lt=g.transparent;dt.length>0&&ge(dt,V,de),lt.length>0&&ge(lt,V,de),V.isScene===!0&&V.onAfterRender(b,V,de),E!==null&&(Se.updateRenderTargetMipmap(E),Se.updateMultisampleRenderTarget(E)),Ie.buffers.depth.setTest(!0),Ie.buffers.depth.setMask(!0),Ie.buffers.color.setMask(!0),Ie.setPolygonOffset(!1),x.pop(),x.length>0?y=x[x.length-1]:y=null,g=null};function cs(V,de,le,ye){if(V.visible===!1)return;if(V.layers.test(de.layers)){if(V.isGroup)le=V.renderOrder;else if(V.isLOD)V.autoUpdate===!0&&V.update(de);else if(V.isLight)y.pushLight(V),V.castShadow&&y.pushShadow(V);else if(V.isSprite){if(!V.frustumCulled||U.intersectsSprite(V)){ye&&ce.setFromMatrixPosition(V.matrixWorld).applyMatrix4(q);const lt=ke.update(V),pt=V.material;pt.visible&&g.push(V,lt,pt,le,ce.z,null)}}else if(V.isImmediateRenderObject)ye&&ce.setFromMatrixPosition(V.matrixWorld).applyMatrix4(q),g.push(V,null,V.material,le,ce.z,null);else if((V.isMesh||V.isLine||V.isPoints)&&(V.isSkinnedMesh&&V.skeleton.frame!==$e.render.frame&&(V.skeleton.update(),V.skeleton.frame=$e.render.frame),!V.frustumCulled||U.intersectsObject(V))){ye&&ce.setFromMatrixPosition(V.matrixWorld).applyMatrix4(q);const lt=ke.update(V),pt=V.material;if(Array.isArray(pt)){const ct=lt.groups;for(let Zt=0,ne=ct.length;Zt<ne;Zt++){const oe=ct[Zt],Me=pt[oe.materialIndex];Me&&Me.visible&&g.push(V,lt,Me,le,ce.z,oe)}}else pt.visible&&g.push(V,lt,pt,le,ce.z,null)}}const dt=V.children;for(let lt=0,pt=dt.length;lt<pt;lt++)cs(dt[lt],de,le,ye)}function ge(V,de,le){const ye=de.isScene===!0?de.overrideMaterial:null;for(let je=0,dt=V.length;je<dt;je++){const lt=V[je],pt=lt.object,ct=lt.geometry,Zt=ye===null?lt.material:ye,ne=lt.group;if(le.isArrayCamera){const oe=le.cameras;for(let Me=0,Te=oe.length;Me<Te;Me++){const Ve=oe[Me];pt.layers.test(Ve.layers)&&(Ie.viewport(j.copy(Ve.viewport)),y.setupLightsView(Ve),Qe(pt,de,Ve,ct,Zt,ne))}}else Qe(pt,de,le,ct,Zt,ne)}}function Qe(V,de,le,ye,je,dt){if(V.onBeforeRender(b,de,le,ye,je,dt),V.modelViewMatrix.multiplyMatrices(le.matrixWorldInverse,V.matrixWorld),V.normalMatrix.getNormalMatrix(V.modelViewMatrix),V.isImmediateRenderObject){const lt=Fn(le,de,je,V);Ie.setMaterial(je),qe.reset(),ui(V,lt)}else b.renderBufferDirect(le,de,ye,je,V,dt);V.onAfterRender(b,de,le,ye,je,dt)}function at(V,de,le){de.isScene!==!0&&(de=me);const ye=Ke.get(V),je=y.state.lights,dt=y.state.shadowsArray,lt=je.state.version,pt=H.getParameters(V,je.state,dt,de,le),ct=H.getProgramCacheKey(pt);let Zt=ye.program,ne=!0;if(ye.environment=V.isMeshStandardMaterial?de.environment:null,ye.fog=de.fog,ye.envMap=Ee.get(V.envMap||ye.environment),Zt===void 0)V.addEventListener("dispose",_i);else if(Zt.cacheKey!==ct)Js(V);else if(ye.lightsStateVersion!==lt)ne=!1;else{if(pt.shaderID!==void 0)return;ne=!1}ne&&(pt.uniforms=H.getUniforms(V),V.onBeforeCompile(pt,b),Zt=H.acquireProgram(pt,ct),ye.program=Zt,ye.uniforms=pt.uniforms,ye.outputEncoding=pt.outputEncoding);const oe=ye.uniforms;(!V.isShaderMaterial&&!V.isRawShaderMaterial||V.clipping===!0)&&(ye.numClippingPlanes=K.numPlanes,ye.numIntersection=K.numIntersection,oe.clippingPlanes=K.uniform),ye.needsLights=ea(V),ye.lightsStateVersion=lt,ye.needsLights&&(oe.ambientLightColor.value=je.state.ambient,oe.lightProbe.value=je.state.probe,oe.directionalLights.value=je.state.directional,oe.directionalLightShadows.value=je.state.directionalShadow,oe.spotLights.value=je.state.spot,oe.spotLightShadows.value=je.state.spotShadow,oe.rectAreaLights.value=je.state.rectArea,oe.ltc_1.value=je.state.rectAreaLTC1,oe.ltc_2.value=je.state.rectAreaLTC2,oe.pointLights.value=je.state.point,oe.pointLightShadows.value=je.state.pointShadow,oe.hemisphereLights.value=je.state.hemi,oe.directionalShadowMap.value=je.state.directionalShadowMap,oe.directionalShadowMatrix.value=je.state.directionalShadowMatrix,oe.spotShadowMap.value=je.state.spotShadowMap,oe.spotShadowMatrix.value=je.state.spotShadowMatrix,oe.pointShadowMap.value=je.state.pointShadowMap,oe.pointShadowMatrix.value=je.state.pointShadowMatrix);const Me=ye.program.getUniforms(),Te=za.seqWithValue(Me.seq,oe);ye.uniformsList=Te}function Fn(V,de,le,ye){de.isScene!==!0&&(de=me),Se.resetTextureUnits();const je=de.fog,dt=le.isMeshStandardMaterial?de.environment:null,lt=E===null?b.outputEncoding:E.texture.encoding,pt=Ee.get(le.envMap||dt),ct=Ke.get(le),Zt=y.state.lights;if(X===!0&&(D===!0||V!==N)){const mt=V===N&&le.id===A;K.setState(le,V,mt)}le.version===ct.__version?(le.fog&&ct.fog!==je||ct.environment!==dt||ct.needsLights&&ct.lightsStateVersion!==Zt.state.version||ct.numClippingPlanes!==void 0&&(ct.numClippingPlanes!==K.numPlanes||ct.numIntersection!==K.numIntersection)||ct.outputEncoding!==lt||ct.envMap!==pt)&&at(le,de,ye):(at(le,de,ye),ct.__version=le.version);let ne=!1,oe=!1,Me=!1;const Te=ct.program,Ve=Te.getUniforms(),zt=ct.uniforms;if(Ie.useProgram(Te.program)&&(ne=!0,oe=!0,Me=!0),le.id!==A&&(A=le.id,oe=!0),ne||N!==V){if(Ve.setValue(ie,"projectionMatrix",V.projectionMatrix),Be.logarithmicDepthBuffer&&Ve.setValue(ie,"logDepthBufFC",2/(Math.log(V.far+1)/Math.LN2)),N!==V&&(N=V,oe=!0,Me=!0),le.isShaderMaterial||le.isMeshPhongMaterial||le.isMeshToonMaterial||le.isMeshStandardMaterial||le.envMap){const mt=Ve.map.cameraPosition;mt!==void 0&&mt.setValue(ie,ce.setFromMatrixPosition(V.matrixWorld))}(le.isMeshPhongMaterial||le.isMeshToonMaterial||le.isMeshLambertMaterial||le.isMeshBasicMaterial||le.isMeshStandardMaterial||le.isShaderMaterial)&&Ve.setValue(ie,"isOrthographic",V.isOrthographicCamera===!0),(le.isMeshPhongMaterial||le.isMeshToonMaterial||le.isMeshLambertMaterial||le.isMeshBasicMaterial||le.isMeshStandardMaterial||le.isShaderMaterial||le.isShadowMaterial||le.skinning)&&Ve.setValue(ie,"viewMatrix",V.matrixWorldInverse)}if(le.skinning){Ve.setOptional(ie,ye,"bindMatrix"),Ve.setOptional(ie,ye,"bindMatrixInverse");const mt=ye.skeleton;if(mt){const ln=mt.bones;if(Be.floatVertexTextures){if(mt.boneTexture===null){let Gt=Math.sqrt(ln.length*4);Gt=ft.ceilPowerOfTwo(Gt),Gt=Math.max(Gt,4);const Wi=new Float32Array(Gt*Gt*4);Wi.set(mt.boneMatrices);const di=new Mc(Wi,Gt,Gt,Rr,ja);mt.boneMatrices=Wi,mt.boneTexture=di,mt.boneTextureSize=Gt}Ve.setValue(ie,"boneTexture",mt.boneTexture,Se),Ve.setValue(ie,"boneTextureSize",mt.boneTextureSize)}else Ve.setOptional(ie,mt,"boneMatrices")}}return(oe||ct.receiveShadow!==ye.receiveShadow)&&(ct.receiveShadow=ye.receiveShadow,Ve.setValue(ie,"receiveShadow",ye.receiveShadow)),oe&&(Ve.setValue(ie,"toneMappingExposure",b.toneMappingExposure),ct.needsLights&&Gi(zt,Me),je&&le.fog&&I.refreshFogUniforms(zt,je),I.refreshMaterialUniforms(zt,le,J,F),za.upload(ie,ct.uniformsList,zt,Se)),le.isShaderMaterial&&le.uniformsNeedUpdate===!0&&(za.upload(ie,ct.uniformsList,zt,Se),le.uniformsNeedUpdate=!1),le.isSpriteMaterial&&Ve.setValue(ie,"center",ye.center),Ve.setValue(ie,"modelViewMatrix",ye.modelViewMatrix),Ve.setValue(ie,"normalMatrix",ye.normalMatrix),Ve.setValue(ie,"modelMatrix",ye.matrixWorld),Te}function Gi(V,de){V.ambientLightColor.needsUpdate=de,V.lightProbe.needsUpdate=de,V.directionalLights.needsUpdate=de,V.directionalLightShadows.needsUpdate=de,V.pointLights.needsUpdate=de,V.pointLightShadows.needsUpdate=de,V.spotLights.needsUpdate=de,V.spotLightShadows.needsUpdate=de,V.rectAreaLights.needsUpdate=de,V.hemisphereLights.needsUpdate=de}function ea(V){return V.isMeshLambertMaterial||V.isMeshToonMaterial||V.isMeshPhongMaterial||V.isMeshStandardMaterial||V.isShadowMaterial||V.isShaderMaterial&&V.lights===!0}this.setFramebuffer=function(V){T!==V&&E===null&&ie.bindFramebuffer(36160,V),T=V},this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return S},this.getRenderList=function(){return g},this.setRenderList=function(V){g=V},this.getRenderTarget=function(){return E},this.setRenderTarget=function(V,de=0,le=0){E=V,_=de,S=le,V&&Ke.get(V).__webglFramebuffer===void 0&&Se.setupRenderTarget(V);let ye=T,je=!1;if(V){const dt=Ke.get(V).__webglFramebuffer;V.isWebGLCubeRenderTarget?(ye=dt[de],je=!0):V.isWebGLMultisampleRenderTarget?ye=Ke.get(V).__webglMultisampledFramebuffer:ye=dt,j.copy(V.viewport),O.copy(V.scissor),L=V.scissorTest}else j.copy(Z).multiplyScalar(J).floor(),O.copy(z).multiplyScalar(J).floor(),L=$;if(R!==ye&&(ie.bindFramebuffer(36160,ye),R=ye),Ie.viewport(j),Ie.scissor(O),Ie.setScissorTest(L),je){const dt=Ke.get(V.texture);ie.framebufferTexture2D(36160,36064,34069+de,dt.__webglTexture,le)}},this.readRenderTargetPixels=function(V,de,le,ye,je,dt,lt){if(!(V&&V.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let pt=Ke.get(V).__webglFramebuffer;if(V.isWebGLCubeRenderTarget&&lt!==void 0&&(pt=pt[lt]),pt){let ct=!1;pt!==R&&(ie.bindFramebuffer(36160,pt),ct=!0);try{const Zt=V.texture,ne=Zt.format,oe=Zt.type;if(ne!==Rr&&Oe.convert(ne)!==ie.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Me=oe===Zp&&(Fe.has("EXT_color_buffer_half_float")||Be.isWebGL2&&Fe.has("EXT_color_buffer_float"));if(oe!==Xb&&Oe.convert(oe)!==ie.getParameter(35738)&&!(oe===ja&&(Be.isWebGL2||Fe.has("OES_texture_float")||Fe.has("WEBGL_color_buffer_float")))&&!Me){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ie.checkFramebufferStatus(36160)===36053?de>=0&&de<=V.width-ye&&le>=0&&le<=V.height-je&&ie.readPixels(de,le,ye,je,Oe.convert(ne),Oe.convert(oe),dt):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{ct&&ie.bindFramebuffer(36160,R)}}},this.copyFramebufferToTexture=function(V,de,le=0){const ye=Math.pow(2,-le),je=Math.floor(de.image.width*ye),dt=Math.floor(de.image.height*ye),lt=Oe.convert(de.format);Se.setTexture2D(de,0),ie.copyTexImage2D(3553,le,lt,V.x,V.y,je,dt,0),Ie.unbindTexture()},this.copyTextureToTexture=function(V,de,le,ye=0){const je=de.image.width,dt=de.image.height,lt=Oe.convert(le.format),pt=Oe.convert(le.type);Se.setTexture2D(le,0),ie.pixelStorei(37440,le.flipY),ie.pixelStorei(37441,le.premultiplyAlpha),ie.pixelStorei(3317,le.unpackAlignment),de.isDataTexture?ie.texSubImage2D(3553,ye,V.x,V.y,je,dt,lt,pt,de.image.data):de.isCompressedTexture?ie.compressedTexSubImage2D(3553,ye,V.x,V.y,de.mipmaps[0].width,de.mipmaps[0].height,lt,de.mipmaps[0].data):ie.texSubImage2D(3553,ye,V.x,V.y,lt,pt,de.image),ye===0&&le.generateMipmaps&&ie.generateMipmap(3553),Ie.unbindTexture()},this.initTexture=function(V){Se.setTexture2D(V,0),Ie.unbindTexture()},this.resetState=function(){Ie.reset(),qe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function FT(t){Sh.call(this,t)}FT.prototype=Object.assign(Object.create(Sh.prototype),{constructor:FT,isWebGL1Renderer:!0});class pN extends st{constructor(){super(),Object.defineProperty(this,"isScene",{value:!0}),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.background!==null&&(n.object.background=this.background.toJSON(e)),this.environment!==null&&(n.object.environment=this.environment.toJSON(e)),this.fog!==null&&(n.object.fog=this.fog.toJSON()),n}}function dr(t,e){this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=Im,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ft.generateUUID()}Object.defineProperty(dr.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}});Object.assign(dr.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(let i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this},set:function(t,e=0){return this.array.set(t,e),this},clone:function(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ft.generateUUID()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new dr(e,this.stride);return n.setUsage(this.usage),n},onUpload:function(t){return this.onUploadCallback=t,this},toJSON:function(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ft.generateUUID()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const Ao=new Y;function Xo(t,e,n,i){this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=i===!0}Object.defineProperties(Xo.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(t){this.data.needsUpdate=t}}});Object.assign(Xo.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(let e=0,n=this.data.count;e<n;e++)Ao.x=this.getX(e),Ao.y=this.getY(e),Ao.z=this.getZ(e),Ao.applyMatrix4(t),this.setXYZ(e,Ao.x,Ao.y,Ao.z);return this},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this},clone:function(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[i+r])}return new yt(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Xo(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[i+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}});function Zo(t){ot.call(this),this.type="SpriteMaterial",this.color=new Xe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}Zo.prototype=Object.create(ot.prototype);Zo.prototype.constructor=Zo;Zo.prototype.isSpriteMaterial=!0;Zo.prototype.copy=function(t){return ot.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};let Xl;const ed=new Y,Zl=new Y,Ql=new Y,Jl=new Ae,td=new Ae,mN=new bt,sp=new Y,nd=new Y,ap=new Y,IT=new Ae,$y=new Ae,UT=new Ae;function VT(t){if(st.call(this),this.type="Sprite",Xl===void 0){Xl=new Ot;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new dr(e,5);Xl.setIndex([0,1,2,0,2,3]),Xl.setAttribute("position",new Xo(n,3,0,!1)),Xl.setAttribute("uv",new Xo(n,2,3,!1))}this.geometry=Xl,this.material=t!==void 0?t:new Zo,this.center=new Ae(.5,.5)}VT.prototype=Object.assign(Object.create(st.prototype),{constructor:VT,isSprite:!0,raycast:function(t,e){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Zl.setFromMatrixScale(this.matrixWorld),mN.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Ql.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Zl.multiplyScalar(-Ql.z);const n=this.material.rotation;let i,r;n!==0&&(r=Math.cos(n),i=Math.sin(n));const a=this.center;op(sp.set(-.5,-.5,0),Ql,a,Zl,i,r),op(nd.set(.5,-.5,0),Ql,a,Zl,i,r),op(ap.set(.5,.5,0),Ql,a,Zl,i,r),IT.set(0,0),$y.set(1,0),UT.set(1,1);let l=t.ray.intersectTriangle(sp,nd,ap,!1,ed);if(l===null&&(op(nd.set(-.5,.5,0),Ql,a,Zl,i,r),$y.set(0,1),l=t.ray.intersectTriangle(sp,ap,nd,!1,ed),l===null))return;const c=t.ray.origin.distanceTo(ed);c<t.near||c>t.far||e.push({distance:c,point:ed.clone(),uv:ai.getUV(ed,sp,nd,ap,IT,$y,UT,new Ae),face:null,object:this})},copy:function(t){return st.prototype.copy.call(this,t),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}});function op(t,e,n,i,r,a){Jl.subVectors(t,n).addScalar(.5).multiply(i),r!==void 0?(td.x=a*Jl.x-r*Jl.y,td.y=r*Jl.x+a*Jl.y):td.copy(Jl),t.copy(e),t.x+=td.x,t.y+=td.y,t.applyMatrix4(mN)}const lp=new Y,HT=new Y;function iv(){st.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}iv.prototype=Object.assign(Object.create(st.prototype),{constructor:iv,isLOD:!0,copy:function(t){st.prototype.copy.call(this,t,!1);const e=t.levels;for(let n=0,i=e.length;n<i;n++){const r=e[n];this.addLevel(r.object.clone(),r.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t,e=0){e=Math.abs(e);const n=this.levels;let i;for(i=0;i<n.length&&!(e<n[i].distance);i++);return n.splice(i,0,{distance:e,object:t}),this.add(t),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(t){const e=this.levels;if(e.length>0){let n,i;for(n=1,i=e.length;n<i&&!(t<e[n].distance);n++);return e[n-1].object}return null},raycast:function(t,e){if(this.levels.length>0){lp.setFromMatrixPosition(this.matrixWorld);const i=t.ray.origin.distanceTo(lp);this.getObjectForDistance(i).raycast(t,e)}},update:function(t){const e=this.levels;if(e.length>1){lp.setFromMatrixPosition(t.matrixWorld),HT.setFromMatrixPosition(this.matrixWorld);const n=lp.distanceTo(HT)/t.zoom;e[0].object.visible=!0;let i,r;for(i=1,r=e.length;i<r&&n>=e[i].distance;i++)e[i-1].object.visible=!1,e[i].object.visible=!0;for(this._currentLevel=i-1;i<r;i++)e[i].object.visible=!1}},toJSON:function(t){const e=st.prototype.toJSON.call(this,t);this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];const n=this.levels;for(let i=0,r=n.length;i<r;i++){const a=n[i];e.object.levels.push({object:a.object.uuid,distance:a.distance})}return e}});const GT=new Y,WT=new Ut,$T=new Ut,hH=new Y,qT=new bt;function rv(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),xn.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new bt,this.bindMatrixInverse=new bt}rv.prototype=Object.assign(Object.create(xn.prototype),{constructor:rv,isSkinnedMesh:!0,copy:function(t){return xn.prototype.copy.call(this,t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this},bind:function(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const t=new Ut,e=this.geometry.attributes.skinWeight;for(let n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);const r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){xn.prototype.updateMatrixWorld.call(this,t),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(t,e){const n=this.skeleton,i=this.geometry;WT.fromBufferAttribute(i.attributes.skinIndex,t),$T.fromBufferAttribute(i.attributes.skinWeight,t),GT.fromBufferAttribute(i.attributes.position,t).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let r=0;r<4;r++){const a=$T.getComponent(r);if(a!==0){const l=WT.getComponent(r);qT.multiplyMatrices(n.bones[l].matrixWorld,n.boneInverses[l]),e.addScaledVector(hH.copy(GT).applyMatrix4(qT),a)}}return e.applyMatrix4(this.bindMatrixInverse)}});function sv(){st.call(this),this.type="Bone"}sv.prototype=Object.assign(Object.create(st.prototype),{constructor:sv,isBone:!0});const YT=new bt,fH=new bt;function av(t=[],e=[]){this.uuid=ft.generateUUID(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}Object.assign(av.prototype,{init:function(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new bt)}},calculateInverses:function(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const n=new bt;this.bones[t]&&n.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(n)}},pose:function(){for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&n.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}},update:function(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let r=0,a=t.length;r<a;r++){const l=t[r]?t[r].matrixWorld:fH;YT.multiplyMatrices(l,e[r]),YT.toArray(n,r*16)}i!==null&&(i.needsUpdate=!0)},clone:function(){return new av(this.bones,this.boneInverses)},getBoneByName:function(t){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];if(i.name===t)return i}},dispose:function(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)},fromJSON:function(t,e){this.uuid=t.uuid;for(let n=0,i=t.bones.length;n<i;n++){const r=t.bones[n];let a=e[r];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),a=new sv),this.bones.push(a),this.boneInverses.push(new bt().fromArray(t.boneInverses[n]))}return this.init(),this},toJSON:function(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let i=0,r=e.length;i<r;i++){const a=e[i];t.bones.push(a.uuid);const l=n[i];t.boneInverses.push(l.toArray())}return t}});const XT=new bt,ZT=new bt,cp=[],id=new xn;function QT(t,e,n){xn.call(this,t,e),this.instanceMatrix=new yt(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}QT.prototype=Object.assign(Object.create(xn.prototype),{constructor:QT,isInstancedMesh:!0,copy:function(t){return xn.prototype.copy.call(this,t),this.instanceMatrix.copy(t.instanceMatrix),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this},getColorAt:function(t,e){e.fromArray(this.instanceColor.array,t*3)},getMatrixAt:function(t,e){e.fromArray(this.instanceMatrix.array,t*16)},raycast:function(t,e){const n=this.matrixWorld,i=this.count;if(id.geometry=this.geometry,id.material=this.material,id.material!==void 0)for(let r=0;r<i;r++){this.getMatrixAt(r,XT),ZT.multiplyMatrices(n,XT),id.matrixWorld=ZT,id.raycast(t,cp);for(let a=0,l=cp.length;a<l;a++){const c=cp[a];c.instanceId=r,c.object=this,e.push(c)}cp.length=0}},setColorAt:function(t,e){this.instanceColor===null&&(this.instanceColor=new yt(new Float32Array(this.count*3),3)),e.toArray(this.instanceColor.array,t*3)},setMatrixAt:function(t,e){e.toArray(this.instanceMatrix.array,t*16)},updateMorphTargets:function(){},dispose:function(){this.dispatchEvent({type:"dispose"})}});function gr(t){ot.call(this),this.type="LineBasicMaterial",this.color=new Xe(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(t)}gr.prototype=Object.create(ot.prototype);gr.prototype.constructor=gr;gr.prototype.isLineBasicMaterial=!0;gr.prototype.copy=function(t){return ot.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.morphTargets=t.morphTargets,this};const JT=new Y,KT=new Y,eE=new bt,qy=new wh,up=new tl;function Tc(t=new Ot,e=new gr){st.call(this),this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}Tc.prototype=Object.assign(Object.create(st.prototype),{constructor:Tc,isLine:!0,copy:function(t){return st.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},computeLineDistances:function(){const t=this.geometry;if(t.isBufferGeometry)if(t.index===null){const e=t.attributes.position,n=[0];for(let i=1,r=e.count;i<r;i++)JT.fromBufferAttribute(e,i-1),KT.fromBufferAttribute(e,i),n[i]=n[i-1],n[i]+=JT.distanceTo(KT);t.setAttribute("lineDistance",new Vt(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this},raycast:function(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Line.threshold;if(n.boundingSphere===null&&n.computeBoundingSphere(),up.copy(n.boundingSphere),up.applyMatrix4(i),up.radius+=r,t.ray.intersectsSphere(up)===!1)return;eE.copy(i).invert(),qy.copy(t.ray).applyMatrix4(eE);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new Y,u=new Y,h=new Y,p=new Y,g=this.isLineSegments?2:1;if(n.isBufferGeometry){const y=n.index,b=n.attributes.position;if(y!==null){const w=y.array;for(let T=0,_=w.length-1;T<_;T+=g){const S=w[T],E=w[T+1];if(c.fromBufferAttribute(b,S),u.fromBufferAttribute(b,E),qy.distanceSqToSegment(c,u,p,h)>l)continue;p.applyMatrix4(this.matrixWorld);const A=t.ray.origin.distanceTo(p);A<t.near||A>t.far||e.push({distance:A,point:h.clone().applyMatrix4(this.matrixWorld),index:T,face:null,faceIndex:null,object:this})}}else for(let w=0,T=b.count-1;w<T;w+=g){if(c.fromBufferAttribute(b,w),u.fromBufferAttribute(b,w+1),qy.distanceSqToSegment(c,u,p,h)>l)continue;p.applyMatrix4(this.matrixWorld);const S=t.ray.origin.distanceTo(p);S<t.near||S>t.far||e.push({distance:S,point:h.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const i=e[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=i.length;r<a;r++){const l=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=r}}}}else{const e=t.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const tE=new Y,nE=new Y;function em(t,e){Tc.call(this,t,e),this.type="LineSegments"}em.prototype=Object.assign(Object.create(Tc.prototype),{constructor:em,isLineSegments:!0,computeLineDistances:function(){const t=this.geometry;if(t.isBufferGeometry)if(t.index===null){const e=t.attributes.position,n=[];for(let i=0,r=e.count;i<r;i+=2)tE.fromBufferAttribute(e,i),nE.fromBufferAttribute(e,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+tE.distanceTo(nE);t.setAttribute("lineDistance",new Vt(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}});function iE(t,e){Tc.call(this,t,e),this.type="LineLoop"}iE.prototype=Object.assign(Object.create(Tc.prototype),{constructor:iE,isLineLoop:!0});function $a(t){ot.call(this),this.type="PointsMaterial",this.color=new Xe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}$a.prototype=Object.create(ot.prototype);$a.prototype.constructor=$a;$a.prototype.isPointsMaterial=!0;$a.prototype.copy=function(t){return ot.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};const rE=new bt,ov=new wh,dp=new tl,hp=new Y;function lv(t=new Ot,e=new $a){st.call(this),this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}lv.prototype=Object.assign(Object.create(st.prototype),{constructor:lv,isPoints:!0,copy:function(t){return st.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},raycast:function(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Points.threshold;if(n.boundingSphere===null&&n.computeBoundingSphere(),dp.copy(n.boundingSphere),dp.applyMatrix4(i),dp.radius+=r,t.ray.intersectsSphere(dp)===!1)return;rE.copy(i).invert(),ov.copy(t.ray).applyMatrix4(rE);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a;if(n.isBufferGeometry){const c=n.index,h=n.attributes.position;if(c!==null){const p=c.array;for(let g=0,y=p.length;g<y;g++){const x=p[g];hp.fromBufferAttribute(h,x),sE(hp,x,l,i,t,e,this)}}else for(let p=0,g=h.count;p<g;p++)hp.fromBufferAttribute(h,p),sE(hp,p,l,i,t,e,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const i=e[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=i.length;r<a;r++){const l=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=r}}}}else{const e=t.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});function sE(t,e,n,i,r,a,l){const c=ov.distanceSqToPoint(t);if(c<n){const u=new Y;ov.closestPointToPoint(t,u),u.applyMatrix4(i);const h=r.ray.origin.distanceTo(u);if(h<r.near||h>r.far)return;a.push({distance:h,distanceToRay:Math.sqrt(c),point:u,index:e,face:null,object:l})}}function aE(t,e,n,i,r,a,l,c,u){Xt.call(this,t,e,n,i,r,a,l,c,u),this.format=l!==void 0?l:Uo,this.minFilter=a!==void 0?a:Kn,this.magFilter=r!==void 0?r:Kn,this.generateMipmaps=!1;const h=this;function p(){h.needsUpdate=!0,t.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(p)}aE.prototype=Object.assign(Object.create(Xt.prototype),{constructor:aE,clone:function(){return new this.constructor(this.image).copy(this)},isVideoTexture:!0,update:function(){const t=this.image;"requestVideoFrameCallback"in t===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function qd(t,e,n,i,r,a,l,c,u,h,p,g){Xt.call(this,null,a,l,c,u,h,i,r,p,g),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}qd.prototype=Object.create(Xt.prototype);qd.prototype.constructor=qd;qd.prototype.isCompressedTexture=!0;function tm(t,e,n,i,r,a,l,c,u){Xt.call(this,t,e,n,i,r,a,l,c,u),this.needsUpdate=!0}tm.prototype=Object.create(Xt.prototype);tm.prototype.constructor=tm;tm.prototype.isCanvasTexture=!0;function nm(t,e,n,i,r,a,l,c,u,h){if(h=h!==void 0?h:pc,h!==pc&&h!==Ud)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&h===pc&&(n=Xp),n===void 0&&h===Ud&&(n=_d),Xt.call(this,null,i,r,a,l,c,h,n,u),this.image={width:t,height:e},this.magFilter=l!==void 0?l:si,this.minFilter=c!==void 0?c:si,this.flipY=!1,this.generateMipmaps=!1}nm.prototype=Object.create(Xt.prototype);nm.prototype.constructor=nm;nm.prototype.isDepthTexture=!0;new Y;new Y;new Y;new ai;const pH={triangulate:function(t,e,n){n=n||2;const i=e&&e.length,r=i?e[0]*n:t.length;let a=gN(t,0,r,n,!0);const l=[];if(!a||a.next===a.prev)return l;let c,u,h,p,g,y,x;if(i&&(a=vH(t,e,a,n)),t.length>80*n){c=h=t[0],u=p=t[1];for(let b=n;b<r;b+=n)g=t[b],y=t[b+1],g<c&&(c=g),y<u&&(u=y),g>h&&(h=g),y>p&&(p=y);x=Math.max(h-c,p-u),x=x!==0?1/x:0}return Yd(a,l,n,c,u,x),l}};function gN(t,e,n,i,r){let a,l;if(r===RH(t,e,n,i)>0)for(a=e;a<n;a+=i)l=oE(a,t[a],t[a+1],l);else for(a=n-i;a>=e;a-=i)l=oE(a,t[a],t[a+1],l);return l&&Vm(l,l.next)&&(Zd(l),l=l.next),l}function qa(t,e){if(!t)return t;e||(e=t);let n=t,i;do if(i=!1,!n.steiner&&(Vm(n,n.next)||an(n.prev,n,n.next)===0)){if(Zd(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function Yd(t,e,n,i,r,a,l){if(!t)return;!l&&a&&MH(t,i,r,a);let c=t,u,h;for(;t.prev!==t.next;){if(u=t.prev,h=t.next,a?gH(t,i,r,a):mH(t)){e.push(u.i/n),e.push(t.i/n),e.push(h.i/n),Zd(t),t=h.next,c=h.next;continue}if(t=h,t===c){l?l===1?(t=yH(qa(t),e,n),Yd(t,e,n,i,r,a,2)):l===2&&xH(t,e,n,i,r,a):Yd(qa(t),e,n,i,r,a,1);break}}}function mH(t){const e=t.prev,n=t,i=t.next;if(an(e,n,i)>=0)return!1;let r=t.next.next;for(;r!==t.prev;){if(uc(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&an(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function gH(t,e,n,i){const r=t.prev,a=t,l=t.next;if(an(r,a,l)>=0)return!1;const c=r.x<a.x?r.x<l.x?r.x:l.x:a.x<l.x?a.x:l.x,u=r.y<a.y?r.y<l.y?r.y:l.y:a.y<l.y?a.y:l.y,h=r.x>a.x?r.x>l.x?r.x:l.x:a.x>l.x?a.x:l.x,p=r.y>a.y?r.y>l.y?r.y:l.y:a.y>l.y?a.y:l.y,g=cv(c,u,e,n,i),y=cv(h,p,e,n,i);let x=t.prevZ,b=t.nextZ;for(;x&&x.z>=g&&b&&b.z<=y;){if(x!==t.prev&&x!==t.next&&uc(r.x,r.y,a.x,a.y,l.x,l.y,x.x,x.y)&&an(x.prev,x,x.next)>=0||(x=x.prevZ,b!==t.prev&&b!==t.next&&uc(r.x,r.y,a.x,a.y,l.x,l.y,b.x,b.y)&&an(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;x&&x.z>=g;){if(x!==t.prev&&x!==t.next&&uc(r.x,r.y,a.x,a.y,l.x,l.y,x.x,x.y)&&an(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;b&&b.z<=y;){if(b!==t.prev&&b!==t.next&&uc(r.x,r.y,a.x,a.y,l.x,l.y,b.x,b.y)&&an(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function yH(t,e,n){let i=t;do{const r=i.prev,a=i.next.next;!Vm(r,a)&&yN(r,i,i.next,a)&&Xd(r,a)&&Xd(a,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(a.i/n),Zd(i),Zd(i.next),i=t=a),i=i.next}while(i!==t);return qa(i)}function xH(t,e,n,i,r,a){let l=t;do{let c=l.next.next;for(;c!==l.prev;){if(l.i!==c.i&&AH(l,c)){let u=xN(l,c);l=qa(l,l.next),u=qa(u,u.next),Yd(l,e,n,i,r,a),Yd(u,e,n,i,r,a);return}c=c.next}l=l.next}while(l!==t)}function vH(t,e,n,i){const r=[];let a,l,c,u,h;for(a=0,l=e.length;a<l;a++)c=e[a]*i,u=a<l-1?e[a+1]*i:t.length,h=gN(t,c,u,i,!1),h===h.next&&(h.steiner=!0),r.push(EH(h));for(r.sort(bH),a=0;a<r.length;a++)wH(r[a],n),n=qa(n,n.next);return n}function bH(t,e){return t.x-e.x}function wH(t,e){if(e=_H(t,e),e){const n=xN(e,t);qa(e,e.next),qa(n,n.next)}}function _H(t,e){let n=e;const i=t.x,r=t.y;let a=-1/0,l;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const y=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(y<=i&&y>a){if(a=y,y===i){if(r===n.y)return n;if(r===n.next.y)return n.next}l=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!l)return null;if(i===a)return l;const c=l,u=l.x,h=l.y;let p=1/0,g;n=l;do i>=n.x&&n.x>=u&&i!==n.x&&uc(r<h?i:a,r,u,h,r<h?a:i,r,n.x,n.y)&&(g=Math.abs(r-n.y)/(i-n.x),Xd(n,t)&&(g<p||g===p&&(n.x>l.x||n.x===l.x&&SH(l,n)))&&(l=n,p=g)),n=n.next;while(n!==c);return l}function SH(t,e){return an(t.prev,t,e.prev)<0&&an(e.next,t,t.next)<0}function MH(t,e,n,i){let r=t;do r.z===null&&(r.z=cv(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,TH(r)}function TH(t){let e,n,i,r,a,l,c,u,h=1;do{for(n=t,t=null,a=null,l=0;n;){for(l++,i=n,c=0,e=0;e<h&&(c++,i=i.nextZ,!!i);e++);for(u=h;c>0||u>0&&i;)c!==0&&(u===0||!i||n.z<=i.z)?(r=n,n=n.nextZ,c--):(r=i,i=i.nextZ,u--),a?a.nextZ=r:t=r,r.prevZ=a,a=r;n=i}a.nextZ=null,h*=2}while(l>1);return t}function cv(t,e,n,i,r){return t=32767*(t-n)*r,e=32767*(e-i)*r,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function EH(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function uc(t,e,n,i,r,a,l,c){return(r-l)*(e-c)-(t-l)*(a-c)>=0&&(t-l)*(i-c)-(n-l)*(e-c)>=0&&(n-l)*(a-c)-(r-l)*(i-c)>=0}function AH(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!CH(t,e)&&(Xd(t,e)&&Xd(e,t)&&NH(t,e)&&(an(t.prev,t,e.prev)||an(t,e.prev,e))||Vm(t,e)&&an(t.prev,t,t.next)>0&&an(e.prev,e,e.next)>0)}function an(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Vm(t,e){return t.x===e.x&&t.y===e.y}function yN(t,e,n,i){const r=pp(an(t,e,n)),a=pp(an(t,e,i)),l=pp(an(n,i,t)),c=pp(an(n,i,e));return!!(r!==a&&l!==c||r===0&&fp(t,n,e)||a===0&&fp(t,i,e)||l===0&&fp(n,t,i)||c===0&&fp(n,e,i))}function fp(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function pp(t){return t>0?1:t<0?-1:0}function CH(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&yN(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Xd(t,e){return an(t.prev,t,t.next)<0?an(t,e,t.next)>=0&&an(t,t.prev,e)>=0:an(t,e,t.prev)<0||an(t,t.next,e)<0}function NH(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,a=(t.y+e.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function xN(t,e){const n=new uv(t.i,t.x,t.y),i=new uv(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function oE(t,e,n,i){const r=new uv(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Zd(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function uv(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function RH(t,e,n,i){let r=0;for(let a=e,l=n-i;a<n;a+=i)r+=(t[l]-t[a])*(t[a+1]+t[l+1]),l=a;return r}const Fa={area:function(t){const e=t.length;let n=0;for(let i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return n*.5},isClockWise:function(t){return Fa.area(t)<0},triangulateShape:function(t,e){const n=[],i=[],r=[];lE(t),cE(n,t);let a=t.length;e.forEach(lE);for(let c=0;c<e.length;c++)i.push(a),a+=e[c].length,cE(n,e[c]);const l=pH.triangulate(n,i);for(let c=0;c<l.length;c+=3)r.push(l.slice(c,c+3));return r}};function lE(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function cE(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class vN extends Ot{constructor(e,n){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const i=this,r=[],a=[];for(let c=0,u=e.length;c<u;c++){const h=e[c];l(h)}this.setAttribute("position",new Vt(r,3)),this.setAttribute("uv",new Vt(a,2)),this.computeVertexNormals();function l(c){const u=[],h=n.curveSegments!==void 0?n.curveSegments:12,p=n.steps!==void 0?n.steps:1;let g=n.depth!==void 0?n.depth:100,y=n.bevelEnabled!==void 0?n.bevelEnabled:!0,x=n.bevelThickness!==void 0?n.bevelThickness:6,b=n.bevelSize!==void 0?n.bevelSize:x-2,w=n.bevelOffset!==void 0?n.bevelOffset:0,T=n.bevelSegments!==void 0?n.bevelSegments:3;const _=n.extrudePath,S=n.UVGenerator!==void 0?n.UVGenerator:LH;n.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),g=n.amount);let E,R=!1,A,N,j,O;_&&(E=_.getSpacedPoints(p),R=!0,y=!1,A=_.computeFrenetFrames(p,!1),N=new Y,j=new Y,O=new Y),y||(T=0,x=0,b=0,w=0);const L=c.extractPoints(h);let B=L.shape;const F=L.holes;if(!Fa.isClockWise(B)){B=B.reverse();for(let Se=0,Ee=F.length;Se<Ee;Se++){const Re=F[Se];Fa.isClockWise(Re)&&(F[Se]=Re.reverse())}}const Q=Fa.triangulateShape(B,F),W=B;for(let Se=0,Ee=F.length;Se<Ee;Se++){const Re=F[Se];B=B.concat(Re)}function Z(Se,Ee,Re){return Ee||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ee.clone().multiplyScalar(Re).add(Se)}const z=B.length,$=Q.length;function U(Se,Ee,Re){let De,ke,H;const I=Se.x-Ee.x,ve=Se.y-Ee.y,_e=Re.x-Se.x,K=Re.y-Se.y,we=I*I+ve*ve,Le=I*K-ve*_e;if(Math.abs(Le)>Number.EPSILON){const ze=Math.sqrt(we),Ce=Math.sqrt(_e*_e+K*K),Oe=Ee.x-ve/ze,qe=Ee.y+I/ze,tt=Re.x-K/Ce,Ue=Re.y+_e/Ce,Ye=((tt-Oe)*K-(Ue-qe)*_e)/(I*K-ve*_e);De=Oe+I*Ye-Se.x,ke=qe+ve*Ye-Se.y;const kt=De*De+ke*ke;if(kt<=2)return new Ae(De,ke);H=Math.sqrt(kt/2)}else{let ze=!1;I>Number.EPSILON?_e>Number.EPSILON&&(ze=!0):I<-Number.EPSILON?_e<-Number.EPSILON&&(ze=!0):Math.sign(ve)===Math.sign(K)&&(ze=!0),ze?(De=-ve,ke=I,H=Math.sqrt(we)):(De=I,ke=ve,H=Math.sqrt(we/2))}return new Ae(De/H,ke/H)}const X=[];for(let Se=0,Ee=W.length,Re=Ee-1,De=Se+1;Se<Ee;Se++,Re++,De++)Re===Ee&&(Re=0),De===Ee&&(De=0),X[Se]=U(W[Se],W[Re],W[De]);const D=[];let q,ce=X.concat();for(let Se=0,Ee=F.length;Se<Ee;Se++){const Re=F[Se];q=[];for(let De=0,ke=Re.length,H=ke-1,I=De+1;De<ke;De++,H++,I++)H===ke&&(H=0),I===ke&&(I=0),q[De]=U(Re[De],Re[H],Re[I]);D.push(q),ce=ce.concat(q)}for(let Se=0;Se<T;Se++){const Ee=Se/T,Re=x*Math.cos(Ee*Math.PI/2),De=b*Math.sin(Ee*Math.PI/2)+w;for(let ke=0,H=W.length;ke<H;ke++){const I=Z(W[ke],X[ke],De);Fe(I.x,I.y,-Re)}for(let ke=0,H=F.length;ke<H;ke++){const I=F[ke];q=D[ke];for(let ve=0,_e=I.length;ve<_e;ve++){const K=Z(I[ve],q[ve],De);Fe(K.x,K.y,-Re)}}}const me=b+w;for(let Se=0;Se<z;Se++){const Ee=y?Z(B[Se],ce[Se],me):B[Se];R?(j.copy(A.normals[0]).multiplyScalar(Ee.x),N.copy(A.binormals[0]).multiplyScalar(Ee.y),O.copy(E[0]).add(j).add(N),Fe(O.x,O.y,O.z)):Fe(Ee.x,Ee.y,0)}for(let Se=1;Se<=p;Se++)for(let Ee=0;Ee<z;Ee++){const Re=y?Z(B[Ee],ce[Ee],me):B[Ee];R?(j.copy(A.normals[Se]).multiplyScalar(Re.x),N.copy(A.binormals[Se]).multiplyScalar(Re.y),O.copy(E[Se]).add(j).add(N),Fe(O.x,O.y,O.z)):Fe(Re.x,Re.y,g/p*Se)}for(let Se=T-1;Se>=0;Se--){const Ee=Se/T,Re=x*Math.cos(Ee*Math.PI/2),De=b*Math.sin(Ee*Math.PI/2)+w;for(let ke=0,H=W.length;ke<H;ke++){const I=Z(W[ke],X[ke],De);Fe(I.x,I.y,g+Re)}for(let ke=0,H=F.length;ke<H;ke++){const I=F[ke];q=D[ke];for(let ve=0,_e=I.length;ve<_e;ve++){const K=Z(I[ve],q[ve],De);R?Fe(K.x,K.y+E[p-1].y,E[p-1].x+Re):Fe(K.x,K.y,g+Re)}}}fe(),ie();function fe(){const Se=r.length/3;if(y){let Ee=0,Re=z*Ee;for(let De=0;De<$;De++){const ke=Q[De];Be(ke[2]+Re,ke[1]+Re,ke[0]+Re)}Ee=p+T*2,Re=z*Ee;for(let De=0;De<$;De++){const ke=Q[De];Be(ke[0]+Re,ke[1]+Re,ke[2]+Re)}}else{for(let Ee=0;Ee<$;Ee++){const Re=Q[Ee];Be(Re[2],Re[1],Re[0])}for(let Ee=0;Ee<$;Ee++){const Re=Q[Ee];Be(Re[0]+z*p,Re[1]+z*p,Re[2]+z*p)}}i.addGroup(Se,r.length/3-Se,0)}function ie(){const Se=r.length/3;let Ee=0;Ne(W,Ee),Ee+=W.length;for(let Re=0,De=F.length;Re<De;Re++){const ke=F[Re];Ne(ke,Ee),Ee+=ke.length}i.addGroup(Se,r.length/3-Se,1)}function Ne(Se,Ee){let Re=Se.length;for(;--Re>=0;){const De=Re;let ke=Re-1;ke<0&&(ke=Se.length-1);for(let H=0,I=p+T*2;H<I;H++){const ve=z*H,_e=z*(H+1),K=Ee+De+ve,we=Ee+ke+ve,Le=Ee+ke+_e,ze=Ee+De+_e;Ie(K,we,Le,ze)}}}function Fe(Se,Ee,Re){u.push(Se),u.push(Ee),u.push(Re)}function Be(Se,Ee,Re){$e(Se),$e(Ee),$e(Re);const De=r.length/3,ke=S.generateTopUV(i,r,De-3,De-2,De-1);Ke(ke[0]),Ke(ke[1]),Ke(ke[2])}function Ie(Se,Ee,Re,De){$e(Se),$e(Ee),$e(De),$e(Ee),$e(Re),$e(De);const ke=r.length/3,H=S.generateSideWallUV(i,r,ke-6,ke-3,ke-2,ke-1);Ke(H[0]),Ke(H[1]),Ke(H[3]),Ke(H[1]),Ke(H[2]),Ke(H[3])}function $e(Se){r.push(u[Se*3+0]),r.push(u[Se*3+1]),r.push(u[Se*3+2])}function Ke(Se){a.push(Se.x),a.push(Se.y)}}}toJSON(){const e=Ot.prototype.toJSON.call(this),n=this.parameters.shapes,i=this.parameters.options;return kH(n,i,e)}}const LH={generateTopUV:function(t,e,n,i,r){const a=e[n*3],l=e[n*3+1],c=e[i*3],u=e[i*3+1],h=e[r*3],p=e[r*3+1];return[new Ae(a,l),new Ae(c,u),new Ae(h,p)]},generateSideWallUV:function(t,e,n,i,r,a){const l=e[n*3],c=e[n*3+1],u=e[n*3+2],h=e[i*3],p=e[i*3+1],g=e[i*3+2],y=e[r*3],x=e[r*3+1],b=e[r*3+2],w=e[a*3],T=e[a*3+1],_=e[a*3+2];return Math.abs(c-p)<.01?[new Ae(l,1-u),new Ae(h,1-g),new Ae(y,1-b),new Ae(w,1-_)]:[new Ae(c,1-u),new Ae(p,1-g),new Ae(x,1-b),new Ae(T,1-_)]}};function kH(t,e,n){if(n.shapes=[],Array.isArray(t))for(let i=0,r=t.length;i<r;i++){const a=t[i];n.shapes.push(a.uuid)}else n.shapes.push(t.uuid);return e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}function dv(t,e,n){Ot.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n};const i=[],r=[],a=[],l=[],c=1e-5,u=new Y,h=new Y,p=new Y,g=new Y,y=new Y;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const x=e+1;for(let b=0;b<=n;b++){const w=b/n;for(let T=0;T<=e;T++){const _=T/e;t(_,w,h),r.push(h.x,h.y,h.z),_-c>=0?(t(_-c,w,p),g.subVectors(h,p)):(t(_+c,w,p),g.subVectors(p,h)),w-c>=0?(t(_,w-c,p),y.subVectors(h,p)):(t(_,w+c,p),y.subVectors(p,h)),u.crossVectors(g,y).normalize(),a.push(u.x,u.y,u.z),l.push(_,w)}}for(let b=0;b<n;b++)for(let w=0;w<e;w++){const T=b*x+w,_=b*x+w+1,S=(b+1)*x+w+1,E=(b+1)*x+w;i.push(T,_,E),i.push(_,S,E)}this.setIndex(i),this.setAttribute("position",new Vt(r,3)),this.setAttribute("normal",new Vt(a,3)),this.setAttribute("uv",new Vt(l,2))}dv.prototype=Object.create(Ot.prototype);dv.prototype.constructor=dv;class jH extends Ot{constructor(e,n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const i=[],r=[],a=[],l=[];let c=0,u=0;if(Array.isArray(e)===!1)h(e);else for(let p=0;p<e.length;p++)h(e[p]),this.addGroup(c,u,p),c+=u,u=0;this.setIndex(i),this.setAttribute("position",new Vt(r,3)),this.setAttribute("normal",new Vt(a,3)),this.setAttribute("uv",new Vt(l,2));function h(p){const g=r.length/3,y=p.extractPoints(n);let x=y.shape;const b=y.holes;Fa.isClockWise(x)===!1&&(x=x.reverse());for(let T=0,_=b.length;T<_;T++){const S=b[T];Fa.isClockWise(S)===!0&&(b[T]=S.reverse())}const w=Fa.triangulateShape(x,b);for(let T=0,_=b.length;T<_;T++){const S=b[T];x=x.concat(S)}for(let T=0,_=x.length;T<_;T++){const S=x[T];r.push(S.x,S.y,0),a.push(0,0,1),l.push(S.x,S.y)}for(let T=0,_=w.length;T<_;T++){const S=w[T],E=S[0]+g,R=S[1]+g,A=S[2]+g;i.push(E,R,A),u+=3}}}toJSON(){const e=Ot.prototype.toJSON.call(this),n=this.parameters.shapes;return DH(n,e)}}function DH(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}class Yy extends Ot{constructor(e=1,n=8,i=6,r=0,a=Math.PI*2,l=0,c=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:r,phiLength:a,thetaStart:l,thetaLength:c},n=Math.max(3,Math.floor(n)),i=Math.max(2,Math.floor(i));const u=Math.min(l+c,Math.PI);let h=0;const p=[],g=new Y,y=new Y,x=[],b=[],w=[],T=[];for(let _=0;_<=i;_++){const S=[],E=_/i;let R=0;_==0&&l==0?R=.5/n:_==i&&u==Math.PI&&(R=-.5/n);for(let A=0;A<=n;A++){const N=A/n;g.x=-e*Math.cos(r+N*a)*Math.sin(l+E*c),g.y=e*Math.cos(l+E*c),g.z=e*Math.sin(r+N*a)*Math.sin(l+E*c),b.push(g.x,g.y,g.z),y.copy(g).normalize(),w.push(y.x,y.y,y.z),T.push(N+R,1-E),S.push(h++)}p.push(S)}for(let _=0;_<i;_++)for(let S=0;S<n;S++){const E=p[_][S+1],R=p[_][S],A=p[_+1][S],N=p[_+1][S+1];(_!==0||l>0)&&x.push(E,R,N),(_!==i-1||u<Math.PI)&&x.push(R,A,N)}this.setIndex(x),this.setAttribute("position",new Vt(b,3)),this.setAttribute("normal",new Vt(w,3)),this.setAttribute("uv",new Vt(T,2))}}function Ec(t){ot.call(this),this.type="ShadowMaterial",this.color=new Xe(0),this.transparent=!0,this.setValues(t)}Ec.prototype=Object.create(ot.prototype);Ec.prototype.constructor=Ec;Ec.prototype.isShadowMaterial=!0;Ec.prototype.copy=function(t){return ot.prototype.copy.call(this,t),this.color.copy(t.color),this};function Qd(t){bi.call(this,t),this.type="RawShaderMaterial"}Qd.prototype=Object.create(bi.prototype);Qd.prototype.constructor=Qd;Qd.prototype.isRawShaderMaterial=!0;function Hs(t){ot.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Xe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Xe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qc,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(t)}Hs.prototype=Object.create(ot.prototype);Hs.prototype.constructor=Hs;Hs.prototype.isMeshStandardMaterial=!0;Hs.prototype.copy=function(t){return ot.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.vertexTangents=t.vertexTangents,this};function Qr(t){Hs.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ae(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(e){this.reflectivity=ft.clamp(2.5*(e-1)/(e+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(t)}Qr.prototype=Object.create(Hs.prototype);Qr.prototype.constructor=Qr;Qr.prototype.isMeshPhysicalMaterial=!0;Qr.prototype.copy=function(t){return Hs.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,t.sheen?this.sheen=(this.sheen||new Xe).copy(t.sheen):this.sheen=null,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this};function Qo(t){ot.call(this),this.type="MeshPhongMaterial",this.color=new Xe(16777215),this.specular=new Xe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Xe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qc,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=zm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}Qo.prototype=Object.create(ot.prototype);Qo.prototype.constructor=Qo;Qo.prototype.isMeshPhongMaterial=!0;Qo.prototype.copy=function(t){return ot.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this};function Ac(t){ot.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Xe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Xe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qc,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}Ac.prototype=Object.create(ot.prototype);Ac.prototype.constructor=Ac;Ac.prototype.isMeshToonMaterial=!0;Ac.prototype.copy=function(t){return ot.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this};function Cc(t){ot.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qc,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}Cc.prototype=Object.create(ot.prototype);Cc.prototype.constructor=Cc;Cc.prototype.isMeshNormalMaterial=!0;Cc.prototype.copy=function(t){return ot.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this};function Nc(t){ot.call(this),this.type="MeshLambertMaterial",this.color=new Xe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Xe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=zm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}Nc.prototype=Object.create(ot.prototype);Nc.prototype.constructor=Nc;Nc.prototype.isMeshLambertMaterial=!0;Nc.prototype.copy=function(t){return ot.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this};function Rc(t){ot.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Xe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qc,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}Rc.prototype=Object.create(ot.prototype);Rc.prototype.constructor=Rc;Rc.prototype.isMeshMatcapMaterial=!0;Rc.prototype.copy=function(t){return ot.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this};function Lc(t){gr.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}Lc.prototype=Object.create(gr.prototype);Lc.prototype.constructor=Lc;Lc.prototype.isLineDashedMaterial=!0;Lc.prototype.copy=function(t){return gr.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var PH=Object.freeze({__proto__:null,ShadowMaterial:Ec,SpriteMaterial:Zo,RawShaderMaterial:Qd,ShaderMaterial:bi,PointsMaterial:$a,MeshPhysicalMaterial:Qr,MeshStandardMaterial:Hs,MeshPhongMaterial:Qo,MeshToonMaterial:Ac,MeshNormalMaterial:Cc,MeshLambertMaterial:Nc,MeshDepthMaterial:qo,MeshDistanceMaterial:Yo,MeshBasicMaterial:Ga,MeshMatcapMaterial:Rc,LineDashedMaterial:Lc,LineBasicMaterial:gr,Material:ot});const Jt={arraySlice:function(t,e,n){return Jt.isTypedArray(t)?new t.constructor(t.subarray(e,n!==void 0?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(r,a){return t[r]-t[a]}const n=t.length,i=new Array(n);for(let r=0;r!==n;++r)i[r]=r;return i.sort(e),i},sortedArray:function(t,e,n){const i=t.length,r=new t.constructor(i);for(let a=0,l=0;l!==i;++a){const c=n[a]*e;for(let u=0;u!==e;++u)r[l++]=t[c+u]}return r},flattenJSON:function(t,e,n,i){let r=1,a=t[0];for(;a!==void 0&&a[i]===void 0;)a=t[r++];if(a===void 0)return;let l=a[i];if(l!==void 0)if(Array.isArray(l))do l=a[i],l!==void 0&&(e.push(a.time),n.push.apply(n,l)),a=t[r++];while(a!==void 0);else if(l.toArray!==void 0)do l=a[i],l!==void 0&&(e.push(a.time),l.toArray(n,n.length)),a=t[r++];while(a!==void 0);else do l=a[i],l!==void 0&&(e.push(a.time),n.push(l)),a=t[r++];while(a!==void 0)},subclip:function(t,e,n,i,r=30){const a=t.clone();a.name=e;const l=[];for(let u=0;u<a.tracks.length;++u){const h=a.tracks[u],p=h.getValueSize(),g=[],y=[];for(let x=0;x<h.times.length;++x){const b=h.times[x]*r;if(!(b<n||b>=i)){g.push(h.times[x]);for(let w=0;w<p;++w)y.push(h.values[x*p+w])}}g.length!==0&&(h.times=Jt.convertArray(g,h.times.constructor),h.values=Jt.convertArray(y,h.values.constructor),l.push(h))}a.tracks=l;let c=1/0;for(let u=0;u<a.tracks.length;++u)c>a.tracks[u].times[0]&&(c=a.tracks[u].times[0]);for(let u=0;u<a.tracks.length;++u)a.tracks[u].shift(-1*c);return a.resetDuration(),a},makeClipAdditive:function(t,e=0,n=t,i=30){i<=0&&(i=30);const r=n.tracks.length,a=e/i;for(let l=0;l<r;++l){const c=n.tracks[l],u=c.ValueTypeName;if(u==="bool"||u==="string")continue;const h=t.tracks.find(function(_){return _.name===c.name&&_.ValueTypeName===u});if(h===void 0)continue;let p=0;const g=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=g/3);let y=0;const x=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=x/3);const b=c.times.length-1;let w;if(a<=c.times[0]){const _=p,S=g-p;w=Jt.arraySlice(c.values,_,S)}else if(a>=c.times[b]){const _=b*g+p,S=_+g-p;w=Jt.arraySlice(c.values,_,S)}else{const _=c.createInterpolant(),S=p,E=g-p;_.evaluate(a),w=Jt.arraySlice(_.resultBuffer,S,E)}u==="quaternion"&&new Bi().fromArray(w).normalize().conjugate().toArray(w);const T=h.times.length;for(let _=0;_<T;++_){const S=_*x+y;if(u==="quaternion")Bi.multiplyQuaternionsFlat(h.values,S,w,0,h.values,S);else{const E=x-y*2;for(let R=0;R<E;++R)h.values[S+R]-=w[R]}}}return t.blendMode=K3,t}};function fr(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n}Object.assign(fr.prototype,{evaluate:function(t){const e=this.parameterPositions;let n=this._cachedIndex,i=e[n],r=e[n-1];e:{t:{let a;n:{i:if(!(t<i)){for(let l=n+2;;){if(i===void 0){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,r)}if(n===l)break;if(r=i,i=e[++n],t<i)break t}a=e.length;break n}if(!(t>=r)){const l=e[1];t<l&&(n=2,r=l);for(let c=n-2;;){if(r===void 0)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===c)break;if(i=r,r=e[--n-1],t>=r)break t}a=n,n=0;break n}break e}for(;n<a;){const l=n+a>>>1;t<e[l]?a=l:n=l+1}if(i=e[n],r=e[n-1],r===void 0)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(i===void 0)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i;for(let a=0;a!==i;++a)e[a]=n[r+a];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(fr.prototype,{beforeStart_:fr.prototype.copySampleValue_,afterEnd_:fr.prototype.copySampleValue_});function hv(t,e,n,i){fr.call(this,t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}hv.prototype=Object.assign(Object.create(fr.prototype),{constructor:hv,DefaultSettings_:{endingStart:oc,endingEnd:oc},intervalChanged_:function(t,e,n){const i=this.parameterPositions;let r=t-2,a=t+1,l=i[r],c=i[a];if(l===void 0)switch(this.getSettings_().endingStart){case lc:r=t,l=2*e-n;break;case Jp:r=i.length-2,l=e+i[r]-i[r+1];break;default:r=t,l=n}if(c===void 0)switch(this.getSettings_().endingEnd){case lc:a=t,c=2*n-e;break;case Jp:a=1,c=n+i[1]-i[0];break;default:a=t-1,c=e}const u=(n-e)*.5,h=this.valueSize;this._weightPrev=u/(e-l),this._weightNext=u/(c-n),this._offsetPrev=r*h,this._offsetNext=a*h},interpolate_:function(t,e,n,i){const r=this.resultBuffer,a=this.sampleValues,l=this.valueSize,c=t*l,u=c-l,h=this._offsetPrev,p=this._offsetNext,g=this._weightPrev,y=this._weightNext,x=(n-e)/(i-e),b=x*x,w=b*x,T=-g*w+2*g*b-g*x,_=(1+g)*w+(-1.5-2*g)*b+(-.5+g)*x+1,S=(-1-y)*w+(1.5+y)*b+.5*x,E=y*w-y*b;for(let R=0;R!==l;++R)r[R]=T*a[h+R]+_*a[u+R]+S*a[c+R]+E*a[p+R];return r}});function im(t,e,n,i){fr.call(this,t,e,n,i)}im.prototype=Object.assign(Object.create(fr.prototype),{constructor:im,interpolate_:function(t,e,n,i){const r=this.resultBuffer,a=this.sampleValues,l=this.valueSize,c=t*l,u=c-l,h=(n-e)/(i-e),p=1-h;for(let g=0;g!==l;++g)r[g]=a[u+g]*p+a[c+g]*h;return r}});function fv(t,e,n,i){fr.call(this,t,e,n,i)}fv.prototype=Object.assign(Object.create(fr.prototype),{constructor:fv,interpolate_:function(t){return this.copySampleValue_(t-1)}});function ni(t,e,n,i){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Jt.convertArray(e,this.TimeBufferType),this.values=Jt.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}Object.assign(ni,{toJSON:function(t){const e=t.constructor;let n;if(e.toJSON!==void 0)n=e.toJSON(t);else{n={name:t.name,times:Jt.convertArray(t.times,Array),values:Jt.convertArray(t.values,Array)};const i=t.getInterpolation();i!==t.DefaultInterpolation&&(n.interpolation=i)}return n.type=t.ValueTypeName,n}});Object.assign(ni.prototype,{constructor:ni,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Dp,InterpolantFactoryMethodDiscrete:function(t){return new fv(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new im(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new hv(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){let e;switch(t){case Qp:e=this.InterpolantFactoryMethodDiscrete;break;case Dp:e=this.InterpolantFactoryMethodLinear;break;case _y:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Qp;case this.InterpolantFactoryMethodLinear:return Dp;case this.InterpolantFactoryMethodSmooth:return _y}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(t!==0){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]+=t}return this},scale:function(t){if(t!==1){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]*=t}return this},trim:function(t,e){const n=this.times,i=n.length;let r=0,a=i-1;for(;r!==i&&n[r]<t;)++r;for(;a!==-1&&n[a]>e;)--a;if(++a,r!==0||a!==i){r>=a&&(a=Math.max(a,1),r=a-1);const l=this.getValueSize();this.times=Jt.arraySlice(n,r,a),this.values=Jt.arraySlice(this.values,r*l,a*l)}return this},validate:function(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,i=this.values,r=n.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let a=null;for(let l=0;l!==r;l++){const c=n[l];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,c),t=!1;break}if(a!==null&&a>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,c,a),t=!1;break}a=c}if(i!==void 0&&Jt.isTypedArray(i))for(let l=0,c=i.length;l!==c;++l){const u=i[l];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,u),t=!1;break}}return t},optimize:function(){const t=Jt.arraySlice(this.times),e=Jt.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===_y,r=t.length-1;let a=1;for(let l=1;l<r;++l){let c=!1;const u=t[l],h=t[l+1];if(u!==h&&(l!==1||u!==t[0]))if(i)c=!0;else{const p=l*n,g=p-n,y=p+n;for(let x=0;x!==n;++x){const b=e[p+x];if(b!==e[g+x]||b!==e[y+x]){c=!0;break}}}if(c){if(l!==a){t[a]=t[l];const p=l*n,g=a*n;for(let y=0;y!==n;++y)e[g+y]=e[p+y]}++a}}if(r>0){t[a]=t[r];for(let l=r*n,c=a*n,u=0;u!==n;++u)e[c+u]=e[l+u];++a}return a!==t.length?(this.times=Jt.arraySlice(t,0,a),this.values=Jt.arraySlice(e,0,a*n)):(this.times=t,this.values=e),this},clone:function(){const t=Jt.arraySlice(this.times,0),e=Jt.arraySlice(this.values,0),n=this.constructor,i=new n(this.name,t,e);return i.createInterpolant=this.createInterpolant,i}});function pv(t,e,n){ni.call(this,t,e,n)}pv.prototype=Object.assign(Object.create(ni.prototype),{constructor:pv,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Qp,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function mv(t,e,n,i){ni.call(this,t,e,n,i)}mv.prototype=Object.assign(Object.create(ni.prototype),{constructor:mv,ValueTypeName:"color"});function Jd(t,e,n,i){ni.call(this,t,e,n,i)}Jd.prototype=Object.assign(Object.create(ni.prototype),{constructor:Jd,ValueTypeName:"number"});function gv(t,e,n,i){fr.call(this,t,e,n,i)}gv.prototype=Object.assign(Object.create(fr.prototype),{constructor:gv,interpolate_:function(t,e,n,i){const r=this.resultBuffer,a=this.sampleValues,l=this.valueSize,c=(n-e)/(i-e);let u=t*l;for(let h=u+l;u!==h;u+=4)Bi.slerpFlat(r,0,a,u-l,a,u,c);return r}});function rm(t,e,n,i){ni.call(this,t,e,n,i)}rm.prototype=Object.assign(Object.create(ni.prototype),{constructor:rm,ValueTypeName:"quaternion",DefaultInterpolation:Dp,InterpolantFactoryMethodLinear:function(t){return new gv(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0});function yv(t,e,n,i){ni.call(this,t,e,n,i)}yv.prototype=Object.assign(Object.create(ni.prototype),{constructor:yv,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Qp,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function Kd(t,e,n,i){ni.call(this,t,e,n,i)}Kd.prototype=Object.assign(Object.create(ni.prototype),{constructor:Kd,ValueTypeName:"vector"});function Nr(t,e=-1,n,i=Zb){this.name=t,this.tracks=n,this.duration=e,this.blendMode=i,this.uuid=ft.generateUUID(),this.duration<0&&this.resetDuration()}function OH(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Jd;case"vector":case"vector2":case"vector3":case"vector4":return Kd;case"color":return mv;case"quaternion":return rm;case"bool":case"boolean":return pv;case"string":return yv}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function BH(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=OH(t.type);if(t.times===void 0){const n=[],i=[];Jt.flattenJSON(t.keys,n,i,"value"),t.times=n,t.values=i}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}Object.assign(Nr,{parse:function(t){const e=[],n=t.tracks,i=1/(t.fps||1);for(let a=0,l=n.length;a!==l;++a)e.push(BH(n[a]).scale(i));const r=new Nr(t.name,t.duration,e,t.blendMode);return r.uuid=t.uuid,r},toJSON:function(t){const e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let r=0,a=n.length;r!==a;++r)e.push(ni.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(t,e,n,i){const r=e.length,a=[];for(let l=0;l<r;l++){let c=[],u=[];c.push((l+r-1)%r,l,(l+1)%r),u.push(0,1,0);const h=Jt.getKeyframeOrder(c);c=Jt.sortedArray(c,1,h),u=Jt.sortedArray(u,1,h),!i&&c[0]===0&&(c.push(r),u.push(u[0])),a.push(new Jd(".morphTargetInfluences["+e[l].name+"]",c,u).scale(1/n))}return new Nr(t,-1,a)},findByName:function(t,e){let n=t;if(!Array.isArray(t)){const i=t;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let l=0,c=t.length;l<c;l++){const u=t[l],h=u.name.match(r);if(h&&h.length>1){const p=h[1];let g=i[p];g||(i[p]=g=[]),g.push(u)}}const a=[];for(const l in i)a.push(Nr.CreateFromMorphTargetSequence(l,i[l],e,n));return a},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(p,g,y,x,b){if(y.length!==0){const w=[],T=[];Jt.flattenJSON(y,w,T,x),w.length!==0&&b.push(new p(g,w,T))}},i=[],r=t.name||"default",a=t.fps||30,l=t.blendMode;let c=t.length||-1;const u=t.hierarchy||[];for(let p=0;p<u.length;p++){const g=u[p].keys;if(!(!g||g.length===0))if(g[0].morphTargets){const y={};let x;for(x=0;x<g.length;x++)if(g[x].morphTargets)for(let b=0;b<g[x].morphTargets.length;b++)y[g[x].morphTargets[b]]=-1;for(const b in y){const w=[],T=[];for(let _=0;_!==g[x].morphTargets.length;++_){const S=g[x];w.push(S.time),T.push(S.morphTarget===b?1:0)}i.push(new Jd(".morphTargetInfluence["+b+"]",w,T))}c=y.length*a}else{const y=".bones["+e[p].name+"]";n(Kd,y+".position",g,"pos",i),n(rm,y+".quaternion",g,"rot",i),n(Kd,y+".scale",g,"scl",i)}}return i.length===0?null:new Nr(r,c,i,l)}});Object.assign(Nr.prototype,{resetDuration:function(){const t=this.tracks;let e=0;for(let n=0,i=t.length;n!==i;++n){const r=this.tracks[n];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this},trim:function(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new Nr(this.name,this.duration,t,this.blendMode)},toJSON:function(){return Nr.toJSON(this)}});const kc={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function zH(t,e,n){const i=this;let r=!1,a=0,l=0,c;const u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(h){l++,r===!1&&i.onStart!==void 0&&i.onStart(h,a,l),r=!0},this.itemEnd=function(h){a++,i.onProgress!==void 0&&i.onProgress(h,a,l),a===l&&(r=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(h){i.onError!==void 0&&i.onError(h)},this.resolveURL=function(h){return c?c(h):h},this.setURLModifier=function(h){return c=h,this},this.addHandler=function(h,p){return u.push(h,p),this},this.removeHandler=function(h){const p=u.indexOf(h);return p!==-1&&u.splice(p,2),this},this.getHandler=function(h){for(let p=0,g=u.length;p<g;p+=2){const y=u[p],x=u[p+1];if(y.global&&(y.lastIndex=0),y.test(h))return x}return null}}const FH=new zH;function Ht(t){this.manager=t!==void 0?t:FH,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Ht.prototype,{load:function(){},loadAsync:function(t,e){const n=this;return new Promise(function(i,r){n.load(t,i,e,r)})},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}});const Er={};function Gs(t){Ht.call(this,t)}Gs.prototype=Object.assign(Object.create(Ht.prototype),{constructor:Gs,load:function(t,e,n,i){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,a=kc.get(t);if(a!==void 0)return r.manager.itemStart(t),setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a;if(Er[t]!==void 0){Er[t].push({onLoad:e,onProgress:n,onError:i});return}const l=/^data:(.*?)(;base64)?,(.*)$/,c=t.match(l);let u;if(c){const h=c[1],p=!!c[2];let g=c[3];g=decodeURIComponent(g),p&&(g=atob(g));try{let y;const x=(this.responseType||"").toLowerCase();switch(x){case"arraybuffer":case"blob":const b=new Uint8Array(g.length);for(let T=0;T<g.length;T++)b[T]=g.charCodeAt(T);x==="blob"?y=new Blob([b.buffer],{type:h}):y=b.buffer;break;case"document":y=new DOMParser().parseFromString(g,h);break;case"json":y=JSON.parse(g);break;default:y=g;break}setTimeout(function(){e&&e(y),r.manager.itemEnd(t)},0)}catch(y){setTimeout(function(){i&&i(y),r.manager.itemError(t),r.manager.itemEnd(t)},0)}}else{Er[t]=[],Er[t].push({onLoad:e,onProgress:n,onError:i}),u=new XMLHttpRequest,u.open("GET",t,!0),u.addEventListener("load",function(h){const p=this.response,g=Er[t];if(delete Er[t],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),kc.add(t,p);for(let y=0,x=g.length;y<x;y++){const b=g[y];b.onLoad&&b.onLoad(p)}r.manager.itemEnd(t)}else{for(let y=0,x=g.length;y<x;y++){const b=g[y];b.onError&&b.onError(h)}r.manager.itemError(t),r.manager.itemEnd(t)}},!1),u.addEventListener("progress",function(h){const p=Er[t];for(let g=0,y=p.length;g<y;g++){const x=p[g];x.onProgress&&x.onProgress(h)}},!1),u.addEventListener("error",function(h){const p=Er[t];delete Er[t];for(let g=0,y=p.length;g<y;g++){const x=p[g];x.onError&&x.onError(h)}r.manager.itemError(t),r.manager.itemEnd(t)},!1),u.addEventListener("abort",function(h){const p=Er[t];delete Er[t];for(let g=0,y=p.length;g<y;g++){const x=p[g];x.onError&&x.onError(h)}r.manager.itemError(t),r.manager.itemEnd(t)},!1),this.responseType!==void 0&&(u.responseType=this.responseType),this.withCredentials!==void 0&&(u.withCredentials=this.withCredentials),u.overrideMimeType&&u.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(const h in this.requestHeader)u.setRequestHeader(h,this.requestHeader[h]);u.send(null)}return r.manager.itemStart(t),u},setResponseType:function(t){return this.responseType=t,this},setMimeType:function(t){return this.mimeType=t,this}});function uE(t){Ht.call(this,t)}uE.prototype=Object.assign(Object.create(Ht.prototype),{constructor:uE,load:function(t,e,n,i){const r=this,a=new Gs(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,function(l){try{e(r.parse(JSON.parse(l)))}catch(c){i?i(c):console.error(c),r.manager.itemError(t)}},n,i)},parse:function(t){const e=[];for(let n=0;n<t.length;n++){const i=Nr.parse(t[n]);e.push(i)}return e}});function dE(t){Ht.call(this,t)}dE.prototype=Object.assign(Object.create(Ht.prototype),{constructor:dE,load:function(t,e,n,i){const r=this,a=[],l=new qd,c=new Gs(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(r.withCredentials);let u=0;function h(p){c.load(t[p],function(g){const y=r.parse(g,!0);a[p]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},u+=1,u===6&&(y.mipmapCount===1&&(l.minFilter=Kn),l.image=a,l.format=y.format,l.needsUpdate=!0,e&&e(l))},n,i)}if(Array.isArray(t))for(let p=0,g=t.length;p<g;++p)h(p);else c.load(t,function(p){const g=r.parse(p,!0);if(g.isCubemap){const y=g.mipmaps.length/g.mipmapCount;for(let x=0;x<y;x++){a[x]={mipmaps:[]};for(let b=0;b<g.mipmapCount;b++)a[x].mipmaps.push(g.mipmaps[x*g.mipmapCount+b]),a[x].format=g.format,a[x].width=g.width,a[x].height=g.height}l.image=a}else l.image.width=g.width,l.image.height=g.height,l.mipmaps=g.mipmaps;g.mipmapCount===1&&(l.minFilter=Kn),l.format=g.format,l.needsUpdate=!0,e&&e(l)},n,i);return l}});function sm(t){Ht.call(this,t)}sm.prototype=Object.assign(Object.create(Ht.prototype),{constructor:sm,load:function(t,e,n,i){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,a=kc.get(t);if(a!==void 0)return r.manager.itemStart(t),setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a;const l=document.createElementNS("http://www.w3.org/1999/xhtml","img");function c(){l.removeEventListener("load",c,!1),l.removeEventListener("error",u,!1),kc.add(t,this),e&&e(this),r.manager.itemEnd(t)}function u(h){l.removeEventListener("load",c,!1),l.removeEventListener("error",u,!1),i&&i(h),r.manager.itemError(t),r.manager.itemEnd(t)}return l.addEventListener("load",c,!1),l.addEventListener("error",u,!1),t.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),r.manager.itemStart(t),l.src=t,l}});function xv(t){Ht.call(this,t)}xv.prototype=Object.assign(Object.create(Ht.prototype),{constructor:xv,load:function(t,e,n,i){const r=new Wa,a=new sm(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let l=0;function c(u){a.load(t[u],function(h){r.images[u]=h,l++,l===6&&(r.needsUpdate=!0,e&&e(r))},void 0,i)}for(let u=0;u<t.length;++u)c(u);return r}});function hE(t){Ht.call(this,t)}hE.prototype=Object.assign(Object.create(Ht.prototype),{constructor:hE,load:function(t,e,n,i){const r=this,a=new Mc,l=new Gs(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(r.withCredentials),l.load(t,function(c){const u=r.parse(c);u&&(u.image!==void 0?a.image=u.image:u.data!==void 0&&(a.image.width=u.width,a.image.height=u.height,a.image.data=u.data),a.wrapS=u.wrapS!==void 0?u.wrapS:ji,a.wrapT=u.wrapT!==void 0?u.wrapT:ji,a.magFilter=u.magFilter!==void 0?u.magFilter:Kn,a.minFilter=u.minFilter!==void 0?u.minFilter:Kn,a.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.encoding!==void 0&&(a.encoding=u.encoding),u.flipY!==void 0&&(a.flipY=u.flipY),u.format!==void 0&&(a.format=u.format),u.type!==void 0&&(a.type=u.type),u.mipmaps!==void 0&&(a.mipmaps=u.mipmaps,a.minFilter=Fm),u.mipmapCount===1&&(a.minFilter=Kn),a.needsUpdate=!0,e&&e(a,u))},n,i),a}});function vv(t){Ht.call(this,t)}vv.prototype=Object.assign(Object.create(Ht.prototype),{constructor:vv,load:function(t,e,n,i){const r=new Xt,a=new sm(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,function(l){r.image=l;const c=t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0;r.format=c?Uo:Rr,r.needsUpdate=!0,e!==void 0&&e(r)},n,i),r}});function Je(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(Je.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){const t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(t===void 0&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,i=this.getPoint(0),r=0;e.push(0);for(let a=1;a<=t;a++)n=this.getPoint(a/t),r+=n.distanceTo(i),e.push(r),i=n;return this.cacheArcLengths=e,e},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){const n=this.getLengths();let i=0;const r=n.length;let a;e?a=e:a=t*n[r-1];let l=0,c=r-1,u;for(;l<=c;)if(i=Math.floor(l+(c-l)/2),u=n[i]-a,u<0)l=i+1;else if(u>0)c=i-1;else{c=i;break}if(i=c,n[i]===a)return i/(r-1);const h=n[i],g=n[i+1]-h,y=(a-h)/g;return(i+y)/(r-1)},getTangent:function(t,e){let i=t-1e-4,r=t+1e-4;i<0&&(i=0),r>1&&(r=1);const a=this.getPoint(i),l=this.getPoint(r),c=e||(a.isVector2?new Ae:new Y);return c.copy(l).sub(a).normalize(),c},getTangentAt:function(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)},computeFrenetFrames:function(t,e){const n=new Y,i=[],r=[],a=[],l=new Y,c=new bt;for(let y=0;y<=t;y++){const x=y/t;i[y]=this.getTangentAt(x,new Y),i[y].normalize()}r[0]=new Y,a[0]=new Y;let u=Number.MAX_VALUE;const h=Math.abs(i[0].x),p=Math.abs(i[0].y),g=Math.abs(i[0].z);h<=u&&(u=h,n.set(1,0,0)),p<=u&&(u=p,n.set(0,1,0)),g<=u&&n.set(0,0,1),l.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],l),a[0].crossVectors(i[0],r[0]);for(let y=1;y<=t;y++){if(r[y]=r[y-1].clone(),a[y]=a[y-1].clone(),l.crossVectors(i[y-1],i[y]),l.length()>Number.EPSILON){l.normalize();const x=Math.acos(ft.clamp(i[y-1].dot(i[y]),-1,1));r[y].applyMatrix4(c.makeRotationAxis(l,x))}a[y].crossVectors(i[y],r[y])}if(e===!0){let y=Math.acos(ft.clamp(r[0].dot(r[t]),-1,1));y/=t,i[0].dot(l.crossVectors(r[0],r[t]))>0&&(y=-y);for(let x=1;x<=t;x++)r[x].applyMatrix4(c.makeRotationAxis(i[x],y*x)),a[x].crossVectors(i[x],r[x])}return{tangents:i,normals:r,binormals:a}},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}});function yr(t,e,n,i,r,a,l,c){Je.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=l||!1,this.aRotation=c||0}yr.prototype=Object.create(Je.prototype);yr.prototype.constructor=yr;yr.prototype.isEllipseCurve=!0;yr.prototype.getPoint=function(t,e){const n=e||new Ae,i=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const a=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(a?r=0:r=i),this.aClockwise===!0&&!a&&(r===i?r=-i:r=r-i);const l=this.aStartAngle+t*r;let c=this.aX+this.xRadius*Math.cos(l),u=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const h=Math.cos(this.aRotation),p=Math.sin(this.aRotation),g=c-this.aX,y=u-this.aY;c=g*h-y*p+this.aX,u=g*p+y*h+this.aY}return n.set(c,u)};yr.prototype.copy=function(t){return Je.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this};yr.prototype.toJSON=function(){const t=Je.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t};yr.prototype.fromJSON=function(t){return Je.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this};function eh(t,e,n,i,r,a){yr.call(this,t,e,n,n,i,r,a),this.type="ArcCurve"}eh.prototype=Object.create(yr.prototype);eh.prototype.constructor=eh;eh.prototype.isArcCurve=!0;function Jb(){let t=0,e=0,n=0,i=0;function r(a,l,c,u){t=a,e=c,n=-3*a+3*l-2*c-u,i=2*a-2*l+c+u}return{initCatmullRom:function(a,l,c,u,h){r(l,c,h*(c-a),h*(u-l))},initNonuniformCatmullRom:function(a,l,c,u,h,p,g){let y=(l-a)/h-(c-a)/(h+p)+(c-l)/p,x=(c-l)/p-(u-l)/(p+g)+(u-c)/g;y*=p,x*=p,r(l,c,y,x)},calc:function(a){const l=a*a,c=l*a;return t+e*a+n*l+i*c}}}const mp=new Y,Xy=new Jb,Zy=new Jb,Qy=new Jb;function Ii(t=[],e=!1,n="centripetal",i=.5){Je.call(this),this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=i}Ii.prototype=Object.create(Je.prototype);Ii.prototype.constructor=Ii;Ii.prototype.isCatmullRomCurve3=!0;Ii.prototype.getPoint=function(t,e=new Y){const n=e,i=this.points,r=i.length,a=(r-(this.closed?0:1))*t;let l=Math.floor(a),c=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:c===0&&l===r-1&&(l=r-2,c=1);let u,h;this.closed||l>0?u=i[(l-1)%r]:(mp.subVectors(i[0],i[1]).add(i[0]),u=mp);const p=i[l%r],g=i[(l+1)%r];if(this.closed||l+2<r?h=i[(l+2)%r]:(mp.subVectors(i[r-1],i[r-2]).add(i[r-1]),h=mp),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let x=Math.pow(u.distanceToSquared(p),y),b=Math.pow(p.distanceToSquared(g),y),w=Math.pow(g.distanceToSquared(h),y);b<1e-4&&(b=1),x<1e-4&&(x=b),w<1e-4&&(w=b),Xy.initNonuniformCatmullRom(u.x,p.x,g.x,h.x,x,b,w),Zy.initNonuniformCatmullRom(u.y,p.y,g.y,h.y,x,b,w),Qy.initNonuniformCatmullRom(u.z,p.z,g.z,h.z,x,b,w)}else this.curveType==="catmullrom"&&(Xy.initCatmullRom(u.x,p.x,g.x,h.x,this.tension),Zy.initCatmullRom(u.y,p.y,g.y,h.y,this.tension),Qy.initCatmullRom(u.z,p.z,g.z,h.z,this.tension));return n.set(Xy.calc(c),Zy.calc(c),Qy.calc(c)),n};Ii.prototype.copy=function(t){Je.prototype.copy.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this};Ii.prototype.toJSON=function(){const t=Je.prototype.toJSON.call(this);t.points=[];for(let e=0,n=this.points.length;e<n;e++){const i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t};Ii.prototype.fromJSON=function(t){Je.prototype.fromJSON.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const i=t.points[e];this.points.push(new Y().fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this};function fE(t,e,n,i,r){const a=(i-e)*.5,l=(r-n)*.5,c=t*t,u=t*c;return(2*n-2*i+a+l)*u+(-3*n+3*i-2*a-l)*c+a*t+n}function IH(t,e){const n=1-t;return n*n*e}function UH(t,e){return 2*(1-t)*t*e}function VH(t,e){return t*t*e}function Td(t,e,n,i){return IH(t,e)+UH(t,n)+VH(t,i)}function HH(t,e){const n=1-t;return n*n*n*e}function GH(t,e){const n=1-t;return 3*n*n*t*e}function WH(t,e){return 3*(1-t)*t*t*e}function $H(t,e){return t*t*t*e}function Ed(t,e,n,i,r){return HH(t,e)+GH(t,n)+WH(t,i)+$H(t,r)}function is(t=new Ae,e=new Ae,n=new Ae,i=new Ae){Je.call(this),this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=i}is.prototype=Object.create(Je.prototype);is.prototype.constructor=is;is.prototype.isCubicBezierCurve=!0;is.prototype.getPoint=function(t,e=new Ae){const n=e,i=this.v0,r=this.v1,a=this.v2,l=this.v3;return n.set(Ed(t,i.x,r.x,a.x,l.x),Ed(t,i.y,r.y,a.y,l.y)),n};is.prototype.copy=function(t){return Je.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this};is.prototype.toJSON=function(){const t=Je.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t};is.prototype.fromJSON=function(t){return Je.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this};function Ws(t=new Y,e=new Y,n=new Y,i=new Y){Je.call(this),this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=i}Ws.prototype=Object.create(Je.prototype);Ws.prototype.constructor=Ws;Ws.prototype.isCubicBezierCurve3=!0;Ws.prototype.getPoint=function(t,e=new Y){const n=e,i=this.v0,r=this.v1,a=this.v2,l=this.v3;return n.set(Ed(t,i.x,r.x,a.x,l.x),Ed(t,i.y,r.y,a.y,l.y),Ed(t,i.z,r.z,a.z,l.z)),n};Ws.prototype.copy=function(t){return Je.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this};Ws.prototype.toJSON=function(){const t=Je.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t};Ws.prototype.fromJSON=function(t){return Je.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this};function Ui(t=new Ae,e=new Ae){Je.call(this),this.type="LineCurve",this.v1=t,this.v2=e}Ui.prototype=Object.create(Je.prototype);Ui.prototype.constructor=Ui;Ui.prototype.isLineCurve=!0;Ui.prototype.getPoint=function(t,e=new Ae){const n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n};Ui.prototype.getPointAt=function(t,e){return this.getPoint(t,e)};Ui.prototype.getTangent=function(t,e){const n=e||new Ae;return n.copy(this.v2).sub(this.v1).normalize(),n};Ui.prototype.copy=function(t){return Je.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this};Ui.prototype.toJSON=function(){const t=Je.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t};Ui.prototype.fromJSON=function(t){return Je.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this};function rs(t=new Y,e=new Y){Je.call(this),this.type="LineCurve3",this.v1=t,this.v2=e}rs.prototype=Object.create(Je.prototype);rs.prototype.constructor=rs;rs.prototype.isLineCurve3=!0;rs.prototype.getPoint=function(t,e=new Y){const n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n};rs.prototype.getPointAt=function(t,e){return this.getPoint(t,e)};rs.prototype.copy=function(t){return Je.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this};rs.prototype.toJSON=function(){const t=Je.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t};rs.prototype.fromJSON=function(t){return Je.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this};function ss(t=new Ae,e=new Ae,n=new Ae){Je.call(this),this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}ss.prototype=Object.create(Je.prototype);ss.prototype.constructor=ss;ss.prototype.isQuadraticBezierCurve=!0;ss.prototype.getPoint=function(t,e=new Ae){const n=e,i=this.v0,r=this.v1,a=this.v2;return n.set(Td(t,i.x,r.x,a.x),Td(t,i.y,r.y,a.y)),n};ss.prototype.copy=function(t){return Je.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this};ss.prototype.toJSON=function(){const t=Je.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t};ss.prototype.fromJSON=function(t){return Je.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this};function $s(t=new Y,e=new Y,n=new Y){Je.call(this),this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}$s.prototype=Object.create(Je.prototype);$s.prototype.constructor=$s;$s.prototype.isQuadraticBezierCurve3=!0;$s.prototype.getPoint=function(t,e=new Y){const n=e,i=this.v0,r=this.v1,a=this.v2;return n.set(Td(t,i.x,r.x,a.x),Td(t,i.y,r.y,a.y),Td(t,i.z,r.z,a.z)),n};$s.prototype.copy=function(t){return Je.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this};$s.prototype.toJSON=function(){const t=Je.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t};$s.prototype.fromJSON=function(t){return Je.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this};function as(t=[]){Je.call(this),this.type="SplineCurve",this.points=t}as.prototype=Object.create(Je.prototype);as.prototype.constructor=as;as.prototype.isSplineCurve=!0;as.prototype.getPoint=function(t,e=new Ae){const n=e,i=this.points,r=(i.length-1)*t,a=Math.floor(r),l=r-a,c=i[a===0?a:a-1],u=i[a],h=i[a>i.length-2?i.length-1:a+1],p=i[a>i.length-3?i.length-1:a+2];return n.set(fE(l,c.x,u.x,h.x,p.x),fE(l,c.y,u.y,h.y,p.y)),n};as.prototype.copy=function(t){Je.prototype.copy.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const i=t.points[e];this.points.push(i.clone())}return this};as.prototype.toJSON=function(){const t=Je.prototype.toJSON.call(this);t.points=[];for(let e=0,n=this.points.length;e<n;e++){const i=this.points[e];t.points.push(i.toArray())}return t};as.prototype.fromJSON=function(t){Je.prototype.fromJSON.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const i=t.points[e];this.points.push(new Ae().fromArray(i))}return this};var qH=Object.freeze({__proto__:null,ArcCurve:eh,CatmullRomCurve3:Ii,CubicBezierCurve:is,CubicBezierCurve3:Ws,EllipseCurve:yr,LineCurve:Ui,LineCurve3:rs,QuadraticBezierCurve:ss,QuadraticBezierCurve3:$s,SplineCurve:as});function Bo(){Je.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}Bo.prototype=Object.assign(Object.create(Je.prototype),{constructor:Bo,add:function(t){this.curves.push(t)},closePath:function(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Ui(e,t))},getPoint:function(t){const e=t*this.getLength(),n=this.getCurveLengths();let i=0;for(;i<n.length;){if(n[i]>=e){const r=n[i]-e,a=this.curves[i],l=a.getLength(),c=l===0?0:1-r/l;return a.getPointAt(c)}i++}return null},getLength:function(){const t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t=12){const e=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const a=r[i],l=a&&a.isEllipseCurve?t*2:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?t*a.points.length:t,c=a.getPoints(l);for(let u=0;u<c.length;u++){const h=c[u];n&&n.equals(h)||(e.push(h),n=h)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e},copy:function(t){Je.prototype.copy.call(this,t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){const t=Je.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const i=this.curves[e];t.curves.push(i.toJSON())}return t},fromJSON:function(t){Je.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const i=t.curves[e];this.curves.push(new qH[i.type]().fromJSON(i))}return this}});function $r(t){Bo.call(this),this.type="Path",this.currentPoint=new Ae,t&&this.setFromPoints(t)}$r.prototype=Object.assign(Object.create(Bo.prototype),{constructor:$r,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this},moveTo:function(t,e){return this.currentPoint.set(t,e),this},lineTo:function(t,e){const n=new Ui(this.currentPoint.clone(),new Ae(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this},quadraticCurveTo:function(t,e,n,i){const r=new ss(this.currentPoint.clone(),new Ae(t,e),new Ae(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this},bezierCurveTo:function(t,e,n,i,r,a){const l=new is(this.currentPoint.clone(),new Ae(t,e),new Ae(n,i),new Ae(r,a));return this.curves.push(l),this.currentPoint.set(r,a),this},splineThru:function(t){const e=[this.currentPoint.clone()].concat(t),n=new as(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,e,n,i,r,a){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(t+l,e+c,n,i,r,a),this},absarc:function(t,e,n,i,r,a){return this.absellipse(t,e,n,n,i,r,a),this},ellipse:function(t,e,n,i,r,a,l,c){const u=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(t+u,e+h,n,i,r,a,l,c),this},absellipse:function(t,e,n,i,r,a,l,c){const u=new yr(t,e,n,i,r,a,l,c);if(this.curves.length>0){const p=u.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(u);const h=u.getPoint(1);return this.currentPoint.copy(h),this},copy:function(t){return Bo.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){const t=Bo.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return Bo.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}});function mc(t){$r.call(this,t),this.uuid=ft.generateUUID(),this.type="Shape",this.holes=[]}mc.prototype=Object.assign(Object.create($r.prototype),{constructor:mc,getPointsHoles:function(t){const e=[];for(let n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){$r.prototype.copy.call(this,t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const i=t.holes[e];this.holes.push(i.clone())}return this},toJSON:function(){const t=$r.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const i=this.holes[e];t.holes.push(i.toJSON())}return t},fromJSON:function(t){$r.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const i=t.holes[e];this.holes.push(new $r().fromJSON(i))}return this}});function Qt(t,e=1){st.call(this),this.type="Light",this.color=new Xe(t),this.intensity=e}Qt.prototype=Object.assign(Object.create(st.prototype),{constructor:Qt,isLight:!0,copy:function(t){return st.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){const e=st.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),e}});function pE(t,e,n){Qt.call(this,t,n),this.type="HemisphereLight",this.position.copy(st.DefaultUp),this.updateMatrix(),this.groundColor=new Xe(e)}pE.prototype=Object.assign(Object.create(Qt.prototype),{constructor:pE,isHemisphereLight:!0,copy:function(t){return Qt.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}});function qs(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Ae(512,512),this.map=null,this.mapPass=null,this.matrix=new bt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Um,this._frameExtents=new Ae(1,1),this._viewportCount=1,this._viewports=[new Ut(0,0,1,1)]}Object.assign(qs.prototype,{_projScreenMatrix:new bt,_lightPositionWorld:new Y,_lookTarget:new Y,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){const e=this.camera,n=this.matrix,i=this._projScreenMatrix,r=this._lookTarget,a=this._lightPositionWorld;a.setFromMatrixPosition(t.matrixWorld),e.position.copy(a),r.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(r),e.updateMatrixWorld(),i.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(i),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){const t={};return this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}});function bv(){qs.call(this,new Bn(50,1,.5,500)),this.focus=1}bv.prototype=Object.assign(Object.create(qs.prototype),{constructor:bv,isSpotLightShadow:!0,updateMatrices:function(t){const e=this.camera,n=ft.RAD2DEG*2*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;(n!==e.fov||i!==e.aspect||r!==e.far)&&(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix()),qs.prototype.updateMatrices.call(this,t)}});function mE(t,e,n,i,r,a){Qt.call(this,t,e),this.type="SpotLight",this.position.copy(st.DefaultUp),this.updateMatrix(),this.target=new st,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(l){this.intensity=l/Math.PI}}),this.distance=n!==void 0?n:0,this.angle=i!==void 0?i:Math.PI/3,this.penumbra=r!==void 0?r:0,this.decay=a!==void 0?a:1,this.shadow=new bv}mE.prototype=Object.assign(Object.create(Qt.prototype),{constructor:mE,isSpotLight:!0,copy:function(t){return Qt.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}});function wv(){qs.call(this,new Bn(90,1,.5,500)),this._frameExtents=new Ae(4,2),this._viewportCount=6,this._viewports=[new Ut(2,1,1,1),new Ut(0,1,1,1),new Ut(3,1,1,1),new Ut(1,1,1,1),new Ut(3,0,1,1),new Ut(1,0,1,1)],this._cubeDirections=[new Y(1,0,0),new Y(-1,0,0),new Y(0,0,1),new Y(0,0,-1),new Y(0,1,0),new Y(0,-1,0)],this._cubeUps=[new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,0,1),new Y(0,0,-1)]}wv.prototype=Object.assign(Object.create(qs.prototype),{constructor:wv,isPointLightShadow:!0,updateMatrices:function(t,e=0){const n=this.camera,i=this.matrix,r=this._lightPositionWorld,a=this._lookTarget,l=this._projScreenMatrix;r.setFromMatrixPosition(t.matrixWorld),n.position.copy(r),a.copy(n.position),a.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(a),n.updateMatrixWorld(),i.makeTranslation(-r.x,-r.y,-r.z),l.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(l)}});function Ad(t,e,n,i){Qt.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(r){this.intensity=r/(4*Math.PI)}}),this.distance=n!==void 0?n:0,this.decay=i!==void 0?i:1,this.shadow=new wv}Ad.prototype=Object.assign(Object.create(Qt.prototype),{constructor:Ad,isPointLight:!0,copy:function(t){return Qt.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}});function _v(t=-1,e=1,n=1,i=-1,r=.1,a=2e3){Vs.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=r,this.far=a,this.updateProjectionMatrix()}_v.prototype=Object.assign(Object.create(Vs.prototype),{constructor:_v,isOrthographicCamera:!0,copy:function(t,e){return Vs.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,i,r,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-t,a=n+t,l=i+e,c=i-e;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=u*this.view.offsetX,a=r+u*this.view.width,l-=h*this.view.offsetY,c=l-h*this.view.height}this.projectionMatrix.makeOrthographic(r,a,l,c,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(t){const e=st.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}});function Sv(){qs.call(this,new _v(-5,5,5,-5,.5,500))}Sv.prototype=Object.assign(Object.create(qs.prototype),{constructor:Sv,isDirectionalLightShadow:!0,updateMatrices:function(t){qs.prototype.updateMatrices.call(this,t)}});function Mv(t,e){Qt.call(this,t,e),this.type="DirectionalLight",this.position.copy(st.DefaultUp),this.updateMatrix(),this.target=new st,this.shadow=new Sv}Mv.prototype=Object.assign(Object.create(Qt.prototype),{constructor:Mv,isDirectionalLight:!0,copy:function(t){return Qt.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}});function Tv(t,e){Qt.call(this,t,e),this.type="AmbientLight"}Tv.prototype=Object.assign(Object.create(Qt.prototype),{constructor:Tv,isAmbientLight:!0});function gE(t,e,n,i){Qt.call(this,t,e),this.type="RectAreaLight",this.width=n!==void 0?n:10,this.height=i!==void 0?i:10}gE.prototype=Object.assign(Object.create(Qt.prototype),{constructor:gE,isRectAreaLight:!0,copy:function(t){return Qt.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){const e=Qt.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}});class YH{constructor(){Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Y)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const i=e.x,r=e.y,a=e.z,l=this.coefficients;return n.copy(l[0]).multiplyScalar(.282095),n.addScaledVector(l[1],.488603*r),n.addScaledVector(l[2],.488603*a),n.addScaledVector(l[3],.488603*i),n.addScaledVector(l[4],1.092548*(i*r)),n.addScaledVector(l[5],1.092548*(r*a)),n.addScaledVector(l[6],.315392*(3*a*a-1)),n.addScaledVector(l[7],1.092548*(i*a)),n.addScaledVector(l[8],.546274*(i*i-r*r)),n}getIrradianceAt(e,n){const i=e.x,r=e.y,a=e.z,l=this.coefficients;return n.copy(l[0]).multiplyScalar(.886227),n.addScaledVector(l[1],2*.511664*r),n.addScaledVector(l[2],2*.511664*a),n.addScaledVector(l[3],2*.511664*i),n.addScaledVector(l[4],2*.429043*i*r),n.addScaledVector(l[5],2*.429043*r*a),n.addScaledVector(l[6],.743125*a*a-.247708),n.addScaledVector(l[7],2*.429043*i*a),n.addScaledVector(l[8],.429043*(i*i-r*r)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,n+r*3);return this}toArray(e=[],n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,n+r*3);return e}static getBasisAt(e,n){const i=e.x,r=e.y,a=e.z;n[0]=.282095,n[1]=.488603*r,n[2]=.488603*a,n[3]=.488603*i,n[4]=1.092548*i*r,n[5]=1.092548*r*a,n[6]=.315392*(3*a*a-1),n[7]=1.092548*i*a,n[8]=.546274*(i*i-r*r)}}function Jr(t,e){Qt.call(this,void 0,e),this.type="LightProbe",this.sh=t!==void 0?t:new YH}Jr.prototype=Object.assign(Object.create(Qt.prototype),{constructor:Jr,isLightProbe:!0,copy:function(t){return Qt.prototype.copy.call(this,t),this.sh.copy(t.sh),this},fromJSON:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this},toJSON:function(t){const e=Qt.prototype.toJSON.call(this,t);return e.object.sh=this.sh.toArray(),e}});function yE(t){Ht.call(this,t),this.textures={}}yE.prototype=Object.assign(Object.create(Ht.prototype),{constructor:yE,load:function(t,e,n,i){const r=this,a=new Gs(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,function(l){try{e(r.parse(JSON.parse(l)))}catch(c){i?i(c):console.error(c),r.manager.itemError(t)}},n,i)},parse:function(t){const e=this.textures;function n(r){return e[r]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",r),e[r]}const i=new PH[t.type];if(t.uuid!==void 0&&(i.uuid=t.uuid),t.name!==void 0&&(i.name=t.name),t.color!==void 0&&i.color!==void 0&&i.color.setHex(t.color),t.roughness!==void 0&&(i.roughness=t.roughness),t.metalness!==void 0&&(i.metalness=t.metalness),t.sheen!==void 0&&(i.sheen=new Xe().setHex(t.sheen)),t.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(t.emissive),t.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(t.specular),t.shininess!==void 0&&(i.shininess=t.shininess),t.clearcoat!==void 0&&(i.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=t.clearcoatRoughness),t.fog!==void 0&&(i.fog=t.fog),t.flatShading!==void 0&&(i.flatShading=t.flatShading),t.blending!==void 0&&(i.blending=t.blending),t.combine!==void 0&&(i.combine=t.combine),t.side!==void 0&&(i.side=t.side),t.opacity!==void 0&&(i.opacity=t.opacity),t.transparent!==void 0&&(i.transparent=t.transparent),t.alphaTest!==void 0&&(i.alphaTest=t.alphaTest),t.depthTest!==void 0&&(i.depthTest=t.depthTest),t.depthWrite!==void 0&&(i.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(i.colorWrite=t.colorWrite),t.stencilWrite!==void 0&&(i.stencilWrite=t.stencilWrite),t.stencilWriteMask!==void 0&&(i.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(i.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(i.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(i.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(i.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(i.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(i.stencilZPass=t.stencilZPass),t.wireframe!==void 0&&(i.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(i.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(i.rotation=t.rotation),t.linewidth!==1&&(i.linewidth=t.linewidth),t.dashSize!==void 0&&(i.dashSize=t.dashSize),t.gapSize!==void 0&&(i.gapSize=t.gapSize),t.scale!==void 0&&(i.scale=t.scale),t.polygonOffset!==void 0&&(i.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=t.polygonOffsetUnits),t.skinning!==void 0&&(i.skinning=t.skinning),t.morphTargets!==void 0&&(i.morphTargets=t.morphTargets),t.morphNormals!==void 0&&(i.morphNormals=t.morphNormals),t.dithering!==void 0&&(i.dithering=t.dithering),t.vertexTangents!==void 0&&(i.vertexTangents=t.vertexTangents),t.visible!==void 0&&(i.visible=t.visible),t.toneMapped!==void 0&&(i.toneMapped=t.toneMapped),t.userData!==void 0&&(i.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?i.vertexColors=t.vertexColors>0:i.vertexColors=t.vertexColors),t.uniforms!==void 0)for(const r in t.uniforms){const a=t.uniforms[r];switch(i.uniforms[r]={},a.type){case"t":i.uniforms[r].value=n(a.value);break;case"c":i.uniforms[r].value=new Xe().setHex(a.value);break;case"v2":i.uniforms[r].value=new Ae().fromArray(a.value);break;case"v3":i.uniforms[r].value=new Y().fromArray(a.value);break;case"v4":i.uniforms[r].value=new Ut().fromArray(a.value);break;case"m3":i.uniforms[r].value=new ur().fromArray(a.value);break;case"m4":i.uniforms[r].value=new bt().fromArray(a.value);break;default:i.uniforms[r].value=a.value}}if(t.defines!==void 0&&(i.defines=t.defines),t.vertexShader!==void 0&&(i.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(i.fragmentShader=t.fragmentShader),t.extensions!==void 0)for(const r in t.extensions)i.extensions[r]=t.extensions[r];if(t.shading!==void 0&&(i.flatShading=t.shading===1),t.size!==void 0&&(i.size=t.size),t.sizeAttenuation!==void 0&&(i.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(i.map=n(t.map)),t.matcap!==void 0&&(i.matcap=n(t.matcap)),t.alphaMap!==void 0&&(i.alphaMap=n(t.alphaMap)),t.bumpMap!==void 0&&(i.bumpMap=n(t.bumpMap)),t.bumpScale!==void 0&&(i.bumpScale=t.bumpScale),t.normalMap!==void 0&&(i.normalMap=n(t.normalMap)),t.normalMapType!==void 0&&(i.normalMapType=t.normalMapType),t.normalScale!==void 0){let r=t.normalScale;Array.isArray(r)===!1&&(r=[r,r]),i.normalScale=new Ae().fromArray(r)}return t.displacementMap!==void 0&&(i.displacementMap=n(t.displacementMap)),t.displacementScale!==void 0&&(i.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(i.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(i.roughnessMap=n(t.roughnessMap)),t.metalnessMap!==void 0&&(i.metalnessMap=n(t.metalnessMap)),t.emissiveMap!==void 0&&(i.emissiveMap=n(t.emissiveMap)),t.emissiveIntensity!==void 0&&(i.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(i.specularMap=n(t.specularMap)),t.envMap!==void 0&&(i.envMap=n(t.envMap)),t.envMapIntensity!==void 0&&(i.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(i.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(i.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(i.lightMap=n(t.lightMap)),t.lightMapIntensity!==void 0&&(i.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(i.aoMap=n(t.aoMap)),t.aoMapIntensity!==void 0&&(i.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(i.gradientMap=n(t.gradientMap)),t.clearcoatMap!==void 0&&(i.clearcoatMap=n(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=n(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Ae().fromArray(t.clearcoatNormalScale)),t.transmission!==void 0&&(i.transmission=t.transmission),t.transmissionMap!==void 0&&(i.transmissionMap=n(t.transmissionMap)),i},setTextures:function(t){return this.textures=t,this}});const XH={decodeText:function(t){if(typeof TextDecoder<"u")return new TextDecoder().decode(t);let e="";for(let n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch{return e}},extractUrlBase:function(t){const e=t.lastIndexOf("/");return e===-1?"./":t.substr(0,e+1)}};function am(){Ot.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}am.prototype=Object.assign(Object.create(Ot.prototype),{constructor:am,isInstancedBufferGeometry:!0,copy:function(t){return Ot.prototype.copy.call(this,t),this.instanceCount=t.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){const t=Ot.prototype.toJSON.call(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}});function Ev(t,e,n,i){typeof n=="number"&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),yt.call(this,t,e,n),this.meshPerAttribute=i||1}Ev.prototype=Object.assign(Object.create(yt.prototype),{constructor:Ev,isInstancedBufferAttribute:!0,copy:function(t){return yt.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){const t=yt.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}});function xE(t){Ht.call(this,t)}xE.prototype=Object.assign(Object.create(Ht.prototype),{constructor:xE,load:function(t,e,n,i){const r=this,a=new Gs(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,function(l){try{e(r.parse(JSON.parse(l)))}catch(c){i?i(c):console.error(c),r.manager.itemError(t)}},n,i)},parse:function(t){const e={},n={};function i(y,x){if(e[x]!==void 0)return e[x];const w=y.interleavedBuffers[x],T=r(y,w.buffer),_=Xf(w.type,T),S=new dr(_,w.stride);return S.uuid=w.uuid,e[x]=S,S}function r(y,x){if(n[x]!==void 0)return n[x];const w=y.arrayBuffers[x],T=new Uint32Array(w).buffer;return n[x]=T,T}const a=t.isInstancedBufferGeometry?new am:new Ot,l=t.data.index;if(l!==void 0){const y=Xf(l.type,l.array);a.setIndex(new yt(y,1))}const c=t.data.attributes;for(const y in c){const x=c[y];let b;if(x.isInterleavedBufferAttribute){const w=i(t.data,x.data);b=new Xo(w,x.itemSize,x.offset,x.normalized)}else{const w=Xf(x.type,x.array),T=x.isInstancedBufferAttribute?Ev:yt;b=new T(w,x.itemSize,x.normalized)}x.name!==void 0&&(b.name=x.name),a.setAttribute(y,b)}const u=t.data.morphAttributes;if(u)for(const y in u){const x=u[y],b=[];for(let w=0,T=x.length;w<T;w++){const _=x[w];let S;if(_.isInterleavedBufferAttribute){const E=i(t.data,_.data);S=new Xo(E,_.itemSize,_.offset,_.normalized)}else{const E=Xf(_.type,_.array);S=new yt(E,_.itemSize,_.normalized)}_.name!==void 0&&(S.name=_.name),b.push(S)}a.morphAttributes[y]=b}t.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const p=t.data.groups||t.data.drawcalls||t.data.offsets;if(p!==void 0)for(let y=0,x=p.length;y!==x;++y){const b=p[y];a.addGroup(b.start,b.count,b.materialIndex)}const g=t.data.boundingSphere;if(g!==void 0){const y=new Y;g.center!==void 0&&y.fromArray(g.center),a.boundingSphere=new tl(y,g.radius)}return t.name&&(a.name=t.name),t.userData&&(a.userData=t.userData),a}});function vE(t){typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Ht.call(this,t),this.options={premultiplyAlpha:"none"}}vE.prototype=Object.assign(Object.create(Ht.prototype),{constructor:vE,isImageBitmapLoader:!0,setOptions:function(e){return this.options=e,this},load:function(t,e,n,i){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,a=kc.get(t);if(a!==void 0)return r.manager.itemStart(t),setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a;const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",fetch(t,l).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,r.options)}).then(function(c){kc.add(t,c),e&&e(c),r.manager.itemEnd(t)}).catch(function(c){i&&i(c),r.manager.itemError(t),r.manager.itemEnd(t)}),r.manager.itemStart(t)}});function bN(){this.type="ShapePath",this.color=new Xe,this.subPaths=[],this.currentPath=null}Object.assign(bN.prototype,{moveTo:function(t,e){return this.currentPath=new $r,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this},lineTo:function(t,e){return this.currentPath.lineTo(t,e),this},quadraticCurveTo:function(t,e,n,i){return this.currentPath.quadraticCurveTo(t,e,n,i),this},bezierCurveTo:function(t,e,n,i,r,a){return this.currentPath.bezierCurveTo(t,e,n,i,r,a),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,e){function n(_){const S=[];for(let E=0,R=_.length;E<R;E++){const A=_[E],N=new mc;N.curves=A.curves,S.push(N)}return S}function i(_,S){const E=S.length;let R=!1;for(let A=E-1,N=0;N<E;A=N++){let j=S[A],O=S[N],L=O.x-j.x,B=O.y-j.y;if(Math.abs(B)>Number.EPSILON){if(B<0&&(j=S[N],L=-L,O=S[A],B=-B),_.y<j.y||_.y>O.y)continue;if(_.y===j.y){if(_.x===j.x)return!0}else{const F=B*(_.x-j.x)-L*(_.y-j.y);if(F===0)return!0;if(F<0)continue;R=!R}}else{if(_.y!==j.y)continue;if(O.x<=_.x&&_.x<=j.x||j.x<=_.x&&_.x<=O.x)return!0}}return R}const r=Fa.isClockWise,a=this.subPaths;if(a.length===0)return[];if(e===!0)return n(a);let l,c,u;const h=[];if(a.length===1)return c=a[0],u=new mc,u.curves=c.curves,h.push(u),h;let p=!r(a[0].getPoints());p=t?!p:p;const g=[],y=[];let x=[],b=0,w;y[b]=void 0,x[b]=[];for(let _=0,S=a.length;_<S;_++)c=a[_],w=c.getPoints(),l=r(w),l=t?!l:l,l?(!p&&y[b]&&b++,y[b]={s:new mc,p:w},y[b].s.curves=c.curves,p&&b++,x[b]=[]):x[b].push({h:c,p:w[0]});if(!y[0])return n(a);if(y.length>1){let _=!1;const S=[];for(let E=0,R=y.length;E<R;E++)g[E]=[];for(let E=0,R=y.length;E<R;E++){const A=x[E];for(let N=0;N<A.length;N++){const j=A[N];let O=!0;for(let L=0;L<y.length;L++)i(j.p,y[L].p)&&(E!==L&&S.push({froms:E,tos:L,hole:N}),O?(O=!1,g[L].push(j)):_=!0);O&&g[E].push(j)}}S.length>0&&(_||(x=g))}let T;for(let _=0,S=y.length;_<S;_++){u=y[_].s,h.push(u),T=x[_];for(let E=0,R=T.length;E<R;E++)u.holes.push(T[E].h)}return h}});class ZH{constructor(e){Object.defineProperty(this,"isFont",{value:!0}),this.type="Font",this.data=e}generateShapes(e,n=100){const i=[],r=QH(e,n,this.data);for(let a=0,l=r.length;a<l;a++)Array.prototype.push.apply(i,r[a].toShapes());return i}}function QH(t,e,n){const i=Array.from?Array.from(t):String(t).split(""),r=e/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,l=[];let c=0,u=0;for(let h=0;h<i.length;h++){const p=i[h];if(p===`
`)c=0,u-=a;else{const g=JH(p,r,c,u,n);c+=g.offsetX,l.push(g.path)}}return l}function JH(t,e,n,i,r){const a=r.glyphs[t]||r.glyphs["?"];if(!a){console.error('THREE.Font: character "'+t+'" does not exists in font family '+r.familyName+".");return}const l=new bN;let c,u,h,p,g,y,x,b;if(a.o){const w=a._cachedOutline||(a._cachedOutline=a.o.split(" "));for(let T=0,_=w.length;T<_;)switch(w[T++]){case"m":c=w[T++]*e+n,u=w[T++]*e+i,l.moveTo(c,u);break;case"l":c=w[T++]*e+n,u=w[T++]*e+i,l.lineTo(c,u);break;case"q":h=w[T++]*e+n,p=w[T++]*e+i,g=w[T++]*e+n,y=w[T++]*e+i,l.quadraticCurveTo(g,y,h,p);break;case"b":h=w[T++]*e+n,p=w[T++]*e+i,g=w[T++]*e+n,y=w[T++]*e+i,x=w[T++]*e+n,b=w[T++]*e+i,l.bezierCurveTo(g,y,x,b,h,p);break}}return{offsetX:a.ha*e,path:l}}function bE(t){Ht.call(this,t)}bE.prototype=Object.assign(Object.create(Ht.prototype),{constructor:bE,load:function(t,e,n,i){const r=this,a=new Gs(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,function(l){let c;try{c=JSON.parse(l)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),c=JSON.parse(l.substring(65,l.length-2))}const u=r.parse(c);e&&e(u)},n,i)},parse:function(t){return new ZH(t)}});let gp;const KH={getContext:function(){return gp===void 0&&(gp=new(window.AudioContext||window.webkitAudioContext)),gp},setContext:function(t){gp=t}};function wE(t){Ht.call(this,t)}wE.prototype=Object.assign(Object.create(Ht.prototype),{constructor:wE,load:function(t,e,n,i){const r=this,a=new Gs(r.manager);a.setResponseType("arraybuffer"),a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,function(l){try{const c=l.slice(0);KH.getContext().decodeAudioData(c,function(h){e(h)})}catch(c){i?i(c):console.error(c),r.manager.itemError(t)}},n,i)}});function _E(t,e,n){Jr.call(this,void 0,n);const i=new Xe().set(t),r=new Xe().set(e),a=new Y(i.r,i.g,i.b),l=new Y(r.r,r.g,r.b),c=Math.sqrt(Math.PI),u=c*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(l).multiplyScalar(c),this.sh.coefficients[1].copy(a).sub(l).multiplyScalar(u)}_E.prototype=Object.assign(Object.create(Jr.prototype),{constructor:_E,isHemisphereLightProbe:!0,copy:function(t){return Jr.prototype.copy.call(this,t),this},toJSON:function(t){return Jr.prototype.toJSON.call(this,t)}});function SE(t,e){Jr.call(this,void 0,e);const n=new Xe().set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}SE.prototype=Object.assign(Object.create(Jr.prototype),{constructor:SE,isAmbientLightProbe:!0,copy:function(t){return Jr.prototype.copy.call(this,t),this},toJSON:function(t){return Jr.prototype.toJSON.call(this,t)}});const ME=new bt,TE=new bt;function e9(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Bn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Bn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(e9.prototype,{update:function(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep;const i=t.projectionMatrix.clone(),r=e.eyeSep/2,a=r*e.near/e.focus,l=e.near*Math.tan(ft.DEG2RAD*e.fov*.5)/e.zoom;let c,u;TE.elements[12]=-r,ME.elements[12]=r,c=-l*e.aspect+a,u=l*e.aspect+a,i.elements[0]=2*e.near/(u-c),i.elements[8]=(u+c)/(u-c),this.cameraL.projectionMatrix.copy(i),c=-l*e.aspect-a,u=l*e.aspect-a,i.elements[0]=2*e.near/(u-c),i.elements[8]=(u+c)/(u-c),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(TE),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(ME)}});function wN(t,e,n){this.binding=t,this.valueSize=n;let i,r,a;switch(e){case"quaternion":i=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(wN.prototype,{accumulate:function(t,e){const n=this.buffer,i=this.valueSize,r=t*i+i;let a=this.cumulativeWeight;if(a===0){for(let l=0;l!==i;++l)n[r+l]=n[l];a=e}else{a+=e;const l=e/a;this._mixBufferRegion(n,r,0,l,i)}this.cumulativeWeight=a},accumulateAdditive:function(t){const e=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,i,0,t,n),this.cumulativeWeightAdditive+=t},apply:function(t){const e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const c=e*this._origIndex;this._mixBufferRegion(n,i,c,1-r,e)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*e,1,e);for(let c=e,u=e+e;c!==u;++c)if(n[c]!==n[c+e]){l.setValue(n,i);break}},saveOriginalState:function(){const t=this.binding,e=this.buffer,n=this.valueSize,i=n*this._origIndex;t.getValue(e,i);for(let r=n,a=i;r!==a;++r)e[r]=e[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){const t=this.valueSize*3;this.binding.setValue(this.buffer,t)},_setAdditiveIdentityNumeric:function(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]},_select:function(t,e,n,i,r){if(i>=.5)for(let a=0;a!==r;++a)t[e+a]=t[n+a]},_slerp:function(t,e,n,i){Bi.slerpFlat(t,e,t,e,t,n,i)},_slerpAdditive:function(t,e,n,i,r){const a=this._workIndex*r;Bi.multiplyQuaternionsFlat(t,a,t,e,t,n),Bi.slerpFlat(t,e,t,e,t,a,i)},_lerp:function(t,e,n,i,r){const a=1-i;for(let l=0;l!==r;++l){const c=e+l;t[c]=t[c]*a+t[n+l]*i}},_lerpAdditive:function(t,e,n,i,r){for(let a=0;a!==r;++a){const l=e+a;t[l]=t[l]+t[n+a]*i}}});const Kb="\\[\\]\\.:\\/",t9=new RegExp("["+Kb+"]","g"),ew="[^"+Kb+"]",n9="[^"+Kb.replace("\\.","")+"]",i9=/((?:WC+[\/:])*)/.source.replace("WC",ew),r9=/(WCOD+)?/.source.replace("WCOD",n9),s9=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ew),a9=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ew),o9=new RegExp("^"+i9+r9+s9+a9+"$"),l9=["material","materials","bones"];function _N(t,e,n){const i=n||ci.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}Object.assign(_N.prototype,{getValue:function(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(t,e)},setValue:function(t,e){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)},bind:function(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}});function ci(t,e,n){this.path=e,this.parsedPath=n||ci.parseTrackName(e),this.node=ci.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}Object.assign(ci,{Composite:_N,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new ci.Composite(t,e,n):new ci(t,e,n)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(t9,"")},parseTrackName:function(t){const e=o9.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const r=n.nodeName.substring(i+1);l9.indexOf(r)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n},findNode:function(t,e){if(!e||e===""||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(n!==void 0)return n}if(t.children){const n=function(r){for(let a=0;a<r.length;a++){const l=r[a];if(l.name===e||l.uuid===e)return l;const c=n(l.children);if(c)return c}return null},i=n(t.children);if(i)return i}return null}});Object.assign(ci.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,n){e[n]=this.node[this.propertyName]},function(e,n){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)e[n++]=i[r]},function(e,n){e[n]=this.resolvedProperty[this.propertyIndex]},function(e,n){this.resolvedProperty.toArray(e,n)}],SetterByBindingTypeAndVersioning:[[function(e,n){this.targetObject[this.propertyName]=e[n]},function(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0},function(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,n){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[n++]},function(e,n){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[n++];this.targetObject.needsUpdate=!0},function(e,n){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,n){this.resolvedProperty[this.propertyIndex]=e[n]},function(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0},function(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,n){this.resolvedProperty.fromArray(e,n)},function(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0},function(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,n){this.bind(),this.getValue(e,n)},setValue:function(e,n){this.bind(),this.setValue(e,n)},bind:function(){let t=this.node;const e=this.parsedPath,n=e.objectName,i=e.propertyName;let r=e.propertyIndex;if(t||(t=ci.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){let u=e.objectIndex;switch(n){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let h=0;h<t.length;h++)if(t[h].name===u){u=h;break}break;default:if(t[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[n]}if(u!==void 0){if(t[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[u]}}const a=t[i];if(a===void 0){const u=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",t);return}let l=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(r!==void 0){if(i==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[r]!==void 0&&(r=t.morphTargetDictionary[r])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else a.fromArray!==void 0&&a.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});Object.assign(ci.prototype,{_getValue_unbound:ci.prototype.getValue,_setValue_unbound:ci.prototype.setValue});function c9(){this.uuid=ft.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let n=0,i=arguments.length;n!==i;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}Object.assign(c9.prototype,{isAnimationObjectGroup:!0,add:function(){const t=this._objects,e=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,a=r.length;let l,c=t.length,u=this.nCachedObjects_;for(let h=0,p=arguments.length;h!==p;++h){const g=arguments[h],y=g.uuid;let x=e[y];if(x===void 0){x=c++,e[y]=x,t.push(g);for(let b=0,w=a;b!==w;++b)r[b].push(new ci(g,n[b],i[b]))}else if(x<u){l=t[x];const b=--u,w=t[b];e[w.uuid]=x,t[x]=w,e[y]=b,t[b]=g;for(let T=0,_=a;T!==_;++T){const S=r[T],E=S[b];let R=S[x];S[x]=E,R===void 0&&(R=new ci(g,n[T],i[T])),S[b]=R}}else t[x]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u},remove:function(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,h=e[u];if(h!==void 0&&h>=r){const p=r++,g=t[p];e[g.uuid]=h,t[h]=g,e[u]=p,t[p]=c;for(let y=0,x=i;y!==x;++y){const b=n[y],w=b[p],T=b[h];b[h]=w,b[p]=T}}}this.nCachedObjects_=r},uncache:function(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,a=t.length;for(let l=0,c=arguments.length;l!==c;++l){const u=arguments[l],h=u.uuid,p=e[h];if(p!==void 0)if(delete e[h],p<r){const g=--r,y=t[g],x=--a,b=t[x];e[y.uuid]=p,t[p]=y,e[b.uuid]=g,t[g]=b,t.pop();for(let w=0,T=i;w!==T;++w){const _=n[w],S=_[g],E=_[x];_[p]=S,_[g]=E,_.pop()}}else{const g=--a,y=t[g];g>0&&(e[y.uuid]=p),t[p]=y,t.pop();for(let x=0,b=i;x!==b;++x){const w=n[x];w[p]=w[g],w.pop()}}}this.nCachedObjects_=r},subscribe_:function(t,e){const n=this._bindingsIndicesByPath;let i=n[t];const r=this._bindings;if(i!==void 0)return r[i];const a=this._paths,l=this._parsedPaths,c=this._objects,u=c.length,h=this.nCachedObjects_,p=new Array(u);i=r.length,n[t]=i,a.push(t),l.push(e),r.push(p);for(let g=h,y=c.length;g!==y;++g){const x=c[g];p[g]=new ci(x,t,e)}return p},unsubscribe_:function(t){const e=this._bindingsIndicesByPath,n=e[t];if(n!==void 0){const i=this._paths,r=this._parsedPaths,a=this._bindings,l=a.length-1,c=a[l],u=t[l];e[u]=n,a[n]=c,a.pop(),r[n]=r[l],r.pop(),i[n]=i[l],i.pop()}}});class u9{constructor(e,n,i=null,r=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=i,this.blendMode=r;const a=n.tracks,l=a.length,c=new Array(l),u={endingStart:oc,endingEnd:oc};for(let h=0;h!==l;++h){const p=a[h].createInterpolant(null);c[h]=p,p.settings=u}this._interpolantSettings=u,this._interpolants=c,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=PI,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,i){if(e.fadeOut(n),this.fadeIn(n),i){const r=this._clip.duration,a=e._clip.duration,l=a/r,c=r/a;e.warp(1,l,n),this.warp(c,1,n)}return this}crossFadeTo(e,n,i){return e.crossFadeFrom(this,n,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,i){const r=this._mixer,a=r.time,l=this.timeScale;let c=this._timeScaleInterpolant;c===null&&(c=r._lendControlInterpolant(),this._timeScaleInterpolant=c);const u=c.parameterPositions,h=c.sampleValues;return u[0]=a,u[1]=a+i,h[0]=e/l,h[1]=n/l,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,i,r){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const u=(e-a)*i;if(u<0||i===0)return;this._startTime=null,n=i*u}n*=this._updateTimeScale(e);const l=this._updateTime(n),c=this._updateWeight(e);if(c>0){const u=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case K3:for(let p=0,g=u.length;p!==g;++p)u[p].evaluate(l),h[p].accumulateAdditive(c);break;case Zb:default:for(let p=0,g=u.length;p!==g;++p)u[p].evaluate(l),h[p].accumulate(r,c)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,i=this.loop;let r=this.time+e,a=this._loopCount;const l=i===OI;if(e===0)return a===-1?r:l&&(a&1)===1?n-r:r;if(i===DI){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=n)r=n;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),r>=n||r<0){const c=Math.floor(r/n);r-=n*c,a+=Math.abs(c);const u=this.repetitions-a;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?n:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(u===1){const h=e<0;this._setEndings(h,!h,l)}else this._setEndings(!1,!1,l);this._loopCount=a,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:c})}}else this.time=r;if(l&&(a&1)===1)return n-r}return r}_setEndings(e,n,i){const r=this._interpolantSettings;i?(r.endingStart=lc,r.endingEnd=lc):(e?r.endingStart=this.zeroSlopeAtStart?lc:oc:r.endingStart=Jp,n?r.endingEnd=this.zeroSlopeAtEnd?lc:oc:r.endingEnd=Jp)}_scheduleFading(e,n,i){const r=this._mixer,a=r.time;let l=this._weightInterpolant;l===null&&(l=r._lendControlInterpolant(),this._weightInterpolant=l);const c=l.parameterPositions,u=l.sampleValues;return c[0]=a,u[0]=n,c[1]=a+e,u[1]=i,this}}function EE(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}EE.prototype=Object.assign(Object.create(to.prototype),{constructor:EE,_bindAction:function(t,e){const n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,a=t._propertyBindings,l=t._interpolants,c=n.uuid,u=this._bindingsByRootAndName;let h=u[c];h===void 0&&(h={},u[c]=h);for(let p=0;p!==r;++p){const g=i[p],y=g.name;let x=h[y];if(x!==void 0)a[p]=x;else{if(x=a[p],x!==void 0){x._cacheIndex===null&&(++x.referenceCount,this._addInactiveBinding(x,c,y));continue}const b=e&&e._propertyBindings[p].binding.parsedPath;x=new wN(ci.create(n,y,b),g.ValueTypeName,g.getValueSize()),++x.referenceCount,this._addInactiveBinding(x,c,y),a[p]=x}l[p].resultBuffer=x.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const n=(t._localRoot||this._root).uuid,i=t._clip.uuid,r=this._actionsByClip[i];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,i,n)}const e=t._propertyBindings;for(let n=0,i=e.length;n!==i;++n){const r=e[n];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let n=0,i=e.length;n!==i;++n){const r=e[n];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){const e=t._cacheIndex;return e!==null&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){const i=this._actions,r=this._actionsByClip;let a=r[e];if(a===void 0)a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=a;else{const l=a.knownActions;t._byClipCacheIndex=l.length,l.push(t)}t._cacheIndex=i.length,i.push(t),a.actionByRoot[n]=t},_removeInactiveAction:function(t){const e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;const r=t._clip.uuid,a=this._actionsByClip,l=a[r],c=l.knownActions,u=c[c.length-1],h=t._byClipCacheIndex;u._byClipCacheIndex=h,c[h]=u,c.pop(),t._byClipCacheIndex=null;const p=l.actionByRoot,g=(t._localRoot||this._root).uuid;delete p[g],c.length===0&&delete a[r],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){const e=t._propertyBindings;for(let n=0,i=e.length;n!==i;++n){const r=e[n];--r.referenceCount===0&&this._removeInactiveBinding(r)}},_lendAction:function(t){const e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackAction:function(t){const e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_addInactiveBinding:function(t,e,n){const i=this._bindingsByRootAndName,r=this._bindings;let a=i[e];a===void 0&&(a={},i[e]=a),a[n]=t,t._cacheIndex=r.length,r.push(t)},_removeInactiveBinding:function(t){const e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,l=a[i],c=e[e.length-1],u=t._cacheIndex;c._cacheIndex=u,e[u]=c,e.pop(),delete l[r],Object.keys(l).length===0&&delete a[i]},_lendBinding:function(t){const e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackBinding:function(t){const e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_lendControlInterpolant:function(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return n===void 0&&(n=new im(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){const e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e,n){const i=e||this._root,r=i.uuid;let a=typeof t=="string"?Nr.findByName(i,t):t;const l=a!==null?a.uuid:t,c=this._actionsByClip[l];let u=null;if(n===void 0&&(a!==null?n=a.blendMode:n=Zb),c!==void 0){const p=c.actionByRoot[r];if(p!==void 0&&p.blendMode===n)return p;u=c.knownActions[0],a===null&&(a=u._clip)}if(a===null)return null;const h=new u9(this,a,e,n);return this._bindAction(h,u),this._addInactiveAction(h,l,r),h},existingAction:function(t,e){const n=e||this._root,i=n.uuid,r=typeof t=="string"?Nr.findByName(n,t):t,a=r?r.uuid:t,l=this._actionsByClip[a];return l!==void 0&&l.actionByRoot[i]||null},stopAllAction:function(){const t=this._actions,e=this._nActiveActions;for(let n=e-1;n>=0;--n)t[n].stop();return this},update:function(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,i=this.time+=t,r=Math.sign(t),a=this._accuIndex^=1;for(let u=0;u!==n;++u)e[u]._update(i,t,r,a);const l=this._bindings,c=this._nActiveBindings;for(let u=0;u!==c;++u)l[u].apply(a);return this},setTime:function(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)},getRoot:function(){return this._root},uncacheClip:function(t){const e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(r!==void 0){const a=r.knownActions;for(let l=0,c=a.length;l!==c;++l){const u=a[l];this._deactivateAction(u);const h=u._cacheIndex,p=e[e.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,p._cacheIndex=h,e[h]=p,e.pop(),this._removeInactiveBindingsForAction(u)}delete i[n]}},uncacheRoot:function(t){const e=t.uuid,n=this._actionsByClip;for(const a in n){const l=n[a].actionByRoot,c=l[e];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const i=this._bindingsByRootAndName,r=i[e];if(r!==void 0)for(const a in r){const l=r[a];l.restoreOriginalState(),this._removeInactiveBinding(l)}},uncacheAction:function(t,e){const n=this.existingAction(t,e);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}});function AE(t,e,n){dr.call(this,t,e),this.meshPerAttribute=n||1}AE.prototype=Object.assign(Object.create(dr.prototype),{constructor:AE,isInstancedInterleavedBuffer:!0,copy:function(t){return dr.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},clone:function(t){const e=dr.prototype.clone.call(this,t);return e.meshPerAttribute=this.meshPerAttribute,e},toJSON:function(t){const e=dr.prototype.toJSON.call(this,t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}});function SN(t,e,n,i,r){this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=i,this.count=r,this.version=0}Object.defineProperty(SN.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}});Object.assign(SN.prototype,{isGLBufferAttribute:!0,setBuffer:function(t){return this.buffer=t,this},setType:function(t,e){return this.type=t,this.elementSize=e,this},setItemSize:function(t){return this.itemSize=t,this},setCount:function(t){return this.count=t,this}});function MN(t,e,n,i){this.ray=new wh(t,e),this.near=n||0,this.far=i||1/0,this.camera=null,this.layers=new tN,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function CE(t,e){return t.distance-e.distance}function Av(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),i===!0){const r=t.children;for(let a=0,l=r.length;a<l;a++)Av(r[a],e,n,!0)}}Object.assign(MN.prototype,{set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)},intersectObject:function(t,e,n){const i=n||[];return Av(t,this,i,e),i.sort(CE),i},intersectObjects:function(t,e,n){const i=n||[];if(Array.isArray(t)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(let r=0,a=t.length;r<a;r++)Av(t[r],this,i,e);return i.sort(CE),i}});const NE=new Ae;class d9{constructor(e,n){Object.defineProperty(this,"isBox2",{value:!0}),this.min=e!==void 0?e:new Ae(1/0,1/0),this.max=n!==void 0?n:new Ae(-1/0,-1/0)}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=NE.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return e===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Ae),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return e===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Ae),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),n=new Ae),n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),n=new Ae),n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return NE.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}function om(t){st.call(this),this.material=t,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}om.prototype=Object.create(st.prototype);om.prototype.constructor=om;om.prototype.isImmediateRenderObject=!0;const Na=new Y,yp=new bt,Jy=new bt;class h9 extends em{constructor(e){const n=TN(e),i=new Ot,r=[],a=[],l=new Xe(0,0,1),c=new Xe(0,1,0);for(let h=0;h<n.length;h++){const p=n[h];p.parent&&p.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),a.push(l.r,l.g,l.b),a.push(c.r,c.g,c.b))}i.setAttribute("position",new Vt(r,3)),i.setAttribute("color",new Vt(a,3));const u=new gr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,u),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,i=this.geometry,r=i.getAttribute("position");Jy.copy(this.root.matrixWorld).invert();for(let a=0,l=0;a<n.length;a++){const c=n[a];c.parent&&c.parent.isBone&&(yp.multiplyMatrices(Jy,c.matrixWorld),Na.setFromMatrixPosition(yp),r.setXYZ(l,Na.x,Na.y,Na.z),yp.multiplyMatrices(Jy,c.parent.matrixWorld),Na.setFromMatrixPosition(yp),r.setXYZ(l+1,Na.x,Na.y,Na.z),l+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function TN(t){const e=[];t&&t.isBone&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,TN(t.children[n]));return e}class f9 extends em{constructor(e=10,n=10,i=4473924,r=8947848){i=new Xe(i),r=new Xe(r);const a=n/2,l=e/n,c=e/2,u=[],h=[];for(let y=0,x=0,b=-c;y<=n;y++,b+=l){u.push(-c,0,b,c,0,b),u.push(b,0,-c,b,0,c);const w=y===a?i:r;w.toArray(h,x),x+=3,w.toArray(h,x),x+=3,w.toArray(h,x),x+=3,w.toArray(h,x),x+=3}const p=new Ot;p.setAttribute("position",new Vt(u,3)),p.setAttribute("color",new Vt(h,3));const g=new gr({vertexColors:!0,toneMapped:!1});super(p,g),this.type="GridHelper"}}const p9=new Float32Array(1);new Int32Array(p9.buffer);const m9=new Ga({side:On,depthWrite:!1,depthTest:!1});new xn(new Qb,m9);Je.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Je.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t};Object.assign($r.prototype,{fromPoints:function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}});Object.create(Ii.prototype);Object.create(Ii.prototype);function EN(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Ii.call(this,t),this.type="catmullrom"}EN.prototype=Object.create(Ii.prototype);Object.assign(EN.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});f9.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};h9.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Object.assign(Ht.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),XH.extractUrlBase(t)}});Ht.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};Object.assign(d9.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}});Object.assign(el.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}});Object.assign(tl.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}});Um.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)};Object.assign(ft,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),ft.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),ft.ceilPowerOfTwo(t)}});Object.assign(ur.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},getInverse:function(t){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()}});Object.assign(bt.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new Y().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,i,r,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,i,n,r,a)},getInverse:function(t){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()}});Ds.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)};Object.assign(Bi.prototype,{multiplyVector3:function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},inverse:function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()}});Object.assign(wh.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}});Object.assign(ai.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}});Object.assign(ai,{barycoordFromPoint:function(t,e,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ai.getBarycoord(t,e,n,i,r)},normal:function(t,e,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ai.getNormal(t,e,n,i)}});Object.assign(mc.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new vN(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new jH(this,t)}});Object.assign(Ae.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Y.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Ut.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(st.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}});Object.defineProperties(st.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(xn.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});Object.defineProperties(xn.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),BI},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(iv.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(av.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});rv.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(Je.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}});Bn.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(t)};Object.defineProperties(Qt.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}});Object.defineProperties(yt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Vd},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Vd)}}});Object.assign(yt.prototype,{setDynamic:function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(t===!0?Vd:Im),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(Ot.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addAttribute:function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new yt(arguments[1],arguments[2]))):t==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e)},addDrawCall:function(t,e,n){n!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},applyMatrix:function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}});Object.defineProperties(Ot.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(am.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(t){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=t}}});Object.defineProperties(MN.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(t){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=t}}});Object.defineProperties(dr.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===Vd},set:function(t){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(t)}}});Object.assign(dr.prototype,{setDynamic:function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(t===!0?Vd:Im),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(vN.prototype,{getArrays:function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")}});Object.assign(pN.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}});Object.defineProperties(ot.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Xe}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===X3}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}}});Object.defineProperties(Qo.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(Qr.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(t){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=t}}});Object.defineProperties(bi.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}});Object.assign(Sh.prototype,{clearTarget:function(t,e,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,i)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}});Object.defineProperties(Sh.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=t===!0?eN:bh}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(hN.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(Sd.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}});Sc.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)};Sc.prototype.clear=function(t,e,n,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(t,e,n,i)};Yc.crossOrigin=void 0;Yc.loadTexture=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new vv;r.setCrossOrigin(this.crossOrigin);const a=r.load(t,n,void 0,i);return e&&(a.mapping=e),a};Yc.loadTextureCube=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new xv;r.setCrossOrigin(this.crossOrigin);const a=r.load(t,n,void 0,i);return e&&(a.mapping=e),a};Yc.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};Yc.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:$3}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=$3);function js(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AN(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}/*!
 * GSAP 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var zi={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},jc={duration:.5,overwrite:!1,delay:0},tw,Wn,Kt,Kr=1e8,ei=1/Kr,Cv=Math.PI*2,g9=Cv/4,y9=0,CN=Math.sqrt,x9=Math.cos,v9=Math.sin,zn=function(e){return typeof e=="string"},fn=function(e){return typeof e=="function"},Ys=function(e){return typeof e=="number"},nw=function(e){return typeof e>"u"},os=function(e){return typeof e=="object"},gi=function(e){return e!==!1},iw=function(){return typeof window<"u"},xp=function(e){return fn(e)||zn(e)},NN=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},ti=Array.isArray,Nv=/(?:-?\.?\d|\.)+/gi,RN=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,dc=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Ky=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,LN=/[+-]=-?[.\d]+/,kN=/[^,'"\[\]\s]+/gi,b9=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,rn,Gr,Rv,rw,Vi={},lm={},jN,DN=function(e){return(lm=Dc(e,Vi))&&wi},sw=function(e,n){return console.warn("Invalid property",e,"set to",n,"Missing plugin? gsap.registerPlugin()")},th=function(e,n){return!n&&console.warn(e)},PN=function(e,n){return e&&(Vi[e]=n)&&lm&&(lm[e]=n)||Vi},nh=function(){return 0},w9={suppressEvents:!0,isStart:!0,kill:!1},Pp={suppressEvents:!0,kill:!1},_9={suppressEvents:!0},aw={},Ia=[],Lv={},ON,ki={},ex={},RE=30,Op=[],ow="",lw=function(e){var n=e[0],i,r;if(os(n)||fn(n)||(e=[e]),!(i=(n._gsap||{}).harness)){for(r=Op.length;r--&&!Op[r].targetTest(n););i=Op[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new aR(e[r],i)))||e.splice(r,1);return e},Vo=function(e){return e._gsap||lw(hr(e))[0]._gsap},BN=function(e,n,i){return(i=e[n])&&fn(i)?e[n]():nw(i)&&e.getAttribute&&e.getAttribute(n)||i},yi=function(e,n){return(e=e.split(",")).forEach(n)||e},yn=function(e){return Math.round(e*1e5)/1e5||0},Tn=function(e){return Math.round(e*1e7)/1e7||0},gc=function(e,n){var i=n.charAt(0),r=parseFloat(n.substr(2));return e=parseFloat(e),i==="+"?e+r:i==="-"?e-r:i==="*"?e*r:e/r},S9=function(e,n){for(var i=n.length,r=0;e.indexOf(n[r])<0&&++r<i;);return r<i},cm=function(){var e=Ia.length,n=Ia.slice(0),i,r;for(Lv={},Ia.length=0,i=0;i<e;i++)r=n[i],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},zN=function(e,n,i,r){Ia.length&&!Wn&&cm(),e.render(n,i,Wn&&n<0&&(e._initted||e._startAt)),Ia.length&&!Wn&&cm()},FN=function(e){var n=parseFloat(e);return(n||n===0)&&(e+"").match(kN).length<2?n:zn(e)?e.trim():e},IN=function(e){return e},Hi=function(e,n){for(var i in n)i in e||(e[i]=n[i]);return e},M9=function(e){return function(n,i){for(var r in i)r in n||r==="duration"&&e||r==="ease"||(n[r]=i[r])}},Dc=function(e,n){for(var i in n)e[i]=n[i];return e},LE=function t(e,n){for(var i in n)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=os(n[i])?t(e[i]||(e[i]={}),n[i]):n[i]);return e},um=function(e,n){var i={},r;for(r in e)r in n||(i[r]=e[r]);return i},Cd=function(e){var n=e.parent||rn,i=e.keyframes?M9(ti(e.keyframes)):Hi;if(gi(e.inherit))for(;n;)i(e,n.vars.defaults),n=n.parent||n._dp;return e},T9=function(e,n){for(var i=e.length,r=i===n.length;r&&i--&&e[i]===n[i];);return i<0},UN=function(e,n,i,r,a){var l=e[r],c;if(a)for(c=n[a];l&&l[a]>c;)l=l._prev;return l?(n._next=l._next,l._next=n):(n._next=e[i],e[i]=n),n._next?n._next._prev=n:e[r]=n,n._prev=l,n.parent=n._dp=e,n},Hm=function(e,n,i,r){i===void 0&&(i="_first"),r===void 0&&(r="_last");var a=n._prev,l=n._next;a?a._next=l:e[i]===n&&(e[i]=l),l?l._prev=a:e[r]===n&&(e[r]=a),n._next=n._prev=n.parent=null},Ya=function(e,n){e.parent&&(!n||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Ho=function(e,n){if(e&&(!n||n._end>e._dur||n._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},E9=function(e){for(var n=e.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return e},kv=function(e,n,i,r){return e._startAt&&(Wn?e._startAt.revert(Pp):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(n,!0,r))},A9=function t(e){return!e||e._ts&&t(e.parent)},kE=function(e){return e._repeat?Pc(e._tTime,e=e.duration()+e._rDelay)*e:0},Pc=function(e,n){var i=Math.floor(e=Tn(e/n));return e&&i===e?i-1:i},dm=function(e,n){return(e-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},Gm=function(e){return e._end=Tn(e._start+(e._tDur/Math.abs(e._ts||e._rts||ei)||0))},Wm=function(e,n){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=Tn(i._time-(e._ts>0?n/e._ts:((e._dirty?e.totalDuration():e._tDur)-n)/-e._ts)),Gm(e),i._dirty||Ho(i,e)),e},VN=function(e,n){var i;if((n._time||!n._dur&&n._initted||n._start<e._time&&(n._dur||!n.add))&&(i=dm(e.rawTime(),n),(!n._dur||Mh(0,n.totalDuration(),i)-n._tTime>ei)&&n.render(i,!0)),Ho(e,n)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-1e-8}},qr=function(e,n,i,r){return n.parent&&Ya(n),n._start=Tn((Ys(i)?i:i||e!==rn?lr(e,i,n):e._time)+n._delay),n._end=Tn(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),UN(e,n,"_first","_last",e._sort?"_start":0),jv(n)||(e._recent=n),r||VN(e,n),e._ts<0&&Wm(e,e._tTime),e},HN=function(e,n){return(Vi.ScrollTrigger||sw("scrollTrigger",n))&&Vi.ScrollTrigger.create(n,e)},GN=function(e,n,i,r,a){if(uw(e,n,a),!e._initted)return 1;if(!i&&e._pt&&!Wn&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&ON!==Di.frame)return Ia.push(e),e._lazy=[a,r],1},C9=function t(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||t(n))},jv=function(e){var n=e.data;return n==="isFromStart"||n==="isStart"},N9=function(e,n,i,r){var a=e.ratio,l=n<0||!n&&(!e._start&&C9(e)&&!(!e._initted&&jv(e))||(e._ts<0||e._dp._ts<0)&&!jv(e))?0:1,c=e._rDelay,u=0,h,p,g;if(c&&e._repeat&&(u=Mh(0,e._tDur,n),p=Pc(u,c),e._yoyo&&p&1&&(l=1-l),p!==Pc(e._tTime,c)&&(a=1-l,e.vars.repeatRefresh&&e._initted&&e.invalidate())),l!==a||Wn||r||e._zTime===ei||!n&&e._zTime){if(!e._initted&&GN(e,n,r,i,u))return;for(g=e._zTime,e._zTime=n||(i?ei:0),i||(i=n&&!g),e.ratio=l,e._from&&(l=1-l),e._time=0,e._tTime=u,h=e._pt;h;)h.r(l,h.d),h=h._next;n<0&&kv(e,n,i,!0),e._onUpdate&&!i&&Pi(e,"onUpdate"),u&&e._repeat&&!i&&e.parent&&Pi(e,"onRepeat"),(n>=e._tDur||n<0)&&e.ratio===l&&(l&&Ya(e,1),!i&&!Wn&&(Pi(e,l?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=n)},R9=function(e,n,i){var r;if(i>n)for(r=e._first;r&&r._start<=i;){if(r.data==="isPause"&&r._start>n)return r;r=r._next}else for(r=e._last;r&&r._start>=i;){if(r.data==="isPause"&&r._start<n)return r;r=r._prev}},Oc=function(e,n,i,r){var a=e._repeat,l=Tn(n)||0,c=e._tTime/e._tDur;return c&&!r&&(e._time*=l/e._dur),e._dur=l,e._tDur=a?a<0?1e10:Tn(l*(a+1)+e._rDelay*a):l,c>0&&!r&&Wm(e,e._tTime=e._tDur*c),e.parent&&Gm(e),i||Ho(e.parent,e),e},jE=function(e){return e instanceof oi?Ho(e):Oc(e,e._dur)},L9={_start:0,endTime:nh,totalDuration:nh},lr=function t(e,n,i){var r=e.labels,a=e._recent||L9,l=e.duration()>=Kr?a.endTime(!1):e._dur,c,u,h;return zn(n)&&(isNaN(n)||n in r)?(u=n.charAt(0),h=n.substr(-1)==="%",c=n.indexOf("="),u==="<"||u===">"?(c>=0&&(n=n.replace(/=/,"")),(u==="<"?a._start:a.endTime(a._repeat>=0))+(parseFloat(n.substr(1))||0)*(h?(c<0?a:i).totalDuration()/100:1)):c<0?(n in r||(r[n]=l),r[n]):(u=parseFloat(n.charAt(c-1)+n.substr(c+1)),h&&i&&(u=u/100*(ti(i)?i[0]:i).totalDuration()),c>1?t(e,n.substr(0,c-1),i)+u:l+u)):n==null?l:+n},Nd=function(e,n,i){var r=Ys(n[1]),a=(r?2:1)+(e<2?0:1),l=n[a],c,u;if(r&&(l.duration=n[1]),l.parent=i,e){for(c=l,u=i;u&&!("immediateRender"in c);)c=u.vars.defaults||{},u=gi(u.vars.inherit)&&u.parent;l.immediateRender=gi(c.immediateRender),e<2?l.runBackwards=1:l.startAt=n[a-1]}return new Mn(n[0],l,n[a+1])},no=function(e,n){return e||e===0?n(e):n},Mh=function(e,n,i){return i<e?e:i>n?n:i},Qn=function(e,n){return!zn(e)||!(n=b9.exec(e))?"":n[1]},k9=function(e,n,i){return no(i,function(r){return Mh(e,n,r)})},Dv=[].slice,WN=function(e,n){return e&&os(e)&&"length"in e&&(!n&&!e.length||e.length-1 in e&&os(e[0]))&&!e.nodeType&&e!==Gr},j9=function(e,n,i){return i===void 0&&(i=[]),e.forEach(function(r){var a;return zn(r)&&!n||WN(r,1)?(a=i).push.apply(a,hr(r)):i.push(r)})||i},hr=function(e,n,i){return Kt&&!n&&Kt.selector?Kt.selector(e):zn(e)&&!i&&(Rv||!Bc())?Dv.call((n||rw).querySelectorAll(e),0):ti(e)?j9(e,i):WN(e)?Dv.call(e,0):e?[e]:[]},Pv=function(e){return e=hr(e)[0]||th("Invalid scope")||{},function(n){var i=e.current||e.nativeElement||e;return hr(n,i.querySelectorAll?i:i===e?th("Invalid scope")||rw.createElement("div"):e)}},$N=function(e){return e.sort(function(){return .5-Math.random()})},qN=function(e){if(fn(e))return e;var n=os(e)?e:{each:e},i=Go(n.ease),r=n.from||0,a=parseFloat(n.base)||0,l={},c=r>0&&r<1,u=isNaN(r)||c,h=n.axis,p=r,g=r;return zn(r)?p=g={center:.5,edges:.5,end:1}[r]||0:!c&&u&&(p=r[0],g=r[1]),function(y,x,b){var w=(b||n).length,T=l[w],_,S,E,R,A,N,j,O,L;if(!T){if(L=n.grid==="auto"?0:(n.grid||[1,Kr])[1],!L){for(j=-1e8;j<(j=b[L++].getBoundingClientRect().left)&&L<w;);L<w&&L--}for(T=l[w]=[],_=u?Math.min(L,w)*p-.5:r%L,S=L===Kr?0:u?w*g/L-.5:r/L|0,j=0,O=Kr,N=0;N<w;N++)E=N%L-_,R=S-(N/L|0),T[N]=A=h?Math.abs(h==="y"?R:E):CN(E*E+R*R),A>j&&(j=A),A<O&&(O=A);r==="random"&&$N(T),T.max=j-O,T.min=O,T.v=w=(parseFloat(n.amount)||parseFloat(n.each)*(L>w?w-1:h?h==="y"?w/L:L:Math.max(L,w/L))||0)*(r==="edges"?-1:1),T.b=w<0?a-w:a,T.u=Qn(n.amount||n.each)||0,i=i&&w<0?iR(i):i}return w=(T[y]-T.min)/T.max||0,Tn(T.b+(i?i(w):w)*T.v)+T.u}},Ov=function(e){var n=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var r=Tn(Math.round(parseFloat(i)/e)*e*n);return(r-r%1)/n+(Ys(i)?0:Qn(i))}},YN=function(e,n){var i=ti(e),r,a;return!i&&os(e)&&(r=i=e.radius||Kr,e.values?(e=hr(e.values),(a=!Ys(e[0]))&&(r*=r)):e=Ov(e.increment)),no(n,i?fn(e)?function(l){return a=e(l),Math.abs(a-l)<=r?a:l}:function(l){for(var c=parseFloat(a?l.x:l),u=parseFloat(a?l.y:0),h=Kr,p=0,g=e.length,y,x;g--;)a?(y=e[g].x-c,x=e[g].y-u,y=y*y+x*x):y=Math.abs(e[g]-c),y<h&&(h=y,p=g);return p=!r||h<=r?e[p]:l,a||p===l||Ys(l)?p:p+Qn(l)}:Ov(e))},XN=function(e,n,i,r){return no(ti(e)?!n:i===!0?!!(i=0):!r,function(){return ti(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(n-e+i*.99))/i)*i*r)/r})},D9=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return function(r){return n.reduce(function(a,l){return l(a)},r)}},P9=function(e,n){return function(i){return e(parseFloat(i))+(n||Qn(i))}},O9=function(e,n,i){return QN(e,n,0,1,i)},ZN=function(e,n,i){return no(i,function(r){return e[~~n(r)]})},B9=function t(e,n,i){var r=n-e;return ti(e)?ZN(e,t(0,e.length),n):no(i,function(a){return(r+(a-e)%r)%r+e})},z9=function t(e,n,i){var r=n-e,a=r*2;return ti(e)?ZN(e,t(0,e.length-1),n):no(i,function(l){return l=(a+(l-e)%a)%a||0,e+(l>r?a-l:l)})},ih=function(e){for(var n=0,i="",r,a,l,c;~(r=e.indexOf("random(",n));)l=e.indexOf(")",r),c=e.charAt(r+7)==="[",a=e.substr(r+7,l-r-7).match(c?kN:Nv),i+=e.substr(n,r-n)+XN(c?a:+a[0],c?0:+a[1],+a[2]||1e-5),n=l+1;return i+e.substr(n,e.length-n)},QN=function(e,n,i,r,a){var l=n-e,c=r-i;return no(a,function(u){return i+((u-e)/l*c||0)})},F9=function t(e,n,i,r){var a=isNaN(e+n)?0:function(x){return(1-x)*e+x*n};if(!a){var l=zn(e),c={},u,h,p,g,y;if(i===!0&&(r=1)&&(i=null),l)e={p:e},n={p:n};else if(ti(e)&&!ti(n)){for(p=[],g=e.length,y=g-2,h=1;h<g;h++)p.push(t(e[h-1],e[h]));g--,a=function(b){b*=g;var w=Math.min(y,~~b);return p[w](b-w)},i=n}else r||(e=Dc(ti(e)?[]:{},e));if(!p){for(u in n)cw.call(c,e,u,"get",n[u]);a=function(b){return fw(b,c)||(l?e.p:e)}}}return no(i,a)},DE=function(e,n,i){var r=e.labels,a=Kr,l,c,u;for(l in r)c=r[l]-n,c<0==!!i&&c&&a>(c=Math.abs(c))&&(u=l,a=c);return u},Pi=function(e,n,i){var r=e.vars,a=r[n],l=Kt,c=e._ctx,u,h,p;if(a)return u=r[n+"Params"],h=r.callbackScope||e,i&&Ia.length&&cm(),c&&(Kt=c),p=u?a.apply(h,u):a.call(h),Kt=l,p},hd=function(e){return Ya(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Wn),e.progress()<1&&Pi(e,"onInterrupt"),e},hc,JN=[],KN=function(e){if(e)if(e=!e.name&&e.default||e,iw()||e.headless){var n=e.name,i=fn(e),r=n&&!i&&e.init?function(){this._props=[]}:e,a={init:nh,render:fw,add:cw,kill:tG,modifier:eG,rawVars:0},l={targetTest:0,get:0,getSetter:hw,aliases:{},register:0};if(Bc(),e!==r){if(ki[n])return;Hi(r,Hi(um(e,a),l)),Dc(r.prototype,Dc(a,um(e,l))),ki[r.prop=n]=r,e.targetTest&&(Op.push(r),aw[n]=1),n=(n==="css"?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}PN(n,r),e.register&&e.register(wi,r,xi)}else JN.push(e)},It=255,fd={aqua:[0,It,It],lime:[0,It,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,It],navy:[0,0,128],white:[It,It,It],olive:[128,128,0],yellow:[It,It,0],orange:[It,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[It,0,0],pink:[It,192,203],cyan:[0,It,It],transparent:[It,It,It,0]},tx=function(e,n,i){return e+=e<0?1:e>1?-1:0,(e*6<1?n+(i-n)*e*6:e<.5?i:e*3<2?n+(i-n)*(2/3-e)*6:n)*It+.5|0},eR=function(e,n,i){var r=e?Ys(e)?[e>>16,e>>8&It,e&It]:0:fd.black,a,l,c,u,h,p,g,y,x,b;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),fd[e])r=fd[e];else if(e.charAt(0)==="#"){if(e.length<6&&(a=e.charAt(1),l=e.charAt(2),c=e.charAt(3),e="#"+a+a+l+l+c+c+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&It,r&It,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&It,e&It]}else if(e.substr(0,3)==="hsl"){if(r=b=e.match(Nv),!n)u=+r[0]%360/360,h=+r[1]/100,p=+r[2]/100,l=p<=.5?p*(h+1):p+h-p*h,a=p*2-l,r.length>3&&(r[3]*=1),r[0]=tx(u+1/3,a,l),r[1]=tx(u,a,l),r[2]=tx(u-1/3,a,l);else if(~e.indexOf("="))return r=e.match(RN),i&&r.length<4&&(r[3]=1),r}else r=e.match(Nv)||fd.transparent;r=r.map(Number)}return n&&!b&&(a=r[0]/It,l=r[1]/It,c=r[2]/It,g=Math.max(a,l,c),y=Math.min(a,l,c),p=(g+y)/2,g===y?u=h=0:(x=g-y,h=p>.5?x/(2-g-y):x/(g+y),u=g===a?(l-c)/x+(l<c?6:0):g===l?(c-a)/x+2:(a-l)/x+4,u*=60),r[0]=~~(u+.5),r[1]=~~(h*100+.5),r[2]=~~(p*100+.5)),i&&r.length<4&&(r[3]=1),r},tR=function(e){var n=[],i=[],r=-1;return e.split(Ua).forEach(function(a){var l=a.match(dc)||[];n.push.apply(n,l),i.push(r+=l.length+1)}),n.c=i,n},PE=function(e,n,i){var r="",a=(e+r).match(Ua),l=n?"hsla(":"rgba(",c=0,u,h,p,g;if(!a)return e;if(a=a.map(function(y){return(y=eR(y,n,1))&&l+(n?y[0]+","+y[1]+"%,"+y[2]+"%,"+y[3]:y.join(","))+")"}),i&&(p=tR(e),u=i.c,u.join(r)!==p.c.join(r)))for(h=e.replace(Ua,"1").split(dc),g=h.length-1;c<g;c++)r+=h[c]+(~u.indexOf(c)?a.shift()||l+"0,0,0,0)":(p.length?p:a.length?a:i).shift());if(!h)for(h=e.split(Ua),g=h.length-1;c<g;c++)r+=h[c]+a[c];return r+h[g]},Ua=function(){var t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in fd)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),I9=/hsl[a]?\(/,nR=function(e){var n=e.join(" "),i;if(Ua.lastIndex=0,Ua.test(n))return i=I9.test(n),e[1]=PE(e[1],i),e[0]=PE(e[0],i,tR(e[1])),!0},rh,Di=function(){var t=Date.now,e=500,n=33,i=t(),r=i,a=1e3/240,l=a,c=[],u,h,p,g,y,x,b=function w(T){var _=t()-r,S=T===!0,E,R,A,N;if((_>e||_<0)&&(i+=_-n),r+=_,A=r-i,E=A-l,(E>0||S)&&(N=++g.frame,y=A-g.time*1e3,g.time=A=A/1e3,l+=E+(E>=a?4:a-E),R=1),S||(u=h(w)),R)for(x=0;x<c.length;x++)c[x](A,y,N,T)};return g={time:0,frame:0,tick:function(){b(!0)},deltaRatio:function(T){return y/(1e3/(T||60))},wake:function(){jN&&(!Rv&&iw()&&(Gr=Rv=window,rw=Gr.document||{},Vi.gsap=wi,(Gr.gsapVersions||(Gr.gsapVersions=[])).push(wi.version),DN(lm||Gr.GreenSockGlobals||!Gr.gsap&&Gr||{}),JN.forEach(KN)),p=typeof requestAnimationFrame<"u"&&requestAnimationFrame,u&&g.sleep(),h=p||function(T){return setTimeout(T,l-g.time*1e3+1|0)},rh=1,b(2))},sleep:function(){(p?cancelAnimationFrame:clearTimeout)(u),rh=0,h=nh},lagSmoothing:function(T,_){e=T||1/0,n=Math.min(_||33,e)},fps:function(T){a=1e3/(T||240),l=g.time*1e3+a},add:function(T,_,S){var E=_?function(R,A,N,j){T(R,A,N,j),g.remove(E)}:T;return g.remove(T),c[S?"unshift":"push"](E),Bc(),E},remove:function(T,_){~(_=c.indexOf(T))&&c.splice(_,1)&&x>=_&&x--},_listeners:c},g}(),Bc=function(){return!rh&&Di.wake()},Et={},U9=/^[\d.\-M][\d.\-,\s]/,V9=/["']/g,H9=function(e){for(var n={},i=e.substr(1,e.length-3).split(":"),r=i[0],a=1,l=i.length,c,u,h;a<l;a++)u=i[a],c=a!==l-1?u.lastIndexOf(","):u.length,h=u.substr(0,c),n[r]=isNaN(h)?h.replace(V9,"").trim():+h,r=u.substr(c+1).trim();return n},G9=function(e){var n=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",n);return e.substring(n,~r&&r<i?e.indexOf(")",i+1):i)},W9=function(e){var n=(e+"").split("("),i=Et[n[0]];return i&&n.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[H9(n[1])]:G9(e).split(",").map(FN)):Et._CE&&U9.test(e)?Et._CE("",e):i},iR=function(e){return function(n){return 1-e(1-n)}},rR=function t(e,n){for(var i=e._first,r;i;)i instanceof oi?t(i,n):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==n&&(i.timeline?t(i.timeline,n):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=n)),i=i._next},Go=function(e,n){return e&&(fn(e)?e:Et[e]||W9(e))||n},nl=function(e,n,i,r){i===void 0&&(i=function(u){return 1-n(1-u)}),r===void 0&&(r=function(u){return u<.5?n(u*2)/2:1-n((1-u)*2)/2});var a={easeIn:n,easeOut:i,easeInOut:r},l;return yi(e,function(c){Et[c]=Vi[c]=a,Et[l=c.toLowerCase()]=i;for(var u in a)Et[l+(u==="easeIn"?".in":u==="easeOut"?".out":".inOut")]=Et[c+"."+u]=a[u]}),a},sR=function(e){return function(n){return n<.5?(1-e(1-n*2))/2:.5+e((n-.5)*2)/2}},nx=function t(e,n,i){var r=n>=1?n:1,a=(i||(e?.3:.45))/(n<1?n:1),l=a/Cv*(Math.asin(1/r)||0),c=function(p){return p===1?1:r*Math.pow(2,-10*p)*v9((p-l)*a)+1},u=e==="out"?c:e==="in"?function(h){return 1-c(1-h)}:sR(c);return a=Cv/a,u.config=function(h,p){return t(e,h,p)},u},ix=function t(e,n){n===void 0&&(n=1.70158);var i=function(l){return l?--l*l*((n+1)*l+n)+1:0},r=e==="out"?i:e==="in"?function(a){return 1-i(1-a)}:sR(i);return r.config=function(a){return t(e,a)},r};yi("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var n=e<5?e+1:e;nl(t+",Power"+(n-1),e?function(i){return Math.pow(i,n)}:function(i){return i},function(i){return 1-Math.pow(1-i,n)},function(i){return i<.5?Math.pow(i*2,n)/2:1-Math.pow((1-i)*2,n)/2})});Et.Linear.easeNone=Et.none=Et.Linear.easeIn;nl("Elastic",nx("in"),nx("out"),nx());(function(t,e){var n=1/e,i=2*n,r=2.5*n,a=function(c){return c<n?t*c*c:c<i?t*Math.pow(c-1.5/e,2)+.75:c<r?t*(c-=2.25/e)*c+.9375:t*Math.pow(c-2.625/e,2)+.984375};nl("Bounce",function(l){return 1-a(1-l)},a)})(7.5625,2.75);nl("Expo",function(t){return Math.pow(2,10*(t-1))*t+t*t*t*t*t*t*(1-t)});nl("Circ",function(t){return-(CN(1-t*t)-1)});nl("Sine",function(t){return t===1?1:-x9(t*g9)+1});nl("Back",ix("in"),ix("out"),ix());Et.SteppedEase=Et.steps=Vi.SteppedEase={config:function(e,n){e===void 0&&(e=1);var i=1/e,r=e+(n?0:1),a=n?1:0,l=1-ei;return function(c){return((r*Mh(0,l,c)|0)+a)*i}}};jc.ease=Et["quad.out"];yi("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return ow+=t+","+t+"Params,"});var aR=function(e,n){this.id=y9++,e._gsap=this,this.target=e,this.harness=n,this.get=n?n.get:BN,this.set=n?n.getSetter:hw},sh=function(){function t(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,Oc(this,+n.duration,1,1),this.data=n.data,Kt&&(this._ctx=Kt,Kt.data.push(this)),rh||Di.wake()}var e=t.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,Oc(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,r){if(Bc(),!arguments.length)return this._tTime;var a=this._dp;if(a&&a.smoothChildTiming&&this._ts){for(Wm(this,i),!a._dp||a.parent||VN(a,this);a&&a.parent;)a.parent._time!==a._start+(a._ts>=0?a._tTime/a._ts:(a.totalDuration()-a._tTime)/-a._ts)&&a.totalTime(a._tTime,!0),a=a.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&qr(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===ei||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),zN(this,i,r)),this},e.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+kE(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},e.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+kE(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,r){var a=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*a,r):this._repeat?Pc(this._tTime,a)+1:1},e.timeScale=function(i,r){if(!arguments.length)return this._rts===-1e-8?0:this._rts;if(this._rts===i)return this;var a=this.parent&&this._ts?dm(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-1e-8?0:this._rts,this.totalTime(Mh(-Math.abs(this._delay),this._tDur,a),r!==!1),Gm(this),E9(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Bc(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==ei&&(this._tTime-=ei)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&qr(r,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(gi(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?dm(r.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=_9);var r=Wn;return Wn=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),Wn=r,this},e.globalTime=function(i){for(var r=this,a=arguments.length?i:r.rawTime();r;)a=r._start+a/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(i):a},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,jE(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,jE(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,r){return this.totalTime(lr(this,i),gi(r))},e.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,gi(r)),this._dur||(this._zTime=-1e-8),this},e.play=function(i,r){return i!=null&&this.seek(i,r),this.reversed(!1).paused(!1)},e.reverse=function(i,r){return i!=null&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(i,r){return i!=null&&this.seek(i,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var i=this.parent||this._dp,r=this._start,a;return!!(!i||this._ts&&this._initted&&i.isActive()&&(a=i.rawTime(!0))>=r&&a<this.endTime(!0)-ei)},e.eventCallback=function(i,r,a){var l=this.vars;return arguments.length>1?(r?(l[i]=r,a&&(l[i+"Params"]=a),i==="onUpdate"&&(this._onUpdate=r)):delete l[i],this):l[i]},e.then=function(i){var r=this;return new Promise(function(a){var l=fn(i)?i:IN,c=function(){var h=r.then;r.then=null,fn(l)&&(l=l(r))&&(l.then||l===r)&&(r.then=h),a(l),r.then=h};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?c():r._prom=c})},e.kill=function(){hd(this)},t}();Hi(sh.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var oi=function(t){AN(e,t);function e(i,r){var a;return i===void 0&&(i={}),a=t.call(this,i)||this,a.labels={},a.smoothChildTiming=!!i.smoothChildTiming,a.autoRemoveChildren=!!i.autoRemoveChildren,a._sort=gi(i.sortChildren),rn&&qr(i.parent||rn,js(a),r),i.reversed&&a.reverse(),i.paused&&a.paused(!0),i.scrollTrigger&&HN(js(a),i.scrollTrigger),a}var n=e.prototype;return n.to=function(r,a,l){return Nd(0,arguments,this),this},n.from=function(r,a,l){return Nd(1,arguments,this),this},n.fromTo=function(r,a,l,c){return Nd(2,arguments,this),this},n.set=function(r,a,l){return a.duration=0,a.parent=this,Cd(a).repeatDelay||(a.repeat=0),a.immediateRender=!!a.immediateRender,new Mn(r,a,lr(this,l),1),this},n.call=function(r,a,l){return qr(this,Mn.delayedCall(0,r,a),l)},n.staggerTo=function(r,a,l,c,u,h,p){return l.duration=a,l.stagger=l.stagger||c,l.onComplete=h,l.onCompleteParams=p,l.parent=this,new Mn(r,l,lr(this,u)),this},n.staggerFrom=function(r,a,l,c,u,h,p){return l.runBackwards=1,Cd(l).immediateRender=gi(l.immediateRender),this.staggerTo(r,a,l,c,u,h,p)},n.staggerFromTo=function(r,a,l,c,u,h,p,g){return c.startAt=l,Cd(c).immediateRender=gi(c.immediateRender),this.staggerTo(r,a,c,u,h,p,g)},n.render=function(r,a,l){var c=this._time,u=this._dirty?this.totalDuration():this._tDur,h=this._dur,p=r<=0?0:Tn(r),g=this._zTime<0!=r<0&&(this._initted||!h),y,x,b,w,T,_,S,E,R,A,N,j;if(this!==rn&&p>u&&r>=0&&(p=u),p!==this._tTime||l||g){if(c!==this._time&&h&&(p+=this._time-c,r+=this._time-c),y=p,R=this._start,E=this._ts,_=!E,g&&(h||(c=this._zTime),(r||!a)&&(this._zTime=r)),this._repeat){if(N=this._yoyo,T=h+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(T*100+r,a,l);if(y=Tn(p%T),p===u?(w=this._repeat,y=h):(A=Tn(p/T),w=~~A,w&&w===A&&(y=h,w--),y>h&&(y=h)),A=Pc(this._tTime,T),!c&&this._tTime&&A!==w&&this._tTime-A*T-this._dur<=0&&(A=w),N&&w&1&&(y=h-y,j=1),w!==A&&!this._lock){var O=N&&A&1,L=O===(N&&w&1);if(w<A&&(O=!O),c=O?0:p%h?h:p,this._lock=1,this.render(c||(j?0:Tn(w*T)),a,!h)._lock=0,this._tTime=p,!a&&this.parent&&Pi(this,"onRepeat"),this.vars.repeatRefresh&&!j&&(this.invalidate()._lock=1),c&&c!==this._time||_!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(h=this._dur,u=this._tDur,L&&(this._lock=2,c=O?h:-1e-4,this.render(c,!0),this.vars.repeatRefresh&&!j&&this.invalidate()),this._lock=0,!this._ts&&!_)return this;rR(this,j)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(S=R9(this,Tn(c),Tn(y)),S&&(p-=y-(y=S._start))),this._tTime=p,this._time=y,this._act=!E,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,c=0),!c&&y&&!a&&!w&&(Pi(this,"onStart"),this._tTime!==p))return this;if(y>=c&&r>=0)for(x=this._first;x;){if(b=x._next,(x._act||y>=x._start)&&x._ts&&S!==x){if(x.parent!==this)return this.render(r,a,l);if(x.render(x._ts>0?(y-x._start)*x._ts:(x._dirty?x.totalDuration():x._tDur)+(y-x._start)*x._ts,a,l),y!==this._time||!this._ts&&!_){S=0,b&&(p+=this._zTime=-1e-8);break}}x=b}else{x=this._last;for(var B=r<0?r:y;x;){if(b=x._prev,(x._act||B<=x._end)&&x._ts&&S!==x){if(x.parent!==this)return this.render(r,a,l);if(x.render(x._ts>0?(B-x._start)*x._ts:(x._dirty?x.totalDuration():x._tDur)+(B-x._start)*x._ts,a,l||Wn&&(x._initted||x._startAt)),y!==this._time||!this._ts&&!_){S=0,b&&(p+=this._zTime=B?-1e-8:ei);break}}x=b}}if(S&&!a&&(this.pause(),S.render(y>=c?0:-1e-8)._zTime=y>=c?1:-1,this._ts))return this._start=R,Gm(this),this.render(r,a,l);this._onUpdate&&!a&&Pi(this,"onUpdate",!0),(p===u&&this._tTime>=this.totalDuration()||!p&&c)&&(R===this._start||Math.abs(E)!==Math.abs(this._ts))&&(this._lock||((r||!h)&&(p===u&&this._ts>0||!p&&this._ts<0)&&Ya(this,1),!a&&!(r<0&&!c)&&(p||c||!u)&&(Pi(this,p===u&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(p<u&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(r,a){var l=this;if(Ys(a)||(a=lr(this,a,r)),!(r instanceof sh)){if(ti(r))return r.forEach(function(c){return l.add(c,a)}),this;if(zn(r))return this.addLabel(r,a);if(fn(r))r=Mn.delayedCall(0,r);else return this}return this!==r?qr(this,r,a):this},n.getChildren=function(r,a,l,c){r===void 0&&(r=!0),a===void 0&&(a=!0),l===void 0&&(l=!0),c===void 0&&(c=-1e8);for(var u=[],h=this._first;h;)h._start>=c&&(h instanceof Mn?a&&u.push(h):(l&&u.push(h),r&&u.push.apply(u,h.getChildren(!0,a,l)))),h=h._next;return u},n.getById=function(r){for(var a=this.getChildren(1,1,1),l=a.length;l--;)if(a[l].vars.id===r)return a[l]},n.remove=function(r){return zn(r)?this.removeLabel(r):fn(r)?this.killTweensOf(r):(r.parent===this&&Hm(this,r),r===this._recent&&(this._recent=this._last),Ho(this))},n.totalTime=function(r,a){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Tn(Di.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),t.prototype.totalTime.call(this,r,a),this._forcing=0,this):this._tTime},n.addLabel=function(r,a){return this.labels[r]=lr(this,a),this},n.removeLabel=function(r){return delete this.labels[r],this},n.addPause=function(r,a,l){var c=Mn.delayedCall(0,a||nh,l);return c.data="isPause",this._hasPause=1,qr(this,c,lr(this,r))},n.removePause=function(r){var a=this._first;for(r=lr(this,r);a;)a._start===r&&a.data==="isPause"&&Ya(a),a=a._next},n.killTweensOf=function(r,a,l){for(var c=this.getTweensOf(r,l),u=c.length;u--;)Da!==c[u]&&c[u].kill(r,a);return this},n.getTweensOf=function(r,a){for(var l=[],c=hr(r),u=this._first,h=Ys(a),p;u;)u instanceof Mn?S9(u._targets,c)&&(h?(!Da||u._initted&&u._ts)&&u.globalTime(0)<=a&&u.globalTime(u.totalDuration())>a:!a||u.isActive())&&l.push(u):(p=u.getTweensOf(c,a)).length&&l.push.apply(l,p),u=u._next;return l},n.tweenTo=function(r,a){a=a||{};var l=this,c=lr(l,r),u=a,h=u.startAt,p=u.onStart,g=u.onStartParams,y=u.immediateRender,x,b=Mn.to(l,Hi({ease:a.ease||"none",lazy:!1,immediateRender:!1,time:c,overwrite:"auto",duration:a.duration||Math.abs((c-(h&&"time"in h?h.time:l._time))/l.timeScale())||ei,onStart:function(){if(l.pause(),!x){var T=a.duration||Math.abs((c-(h&&"time"in h?h.time:l._time))/l.timeScale());b._dur!==T&&Oc(b,T,0,1).render(b._time,!0,!0),x=1}p&&p.apply(b,g||[])}},a));return y?b.render(0):b},n.tweenFromTo=function(r,a,l){return this.tweenTo(a,Hi({startAt:{time:lr(this,r)}},l))},n.recent=function(){return this._recent},n.nextLabel=function(r){return r===void 0&&(r=this._time),DE(this,lr(this,r))},n.previousLabel=function(r){return r===void 0&&(r=this._time),DE(this,lr(this,r),1)},n.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+ei)},n.shiftChildren=function(r,a,l){l===void 0&&(l=0);for(var c=this._first,u=this.labels,h;c;)c._start>=l&&(c._start+=r,c._end+=r),c=c._next;if(a)for(h in u)u[h]>=l&&(u[h]+=r);return Ho(this)},n.invalidate=function(r){var a=this._first;for(this._lock=0;a;)a.invalidate(r),a=a._next;return t.prototype.invalidate.call(this,r)},n.clear=function(r){r===void 0&&(r=!0);for(var a=this._first,l;a;)l=a._next,this.remove(a),a=l;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Ho(this)},n.totalDuration=function(r){var a=0,l=this,c=l._last,u=Kr,h,p,g;if(arguments.length)return l.timeScale((l._repeat<0?l.duration():l.totalDuration())/(l.reversed()?-r:r));if(l._dirty){for(g=l.parent;c;)h=c._prev,c._dirty&&c.totalDuration(),p=c._start,p>u&&l._sort&&c._ts&&!l._lock?(l._lock=1,qr(l,c,p-c._delay,1)._lock=0):u=p,p<0&&c._ts&&(a-=p,(!g&&!l._dp||g&&g.smoothChildTiming)&&(l._start+=p/l._ts,l._time-=p,l._tTime-=p),l.shiftChildren(-p,!1,-1/0),u=0),c._end>a&&c._ts&&(a=c._end),c=h;Oc(l,l===rn&&l._time>a?l._time:a,1,1),l._dirty=0}return l._tDur},e.updateRoot=function(r){if(rn._ts&&(zN(rn,dm(r,rn)),ON=Di.frame),Di.frame>=RE){RE+=zi.autoSleep||120;var a=rn._first;if((!a||!a._ts)&&zi.autoSleep&&Di._listeners.length<2){for(;a&&!a._ts;)a=a._next;a||Di.sleep()}}},e}(sh);Hi(oi.prototype,{_lock:0,_hasPause:0,_forcing:0});var $9=function(e,n,i,r,a,l,c){var u=new xi(this._pt,e,n,0,1,hR,null,a),h=0,p=0,g,y,x,b,w,T,_,S;for(u.b=i,u.e=r,i+="",r+="",(_=~r.indexOf("random("))&&(r=ih(r)),l&&(S=[i,r],l(S,e,n),i=S[0],r=S[1]),y=i.match(Ky)||[];g=Ky.exec(r);)b=g[0],w=r.substring(h,g.index),x?x=(x+1)%5:w.substr(-5)==="rgba("&&(x=1),b!==y[p++]&&(T=parseFloat(y[p-1])||0,u._pt={_next:u._pt,p:w||p===1?w:",",s:T,c:b.charAt(1)==="="?gc(T,b)-T:parseFloat(b)-T,m:x&&x<4?Math.round:0},h=Ky.lastIndex);return u.c=h<r.length?r.substring(h,r.length):"",u.fp=c,(LN.test(r)||_)&&(u.e=0),this._pt=u,u},cw=function(e,n,i,r,a,l,c,u,h,p){fn(r)&&(r=r(a||0,e,l));var g=e[n],y=i!=="get"?i:fn(g)?h?e[n.indexOf("set")||!fn(e["get"+n.substr(3)])?n:"get"+n.substr(3)](h):e[n]():g,x=fn(g)?h?Q9:uR:dw,b;if(zn(r)&&(~r.indexOf("random(")&&(r=ih(r)),r.charAt(1)==="="&&(b=gc(y,r)+(Qn(y)||0),(b||b===0)&&(r=b))),!p||y!==r||Bv)return!isNaN(y*r)&&r!==""?(b=new xi(this._pt,e,n,+y||0,r-(y||0),typeof g=="boolean"?K9:dR,0,x),h&&(b.fp=h),c&&b.modifier(c,this,e),this._pt=b):(!g&&!(n in e)&&sw(n,r),$9.call(this,e,n,y,r,x,u||zi.stringFilter,h))},q9=function(e,n,i,r,a){if(fn(e)&&(e=Rd(e,a,n,i,r)),!os(e)||e.style&&e.nodeType||ti(e)||NN(e))return zn(e)?Rd(e,a,n,i,r):e;var l={},c;for(c in e)l[c]=Rd(e[c],a,n,i,r);return l},oR=function(e,n,i,r,a,l){var c,u,h,p;if(ki[e]&&(c=new ki[e]).init(a,c.rawVars?n[e]:q9(n[e],r,a,l,i),i,r,l)!==!1&&(i._pt=u=new xi(i._pt,a,e,0,1,c.render,c,0,c.priority),i!==hc))for(h=i._ptLookup[i._targets.indexOf(a)],p=c._props.length;p--;)h[c._props[p]]=u;return c},Da,Bv,uw=function t(e,n,i){var r=e.vars,a=r.ease,l=r.startAt,c=r.immediateRender,u=r.lazy,h=r.onUpdate,p=r.runBackwards,g=r.yoyoEase,y=r.keyframes,x=r.autoRevert,b=e._dur,w=e._startAt,T=e._targets,_=e.parent,S=_&&_.data==="nested"?_.vars.targets:T,E=e._overwrite==="auto"&&!tw,R=e.timeline,A,N,j,O,L,B,F,J,Q,W,Z,z,$;if(R&&(!y||!a)&&(a="none"),e._ease=Go(a,jc.ease),e._yEase=g?iR(Go(g===!0?a:g,jc.ease)):0,g&&e._yoyo&&!e._repeat&&(g=e._yEase,e._yEase=e._ease,e._ease=g),e._from=!R&&!!r.runBackwards,!R||y&&!r.stagger){if(J=T[0]?Vo(T[0]).harness:0,z=J&&r[J.prop],A=um(r,aw),w&&(w._zTime<0&&w.progress(1),n<0&&p&&c&&!x?w.render(-1,!0):w.revert(p&&b?Pp:w9),w._lazy=0),l){if(Ya(e._startAt=Mn.set(T,Hi({data:"isStart",overwrite:!1,parent:_,immediateRender:!0,lazy:!w&&gi(u),startAt:null,delay:0,onUpdate:h&&function(){return Pi(e,"onUpdate")},stagger:0},l))),e._startAt._dp=0,e._startAt._sat=e,n<0&&(Wn||!c&&!x)&&e._startAt.revert(Pp),c&&b&&n<=0&&i<=0){n&&(e._zTime=n);return}}else if(p&&b&&!w){if(n&&(c=!1),j=Hi({overwrite:!1,data:"isFromStart",lazy:c&&!w&&gi(u),immediateRender:c,stagger:0,parent:_},A),z&&(j[J.prop]=z),Ya(e._startAt=Mn.set(T,j)),e._startAt._dp=0,e._startAt._sat=e,n<0&&(Wn?e._startAt.revert(Pp):e._startAt.render(-1,!0)),e._zTime=n,!c)t(e._startAt,ei,ei);else if(!n)return}for(e._pt=e._ptCache=0,u=b&&gi(u)||u&&!b,N=0;N<T.length;N++){if(L=T[N],F=L._gsap||lw(T)[N]._gsap,e._ptLookup[N]=W={},Lv[F.id]&&Ia.length&&cm(),Z=S===T?N:S.indexOf(L),J&&(Q=new J).init(L,z||A,e,Z,S)!==!1&&(e._pt=O=new xi(e._pt,L,Q.name,0,1,Q.render,Q,0,Q.priority),Q._props.forEach(function(U){W[U]=O}),Q.priority&&(B=1)),!J||z)for(j in A)ki[j]&&(Q=oR(j,A,e,Z,L,S))?Q.priority&&(B=1):W[j]=O=cw.call(e,L,j,"get",A[j],Z,S,0,r.stringFilter);e._op&&e._op[N]&&e.kill(L,e._op[N]),E&&e._pt&&(Da=e,rn.killTweensOf(L,W,e.globalTime(n)),$=!e.parent,Da=0),e._pt&&u&&(Lv[F.id]=1)}B&&fR(e),e._onInit&&e._onInit(e)}e._onUpdate=h,e._initted=(!e._op||e._pt)&&!$,y&&n<=0&&R.render(Kr,!0,!0)},Y9=function(e,n,i,r,a,l,c,u){var h=(e._pt&&e._ptCache||(e._ptCache={}))[n],p,g,y,x;if(!h)for(h=e._ptCache[n]=[],y=e._ptLookup,x=e._targets.length;x--;){if(p=y[x][n],p&&p.d&&p.d._pt)for(p=p.d._pt;p&&p.p!==n&&p.fp!==n;)p=p._next;if(!p)return Bv=1,e.vars[n]="+=0",uw(e,c),Bv=0,u?th(n+" not eligible for reset"):1;h.push(p)}for(x=h.length;x--;)g=h[x],p=g._pt||g,p.s=(r||r===0)&&!a?r:p.s+(r||0)+l*p.c,p.c=i-p.s,g.e&&(g.e=yn(i)+Qn(g.e)),g.b&&(g.b=p.s+Qn(g.b))},X9=function(e,n){var i=e[0]?Vo(e[0]).harness:0,r=i&&i.aliases,a,l,c,u;if(!r)return n;a=Dc({},n);for(l in r)if(l in a)for(u=r[l].split(","),c=u.length;c--;)a[u[c]]=a[l];return a},Z9=function(e,n,i,r){var a=n.ease||r||"power1.inOut",l,c;if(ti(n))c=i[e]||(i[e]=[]),n.forEach(function(u,h){return c.push({t:h/(n.length-1)*100,v:u,e:a})});else for(l in n)c=i[l]||(i[l]=[]),l==="ease"||c.push({t:parseFloat(e),v:n[l],e:a})},Rd=function(e,n,i,r,a){return fn(e)?e.call(n,i,r,a):zn(e)&&~e.indexOf("random(")?ih(e):e},lR=ow+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",cR={};yi(lR+",id,stagger,delay,duration,paused,scrollTrigger",function(t){return cR[t]=1});var Mn=function(t){AN(e,t);function e(i,r,a,l){var c;typeof r=="number"&&(a.duration=r,r=a,a=null),c=t.call(this,l?r:Cd(r))||this;var u=c.vars,h=u.duration,p=u.delay,g=u.immediateRender,y=u.stagger,x=u.overwrite,b=u.keyframes,w=u.defaults,T=u.scrollTrigger,_=u.yoyoEase,S=r.parent||rn,E=(ti(i)||NN(i)?Ys(i[0]):"length"in r)?[i]:hr(i),R,A,N,j,O,L,B,F;if(c._targets=E.length?lw(E):th("GSAP target "+i+" not found. https://gsap.com",!zi.nullTargetWarn)||[],c._ptLookup=[],c._overwrite=x,b||y||xp(h)||xp(p)){if(r=c.vars,R=c.timeline=new oi({data:"nested",defaults:w||{},targets:S&&S.data==="nested"?S.vars.targets:E}),R.kill(),R.parent=R._dp=js(c),R._start=0,y||xp(h)||xp(p)){if(j=E.length,B=y&&qN(y),os(y))for(O in y)~lR.indexOf(O)&&(F||(F={}),F[O]=y[O]);for(A=0;A<j;A++)N=um(r,cR),N.stagger=0,_&&(N.yoyoEase=_),F&&Dc(N,F),L=E[A],N.duration=+Rd(h,js(c),A,L,E),N.delay=(+Rd(p,js(c),A,L,E)||0)-c._delay,!y&&j===1&&N.delay&&(c._delay=p=N.delay,c._start+=p,N.delay=0),R.to(L,N,B?B(A,L,E):0),R._ease=Et.none;R.duration()?h=p=0:c.timeline=0}else if(b){Cd(Hi(R.vars.defaults,{ease:"none"})),R._ease=Go(b.ease||r.ease||"none");var J=0,Q,W,Z;if(ti(b))b.forEach(function(z){return R.to(E,z,">")}),R.duration();else{N={};for(O in b)O==="ease"||O==="easeEach"||Z9(O,b[O],N,b.easeEach);for(O in N)for(Q=N[O].sort(function(z,$){return z.t-$.t}),J=0,A=0;A<Q.length;A++)W=Q[A],Z={ease:W.e,duration:(W.t-(A?Q[A-1].t:0))/100*h},Z[O]=W.v,R.to(E,Z,J),J+=Z.duration;R.duration()<h&&R.to({},{duration:h-R.duration()})}}h||c.duration(h=R.duration())}else c.timeline=0;return x===!0&&!tw&&(Da=js(c),rn.killTweensOf(E),Da=0),qr(S,js(c),a),r.reversed&&c.reverse(),r.paused&&c.paused(!0),(g||!h&&!b&&c._start===Tn(S._time)&&gi(g)&&A9(js(c))&&S.data!=="nested")&&(c._tTime=-1e-8,c.render(Math.max(0,-p)||0)),T&&HN(js(c),T),c}var n=e.prototype;return n.render=function(r,a,l){var c=this._time,u=this._tDur,h=this._dur,p=r<0,g=r>u-ei&&!p?u:r<ei?0:r,y,x,b,w,T,_,S,E,R;if(!h)N9(this,r,a,l);else if(g!==this._tTime||!r||l||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==p||this._lazy){if(y=g,E=this.timeline,this._repeat){if(w=h+this._rDelay,this._repeat<-1&&p)return this.totalTime(w*100+r,a,l);if(y=Tn(g%w),g===u?(b=this._repeat,y=h):(T=Tn(g/w),b=~~T,b&&b===T?(y=h,b--):y>h&&(y=h)),_=this._yoyo&&b&1,_&&(R=this._yEase,y=h-y),T=Pc(this._tTime,w),y===c&&!l&&this._initted&&b===T)return this._tTime=g,this;b!==T&&(E&&this._yEase&&rR(E,_),this.vars.repeatRefresh&&!_&&!this._lock&&y!==w&&this._initted&&(this._lock=l=1,this.render(Tn(w*b),!0).invalidate()._lock=0))}if(!this._initted){if(GN(this,p?r:y,l,a,g))return this._tTime=0,this;if(c!==this._time&&!(l&&this.vars.repeatRefresh&&b!==T))return this;if(h!==this._dur)return this.render(r,a,l)}if(this._tTime=g,this._time=y,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=S=(R||this._ease)(y/h),this._from&&(this.ratio=S=1-S),y&&!c&&!a&&!b&&(Pi(this,"onStart"),this._tTime!==g))return this;for(x=this._pt;x;)x.r(S,x.d),x=x._next;E&&E.render(r<0?r:E._dur*E._ease(y/this._dur),a,l)||this._startAt&&(this._zTime=r),this._onUpdate&&!a&&(p&&kv(this,r,a,l),Pi(this,"onUpdate")),this._repeat&&b!==T&&this.vars.onRepeat&&!a&&this.parent&&Pi(this,"onRepeat"),(g===this._tDur||!g)&&this._tTime===g&&(p&&!this._onUpdate&&kv(this,r,!0,!0),(r||!h)&&(g===this._tDur&&this._ts>0||!g&&this._ts<0)&&Ya(this,1),!a&&!(p&&!c)&&(g||c||_)&&(Pi(this,g===u?"onComplete":"onReverseComplete",!0),this._prom&&!(g<u&&this.timeScale()>0)&&this._prom()))}return this},n.targets=function(){return this._targets},n.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),t.prototype.invalidate.call(this,r)},n.resetTo=function(r,a,l,c,u){rh||Di.wake(),this._ts||this.play();var h=Math.min(this._dur,(this._dp._time-this._start)*this._ts),p;return this._initted||uw(this,h),p=this._ease(h/this._dur),Y9(this,r,a,l,c,p,h,u)?this.resetTo(r,a,l,c,1):(Wm(this,0),this.parent||UN(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(r,a){if(a===void 0&&(a="all"),!r&&(!a||a==="all"))return this._lazy=this._pt=0,this.parent?hd(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Wn),this;if(this.timeline){var l=this.timeline.totalDuration();return this.timeline.killTweensOf(r,a,Da&&Da.vars.overwrite!==!0)._first||hd(this),this.parent&&l!==this.timeline.totalDuration()&&Oc(this,this._dur*this.timeline._tDur/l,0,1),this}var c=this._targets,u=r?hr(r):c,h=this._ptLookup,p=this._pt,g,y,x,b,w,T,_;if((!a||a==="all")&&T9(c,u))return a==="all"&&(this._pt=0),hd(this);for(g=this._op=this._op||[],a!=="all"&&(zn(a)&&(w={},yi(a,function(S){return w[S]=1}),a=w),a=X9(c,a)),_=c.length;_--;)if(~u.indexOf(c[_])){y=h[_],a==="all"?(g[_]=a,b=y,x={}):(x=g[_]=g[_]||{},b=a);for(w in b)T=y&&y[w],T&&((!("kill"in T.d)||T.d.kill(w)===!0)&&Hm(this,T,"_pt"),delete y[w]),x!=="all"&&(x[w]=1)}return this._initted&&!this._pt&&p&&hd(this),this},e.to=function(r,a){return new e(r,a,arguments[2])},e.from=function(r,a){return Nd(1,arguments)},e.delayedCall=function(r,a,l,c){return new e(a,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:a,onReverseComplete:a,onCompleteParams:l,onReverseCompleteParams:l,callbackScope:c})},e.fromTo=function(r,a,l){return Nd(2,arguments)},e.set=function(r,a){return a.duration=0,a.repeatDelay||(a.repeat=0),new e(r,a)},e.killTweensOf=function(r,a,l){return rn.killTweensOf(r,a,l)},e}(sh);Hi(Mn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});yi("staggerTo,staggerFrom,staggerFromTo",function(t){Mn[t]=function(){var e=new oi,n=Dv.call(arguments,0);return n.splice(t==="staggerFromTo"?5:4,0,0),e[t].apply(e,n)}});var dw=function(e,n,i){return e[n]=i},uR=function(e,n,i){return e[n](i)},Q9=function(e,n,i,r){return e[n](r.fp,i)},J9=function(e,n,i){return e.setAttribute(n,i)},hw=function(e,n){return fn(e[n])?uR:nw(e[n])&&e.setAttribute?J9:dw},dR=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e6)/1e6,n)},K9=function(e,n){return n.set(n.t,n.p,!!(n.s+n.c*e),n)},hR=function(e,n){var i=n._pt,r="";if(!e&&n.b)r=n.b;else if(e===1&&n.e)r=n.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+r,i=i._next;r+=n.c}n.set(n.t,n.p,r,n)},fw=function(e,n){for(var i=n._pt;i;)i.r(e,i.d),i=i._next},eG=function(e,n,i,r){for(var a=this._pt,l;a;)l=a._next,a.p===r&&a.modifier(e,n,i),a=l},tG=function(e){for(var n=this._pt,i,r;n;)r=n._next,n.p===e&&!n.op||n.op===e?Hm(this,n,"_pt"):n.dep||(i=1),n=r;return!i},nG=function(e,n,i,r){r.mSet(e,n,r.m.call(r.tween,i,r.mt),r)},fR=function(e){for(var n=e._pt,i,r,a,l;n;){for(i=n._next,r=a;r&&r.pr>n.pr;)r=r._next;(n._prev=r?r._prev:l)?n._prev._next=n:a=n,(n._next=r)?r._prev=n:l=n,n=i}e._pt=a},xi=function(){function t(n,i,r,a,l,c,u,h,p){this.t=i,this.s=a,this.c=l,this.p=r,this.r=c||dR,this.d=u||this,this.set=h||dw,this.pr=p||0,this._next=n,n&&(n._prev=this)}var e=t.prototype;return e.modifier=function(i,r,a){this.mSet=this.mSet||this.set,this.set=nG,this.m=i,this.mt=a,this.tween=r},t}();yi(ow+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return aw[t]=1});Vi.TweenMax=Vi.TweenLite=Mn;Vi.TimelineLite=Vi.TimelineMax=oi;rn=new oi({sortChildren:!1,defaults:jc,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});zi.stringFilter=nR;var Wo=[],Bp={},iG=[],OE=0,rG=0,rx=function(e){return(Bp[e]||iG).map(function(n){return n()})},zv=function(){var e=Date.now(),n=[];e-OE>2&&(rx("matchMediaInit"),Wo.forEach(function(i){var r=i.queries,a=i.conditions,l,c,u,h;for(c in r)l=Gr.matchMedia(r[c]).matches,l&&(u=1),l!==a[c]&&(a[c]=l,h=1);h&&(i.revert(),u&&n.push(i))}),rx("matchMediaRevert"),n.forEach(function(i){return i.onMatch(i,function(r){return i.add(null,r)})}),OE=e,rx("matchMedia"))},pR=function(){function t(n,i){this.selector=i&&Pv(i),this.data=[],this._r=[],this.isReverted=!1,this.id=rG++,n&&this.add(n)}var e=t.prototype;return e.add=function(i,r,a){fn(i)&&(a=r,r=i,i=fn);var l=this,c=function(){var h=Kt,p=l.selector,g;return h&&h!==l&&h.data.push(l),a&&(l.selector=Pv(a)),Kt=l,g=r.apply(l,arguments),fn(g)&&l._r.push(g),Kt=h,l.selector=p,l.isReverted=!1,g};return l.last=c,i===fn?c(l,function(u){return l.add(null,u)}):i?l[i]=c:c},e.ignore=function(i){var r=Kt;Kt=null,i(this),Kt=r},e.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof t?i.push.apply(i,r.getTweens()):r instanceof Mn&&!(r.parent&&r.parent.data==="nested")&&i.push(r)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,r){var a=this;if(i?function(){for(var c=a.getTweens(),u=a.data.length,h;u--;)h=a.data[u],h.data==="isFlip"&&(h.revert(),h.getChildren(!0,!0,!1).forEach(function(p){return c.splice(c.indexOf(p),1)}));for(c.map(function(p){return{g:p._dur||p._delay||p._sat&&!p._sat.vars.immediateRender?p.globalTime(0):-1/0,t:p}}).sort(function(p,g){return g.g-p.g||-1/0}).forEach(function(p){return p.t.revert(i)}),u=a.data.length;u--;)h=a.data[u],h instanceof oi?h.data!=="nested"&&(h.scrollTrigger&&h.scrollTrigger.revert(),h.kill()):!(h instanceof Mn)&&h.revert&&h.revert(i);a._r.forEach(function(p){return p(i,a)}),a.isReverted=!0}():this.data.forEach(function(c){return c.kill&&c.kill()}),this.clear(),r)for(var l=Wo.length;l--;)Wo[l].id===this.id&&Wo.splice(l,1)},e.revert=function(i){this.kill(i||{})},t}(),sG=function(){function t(n){this.contexts=[],this.scope=n,Kt&&Kt.data.push(this)}var e=t.prototype;return e.add=function(i,r,a){os(i)||(i={matches:i});var l=new pR(0,a||this.scope),c=l.conditions={},u,h,p;Kt&&!l.selector&&(l.selector=Kt.selector),this.contexts.push(l),r=l.add("onMatch",r),l.queries=i;for(h in i)h==="all"?p=1:(u=Gr.matchMedia(i[h]),u&&(Wo.indexOf(l)<0&&Wo.push(l),(c[h]=u.matches)&&(p=1),u.addListener?u.addListener(zv):u.addEventListener("change",zv)));return p&&r(l,function(g){return l.add(null,g)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},t}(),hm={registerPlugin:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];n.forEach(function(r){return KN(r)})},timeline:function(e){return new oi(e)},getTweensOf:function(e,n){return rn.getTweensOf(e,n)},getProperty:function(e,n,i,r){zn(e)&&(e=hr(e)[0]);var a=Vo(e||{}).get,l=i?IN:FN;return i==="native"&&(i=""),e&&(n?l((ki[n]&&ki[n].get||a)(e,n,i,r)):function(c,u,h){return l((ki[c]&&ki[c].get||a)(e,c,u,h))})},quickSetter:function(e,n,i){if(e=hr(e),e.length>1){var r=e.map(function(p){return wi.quickSetter(p,n,i)}),a=r.length;return function(p){for(var g=a;g--;)r[g](p)}}e=e[0]||{};var l=ki[n],c=Vo(e),u=c.harness&&(c.harness.aliases||{})[n]||n,h=l?function(p){var g=new l;hc._pt=0,g.init(e,i?p+i:p,hc,0,[e]),g.render(1,g),hc._pt&&fw(1,hc)}:c.set(e,u);return l?h:function(p){return h(e,u,i?p+i:p,c,1)}},quickTo:function(e,n,i){var r,a=wi.to(e,Hi((r={},r[n]="+=0.1",r.paused=!0,r.stagger=0,r),i||{})),l=function(u,h,p){return a.resetTo(n,u,h,p)};return l.tween=a,l},isTweening:function(e){return rn.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Go(e.ease,jc.ease)),LE(jc,e||{})},config:function(e){return LE(zi,e||{})},registerEffect:function(e){var n=e.name,i=e.effect,r=e.plugins,a=e.defaults,l=e.extendTimeline;(r||"").split(",").forEach(function(c){return c&&!ki[c]&&!Vi[c]&&th(n+" effect requires "+c+" plugin.")}),ex[n]=function(c,u,h){return i(hr(c),Hi(u||{},a),h)},l&&(oi.prototype[n]=function(c,u,h){return this.add(ex[n](c,os(u)?u:(h=u)&&{},this),h)})},registerEase:function(e,n){Et[e]=Go(n)},parseEase:function(e,n){return arguments.length?Go(e,n):Et},getById:function(e){return rn.getById(e)},exportRoot:function(e,n){e===void 0&&(e={});var i=new oi(e),r,a;for(i.smoothChildTiming=gi(e.smoothChildTiming),rn.remove(i),i._dp=0,i._time=i._tTime=rn._time,r=rn._first;r;)a=r._next,(n||!(!r._dur&&r instanceof Mn&&r.vars.onComplete===r._targets[0]))&&qr(i,r,r._start-r._delay),r=a;return qr(rn,i,0),i},context:function(e,n){return e?new pR(e,n):Kt},matchMedia:function(e){return new sG(e)},matchMediaRefresh:function(){return Wo.forEach(function(e){var n=e.conditions,i,r;for(r in n)n[r]&&(n[r]=!1,i=1);i&&e.revert()})||zv()},addEventListener:function(e,n){var i=Bp[e]||(Bp[e]=[]);~i.indexOf(n)||i.push(n)},removeEventListener:function(e,n){var i=Bp[e],r=i&&i.indexOf(n);r>=0&&i.splice(r,1)},utils:{wrap:B9,wrapYoyo:z9,distribute:qN,random:XN,snap:YN,normalize:O9,getUnit:Qn,clamp:k9,splitColor:eR,toArray:hr,selector:Pv,mapRange:QN,pipe:D9,unitize:P9,interpolate:F9,shuffle:$N},install:DN,effects:ex,ticker:Di,updateRoot:oi.updateRoot,plugins:ki,globalTimeline:rn,core:{PropTween:xi,globals:PN,Tween:Mn,Timeline:oi,Animation:sh,getCache:Vo,_removeLinkedListItem:Hm,reverting:function(){return Wn},context:function(e){return e&&Kt&&(Kt.data.push(e),e._ctx=Kt),Kt},suppressOverwrites:function(e){return tw=e}}};yi("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return hm[t]=Mn[t]});Di.add(oi.updateRoot);hc=hm.to({},{duration:0});var aG=function(e,n){for(var i=e._pt;i&&i.p!==n&&i.op!==n&&i.fp!==n;)i=i._next;return i},oG=function(e,n){var i=e._targets,r,a,l;for(r in n)for(a=i.length;a--;)l=e._ptLookup[a][r],l&&(l=l.d)&&(l._pt&&(l=aG(l,r)),l&&l.modifier&&l.modifier(n[r],e,i[a],r))},sx=function(e,n){return{name:e,rawVars:1,init:function(r,a,l){l._onInit=function(c){var u,h;if(zn(a)&&(u={},yi(a,function(p){return u[p]=1}),a=u),n){u={};for(h in a)u[h]=n(a[h]);a=u}oG(c,a)}}}},wi=hm.registerPlugin({name:"attr",init:function(e,n,i,r,a){var l,c,u;this.tween=i;for(l in n)u=e.getAttribute(l)||"",c=this.add(e,"setAttribute",(u||0)+"",n[l],r,a,0,0,l),c.op=l,c.b=u,this._props.push(l)},render:function(e,n){for(var i=n._pt;i;)Wn?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",init:function(e,n){for(var i=n.length;i--;)this.add(e,i,e[i]||0,n[i],0,0,0,0,0,1)}},sx("roundProps",Ov),sx("modifiers"),sx("snap",YN))||hm;Mn.version=oi.version=wi.version="3.12.7";jN=1;iw()&&Bc();Et.Power0;Et.Power1;Et.Power2;Et.Power3;Et.Power4;Et.Linear;Et.Quad;Et.Cubic;Et.Quart;Et.Quint;Et.Strong;Et.Elastic;Et.Back;Et.SteppedEase;Et.Bounce;Et.Sine;Et.Expo;Et.Circ;/*!
 * CSSPlugin 3.12.7
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var BE,Pa,yc,pw,zo,zE,mw,lG=function(){return typeof window<"u"},Xs={},ko=180/Math.PI,xc=Math.PI/180,Kl=Math.atan2,FE=1e8,gw=/([A-Z])/g,cG=/(left|right|width|margin|padding|x)/i,uG=/[\s,\(]\S/,Yr={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Fv=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},dG=function(e,n){return n.set(n.t,n.p,e===1?n.e:Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},hG=function(e,n){return n.set(n.t,n.p,e?Math.round((n.s+n.c*e)*1e4)/1e4+n.u:n.b,n)},fG=function(e,n){var i=n.s+n.c*e;n.set(n.t,n.p,~~(i+(i<0?-.5:.5))+n.u,n)},mR=function(e,n){return n.set(n.t,n.p,e?n.e:n.b,n)},gR=function(e,n){return n.set(n.t,n.p,e!==1?n.b:n.e,n)},pG=function(e,n,i){return e.style[n]=i},mG=function(e,n,i){return e.style.setProperty(n,i)},gG=function(e,n,i){return e._gsap[n]=i},yG=function(e,n,i){return e._gsap.scaleX=e._gsap.scaleY=i},xG=function(e,n,i,r,a){var l=e._gsap;l.scaleX=l.scaleY=i,l.renderTransform(a,l)},vG=function(e,n,i,r,a){var l=e._gsap;l[n]=i,l.renderTransform(a,l)},on="transform",vi=on+"Origin",bG=function t(e,n){var i=this,r=this.target,a=r.style,l=r._gsap;if(e in Xs&&a){if(this.tfm=this.tfm||{},e!=="transform")e=Yr[e]||e,~e.indexOf(",")?e.split(",").forEach(function(c){return i.tfm[c]=Ps(r,c)}):this.tfm[e]=l.x?l[e]:Ps(r,e),e===vi&&(this.tfm.zOrigin=l.zOrigin);else return Yr.transform.split(",").forEach(function(c){return t.call(i,c,n)});if(this.props.indexOf(on)>=0)return;l.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(vi,n,"")),e=on}(a||n)&&this.props.push(e,n,a[e])},yR=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},wG=function(){var e=this.props,n=this.target,i=n.style,r=n._gsap,a,l;for(a=0;a<e.length;a+=3)e[a+1]?e[a+1]===2?n[e[a]](e[a+2]):n[e[a]]=e[a+2]:e[a+2]?i[e[a]]=e[a+2]:i.removeProperty(e[a].substr(0,2)==="--"?e[a]:e[a].replace(gw,"-$1").toLowerCase());if(this.tfm){for(l in this.tfm)r[l]=this.tfm[l];r.svg&&(r.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),a=mw(),(!a||!a.isStart)&&!i[on]&&(yR(i),r.zOrigin&&i[vi]&&(i[vi]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},xR=function(e,n){var i={target:e,props:[],revert:wG,save:bG};return e._gsap||wi.core.getCache(e),n&&e.style&&e.nodeType&&n.split(",").forEach(function(r){return i.save(r)}),i},vR,Iv=function(e,n){var i=Pa.createElementNS?Pa.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Pa.createElement(e);return i&&i.style?i:Pa.createElement(e)},es=function t(e,n,i){var r=getComputedStyle(e);return r[n]||r.getPropertyValue(n.replace(gw,"-$1").toLowerCase())||r.getPropertyValue(n)||!i&&t(e,zc(n)||n,1)||""},IE="O,Moz,ms,Ms,Webkit".split(","),zc=function(e,n,i){var r=n||zo,a=r.style,l=5;if(e in a&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);l--&&!(IE[l]+e in a););return l<0?null:(l===3?"ms":l>=0?IE[l]:"")+e},Uv=function(){lG()&&window.document&&(BE=window,Pa=BE.document,yc=Pa.documentElement,zo=Iv("div")||{style:{}},Iv("div"),on=zc(on),vi=on+"Origin",zo.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",vR=!!zc("perspective"),mw=wi.core.reverting,pw=1)},UE=function(e){var n=e.ownerSVGElement,i=Iv("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=e.cloneNode(!0),a;r.style.display="block",i.appendChild(r),yc.appendChild(i);try{a=r.getBBox()}catch{}return i.removeChild(r),yc.removeChild(i),a},VE=function(e,n){for(var i=n.length;i--;)if(e.hasAttribute(n[i]))return e.getAttribute(n[i])},bR=function(e){var n,i;try{n=e.getBBox()}catch{n=UE(e),i=1}return n&&(n.width||n.height)||i||(n=UE(e)),n&&!n.width&&!n.x&&!n.y?{x:+VE(e,["x","cx","x1"])||0,y:+VE(e,["y","cy","y1"])||0,width:0,height:0}:n},wR=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&bR(e))},Jo=function(e,n){if(n){var i=e.style,r;n in Xs&&n!==vi&&(n=on),i.removeProperty?(r=n.substr(0,2),(r==="ms"||n.substr(0,6)==="webkit")&&(n="-"+n),i.removeProperty(r==="--"?n:n.replace(gw,"-$1").toLowerCase())):i.removeAttribute(n)}},Oa=function(e,n,i,r,a,l){var c=new xi(e._pt,n,i,0,1,l?gR:mR);return e._pt=c,c.b=r,c.e=a,e._props.push(i),c},HE={deg:1,rad:1,turn:1},_G={grid:1,flex:1},Xa=function t(e,n,i,r){var a=parseFloat(i)||0,l=(i+"").trim().substr((a+"").length)||"px",c=zo.style,u=cG.test(n),h=e.tagName.toLowerCase()==="svg",p=(h?"client":"offset")+(u?"Width":"Height"),g=100,y=r==="px",x=r==="%",b,w,T,_;if(r===l||!a||HE[r]||HE[l])return a;if(l!=="px"&&!y&&(a=t(e,n,i,"px")),_=e.getCTM&&wR(e),(x||l==="%")&&(Xs[n]||~n.indexOf("adius")))return b=_?e.getBBox()[u?"width":"height"]:e[p],yn(x?a/b*g:a/100*b);if(c[u?"width":"height"]=g+(y?l:r),w=r!=="rem"&&~n.indexOf("adius")||r==="em"&&e.appendChild&&!h?e:e.parentNode,_&&(w=(e.ownerSVGElement||{}).parentNode),(!w||w===Pa||!w.appendChild)&&(w=Pa.body),T=w._gsap,T&&x&&T.width&&u&&T.time===Di.time&&!T.uncache)return yn(a/T.width*g);if(x&&(n==="height"||n==="width")){var S=e.style[n];e.style[n]=g+r,b=e[p],S?e.style[n]=S:Jo(e,n)}else(x||l==="%")&&!_G[es(w,"display")]&&(c.position=es(e,"position")),w===e&&(c.position="static"),w.appendChild(zo),b=zo[p],w.removeChild(zo),c.position="absolute";return u&&x&&(T=Vo(w),T.time=Di.time,T.width=w[p]),yn(y?b*a/g:b&&a?g/b*a:0)},Ps=function(e,n,i,r){var a;return pw||Uv(),n in Yr&&n!=="transform"&&(n=Yr[n],~n.indexOf(",")&&(n=n.split(",")[0])),Xs[n]&&n!=="transform"?(a=oh(e,r),a=n!=="transformOrigin"?a[n]:a.svg?a.origin:pm(es(e,vi))+" "+a.zOrigin+"px"):(a=e.style[n],(!a||a==="auto"||r||~(a+"").indexOf("calc("))&&(a=fm[n]&&fm[n](e,n,i)||es(e,n)||BN(e,n)||(n==="opacity"?1:0))),i&&!~(a+"").trim().indexOf(" ")?Xa(e,n,a,i)+i:a},SG=function(e,n,i,r){if(!i||i==="none"){var a=zc(n,e,1),l=a&&es(e,a,1);l&&l!==i?(n=a,i=l):n==="borderColor"&&(i=es(e,"borderTopColor"))}var c=new xi(this._pt,e.style,n,0,1,hR),u=0,h=0,p,g,y,x,b,w,T,_,S,E,R,A;if(c.b=i,c.e=r,i+="",r+="",r==="auto"&&(w=e.style[n],e.style[n]=r,r=es(e,n)||r,w?e.style[n]=w:Jo(e,n)),p=[i,r],nR(p),i=p[0],r=p[1],y=i.match(dc)||[],A=r.match(dc)||[],A.length){for(;g=dc.exec(r);)T=g[0],S=r.substring(u,g.index),b?b=(b+1)%5:(S.substr(-5)==="rgba("||S.substr(-5)==="hsla(")&&(b=1),T!==(w=y[h++]||"")&&(x=parseFloat(w)||0,R=w.substr((x+"").length),T.charAt(1)==="="&&(T=gc(x,T)+R),_=parseFloat(T),E=T.substr((_+"").length),u=dc.lastIndex-E.length,E||(E=E||zi.units[n]||R,u===r.length&&(r+=E,c.e+=E)),R!==E&&(x=Xa(e,n,w,E)||0),c._pt={_next:c._pt,p:S||h===1?S:",",s:x,c:_-x,m:b&&b<4||n==="zIndex"?Math.round:0});c.c=u<r.length?r.substring(u,r.length):""}else c.r=n==="display"&&r==="none"?gR:mR;return LN.test(r)&&(c.e=0),this._pt=c,c},GE={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},MG=function(e){var n=e.split(" "),i=n[0],r=n[1]||"50%";return(i==="top"||i==="bottom"||r==="left"||r==="right")&&(e=i,i=r,r=e),n[0]=GE[i]||i,n[1]=GE[r]||r,n.join(" ")},TG=function(e,n){if(n.tween&&n.tween._time===n.tween._dur){var i=n.t,r=i.style,a=n.u,l=i._gsap,c,u,h;if(a==="all"||a===!0)r.cssText="",u=1;else for(a=a.split(","),h=a.length;--h>-1;)c=a[h],Xs[c]&&(u=1,c=c==="transformOrigin"?vi:on),Jo(i,c);u&&(Jo(i,on),l&&(l.svg&&i.removeAttribute("transform"),r.scale=r.rotate=r.translate="none",oh(i,1),l.uncache=1,yR(r)))}},fm={clearProps:function(e,n,i,r,a){if(a.data!=="isFromStart"){var l=e._pt=new xi(e._pt,n,i,0,0,TG);return l.u=r,l.pr=-10,l.tween=a,e._props.push(i),1}}},ah=[1,0,0,1,0,0],_R={},SR=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},WE=function(e){var n=es(e,on);return SR(n)?ah:n.substr(7).match(RN).map(yn)},yw=function(e,n){var i=e._gsap||Vo(e),r=e.style,a=WE(e),l,c,u,h;return i.svg&&e.getAttribute("transform")?(u=e.transform.baseVal.consolidate().matrix,a=[u.a,u.b,u.c,u.d,u.e,u.f],a.join(",")==="1,0,0,1,0,0"?ah:a):(a===ah&&!e.offsetParent&&e!==yc&&!i.svg&&(u=r.display,r.display="block",l=e.parentNode,(!l||!e.offsetParent&&!e.getBoundingClientRect().width)&&(h=1,c=e.nextElementSibling,yc.appendChild(e)),a=WE(e),u?r.display=u:Jo(e,"display"),h&&(c?l.insertBefore(e,c):l?l.appendChild(e):yc.removeChild(e))),n&&a.length>6?[a[0],a[1],a[4],a[5],a[12],a[13]]:a)},Vv=function(e,n,i,r,a,l){var c=e._gsap,u=a||yw(e,!0),h=c.xOrigin||0,p=c.yOrigin||0,g=c.xOffset||0,y=c.yOffset||0,x=u[0],b=u[1],w=u[2],T=u[3],_=u[4],S=u[5],E=n.split(" "),R=parseFloat(E[0])||0,A=parseFloat(E[1])||0,N,j,O,L;i?u!==ah&&(j=x*T-b*w)&&(O=R*(T/j)+A*(-w/j)+(w*S-T*_)/j,L=R*(-b/j)+A*(x/j)-(x*S-b*_)/j,R=O,A=L):(N=bR(e),R=N.x+(~E[0].indexOf("%")?R/100*N.width:R),A=N.y+(~(E[1]||E[0]).indexOf("%")?A/100*N.height:A)),r||r!==!1&&c.smooth?(_=R-h,S=A-p,c.xOffset=g+(_*x+S*w)-_,c.yOffset=y+(_*b+S*T)-S):c.xOffset=c.yOffset=0,c.xOrigin=R,c.yOrigin=A,c.smooth=!!r,c.origin=n,c.originIsAbsolute=!!i,e.style[vi]="0px 0px",l&&(Oa(l,c,"xOrigin",h,R),Oa(l,c,"yOrigin",p,A),Oa(l,c,"xOffset",g,c.xOffset),Oa(l,c,"yOffset",y,c.yOffset)),e.setAttribute("data-svg-origin",R+" "+A)},oh=function(e,n){var i=e._gsap||new aR(e);if("x"in i&&!n&&!i.uncache)return i;var r=e.style,a=i.scaleX<0,l="px",c="deg",u=getComputedStyle(e),h=es(e,vi)||"0",p,g,y,x,b,w,T,_,S,E,R,A,N,j,O,L,B,F,J,Q,W,Z,z,$,U,X,D,q,ce,me,fe,ie;return p=g=y=w=T=_=S=E=R=0,x=b=1,i.svg=!!(e.getCTM&&wR(e)),u.translate&&((u.translate!=="none"||u.scale!=="none"||u.rotate!=="none")&&(r[on]=(u.translate!=="none"?"translate3d("+(u.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(u.rotate!=="none"?"rotate("+u.rotate+") ":"")+(u.scale!=="none"?"scale("+u.scale.split(" ").join(",")+") ":"")+(u[on]!=="none"?u[on]:"")),r.scale=r.rotate=r.translate="none"),j=yw(e,i.svg),i.svg&&(i.uncache?(U=e.getBBox(),h=i.xOrigin-U.x+"px "+(i.yOrigin-U.y)+"px",$=""):$=!n&&e.getAttribute("data-svg-origin"),Vv(e,$||h,!!$||i.originIsAbsolute,i.smooth!==!1,j)),A=i.xOrigin||0,N=i.yOrigin||0,j!==ah&&(F=j[0],J=j[1],Q=j[2],W=j[3],p=Z=j[4],g=z=j[5],j.length===6?(x=Math.sqrt(F*F+J*J),b=Math.sqrt(W*W+Q*Q),w=F||J?Kl(J,F)*ko:0,S=Q||W?Kl(Q,W)*ko+w:0,S&&(b*=Math.abs(Math.cos(S*xc))),i.svg&&(p-=A-(A*F+N*Q),g-=N-(A*J+N*W))):(ie=j[6],me=j[7],D=j[8],q=j[9],ce=j[10],fe=j[11],p=j[12],g=j[13],y=j[14],O=Kl(ie,ce),T=O*ko,O&&(L=Math.cos(-O),B=Math.sin(-O),$=Z*L+D*B,U=z*L+q*B,X=ie*L+ce*B,D=Z*-B+D*L,q=z*-B+q*L,ce=ie*-B+ce*L,fe=me*-B+fe*L,Z=$,z=U,ie=X),O=Kl(-Q,ce),_=O*ko,O&&(L=Math.cos(-O),B=Math.sin(-O),$=F*L-D*B,U=J*L-q*B,X=Q*L-ce*B,fe=W*B+fe*L,F=$,J=U,Q=X),O=Kl(J,F),w=O*ko,O&&(L=Math.cos(O),B=Math.sin(O),$=F*L+J*B,U=Z*L+z*B,J=J*L-F*B,z=z*L-Z*B,F=$,Z=U),T&&Math.abs(T)+Math.abs(w)>359.9&&(T=w=0,_=180-_),x=yn(Math.sqrt(F*F+J*J+Q*Q)),b=yn(Math.sqrt(z*z+ie*ie)),O=Kl(Z,z),S=Math.abs(O)>2e-4?O*ko:0,R=fe?1/(fe<0?-fe:fe):0),i.svg&&($=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!SR(es(e,on)),$&&e.setAttribute("transform",$))),Math.abs(S)>90&&Math.abs(S)<270&&(a?(x*=-1,S+=w<=0?180:-180,w+=w<=0?180:-180):(b*=-1,S+=S<=0?180:-180)),n=n||i.uncache,i.x=p-((i.xPercent=p&&(!n&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-p)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+l,i.y=g-((i.yPercent=g&&(!n&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-g)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+l,i.z=y+l,i.scaleX=yn(x),i.scaleY=yn(b),i.rotation=yn(w)+c,i.rotationX=yn(T)+c,i.rotationY=yn(_)+c,i.skewX=S+c,i.skewY=E+c,i.transformPerspective=R+l,(i.zOrigin=parseFloat(h.split(" ")[2])||!n&&i.zOrigin||0)&&(r[vi]=pm(h)),i.xOffset=i.yOffset=0,i.force3D=zi.force3D,i.renderTransform=i.svg?AG:vR?MR:EG,i.uncache=0,i},pm=function(e){return(e=e.split(" "))[0]+" "+e[1]},ax=function(e,n,i){var r=Qn(n);return yn(parseFloat(n)+parseFloat(Xa(e,"x",i+"px",r)))+r},EG=function(e,n){n.z="0px",n.rotationY=n.rotationX="0deg",n.force3D=0,MR(e,n)},Co="0deg",rd="0px",No=") ",MR=function(e,n){var i=n||this,r=i.xPercent,a=i.yPercent,l=i.x,c=i.y,u=i.z,h=i.rotation,p=i.rotationY,g=i.rotationX,y=i.skewX,x=i.skewY,b=i.scaleX,w=i.scaleY,T=i.transformPerspective,_=i.force3D,S=i.target,E=i.zOrigin,R="",A=_==="auto"&&e&&e!==1||_===!0;if(E&&(g!==Co||p!==Co)){var N=parseFloat(p)*xc,j=Math.sin(N),O=Math.cos(N),L;N=parseFloat(g)*xc,L=Math.cos(N),l=ax(S,l,j*L*-E),c=ax(S,c,-Math.sin(N)*-E),u=ax(S,u,O*L*-E+E)}T!==rd&&(R+="perspective("+T+No),(r||a)&&(R+="translate("+r+"%, "+a+"%) "),(A||l!==rd||c!==rd||u!==rd)&&(R+=u!==rd||A?"translate3d("+l+", "+c+", "+u+") ":"translate("+l+", "+c+No),h!==Co&&(R+="rotate("+h+No),p!==Co&&(R+="rotateY("+p+No),g!==Co&&(R+="rotateX("+g+No),(y!==Co||x!==Co)&&(R+="skew("+y+", "+x+No),(b!==1||w!==1)&&(R+="scale("+b+", "+w+No),S.style[on]=R||"translate(0, 0)"},AG=function(e,n){var i=n||this,r=i.xPercent,a=i.yPercent,l=i.x,c=i.y,u=i.rotation,h=i.skewX,p=i.skewY,g=i.scaleX,y=i.scaleY,x=i.target,b=i.xOrigin,w=i.yOrigin,T=i.xOffset,_=i.yOffset,S=i.forceCSS,E=parseFloat(l),R=parseFloat(c),A,N,j,O,L;u=parseFloat(u),h=parseFloat(h),p=parseFloat(p),p&&(p=parseFloat(p),h+=p,u+=p),u||h?(u*=xc,h*=xc,A=Math.cos(u)*g,N=Math.sin(u)*g,j=Math.sin(u-h)*-y,O=Math.cos(u-h)*y,h&&(p*=xc,L=Math.tan(h-p),L=Math.sqrt(1+L*L),j*=L,O*=L,p&&(L=Math.tan(p),L=Math.sqrt(1+L*L),A*=L,N*=L)),A=yn(A),N=yn(N),j=yn(j),O=yn(O)):(A=g,O=y,N=j=0),(E&&!~(l+"").indexOf("px")||R&&!~(c+"").indexOf("px"))&&(E=Xa(x,"x",l,"px"),R=Xa(x,"y",c,"px")),(b||w||T||_)&&(E=yn(E+b-(b*A+w*j)+T),R=yn(R+w-(b*N+w*O)+_)),(r||a)&&(L=x.getBBox(),E=yn(E+r/100*L.width),R=yn(R+a/100*L.height)),L="matrix("+A+","+N+","+j+","+O+","+E+","+R+")",x.setAttribute("transform",L),S&&(x.style[on]=L)},CG=function(e,n,i,r,a){var l=360,c=zn(a),u=parseFloat(a)*(c&&~a.indexOf("rad")?ko:1),h=u-r,p=r+h+"deg",g,y;return c&&(g=a.split("_")[1],g==="short"&&(h%=l,h!==h%(l/2)&&(h+=h<0?l:-360)),g==="cw"&&h<0?h=(h+l*FE)%l-~~(h/l)*l:g==="ccw"&&h>0&&(h=(h-l*FE)%l-~~(h/l)*l)),e._pt=y=new xi(e._pt,n,i,r,h,dG),y.e=p,y.u="deg",e._props.push(i),y},$E=function(e,n){for(var i in n)e[i]=n[i];return e},NG=function(e,n,i){var r=$E({},i._gsap),a="perspective,force3D,transformOrigin,svgOrigin",l=i.style,c,u,h,p,g,y,x,b;r.svg?(h=i.getAttribute("transform"),i.setAttribute("transform",""),l[on]=n,c=oh(i,1),Jo(i,on),i.setAttribute("transform",h)):(h=getComputedStyle(i)[on],l[on]=n,c=oh(i,1),l[on]=h);for(u in Xs)h=r[u],p=c[u],h!==p&&a.indexOf(u)<0&&(x=Qn(h),b=Qn(p),g=x!==b?Xa(i,u,h,b):parseFloat(h),y=parseFloat(p),e._pt=new xi(e._pt,c,u,g,y-g,Fv),e._pt.u=b||0,e._props.push(u));$E(c,r)};yi("padding,margin,Width,Radius",function(t,e){var n="Top",i="Right",r="Bottom",a="Left",l=(e<3?[n,i,r,a]:[n+a,n+i,r+i,r+a]).map(function(c){return e<2?t+c:"border"+c+t});fm[e>1?"border"+t:t]=function(c,u,h,p,g){var y,x;if(arguments.length<4)return y=l.map(function(b){return Ps(c,b,h)}),x=y.join(" "),x.split(y[0]).length===5?y[0]:x;y=(p+"").split(" "),x={},l.forEach(function(b,w){return x[b]=y[w]=y[w]||y[(w-1)/2|0]}),c.init(u,x,g)}});var TR={name:"css",register:Uv,targetTest:function(e){return e.style&&e.nodeType},init:function(e,n,i,r,a){var l=this._props,c=e.style,u=i.vars.startAt,h,p,g,y,x,b,w,T,_,S,E,R,A,N,j,O;pw||Uv(),this.styles=this.styles||xR(e),O=this.styles.props,this.tween=i;for(w in n)if(w!=="autoRound"&&(p=n[w],!(ki[w]&&oR(w,n,i,r,e,a)))){if(x=typeof p,b=fm[w],x==="function"&&(p=p.call(i,r,e,a),x=typeof p),x==="string"&&~p.indexOf("random(")&&(p=ih(p)),b)b(this,e,w,p,i)&&(j=1);else if(w.substr(0,2)==="--")h=(getComputedStyle(e).getPropertyValue(w)+"").trim(),p+="",Ua.lastIndex=0,Ua.test(h)||(T=Qn(h),_=Qn(p)),_?T!==_&&(h=Xa(e,w,h,_)+_):T&&(p+=T),this.add(c,"setProperty",h,p,r,a,0,0,w),l.push(w),O.push(w,0,c[w]);else if(x!=="undefined"){if(u&&w in u?(h=typeof u[w]=="function"?u[w].call(i,r,e,a):u[w],zn(h)&&~h.indexOf("random(")&&(h=ih(h)),Qn(h+"")||h==="auto"||(h+=zi.units[w]||Qn(Ps(e,w))||""),(h+"").charAt(1)==="="&&(h=Ps(e,w))):h=Ps(e,w),y=parseFloat(h),S=x==="string"&&p.charAt(1)==="="&&p.substr(0,2),S&&(p=p.substr(2)),g=parseFloat(p),w in Yr&&(w==="autoAlpha"&&(y===1&&Ps(e,"visibility")==="hidden"&&g&&(y=0),O.push("visibility",0,c.visibility),Oa(this,c,"visibility",y?"inherit":"hidden",g?"inherit":"hidden",!g)),w!=="scale"&&w!=="transform"&&(w=Yr[w],~w.indexOf(",")&&(w=w.split(",")[0]))),E=w in Xs,E){if(this.styles.save(w),R||(A=e._gsap,A.renderTransform&&!n.parseTransform||oh(e,n.parseTransform),N=n.smoothOrigin!==!1&&A.smooth,R=this._pt=new xi(this._pt,c,on,0,1,A.renderTransform,A,0,-1),R.dep=1),w==="scale")this._pt=new xi(this._pt,A,"scaleY",A.scaleY,(S?gc(A.scaleY,S+g):g)-A.scaleY||0,Fv),this._pt.u=0,l.push("scaleY",w),w+="X";else if(w==="transformOrigin"){O.push(vi,0,c[vi]),p=MG(p),A.svg?Vv(e,p,0,N,0,this):(_=parseFloat(p.split(" ")[2])||0,_!==A.zOrigin&&Oa(this,A,"zOrigin",A.zOrigin,_),Oa(this,c,w,pm(h),pm(p)));continue}else if(w==="svgOrigin"){Vv(e,p,1,N,0,this);continue}else if(w in _R){CG(this,A,w,y,S?gc(y,S+p):p);continue}else if(w==="smoothOrigin"){Oa(this,A,"smooth",A.smooth,p);continue}else if(w==="force3D"){A[w]=p;continue}else if(w==="transform"){NG(this,p,e);continue}}else w in c||(w=zc(w)||w);if(E||(g||g===0)&&(y||y===0)&&!uG.test(p)&&w in c)T=(h+"").substr((y+"").length),g||(g=0),_=Qn(p)||(w in zi.units?zi.units[w]:T),T!==_&&(y=Xa(e,w,h,_)),this._pt=new xi(this._pt,E?A:c,w,y,(S?gc(y,S+g):g)-y,!E&&(_==="px"||w==="zIndex")&&n.autoRound!==!1?fG:Fv),this._pt.u=_||0,T!==_&&_!=="%"&&(this._pt.b=h,this._pt.r=hG);else if(w in c)SG.call(this,e,w,h,S?S+p:p);else if(w in e)this.add(e,w,h||e[w],S?S+p:p,r,a);else if(w!=="parseTransform"){sw(w,p);continue}E||(w in c?O.push(w,0,c[w]):typeof e[w]=="function"?O.push(w,2,e[w]()):O.push(w,1,h||e[w])),l.push(w)}}j&&fR(this)},render:function(e,n){if(n.tween._time||!mw())for(var i=n._pt;i;)i.r(e,i.d),i=i._next;else n.styles.revert()},get:Ps,aliases:Yr,getSetter:function(e,n,i){var r=Yr[n];return r&&r.indexOf(",")<0&&(n=r),n in Xs&&n!==vi&&(e._gsap.x||Ps(e,"x"))?i&&zE===i?n==="scale"?yG:gG:(zE=i||{})&&(n==="scale"?xG:vG):e.style&&!nw(e.style[n])?pG:~n.indexOf("-")?mG:hw(e,n)},core:{_removeProperty:Jo,_getMatrix:yw}};wi.utils.checkPrefix=zc;wi.core.getStyleSaver=xR;(function(t,e,n,i){var r=yi(t+","+e+","+n,function(a){Xs[a]=1});yi(e,function(a){zi.units[a]="deg",_R[a]=1}),Yr[r[13]]=t+","+e,yi(i,function(a){var l=a.split(":");Yr[l[1]]=r[l[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");yi("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){zi.units[t]="px"});wi.registerPlugin(TR);var ar=wi.registerPlugin(TR)||wi;ar.core.Tween;const RG=()=>{const t=k.useRef(null),e=k.useRef(null),n=k.useRef(null),i=k.useRef(null),r=k.useRef(null),[a,l]=k.useState(!0),{theme:c}=vn();return k.useEffect(()=>{const u=new IntersectionObserver(([Ne])=>{l(Ne.isIntersecting)},{root:null,rootMargin:"0px",threshold:.1});r.current&&u.observe(r.current);const h=t.current,p=new pN;e.current=p;const g={width:window.innerWidth,height:window.innerHeight},y=new Bn(60,g.width/g.height,.1,100);y.position.z=7,y.position.x=2.5,y.position.y=.5,p.add(y);const x=new Sh({canvas:h,alpha:!0,antialias:!0,powerPreference:"high-performance"});n.current=x,x.setSize(g.width,g.height),x.setPixelRatio(Math.min(window.devicePixelRatio,2)),x.shadowMap.enabled=!0,x.shadowMap.type=Y3;const b=c==="dark",w={primary:new Xe(b?"#2563eb":"#0056b3"),secondary:new Xe(b?"#3b82f6":"#00a0e3"),accent:new Xe(b?"#1d4ed8":"#e0f7fa"),highlight:new Xe(b?"#60a5fa":"#80deea")},T=new Yy(3.5,96,96),_=new Qr({color:w.primary,wireframe:!0,transparent:!0,opacity:.8,metalness:.2,roughness:.5}),S=new xn(T,_);S.position.set(4.5,0,0),S.castShadow=!0,p.add(S);const E=new Yy(4,96,96),R=new Qr({color:w.secondary,wireframe:!0,transparent:!0,opacity:.15,metalness:.1,roughness:.3}),A=new xn(E,R);A.position.set(4.5,0,0),p.add(A);const N=new Yy(2.8,64,64),j=new Qr({color:w.accent,wireframe:!1,transparent:!0,opacity:.05,metalness:.2,roughness:.8}),O=new xn(N,j);O.position.set(4.5,0,0),p.add(O);const L=new Ot,B=350,F=new Float32Array(B*3),J=new Float32Array(B);for(let Ne=0;Ne<B;Ne++)F[Ne*3]=(Math.random()-.5)*12,F[Ne*3+1]=(Math.random()-.5)*12,F[Ne*3+2]=(Math.random()-.5)*12,J[Ne]=Math.random();L.setAttribute("position",new yt(F,3)),L.setAttribute("scale",new yt(J,1));const Q=new $a({size:.03,sizeAttenuation:!0,color:w.highlight,transparent:!0,opacity:.7,depthWrite:!1}),W=new lv(L,Q);p.add(W);const Z=new Tv(16777215,b?.2:.3);p.add(Z);const z=new Mv(16777215,b?.6:.8);z.position.set(5,5,5),z.castShadow=!0,p.add(z);const $=new Ad(w.primary.getHex(),b?1.2:1.5);$.position.set(3,4,5),p.add($);const U=new Ad(w.secondary.getHex(),b?.8:1);U.position.set(-4,-2,-3),p.add(U);const X=new Ad(w.highlight.getHex(),b?.5:.7);X.position.set(0,3,-5),p.add(X);const D=[];D.push(ar.to(S.rotation,{y:Math.PI*2,duration:35,ease:"power1.inOut",repeat:-1})),D.push(ar.to(S.rotation,{x:Math.PI*.2,duration:20,ease:"sine.inOut",yoyo:!0,repeat:-1})),D.push(ar.to(S.scale,{x:1.05,y:1.05,z:1.05,duration:8,ease:"sine.inOut",yoyo:!0,repeat:-1})),D.push(ar.to(A.rotation,{y:-Math.PI*2,duration:40,ease:"none",repeat:-1})),D.push(ar.to(A.rotation,{x:-Math.PI*.15,duration:25,ease:"sine.inOut",yoyo:!0,repeat:-1})),D.push(ar.to(O.rotation,{y:Math.PI*2,duration:15,ease:"power1.inOut",repeat:-1})),D.push(ar.to(O.scale,{x:1.1,y:1.1,z:1.1,duration:4,ease:"sine.inOut",yoyo:!0,repeat:-1})),D.push(ar.to(y.position,{y:.3,duration:10,ease:"sine.inOut",yoyo:!0,repeat:-1})),D.push(ar.to(y.position,{x:2.7,duration:15,ease:"sine.inOut",yoyo:!0,repeat:-1})),D.push(ar.to(W.rotation,{y:Math.PI*.15,duration:40,ease:"sine.inOut",yoyo:!0,repeat:-1})),D.push(ar.to(W.rotation,{x:Math.PI*.1,duration:45,ease:"sine.inOut",yoyo:!0,repeat:-1}));let q=0,ce=0;const me=Ne=>{a&&(q=(Ne.clientX/g.width-.5)*.2,ce=(Ne.clientY/g.height-.5)*.15)};document.addEventListener("mousemove",me);const fe=()=>{g.width=window.innerWidth,g.height=window.innerHeight,y.aspect=g.width/g.height,y.updateProjectionMatrix(),x.setSize(g.width,g.height),x.setPixelRatio(Math.min(window.devicePixelRatio,2))};window.addEventListener("resize",fe);const ie=()=>{if(a){const Ne=S.position.x+q*.5,Fe=S.position.y+ce*.5;S.position.x+=(Ne-S.position.x)*.05,S.position.y+=(Fe-S.position.y)*.05,A.position.x=S.position.x,A.position.y=S.position.y,O.position.x=S.position.x,O.position.y=S.position.y,W.rotation.y+=5e-4,x.render(p,y)}i.current=window.requestAnimationFrame(ie)};return ie(),()=>{r.current&&u.unobserve(r.current),i.current&&window.cancelAnimationFrame(i.current),window.removeEventListener("resize",fe),document.removeEventListener("mousemove",me),D.forEach(Ne=>Ne.kill()),p.traverse(Ne=>{Ne instanceof xn&&(Ne.geometry.dispose(),Ne.material.dispose())}),x&&x.dispose()}},[c]),k.useEffect(()=>{const u=n.current;if(a){if(i.current===null&&u){const h=()=>{u.render(e.current,e.current.children.find(p=>p instanceof Vs)),i.current=requestAnimationFrame(h)};h()}}else i.current!==null&&(cancelAnimationFrame(i.current),i.current=null)},[a]),f.jsxs("section",{ref:r,id:"home",className:"relative h-screen flex items-center overflow-hidden",children:[f.jsx("canvas",{ref:t,className:"absolute inset-0 z-0"}),f.jsx("div",{className:`absolute inset-0 ${c==="dark"?"bg-gradient-to-r from-gray-900/60 via-gray-900/40 to-gray-900/30":"bg-gradient-to-r from-gray-900/40 via-gray-900/20 to-gray-900/10"} z-0`}),f.jsx("div",{className:"container mx-auto px-6 z-10 relative",children:f.jsxs("div",{className:"max-w-3xl",children:[f.jsx(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},children:f.jsx(Ge.span,{className:`inline-block ${c==="dark"?"text-blue-400":"text-blue-600"} font-semibold mb-3 text-lg tracking-wide transition-colors duration-300`,children:"Welcome to MediConnect"})}),f.jsx(Ge.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,delay:.2,ease:"easeOut"},className:`text-4xl md:text-6xl font-bold ${c==="dark"?"text-white":"text-gray-900"} mb-6 leading-tight transition-colors duration-300`,children:"Connecting You With Healthcare Professionals"}),f.jsx(Ge.p,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,delay:.4,ease:"easeOut"},className:`text-xl ${c==="dark"?"text-gray-300":"text-gray-700"} mb-8 leading-relaxed transition-colors duration-300`,children:"Schedule appointments with qualified doctors online, anytime, anywhere."}),f.jsxs("div",{className:"flex flex-wrap gap-4",children:[f.jsx(Ge.button,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6,ease:"easeOut"},whileHover:{scale:1.05,transition:{duration:.2}},whileTap:{scale:.98},className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transform transition-all duration-300",onClick:()=>window.location.href="/finddoctors",children:"Find a Doctor"}),f.jsx(Ge.button,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5,delay:.7,ease:"easeOut"},whileHover:{scale:1.05,backgroundColor:c==="dark"?"rgba(30, 41, 59, 0.8)":"rgba(255, 255, 255, 0.9)",transition:{duration:.2}},whileTap:{scale:.98},className:`${c==="dark"?"bg-slate-800 text-blue-400 border-2 border-blue-500":"bg-white text-blue-600 border-2 border-blue-600"} font-bold py-3 px-8 rounded-lg shadow-md transform transition-all duration-300`,onClick:()=>window.location.href="/about-us",children:"Learn More"})]})]})})]})},LG=[{icon:"",title:"Book Appointments",description:"Schedule appointments with doctors across various specialties with just a few clicks."},{icon:"",title:"Find Specialists",description:"Search for specialists by expertise, location, availability, and patient ratings."},{icon:"",title:"Online Consultations",description:"Connect with healthcare professionals through secure video consultations."},{icon:"",title:"Health Records",description:"Maintain your medical history and share it securely with your healthcare providers."}],kG={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}},jG={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5}}},DG=()=>{const{theme:t}=vn();return f.jsx("section",{id:"services",className:`py-16 ${t==="dark"?"bg-gray-900":"bg-gray-50"} transition-colors duration-300`,children:f.jsxs("div",{className:"container mx-auto px-6",children:[f.jsxs("div",{className:"text-center mb-12",children:[f.jsx(Ge.h2,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!0},className:`text-3xl font-bold ${t==="dark"?"text-white":"text-gray-900"} mb-4 transition-colors duration-300`,children:"Our Services"}),f.jsx(Ge.p,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.5,delay:.2},viewport:{once:!0},className:`text-xl ${t==="dark"?"text-gray-300":"text-gray-600"} max-w-2xl mx-auto transition-colors duration-300`,children:"We provide a comprehensive platform to connect patients with healthcare professionals."})]}),f.jsx(Ge.div,{variants:kG,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:LG.map((e,n)=>f.jsxs(Ge.div,{variants:jG,className:`${t==="dark"?"bg-gray-800 hover:bg-gray-700 text-white":"bg-white hover:shadow-lg text-gray-900"} p-6 rounded-lg shadow-md transition-all duration-300`,children:[f.jsx("div",{className:"text-4xl mb-4",children:e.icon}),f.jsx("h3",{className:`text-xl font-semibold ${t==="dark"?"text-white":"text-gray-900"} mb-2 transition-colors duration-300`,children:e.title}),f.jsx("p",{className:`${t==="dark"?"text-gray-300":"text-gray-600"} transition-colors duration-300`,children:e.description})]},n))})]})})},PG=()=>{const{theme:t}=vn();return f.jsx("section",{id:"about",className:"py-16",children:f.jsx("div",{className:`container mx-auto px-6 transition-colors duration-300 ${t==="light"?"bg-white text-black":"bg-gray-900 text-white"}`,children:f.jsxs("div",{className:"flex flex-col lg:flex-row items-center",children:[f.jsxs(Ge.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},transition:{duration:.8},viewport:{once:!0},className:"lg:w-1/2 lg:pr-12 mb-8 lg:mb-0",children:[f.jsx("h2",{className:`text-3xl font-bold mb-4 ${t==="light"?"text-gray-900":"text-gray-100"}`,children:"About MediConnect"}),f.jsx("p",{className:`mb-4 ${t==="light"?"text-gray-600":"text-gray-300"}`,children:"MediConnect was founded with a simple mission: to make healthcare more accessible for everyone. We bridge the gap between patients and healthcare professionals, making it easier to find and connect with the right medical expertise when you need it most."}),f.jsx("p",{className:`mb-4 ${t==="light"?"text-gray-600":"text-gray-300"}`,children:"Our platform leverages technology to simplify the process of finding specialists, scheduling appointments, and maintaining your health records. We're committed to improving healthcare experiences through innovation and user-centered design."}),f.jsx("p",{className:`${t==="light"?"text-gray-600":"text-gray-300"}`,children:"With MediConnect, you can take control of your healthcare journey with confidence, knowing that qualified medical professionals are just a few clicks away."})]}),f.jsx(Ge.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},transition:{duration:.8},viewport:{once:!0},className:"lg:w-1/2",children:f.jsx("div",{className:"rounded-lg overflow-hidden shadow-xl",children:f.jsx("img",{src:"/medicalphoto.jpg",alt:"Medical team",className:"w-full h-[400px] object-cover"})})})]})})})},OG=()=>{const{theme:t}=vn(),e="http://localhost:5000",[n,i]=k.useState({name:"",email:"",subject:"",message:""}),r=x=>{const{name:b,value:w}=x.target;i(T=>({...T,[b]:w}))},a=async x=>{x.preventDefault();try{const b=await fetch(`${e}/contact/email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),w=await b.json();b.ok?(alert(" Thank you for your message. We will contact you soon!"),i({name:"",email:"",subject:"",message:""})):alert(` Failed to send message: ${w.error||"Unknown error"}`)}catch(b){console.error(" Error sending email:",b),alert(" Something went wrong. Please try again later.")}},l=t==="dark"?"bg-gray-800":"bg-gray-50",c=t==="dark"?"bg-gray-700":"bg-white",u=t==="dark"?"text-gray-100":"text-gray-900",h=t==="dark"?"text-gray-300":"text-gray-600",p=t==="dark"?"bg-gray-600 border-gray-500":"bg-white border-gray-300",g=t==="dark"?"text-white":"text-gray-700",y=t==="dark"?"bg-blue-500 hover:bg-blue-600":"bg-blue-600 hover:bg-blue-700";return f.jsx("section",{id:"contact",className:`py-16 ${l} transition-colors duration-300`,children:f.jsxs("div",{className:"container mx-auto px-6",children:[f.jsxs(Ge.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!0},className:"text-center mb-12",children:[f.jsx("h2",{className:`text-3xl font-bold ${u} mb-4`,children:"Contact Us"}),f.jsx("p",{className:`text-xl ${h} max-w-2xl mx-auto`,children:"Have questions or need assistance? Reach out to our team and we'll get back to you as soon as possible."})]}),f.jsx("div",{className:"max-w-4xl mx-auto",children:f.jsxs(Ge.form,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.5,delay:.2},viewport:{once:!0},onSubmit:a,className:`${c} rounded-lg shadow-md p-8 transition-colors duration-300`,children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{htmlFor:"name",className:`block ${g} font-medium mb-2`,children:"Name"}),f.jsx("input",{type:"text",id:"name",name:"name",value:n.name,onChange:r,required:!0,className:`w-full px-4 py-2 border ${p} rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400 ${g} transition-colors duration-300`})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{htmlFor:"email",className:`block ${g} font-medium mb-2`,children:"Email"}),f.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:r,required:!0,className:`w-full px-4 py-2 border ${p} rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400 ${g} transition-colors duration-300`})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{htmlFor:"subject",className:`block ${g} font-medium mb-2`,children:"Subject"}),f.jsx("input",{type:"text",id:"subject",name:"subject",value:n.subject,onChange:r,required:!0,className:`w-full px-4 py-2 border ${p} rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400 ${g} transition-colors duration-300`})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{htmlFor:"message",className:`block ${g} font-medium mb-2`,children:"Message"}),f.jsx("textarea",{id:"message",name:"message",value:n.message,onChange:r,required:!0,rows:"5",className:`w-full px-4 py-2 border ${p} rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400 ${g} transition-colors duration-300`})]}),f.jsxs(Ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",className:`${y} text-white font-bold py-3 px-6 rounded-lg shadow-lg w-full flex items-center justify-center space-x-2 transition-colors duration-300`,children:[f.jsx("span",{children:"Send Message"}),f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]})})]})})},BG=()=>{const{theme:t}=vn(),e=t==="dark";return f.jsx("footer",{className:`${e?"bg-gray-900 text-white":"bg-gray-100 text-gray-800"} py-12 transition-colors duration-300`,children:f.jsxs("div",{className:"container mx-auto px-6",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-bold mb-4",children:"MediConnect"}),f.jsx("p",{className:`${e?"text-gray-400":"text-gray-600"}`,children:"Connecting patients with healthcare professionals through an intuitive and secure platform."})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-bold mb-4",children:"Quick Links"}),f.jsxs("ul",{className:"space-y-2",children:[f.jsx("li",{children:f.jsx("a",{href:"#home",className:`${e?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-colors`,children:"Home"})}),f.jsx("li",{children:f.jsx("a",{href:"#services",className:`${e?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-colors`,children:"Services"})}),f.jsx("li",{children:f.jsx("a",{href:"#about",className:`${e?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-colors`,children:"About Us"})}),f.jsx("li",{children:f.jsx("a",{href:"#contact",className:`${e?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-colors`,children:"Contact"})})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-bold mb-4",children:"Support"}),f.jsxs("ul",{className:"space-y-2",children:[f.jsx("li",{children:f.jsx("a",{href:"#",className:`${e?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-colors`,children:"Help Center"})}),f.jsx("li",{children:f.jsx("a",{href:"#",className:`${e?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-colors`,children:"Privacy Policy"})}),f.jsx("li",{children:f.jsx("a",{href:"#",className:`${e?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-colors`,children:"Terms of Service"})}),f.jsx("li",{children:f.jsx("a",{href:"#",className:`${e?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-colors`,children:"FAQs"})})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-bold mb-4",children:"Contact Info"}),f.jsxs("ul",{className:`space-y-2 ${e?"text-gray-400":"text-gray-600"}`,children:[f.jsx("li",{children:"123 Healthcare Blvd"}),f.jsx("li",{children:"Medical District, MD 12345"}),f.jsx("li",{children:"info@mediconnect.com"}),f.jsx("li",{children:"(123) 456-7890"})]})]})]}),f.jsxs("div",{className:`border-t ${e?"border-gray-800":"border-gray-300"} mt-8 pt-8 flex flex-col md:flex-row justify-between items-center`,children:[f.jsxs("p",{className:`${e?"text-gray-400":"text-gray-600"} mb-4 md:mb-0`,children:[" ",new Date().getFullYear()," MediConnect. All rights reserved."]}),f.jsxs("div",{className:"flex space-x-4",children:[f.jsxs("a",{href:"#",className:`${e?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-colors`,children:[f.jsx("span",{className:"sr-only",children:"Facebook"}),f.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:f.jsx("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z",clipRule:"evenodd"})})]}),f.jsxs("a",{href:"#",className:`${e?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-colors`,children:[f.jsx("span",{className:"sr-only",children:"Twitter"}),f.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:f.jsx("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})})]}),f.jsxs("a",{href:"#",className:`${e?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-colors`,children:[f.jsx("span",{className:"sr-only",children:"Instagram"}),f.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:f.jsx("path",{fillRule:"evenodd",d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z",clipRule:"evenodd"})})]})]})]})]})})},zG=()=>f.jsxs("div",{children:[f.jsx(fF,{}),f.jsx(RG,{}),f.jsx(DG,{}),f.jsx(PG,{}),f.jsx(OG,{}),f.jsx(BG,{})]}),FG=()=>{const{doctor:t,isLoading:e,error:n,updateProfile:i,clearError:r}=pr(),{theme:a,toggleTheme:l}=vn();k.useEffect(()=>{pr.getState().checkAuth()},[]);const[c,u]=k.useState({name:"",email:"",phone:"",specialization:"",experience:"",degree:"",age:"",gender:"",password:"",confirmPassword:""}),[h,p]=k.useState(null),[g,y]=k.useState(""),[x,b]=k.useState(!1);k.useEffect(()=>{t&&(u({name:t.name||"",email:t.email||"",phone:t.phone||"",specialization:t.specialization||"",experience:t.experience||"",degree:t.degree||"",age:t.age||"",gender:t.gender||"",password:"",confirmPassword:""}),y(t.avatar||""))},[t]),k.useEffect(()=>()=>r(),[r]),k.useEffect(()=>{n&&(Rn.error(n),r())},[n,r]);const w=S=>{const{name:E,value:R}=S.target;u(A=>({...A,[E]:R}))},T=S=>{const E=S.target.files[0];if(E){p(E);const R=new FileReader;R.onloadend=()=>{y(R.result)},R.readAsDataURL(E)}},_=async S=>{if(S.preventDefault(),c.password&&c.password!==c.confirmPassword)return Rn.error("Passwords do not match");const E=new FormData;for(const A in c)c[A]&&A!=="confirmPassword"&&E.append(A,c[A]);h&&E.append("avatar",h),(await i(E)).success&&(Rn.success("Profile updated successfully"),b(!1),p(null))};return t?f.jsx("div",{className:`min-h-screen ${a==="dark"?"bg-gray-900 text-white":"bg-gray-100"} transition-colors duration-300`,children:f.jsx("div",{className:"container mx-auto px-4 py-8",children:f.jsxs("div",{className:`${a==="dark"?"bg-gray-800 shadow-lg":"bg-white shadow-md"} rounded-lg overflow-hidden max-w-4xl mx-auto transition-colors duration-300`,children:[f.jsxs("div",{className:`${a==="dark"?"bg-gradient-to-r from-indigo-700 to-purple-800":"bg-gradient-to-r from-blue-500 to-indigo-600"} px-6 py-4 flex justify-between items-center`,children:[f.jsx("h2",{className:"text-2xl font-bold text-white",children:"Doctor Profile"}),f.jsx("button",{onClick:l,className:`flex items-center justify-center rounded-full p-2 ${a==="dark"?"bg-gray-700 text-yellow-300":"bg-blue-400 text-gray-800"}`,"aria-label":`Toggle ${a==="dark"?"light":"dark"} mode`,children:a==="dark"?f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})]}),f.jsx("div",{className:"p-6",children:x?f.jsxs("form",{onSubmit:_,className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col items-center mb-6",children:[f.jsx("div",{className:`w-32 h-32 rounded-full overflow-hidden mb-4 ${a==="dark"?"ring-2 ring-indigo-500":"ring-2 ring-blue-300"}`,children:f.jsx("img",{src:g||t.avatar||"/placeholder-avatar.png",alt:"Doctor Avatar",className:"w-full h-full object-cover"})}),f.jsxs("label",{className:`cursor-pointer ${a==="dark"?"bg-indigo-600 hover:bg-indigo-700":"bg-blue-500 hover:bg-blue-600"} text-white py-2 px-4 rounded transition-colors duration-200`,children:["Change Photo",f.jsx("input",{type:"file",accept:"image/*",onChange:T,className:"hidden"})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:`block ${a==="dark"?"text-gray-300":"text-gray-700"} font-semibold mb-2`,children:"Name"}),f.jsx("input",{type:"text",name:"name",value:c.name,onChange:w,className:`w-full border rounded-md px-3 py-2 ${a==="dark"?"bg-gray-700 border-gray-600 text-white focus:ring-indigo-500":"bg-white border-gray-300 focus:ring-blue-500"} focus:outline-none focus:ring-2`,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block ${a==="dark"?"text-gray-300":"text-gray-700"} font-semibold mb-2`,children:"Email"}),f.jsx("input",{type:"email",name:"email",value:c.email,onChange:w,className:`w-full border rounded-md px-3 py-2 ${a==="dark"?"bg-gray-700 border-gray-600 text-white focus:ring-indigo-500":"bg-white border-gray-300 focus:ring-blue-500"} focus:outline-none focus:ring-2`,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block ${a==="dark"?"text-gray-300":"text-gray-700"} font-semibold mb-2`,children:"Phone"}),f.jsx("input",{type:"tel",name:"phone",value:c.phone,onChange:w,className:`w-full border rounded-md px-3 py-2 ${a==="dark"?"bg-gray-700 border-gray-600 text-white focus:ring-indigo-500":"bg-white border-gray-300 focus:ring-blue-500"} focus:outline-none focus:ring-2`,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block ${a==="dark"?"text-gray-300":"text-gray-700"} font-semibold mb-2`,children:"Specialization"}),f.jsx("input",{type:"text",name:"specialization",value:c.specialization,onChange:w,className:`w-full border rounded-md px-3 py-2 ${a==="dark"?"bg-gray-700 border-gray-600 text-white focus:ring-indigo-500":"bg-white border-gray-300 focus:ring-blue-500"} focus:outline-none focus:ring-2`,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block ${a==="dark"?"text-gray-300":"text-gray-700"} font-semibold mb-2`,children:"Experience (years)"}),f.jsx("input",{type:"number",name:"experience",value:c.experience,onChange:w,className:`w-full border rounded-md px-3 py-2 ${a==="dark"?"bg-gray-700 border-gray-600 text-white focus:ring-indigo-500":"bg-white border-gray-300 focus:ring-blue-500"} focus:outline-none focus:ring-2`,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block ${a==="dark"?"text-gray-300":"text-gray-700"} font-semibold mb-2`,children:"Degree"}),f.jsx("input",{type:"text",name:"degree",value:c.degree,onChange:w,className:`w-full border rounded-md px-3 py-2 ${a==="dark"?"bg-gray-700 border-gray-600 text-white focus:ring-indigo-500":"bg-white border-gray-300 focus:ring-blue-500"} focus:outline-none focus:ring-2`,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block ${a==="dark"?"text-gray-300":"text-gray-700"} font-semibold mb-2`,children:"Age"}),f.jsx("input",{type:"number",name:"age",value:c.age,onChange:w,className:`w-full border rounded-md px-3 py-2 ${a==="dark"?"bg-gray-700 border-gray-600 text-white focus:ring-indigo-500":"bg-white border-gray-300 focus:ring-blue-500"} focus:outline-none focus:ring-2`,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block ${a==="dark"?"text-gray-300":"text-gray-700"} font-semibold mb-2`,children:"Gender"}),f.jsxs("select",{name:"gender",value:c.gender,onChange:w,className:`w-full border rounded-md px-3 py-2 ${a==="dark"?"bg-gray-700 border-gray-600 text-white focus:ring-indigo-500":"bg-white border-gray-300 focus:ring-blue-500"} focus:outline-none focus:ring-2`,required:!0,children:[f.jsx("option",{value:"",children:"Select Gender"}),f.jsx("option",{value:"Male",children:"Male"}),f.jsx("option",{value:"Female",children:"Female"}),f.jsx("option",{value:"Other",children:"Other"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block ${a==="dark"?"text-gray-300":"text-gray-700"} font-semibold mb-2`,children:"New Password (leave blank to keep current)"}),f.jsx("input",{type:"password",name:"password",value:c.password,onChange:w,className:`w-full border rounded-md px-3 py-2 ${a==="dark"?"bg-gray-700 border-gray-600 text-white focus:ring-indigo-500":"bg-white border-gray-300 focus:ring-blue-500"} focus:outline-none focus:ring-2`})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block ${a==="dark"?"text-gray-300":"text-gray-700"} font-semibold mb-2`,children:"Confirm New Password"}),f.jsx("input",{type:"password",name:"confirmPassword",value:c.confirmPassword,onChange:w,className:`w-full border rounded-md px-3 py-2 ${a==="dark"?"bg-gray-700 border-gray-600 text-white focus:ring-indigo-500":"bg-white border-gray-300 focus:ring-blue-500"} focus:outline-none focus:ring-2`})]})]}),f.jsxs("div",{className:"flex gap-4 justify-end mt-6",children:[f.jsx("button",{type:"button",onClick:()=>b(!1),className:`${a==="dark"?"bg-gray-600 hover:bg-gray-700 text-white":"bg-gray-300 hover:bg-gray-400 text-gray-800"} py-2 px-6 rounded transition-colors duration-200`,children:"Cancel"}),f.jsx("button",{type:"submit",className:`${a==="dark"?"bg-indigo-600 hover:bg-indigo-700":"bg-blue-500 hover:bg-blue-600"} text-white py-2 px-6 rounded transition-colors duration-200`,disabled:e,children:e?"Saving...":"Save Changes"})]})]}):f.jsxs("div",{children:[f.jsxs("div",{className:"flex flex-col md:flex-row",children:[f.jsx("div",{className:"flex-shrink-0 mb-6 md:mb-0 md:mr-8",children:f.jsx("div",{className:`w-40 h-40 rounded-full overflow-hidden ${a==="dark"?"ring-2 ring-indigo-500":"ring-2 ring-blue-300"}`,children:f.jsx("img",{src:t.avatar||"/placeholder-avatar.png",alt:"Doctor Avatar",className:"w-full h-full object-cover"})})}),f.jsxs("div",{className:"flex-grow",children:[f.jsx("h3",{className:"text-2xl font-bold mb-2",children:t.name}),f.jsx("p",{className:`text-lg ${a==="dark"?"text-indigo-400":"text-blue-600"} mb-4`,children:t.specialization}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-y-4 gap-x-8",children:[f.jsxs("div",{children:[f.jsx("p",{className:`${a==="dark"?"text-gray-400":"text-gray-500"}`,children:"Email"}),f.jsx("p",{className:"font-medium",children:t.email})]}),f.jsxs("div",{children:[f.jsx("p",{className:`${a==="dark"?"text-gray-400":"text-gray-500"}`,children:"Phone"}),f.jsx("p",{className:"font-medium",children:t.phone})]}),f.jsxs("div",{children:[f.jsx("p",{className:`${a==="dark"?"text-gray-400":"text-gray-500"}`,children:"Experience"}),f.jsxs("p",{className:"font-medium",children:[t.experience," years"]})]}),f.jsxs("div",{children:[f.jsx("p",{className:`${a==="dark"?"text-gray-400":"text-gray-500"}`,children:"Degree"}),f.jsx("p",{className:"font-medium",children:t.degree})]}),f.jsxs("div",{children:[f.jsx("p",{className:`${a==="dark"?"text-gray-400":"text-gray-500"}`,children:"Age"}),f.jsxs("p",{className:"font-medium",children:[t.age," years"]})]}),f.jsxs("div",{children:[f.jsx("p",{className:`${a==="dark"?"text-gray-400":"text-gray-500"}`,children:"Gender"}),f.jsx("p",{className:"font-medium",children:t.gender&&t.gender.charAt(0).toUpperCase()+t.gender.slice(1)})]})]})]})]}),f.jsx("div",{className:"flex justify-end mt-8",children:f.jsx("button",{onClick:()=>b(!0),className:`${a==="dark"?"bg-indigo-600 hover:bg-indigo-700":"bg-blue-500 hover:bg-blue-600"} text-white py-2 px-6 rounded transition-colors duration-200`,children:"Edit Profile"})})]})})]})})}):f.jsx("div",{className:`min-h-screen flex items-center justify-center ${a==="dark"?"bg-gray-800 text-white":"bg-gray-100"}`,children:f.jsx("div",{className:"text-xl",children:"Loading profile..."})})},ER=6048e5,IG=864e5,qE=Symbol.for("constructDateFrom");function Za(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&qE in t?t[qE](e):t instanceof Date?new t.constructor(e):new Date(e)}function Pr(t,e){return Za(e||t,t)}let UG={};function $m(){return UG}function lh(t,e){var c,u,h,p;const n=$m(),i=(e==null?void 0:e.weekStartsOn)??((u=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((p=(h=n.locale)==null?void 0:h.options)==null?void 0:p.weekStartsOn)??0,r=Pr(t,e==null?void 0:e.in),a=r.getDay(),l=(a<i?7:0)+a-i;return r.setDate(r.getDate()-l),r.setHours(0,0,0,0),r}function mm(t,e){return lh(t,{...e,weekStartsOn:1})}function AR(t,e){const n=Pr(t,e==null?void 0:e.in),i=n.getFullYear(),r=Za(n,0);r.setFullYear(i+1,0,4),r.setHours(0,0,0,0);const a=mm(r),l=Za(n,0);l.setFullYear(i,0,4),l.setHours(0,0,0,0);const c=mm(l);return n.getTime()>=a.getTime()?i+1:n.getTime()>=c.getTime()?i:i-1}function YE(t){const e=Pr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function VG(t,...e){const n=Za.bind(null,e.find(i=>typeof i=="object"));return e.map(n)}function XE(t,e){const n=Pr(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function HG(t,e,n){const[i,r]=VG(n==null?void 0:n.in,t,e),a=XE(i),l=XE(r),c=+a-YE(a),u=+l-YE(l);return Math.round((c-u)/IG)}function GG(t,e){const n=AR(t,e),i=Za(t,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),mm(i)}function WG(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function $G(t){return!(!WG(t)&&typeof t!="number"||isNaN(+Pr(t)))}function qG(t,e){const n=Pr(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const YG={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},XG=(t,e,n)=>{let i;const r=YG[t];return typeof r=="string"?i=r:e===1?i=r.one:i=r.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function ox(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const ZG={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},QG={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},JG={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},KG={date:ox({formats:ZG,defaultWidth:"full"}),time:ox({formats:QG,defaultWidth:"full"}),dateTime:ox({formats:JG,defaultWidth:"full"})},eW={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},tW=(t,e,n,i)=>eW[t];function sd(t){return(e,n)=>{const i=n!=null&&n.context?String(n.context):"standalone";let r;if(i==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,c=n!=null&&n.width?String(n.width):l;r=t.formattingValues[c]||t.formattingValues[l]}else{const l=t.defaultWidth,c=n!=null&&n.width?String(n.width):t.defaultWidth;r=t.values[c]||t.values[l]}const a=t.argumentCallback?t.argumentCallback(e):e;return r[a]}}const nW={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},iW={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},rW={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},sW={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},aW={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},oW={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},lW=(t,e)=>{const n=Number(t),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},cW={ordinalNumber:lW,era:sd({values:nW,defaultWidth:"wide"}),quarter:sd({values:iW,defaultWidth:"wide",argumentCallback:t=>t-1}),month:sd({values:rW,defaultWidth:"wide"}),day:sd({values:sW,defaultWidth:"wide"}),dayPeriod:sd({values:aW,defaultWidth:"wide",formattingValues:oW,defaultFormattingWidth:"wide"})};function ad(t){return(e,n={})=>{const i=n.width,r=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],a=e.match(r);if(!a)return null;const l=a[0],c=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(c)?dW(c,g=>g.test(l)):uW(c,g=>g.test(l));let h;h=t.valueCallback?t.valueCallback(u):u,h=n.valueCallback?n.valueCallback(h):h;const p=e.slice(l.length);return{value:h,rest:p}}}function uW(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function dW(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function hW(t){return(e,n={})=>{const i=e.match(t.matchPattern);if(!i)return null;const r=i[0],a=e.match(t.parsePattern);if(!a)return null;let l=t.valueCallback?t.valueCallback(a[0]):a[0];l=n.valueCallback?n.valueCallback(l):l;const c=e.slice(r.length);return{value:l,rest:c}}}const fW=/^(\d+)(th|st|nd|rd)?/i,pW=/\d+/i,mW={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},gW={any:[/^b/i,/^(a|c)/i]},yW={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},xW={any:[/1/i,/2/i,/3/i,/4/i]},vW={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},bW={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},wW={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},_W={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},SW={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},MW={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},TW={ordinalNumber:hW({matchPattern:fW,parsePattern:pW,valueCallback:t=>parseInt(t,10)}),era:ad({matchPatterns:mW,defaultMatchWidth:"wide",parsePatterns:gW,defaultParseWidth:"any"}),quarter:ad({matchPatterns:yW,defaultMatchWidth:"wide",parsePatterns:xW,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ad({matchPatterns:vW,defaultMatchWidth:"wide",parsePatterns:bW,defaultParseWidth:"any"}),day:ad({matchPatterns:wW,defaultMatchWidth:"wide",parsePatterns:_W,defaultParseWidth:"any"}),dayPeriod:ad({matchPatterns:SW,defaultMatchWidth:"any",parsePatterns:MW,defaultParseWidth:"any"})},EW={code:"en-US",formatDistance:XG,formatLong:KG,formatRelative:tW,localize:cW,match:TW,options:{weekStartsOn:0,firstWeekContainsDate:1}};function AW(t,e){const n=Pr(t,e==null?void 0:e.in);return HG(n,qG(n))+1}function CW(t,e){const n=Pr(t,e==null?void 0:e.in),i=+mm(n)-+GG(n);return Math.round(i/ER)+1}function CR(t,e){var p,g,y,x;const n=Pr(t,e==null?void 0:e.in),i=n.getFullYear(),r=$m(),a=(e==null?void 0:e.firstWeekContainsDate)??((g=(p=e==null?void 0:e.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??r.firstWeekContainsDate??((x=(y=r.locale)==null?void 0:y.options)==null?void 0:x.firstWeekContainsDate)??1,l=Za((e==null?void 0:e.in)||t,0);l.setFullYear(i+1,0,a),l.setHours(0,0,0,0);const c=lh(l,e),u=Za((e==null?void 0:e.in)||t,0);u.setFullYear(i,0,a),u.setHours(0,0,0,0);const h=lh(u,e);return+n>=+c?i+1:+n>=+h?i:i-1}function NW(t,e){var c,u,h,p;const n=$m(),i=(e==null?void 0:e.firstWeekContainsDate)??((u=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(h=n.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,r=CR(t,e),a=Za((e==null?void 0:e.in)||t,0);return a.setFullYear(r,0,i),a.setHours(0,0,0,0),lh(a,e)}function RW(t,e){const n=Pr(t,e==null?void 0:e.in),i=+lh(n,e)-+NW(n,e);return Math.round(i/ER)+1}function jt(t,e){const n=t<0?"-":"",i=Math.abs(t).toString().padStart(e,"0");return n+i}const Ra={y(t,e){const n=t.getFullYear(),i=n>0?n:1-n;return jt(e==="yy"?i%100:i,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):jt(n+1,2)},d(t,e){return jt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return jt(t.getHours()%12||12,e.length)},H(t,e){return jt(t.getHours(),e.length)},m(t,e){return jt(t.getMinutes(),e.length)},s(t,e){return jt(t.getSeconds(),e.length)},S(t,e){const n=e.length,i=t.getMilliseconds(),r=Math.trunc(i*Math.pow(10,n-3));return jt(r,e.length)}},ec={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ZE={G:function(t,e,n){const i=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const i=t.getFullYear(),r=i>0?i:1-i;return n.ordinalNumber(r,{unit:"year"})}return Ra.y(t,e)},Y:function(t,e,n,i){const r=CR(t,i),a=r>0?r:1-r;if(e==="YY"){const l=a%100;return jt(l,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):jt(a,e.length)},R:function(t,e){const n=AR(t);return jt(n,e.length)},u:function(t,e){const n=t.getFullYear();return jt(n,e.length)},Q:function(t,e,n){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return jt(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,e,n){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return jt(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,e,n){const i=t.getMonth();switch(e){case"M":case"MM":return Ra.M(t,e);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(t,e,n){const i=t.getMonth();switch(e){case"L":return String(i+1);case"LL":return jt(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(t,e,n,i){const r=RW(t,i);return e==="wo"?n.ordinalNumber(r,{unit:"week"}):jt(r,e.length)},I:function(t,e,n){const i=CW(t);return e==="Io"?n.ordinalNumber(i,{unit:"week"}):jt(i,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Ra.d(t,e)},D:function(t,e,n){const i=AW(t);return e==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):jt(i,e.length)},E:function(t,e,n){const i=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(t,e,n,i){const r=t.getDay(),a=(r-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return jt(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});case"eeee":default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(t,e,n,i){const r=t.getDay(),a=(r-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return jt(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});case"cccc":default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(t,e,n){const i=t.getDay(),r=i===0?7:i;switch(e){case"i":return String(r);case"ii":return jt(r,e.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(t,e,n){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){const i=t.getHours();let r;switch(i===12?r=ec.noon:i===0?r=ec.midnight:r=i/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){const i=t.getHours();let r;switch(i>=17?r=ec.evening:i>=12?r=ec.afternoon:i>=4?r=ec.morning:r=ec.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let i=t.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return Ra.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Ra.H(t,e)},K:function(t,e,n){const i=t.getHours()%12;return e==="Ko"?n.ordinalNumber(i,{unit:"hour"}):jt(i,e.length)},k:function(t,e,n){let i=t.getHours();return i===0&&(i=24),e==="ko"?n.ordinalNumber(i,{unit:"hour"}):jt(i,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ra.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Ra.s(t,e)},S:function(t,e){return Ra.S(t,e)},X:function(t,e,n){const i=t.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return JE(i);case"XXXX":case"XX":return jo(i);case"XXXXX":case"XXX":default:return jo(i,":")}},x:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"x":return JE(i);case"xxxx":case"xx":return jo(i);case"xxxxx":case"xxx":default:return jo(i,":")}},O:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+QE(i,":");case"OOOO":default:return"GMT"+jo(i,":")}},z:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+QE(i,":");case"zzzz":default:return"GMT"+jo(i,":")}},t:function(t,e,n){const i=Math.trunc(+t/1e3);return jt(i,e.length)},T:function(t,e,n){return jt(+t,e.length)}};function QE(t,e=""){const n=t>0?"-":"+",i=Math.abs(t),r=Math.trunc(i/60),a=i%60;return a===0?n+String(r):n+String(r)+e+jt(a,2)}function JE(t,e){return t%60===0?(t>0?"-":"+")+jt(Math.abs(t)/60,2):jo(t,e)}function jo(t,e=""){const n=t>0?"-":"+",i=Math.abs(t),r=jt(Math.trunc(i/60),2),a=jt(i%60,2);return n+r+e+a}const KE=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},NR=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},LW=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],i=n[1],r=n[2];if(!r)return KE(t,e);let a;switch(i){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",KE(i,e)).replace("{{time}}",NR(r,e))},kW={p:NR,P:LW},jW=/^D+$/,DW=/^Y+$/,PW=["D","DD","YY","YYYY"];function OW(t){return jW.test(t)}function BW(t){return DW.test(t)}function zW(t,e,n){const i=FW(t,e,n);if(console.warn(i),PW.includes(t))throw new RangeError(i)}function FW(t,e,n){const i=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const IW=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,UW=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,VW=/^'([^]*?)'?$/,HW=/''/g,GW=/[a-zA-Z]/;function RR(t,e,n){var p,g,y,x;const i=$m(),r=i.locale??EW,a=i.firstWeekContainsDate??((g=(p=i.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,l=i.weekStartsOn??((x=(y=i.locale)==null?void 0:y.options)==null?void 0:x.weekStartsOn)??0,c=Pr(t,n==null?void 0:n.in);if(!$G(c))throw new RangeError("Invalid time value");let u=e.match(UW).map(b=>{const w=b[0];if(w==="p"||w==="P"){const T=kW[w];return T(b,r.formatLong)}return b}).join("").match(IW).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const w=b[0];if(w==="'")return{isToken:!1,value:WW(b)};if(ZE[w])return{isToken:!0,value:b};if(w.match(GW))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:b}});r.localize.preprocessor&&(u=r.localize.preprocessor(c,u));const h={firstWeekContainsDate:a,weekStartsOn:l,locale:r};return u.map(b=>{if(!b.isToken)return b.value;const w=b.value;(BW(w)||OW(w))&&zW(w,e,String(t));const T=ZE[w[0]];return T(c,w,r.localize,h)}).join("")}function WW(t){const e=t.match(VW);return e?e[1].replace(HW,"'"):t}const $W=()=>{const{theme:t,toggleTheme:e}=vn(),[n,i]=k.useState([]),[r,a]=k.useState(!1),[l,c]=k.useState(null),[u,h]=k.useState("confirmed"),[p,g]=k.useState({startDate:new Date(new Date().setDate(new Date().getDate()-30)).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),y="http://localhost:5000";k.useEffect(()=>{x()},[u,p]);const x=async()=>{var F,J;try{a(!0);const Q=await Lt.get(`${y}/doctor/appointments?status=${u}`,{withCredentials:!0}),W=Q.data.data.appointments.filter(Z=>{const z=new Date(`${Z.date}T${Z.time}`),$=new Date(p.startDate),U=new Date(p.endDate);return U.setHours(23,59,59,999),z>=$&&z<=U});i(W),console.log("filtered",W),console.log("Response",Q),a(!1)}catch(Q){console.error("Error fetching appointments:",Q),c(((J=(F=Q.response)==null?void 0:F.data)==null?void 0:J.message)||"Failed to fetch appointments"),a(!1)}},b=F=>{h(F.target.value)},w=F=>{g({...p,[F.target.name]:F.target.value})},T=async(F,J)=>{var Q,W;try{console.log("Updating status"),await Lt.patch(`${y}/doctor/appointments/${F}/status`,{status:J},{withCredentials:!0}),x(),console.log("Status updated")}catch(Z){c(((W=(Q=Z.response)==null?void 0:Q.data)==null?void 0:W.message)||"Failed to update appointment status")}},_=F=>RR(new Date(F),"MMM dd, yyyy - h:mm a"),S=F=>{switch(F){case"confirmed":return`${t==="dark"?"bg-blue-900 text-blue-200":"bg-blue-100 text-blue-800"}`;case"completed":return`${t==="dark"?"bg-green-900 text-green-200":"bg-green-100 text-green-800"}`;case"cancelled":return`${t==="dark"?"bg-red-900 text-red-200":"bg-red-100 text-red-800"}`;case"pending":return`${t==="dark"?"bg-yellow-900 text-yellow-200":"bg-yellow-100 text-yellow-800"}`;default:return`${t==="dark"?"bg-gray-700 text-gray-200":"bg-gray-100 text-gray-800"}`}},E=t==="dark"?"bg-gray-900 text-white":"bg-gray-100 text-gray-900",R=t==="dark"?"bg-gray-800 shadow-dark":"bg-white shadow",A=t==="dark"?"text-white":"text-gray-900",N=t==="dark"?"text-gray-300":"text-gray-700",j=t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900",O=t==="dark"?"bg-gray-800 text-gray-300":"bg-gray-50 text-gray-500",L=t==="dark"?"hover:bg-gray-700":"hover:bg-gray-50",B=t==="dark"?"divide-gray-700":"divide-gray-200";return f.jsxs("section",{children:[f.jsx(H3,{}),f.jsxs("div",{className:`p-6 max-w-6xl mx-auto transition-colors duration-200 ${E}`,children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h1",{className:`text-2xl font-bold ${A}`,children:"Patient Directory"}),f.jsx("button",{onClick:e,className:`p-2 rounded-full ${t==="dark"?"bg-gray-700 text-yellow-300":"bg-gray-200 text-gray-800"}`,children:t==="dark"?"":""})]}),f.jsxs("div",{className:`${R} p-4 rounded-lg mb-6`,children:[f.jsx("h2",{className:`text-lg font-semibold mb-3 ${A}`,children:"Filters"}),f.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[f.jsxs("div",{className:"w-full md:w-1/3",children:[f.jsx("label",{className:`block text-sm font-medium ${N} mb-1`,children:"Status"}),f.jsxs("select",{value:u,onChange:b,className:`w-full p-2 border rounded-md ${j}`,children:[f.jsx("option",{value:"all",children:"All"}),f.jsx("option",{value:"pending",children:"Pending"}),f.jsx("option",{value:"confirmed",children:"Confirmed"}),f.jsx("option",{value:"completed",children:"Completed"}),f.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),f.jsxs("div",{className:"w-full md:w-1/3",children:[f.jsx("label",{className:`block text-sm font-medium ${N} mb-1`,children:"From"}),f.jsx("input",{type:"date",name:"startDate",value:p.startDate,onChange:w,className:`w-full p-2 border rounded-md ${j}`})]}),f.jsxs("div",{className:"w-full md:w-1/3",children:[f.jsx("label",{className:`block text-sm font-medium ${N} mb-1`,children:"To"}),f.jsx("input",{type:"date",name:"endDate",value:p.endDate,onChange:w,className:`w-full p-2 border rounded-md ${j}`})]})]})]}),l&&f.jsx("div",{className:`${t==="dark"?"bg-red-900 text-red-200":"bg-red-100 text-red-700"} border px-4 py-3 rounded mb-4`,children:l}),r?f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx("div",{className:`animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 ${t==="dark"?"border-blue-400":"border-blue-500"}`})}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:`mb-4 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:["Showing ",n.length," patient",n.length!==1?"s":""]}),n.length>0?f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:`min-w-full ${R} rounded-lg`,children:[f.jsx("thead",{className:O,children:f.jsxs("tr",{children:[f.jsx("th",{className:"py-3 px-4 text-left text-xs font-medium uppercase",children:"Patient"}),f.jsx("th",{className:"py-3 px-4 text-left text-xs font-medium uppercase",children:"Contact"}),f.jsx("th",{className:"py-3 px-4 text-left text-xs font-medium uppercase",children:"Appointment Time"}),f.jsx("th",{className:"py-3 px-4 text-left text-xs font-medium uppercase",children:"Status"}),f.jsx("th",{className:"py-3 px-4 text-left text-xs font-medium uppercase",children:"Actions"})]})}),f.jsx("tbody",{className:`${B} divide-y`,children:n.map(F=>{var J,Q,W,Z,z,$,U;return f.jsxs("tr",{className:L,children:[f.jsx("td",{className:"py-4 px-4",children:f.jsxs("div",{className:"flex items-center",children:[(J=F.patientId)!=null&&J.avatar?f.jsx("img",{src:F.patientId.avatar,alt:F.patientId.name,className:"h-10 w-10 rounded-full mr-3"}):f.jsx("div",{className:`h-10 w-10 rounded-full ${t==="dark"?"bg-gray-600":"bg-gray-300"} flex items-center justify-center mr-3`,children:f.jsx("span",{className:t==="dark"?"text-gray-300":"text-gray-600",children:(W=(Q=F.patientId)==null?void 0:Q.name)==null?void 0:W.charAt(0)})}),f.jsxs("div",{children:[f.jsx("div",{className:`font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:(Z=F.patientId)==null?void 0:Z.name}),((z=F.patientId)==null?void 0:z.age)&&f.jsxs("div",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:[F.patientId.age," years old  ",F.patientId.gender]})]})]})}),f.jsxs("td",{className:"py-4 px-4",children:[f.jsx("div",{className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-900"}`,children:($=F.patientId)==null?void 0:$.email}),f.jsx("div",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:(U=F.patientId)==null?void 0:U.phone})]}),f.jsx("td",{className:`py-4 px-4 text-sm ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:_(`${F.date}T${F.time}`)}),f.jsx("td",{className:"py-4 px-4",children:f.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${S(F.status)}`,children:F.status.charAt(0).toUpperCase()+F.status.slice(1)})}),f.jsxs("td",{className:"py-4 px-4 text-sm",children:[F.status==="confirmed"&&f.jsx("button",{onClick:()=>T(F._id,"completed"),className:"bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded-md mr-2",children:"Mark Complete"}),F.status==="pending"&&f.jsx("button",{onClick:()=>T(F._id,"confirmed"),className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-md mr-2",children:"Confirm"}),(F.status==="pending"||F.status==="confirmed")&&f.jsx("button",{onClick:()=>T(F._id,"cancelled"),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-md",children:"Cancel"})]})]},F._id)})})]})}):f.jsxs("div",{className:`${R} p-8 rounded-lg text-center`,children:[f.jsx("p",{className:t==="dark"?"text-gray-400":"text-gray-500",children:"No patients found with the selected filters."}),f.jsx("button",{onClick:()=>{h("all"),g({startDate:new Date(new Date().setDate(new Date().getDate()-30)).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]})},className:"mt-4 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md",children:"Clear Filters"})]})]})]})]})};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qW=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),YW=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),eA=t=>{const e=YW(t);return e.charAt(0).toUpperCase()+e.slice(1)},LR=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var XW={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZW=k.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:a,iconNode:l,...c},u)=>k.createElement("svg",{ref:u,...XW,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:LR("lucide",r),...c},[...l.map(([h,p])=>k.createElement(h,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=(t,e)=>{const n=k.forwardRef(({className:i,...r},a)=>k.createElement(ZW,{ref:a,iconNode:e,className:LR(`lucide-${qW(eA(t))}`,`lucide-${t}`,i),...r}));return n.displayName=eA(t),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QW=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],xw=et("arrow-left",QW);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JW=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Hv=et("award",JW);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KW=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],kR=et("building-2",KW);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e$=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ch=et("calendar",e$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t$=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],tA=et("camera",t$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n$=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],nA=et("chevron-down",n$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i$=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],r$=et("chevron-left",i$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s$=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],a$=et("chevron-right",s$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o$=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],l$=et("chevron-up",o$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],jR=et("circle-alert",c$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u$=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],DR=et("circle-check-big",u$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],PR=et("circle-x",d$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Zs=et("clock",h$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f$=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],gm=et("credit-card",f$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p$=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],OR=et("dollar-sign",p$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m$=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],iA=et("ellipsis-vertical",m$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g$=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],y$=et("eye-off",g$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x$=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Gv=et("eye",x$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v$=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],rA=et("file-text",v$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b$=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],w$=et("funnel",b$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],S$=et("globe",_$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M$=[["path",{d:"M12 6v4",key:"16clxf"}],["path",{d:"M14 14h-4",key:"esezmu"}],["path",{d:"M14 18h-4",key:"16mqa2"}],["path",{d:"M14 8h-4",key:"z8ypaz"}],["path",{d:"M18 12h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h2",key:"b1k337"}],["path",{d:"M18 22V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v18",key:"16g51d"}]],vp=et("hospital",M$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T$=[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]],E$=et("indian-rupee",T$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A$=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],C$=et("loader",A$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N$=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],vw=et("mail",N$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R$=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],L$=et("map-pin",R$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k$=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],sA=et("message-circle",k$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j$=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],D$=et("mic-off",j$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P$=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],O$=et("mic",P$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B$=[["path",{d:"M17 17H4a2 2 0 0 1-2-2V5c0-1.5 1-2 1-2",key:"k0q8oc"}],["path",{d:"M22 15V5a2 2 0 0 0-2-2H9",key:"cp1ac0"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],z$=et("monitor-off",B$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F$=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],I$=et("monitor",F$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U$=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],V$=et("moon",U$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H$=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],G$=et("package",H$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W$=[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]],aA=et("phone-off",W$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $$=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],ts=et("phone",$$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q$=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],Ld=et("pill",q$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y$=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],oA=et("plus",Y$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X$=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Z$=et("rotate-ccw",X$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q$=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Qs=et("search",Q$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J$=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],K$=et("send",J$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eq=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],tq=et("settings",eq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nq=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],BR=et("star",nq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iq=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],ym=et("stethoscope",iq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rq=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],sq=et("sun",rq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aq=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],zp=et("trash-2",aq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oq=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],uh=et("user",oq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lq=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Wv=et("users",lq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cq=[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],uq=et("video-off",cq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dq=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Fp=et("video",dq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hq=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],fq=et("zoom-in",hq);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pq=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],mq=et("zoom-out",pq),lA={BASE_URL:"/docApp/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"http://localhost:5000",VITE_BASE_URL:"http://localhost:5000"},$v=new Map,bp=t=>{const e=$v.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,i])=>[n,i.getState()])):{}},gq=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const i=$v.get(n.name);if(i)return{type:"tracked",store:t,...i};const r={connection:e.connect(n),stores:{}};return $v.set(n.name,r),{type:"tracked",store:t,...r}},yq=(t,e={})=>(n,i,r)=>{const{enabled:a,anonymousActionType:l,store:c,...u}=e;let h;try{h=(a??(lA?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!h)return t(n,i,r);const{connection:p,...g}=gq(c,h,u);let y=!0;r.setState=(w,T,_)=>{const S=n(w,T);if(!y)return S;const E=_===void 0?{type:l||"anonymous"}:typeof _=="string"?{type:_}:_;return c===void 0?(p==null||p.send(E,i()),S):(p==null||p.send({...E,type:`${c}/${E.type}`},{...bp(u.name),[c]:r.getState()}),S)};const x=(...w)=>{const T=y;y=!1,n(...w),y=T},b=t(r.setState,i,r);if(g.type==="untracked"?p==null||p.init(b):(g.stores[g.store]=r,p==null||p.init(Object.fromEntries(Object.entries(g.stores).map(([w,T])=>[w,w===g.store?b:T.getState()])))),r.dispatchFromDevtools&&typeof r.dispatch=="function"){let w=!1;const T=r.dispatch;r.dispatch=(..._)=>{(lA?"production":void 0)!=="production"&&_[0].type==="__setState"&&!w&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),w=!0),T(..._)}}return p.subscribe(w=>{var T;switch(w.type){case"ACTION":if(typeof w.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return lx(w.payload,_=>{if(_.type==="__setState"){if(c===void 0){x(_.state);return}Object.keys(_.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const S=_.state[c];if(S==null)return;JSON.stringify(r.getState())!==JSON.stringify(S)&&x(S);return}r.dispatchFromDevtools&&typeof r.dispatch=="function"&&r.dispatch(_)});case"DISPATCH":switch(w.payload.type){case"RESET":return x(b),c===void 0?p==null?void 0:p.init(r.getState()):p==null?void 0:p.init(bp(u.name));case"COMMIT":if(c===void 0){p==null||p.init(r.getState());return}return p==null?void 0:p.init(bp(u.name));case"ROLLBACK":return lx(w.state,_=>{if(c===void 0){x(_),p==null||p.init(r.getState());return}x(_[c]),p==null||p.init(bp(u.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return lx(w.state,_=>{if(c===void 0){x(_);return}JSON.stringify(r.getState())!==JSON.stringify(_[c])&&x(_[c])});case"IMPORT_STATE":{const{nextLiftedState:_}=w.payload,S=(T=_.computedStates.slice(-1)[0])==null?void 0:T.state;if(!S)return;x(c===void 0?S:S[c]),p==null||p.send(null,_);return}case"PAUSE_RECORDING":return y=!y}return}}),b},xq=yq,lx=(t,e)=>{let n;try{n=JSON.parse(t)}catch(i){console.error("[zustand devtools middleware] Could not parse the received json",i)}n!==void 0&&e(n)},vq="http://localhost:5000",Ro=vq,bq=Tm(xq((t,e)=>({socket:null,chats:[],currentChat:null,messages:[],isLoading:!1,error:null,isConnected:!1,unreadCount:0,pagination:{currentPage:1,totalPages:1,totalMessages:0,hasMore:!1},connectSocket:()=>{const{socket:n,isConnected:i}=e();if(i&&n)return;const r=localStorage.getItem("doctorAccessToken")||localStorage.getItem("clientAccessToken"),a=localStorage.getItem("doctorId")||localStorage.getItem("clientId"),l=localStorage.getItem("doctorAccessToken")?"Doctor":"Client";if(!r||!a){console.warn("Missing token or userId for socket auth");return}const c=xd(Ro,{withCredentials:!0,auth:{token:r,userType:l,userId:a},transports:["websocket"],reconnection:!0,reconnectionAttempts:5,reconnectionDelay:2e3});c.on("connect",()=>{console.log("Socket connected:",c.id),t({isConnected:!0,socket:c});const{currentChat:u}=e();u&&c.emit("joinChat",u._id)}),c.on("disconnect",()=>{console.log("Socket disconnected"),t({isConnected:!1,socket:null})}),c.on("connect_error",u=>{console.error("Socket connection error:",u.message),t({error:`Connection error: ${u.message}`})}),c.on("newMessage",u=>{console.log("New message received via socket:",u);const{currentChat:h,messages:p}=e();h&&u.chatId===h._id&&(p.some(y=>y._id===u._id)||t({messages:[...p,u]})),e().updateChatWithNewMessage(u)}),c.on("messageDelivered",u=>{console.log("Message delivered:",u);const{messages:h}=e(),p=h.map(g=>g._id===u.messageId?{...g,status:"delivered"}:g);t({messages:p})}),c.on("messageRead",u=>{console.log("Message read:",u);const{messages:h}=e(),p=h.map(g=>u.messageIds.includes(g._id)?{...g,isRead:!0}:g);t({messages:p})}),c.on("userTyping",u=>{console.log("User typing:",u)}),c.on("userStoppedTyping",u=>{console.log("User stopped typing:",u)}),t({socket:c})},disconnectSocket:()=>{const{socket:n}=e();n&&(n.disconnect(),t({socket:null,isConnected:!1}))},updateChatWithNewMessage:n=>{const{chats:i}=e(),r=i.map(a=>a._id===n.chatId?{...a,lastMessage:{content:n.content,createdAt:n.createdAt,sender:n.sender},updatedAt:n.createdAt}:a);r.sort((a,l)=>new Date(l.updatedAt||l.createdAt)-new Date(a.updatedAt||a.createdAt)),t({chats:r})},getChatMessages:async(n,i=1,r=50)=>{var a,l;console.log("getChatMessages called for chat:",n),t({isLoading:!0,error:null});try{const c=localStorage.getItem("doctorAccessToken"),u=localStorage.getItem("clientAccessToken"),h=c||u;if(!h)throw console.error("[Chat]  No auth token found."),new Error("No auth token found");const p=c?"Doctor":"Client";console.log("[Chat]  Token found"),console.log("[Chat] UserType:",p),console.log("[Chat] Chat ID:",n),console.log("[Chat] Fetching page:",i,"Limit:",r);const g=await Lt.get(`${Ro}/chats/${n}/messages`,{params:{page:i,limit:r},headers:{Authorization:`Bearer ${h}`},withCredentials:!0});console.log("[Chat]  Messages response received:",g.data);const{messages:y,pagination:x}=g.data.data;if(i===1)t({messages:y,pagination:x});else{const{messages:b}=e();t({messages:[...y,...b],pagination:x})}return{messages:y,pagination:x}}catch(c){console.error("[Chat]  Error fetching messages:",c);const u=((l=(a=c.response)==null?void 0:a.data)==null?void 0:l.message)||"Failed to fetch messages";throw t({error:u}),c}finally{t({isLoading:!1})}},fetchUserChats:async()=>{var n,i;t({isLoading:!0,error:null});try{const r=localStorage.getItem("doctorAccessToken"),a=localStorage.getItem("clientAccessToken"),l=r||a;if(!l)throw new Error("No auth token found");const u=(await Lt.get(`${Ro}/chats/user-chats`,{headers:{Authorization:`Bearer ${l}`},withCredentials:!0})).data.data,h=u.sort((g,y)=>{var w,T;const x=new Date(((w=g.lastMessage)==null?void 0:w.createdAt)||g.updatedAt||g.createdAt);return new Date(((T=y.lastMessage)==null?void 0:T.createdAt)||y.updatedAt||y.createdAt)-x});t({chats:h});const p=u.reduce((g,y)=>g+(y.unreadCount||0),0);return t({unreadCount:p}),h}catch(r){console.error("Error fetching user chats:",r);const a=((i=(n=r.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to fetch chats";throw t({error:a}),r}finally{t({isLoading:!1})}},sendMessage:async(n,i,r="text",a=null)=>{var l,c;if(!i.trim()&&!a){console.warn("Cannot send empty message");return}t({isLoading:!0,error:null});try{const u=localStorage.getItem("doctorAccessToken"),h=localStorage.getItem("clientAccessToken"),p=u||h;if(!p)throw new Error("No auth token found");const g=new FormData;g.append("chatId",n),g.append("content",i),g.append("messageType",r),a&&g.append("file",a);const x=(await Lt.post(`${Ro}/chats/send-message`,g,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${p}`},withCredentials:!0})).data.data;console.log("Message sent successfully:",x);const{currentChat:b,messages:w,socket:T}=e();return b&&b._id===n&&(w.some(S=>S._id===x._id)||t({messages:[...w,x]})),T&&T.connected&&T.emit("messageSent",{chatId:n,message:x}),e().updateChatWithNewMessage(x),x}catch(u){console.error("Error sending message:",u);const h=((c=(l=u.response)==null?void 0:l.data)==null?void 0:c.message)||"Failed to send message";throw t({error:h}),u}finally{t({isLoading:!1})}},createOrGetChat:async(n,i)=>{var r,a;t({isLoading:!0,error:null});try{const l=localStorage.getItem("doctorAccessToken")||localStorage.getItem("clientAccessToken");if(!l)throw new Error("No auth token");console.log("Creating/getting chat with:",{participantId:n,participantType:i});const u=(await Lt.post(`${Ro}/chats/create-or-get`,{participantId:n,participantType:i},{headers:{Authorization:`Bearer ${l}`},withCredentials:!0})).data.data;console.log("Chat created/retrieved:",u),t({currentChat:u});const{socket:h}=e();return h&&h.connected&&h.emit("joinChat",u._id),await e().getChatMessages(u._id),u}catch(l){console.error("Error creating/getting chat:",l);const c=((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to create/get chat";throw t({error:c}),l}finally{t({isLoading:!1})}},markMessagesAsRead:async(n,i)=>{try{const r=localStorage.getItem("doctorAccessToken"),a=localStorage.getItem("clientAccessToken"),l=r||a;if(!l)throw new Error("No auth token found");await Lt.patch(`${Ro}/chats/${n}/mark-read`,{messageIds:i},{headers:{Authorization:`Bearer ${l}`},withCredentials:!0});const{messages:c,socket:u}=e(),h=c.map(p=>i.includes(p._id)?{...p,isRead:!0}:p);t({messages:h}),u&&u.connected&&u.emit("messagesRead",{chatId:n,messageIds:i})}catch(r){console.error("Failed to mark messages as read:",r)}},deleteMessage:async(n,i)=>{var r,a;t({isLoading:!0,error:null});try{const l=localStorage.getItem("doctorAccessToken"),c=localStorage.getItem("clientAccessToken"),u=l||c;if(!u)throw new Error("No auth token found");await Lt.delete(`${Ro}/chats/${n}/messages/${i}`,{headers:{Authorization:`Bearer ${u}`},withCredentials:!0});const{messages:h,socket:p}=e(),g=h.filter(y=>y._id!==i);t({messages:g}),p&&p.connected&&p.emit("messageDeleted",{chatId:n,messageId:i})}catch(l){const c=((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to delete message";throw t({error:c}),l}finally{t({isLoading:!1})}},setCurrentChat:n=>{const{socket:i,currentChat:r}=e();i&&i.connected&&r&&i.emit("leaveChat",r._id),t({currentChat:n,messages:[],error:null}),i&&i.connected&&n&&i.emit("joinChat",n._id)},clearCurrentChat:()=>{const{socket:n,currentChat:i}=e();n&&n.connected&&i&&n.emit("leaveChat",i._id),t({currentChat:null,messages:[]})},clearError:()=>t({error:null}),setError:n=>{t({error:n}),setTimeout(()=>{const{error:i}=e();i===n&&t({error:null})},5e3)},startTyping:n=>{const{socket:i}=e();i&&i.connected&&i.emit("startTyping",{chatId:n})},stopTyping:n=>{const{socket:i}=e();i&&i.connected&&i.emit("stopTyping",{chatId:n})},getChatParticipant:(n,i)=>!(n!=null&&n.participants)||!i?null:n.participants.find(r=>{var a;return((a=r==null?void 0:r.userId)==null?void 0:a._id)!==i}),isMessageFromCurrentUser:(n,i)=>{var r,a;return!(n!=null&&n.sender)||!i?!1:((r=n.sender.userId)==null?void 0:r._id)===i||((a=n.sender)==null?void 0:a.userId)===i},getFormattedChats:n=>{const{chats:i}=e();return i.map(r=>{var l,c,u,h,p;const a=e().getChatParticipant(r,n);return{...r,displayName:((l=a==null?void 0:a.userId)==null?void 0:l.name)||"Unknown User",displayAvatar:((c=a==null?void 0:a.userId)==null?void 0:c.avatar)||((u=a==null?void 0:a.userId)==null?void 0:u.profileImage),lastMessagePreview:((h=r.lastMessage)==null?void 0:h.content)||"No messages yet",lastMessageTime:((p=r.lastMessage)==null?void 0:p.createdAt)||r.createdAt}})}}))),wq=()=>{var cs;const[t,e]=k.useState(""),[n,i]=k.useState(null),[r,a]=k.useState(""),[l,c]=k.useState(!0),[u,h]=k.useState([]),[p,g]=k.useState(null),[y,x]=k.useState(null),[b,w]=k.useState(!1),[T,_]=k.useState(null),[S,E]=k.useState(null),[R,A]=k.useState(!1),N=k.useRef(null),j=k.useRef(null),O=k.useRef(null),{chats:L,currentChat:B,messages:F,isLoading:J,error:Q,isConnected:W,unreadCount:Z,pagination:z,connectSocket:$,disconnectSocket:U,fetchUserChats:X,createOrGetChat:D,sendMessage:q,getChatMessages:ce,setCurrentChat:me,clearCurrentChat:fe,markMessagesAsRead:ie,deleteMessage:Ne,clearError:Fe,setError:Be,startTyping:Ie,stopTyping:$e,getChatParticipant:Ke,isMessageFromCurrentUser:Se,getFormattedChats:Ee,updateChatWithNewMessage:Re}=bq(),{doctor:De,isAuthenticated:ke,getAllDoctors:H,checkAuth:I}=pr(),{client:ve,isAuthenticated:_e,getAllClients:K,checkAuth:we}=kr(),Le=()=>p==="Doctor"?(console.log("[ChatPage] Current user ID (Doctor):",De==null?void 0:De._id),De==null?void 0:De._id):p==="Client"?(console.log("[ChatPage] Current user ID (Client):",ve==null?void 0:ve._id),ve==null?void 0:ve._id):null;k.useEffect(()=>{(De||ve)&&(async()=>{try{const Qe=localStorage.getItem("doctorAccessToken"),at=localStorage.getItem("clientAccessToken");if(Qe&&De){g("Doctor"),x(De);return}if(at&&ve){g("Client"),x(ve);return}if(De&&(await I()).success){g("Doctor"),x(De);return}if(ve&&(await we()).success){g("Client"),x(ve);return}console.warn("No valid user found")}catch(Qe){console.error("Error initializing user:",Qe)}})()},[De,ve,I,we]),k.useEffect(()=>(p&&($(),X(),Oe()),()=>{U()}),[p,$,U,X]),k.useEffect(()=>{if(B&&F.length>0){const ge=F.filter(Qe=>{const at=Le();return!Se(Qe,at)&&!Qe.isRead});if(ge.length>0){const Qe=ge.map(at=>at._id);ie(B._id,Qe)}}},[B,F,ie,Se]);const[ze,Ce]=k.useState(!1),Oe=async()=>{try{if(Ce(!0),p==="Client"){const ge=await H({verified:"true"});ge.success&&h(ge.data)}else if(p==="Doctor"){const ge=await K();ge.success&&h(ge.data)}}catch(ge){console.error("Failed to fetch contacts:",ge),Be("Failed to fetch contacts")}finally{Ce(!1)}};k.useEffect(()=>{setTimeout(()=>{N.current&&N.current.scrollIntoView({behavior:"smooth"})},100)},[F]);const qe=async ge=>{try{const Qe=p==="Client"?"Doctor":"Client";await D(ge._id,Qe),i(ge),c(!1)}catch(Qe){console.error("Failed to create/get chat:",Qe),Be("Failed to create chat")}},tt=async ge=>{try{if(!ge||!ge._id){console.error("[ChatPage] Invalid chat object:",ge);return}if(!p){console.warn("[ChatPage] UserType not set yet, waiting for initialization");return}console.log("[ChatPage] Selecting chat:",ge._id),me(ge),await ce(ge._id),console.log("[ChatPage] Messages fetched for chat:",ge._id);const Qe=Le();if(!Qe){console.error("[ChatPage] currentUserId is undefined! UserType:",p,"Doctor:",De==null?void 0:De._id,"Client:",ve==null?void 0:ve._id);return}console.log("[ChatPage] Current user id:",Qe);const at=Ke(ge,Qe);if(!at||!at.userId){console.error("[ChatPage] Could not find the other participant.");return}console.log("[ChatPage] Other participant found:",at.userId),i(at.userId),c(!1)}catch(Qe){console.error("[ChatPage] Failed to select chat:",Qe),Be("Failed to load chat")}},Ue=()=>{B&&!b&&(w(!0),Ie(B._id))},Ye=()=>{B&&b&&(w(!1),$e(B._id))},kt=async ge=>{if(ge.preventDefault(),!(!r.trim()&&!T||!B))try{Ye();const Qe=T?T.type.startsWith("image/")?"image":"file":"text";await q(B._id,r.trim(),Qe,T),a(""),_(null),j.current&&(j.current.value="")}catch(Qe){console.error("Failed to send message:",Qe),Be("Failed to send message")}},Bt=ge=>{const Qe=ge.target.files[0];if(Qe){if(Qe.size>10*1024*1024){Be("File size must be less than 10MB");return}_(Qe)}},_i=async ge=>{try{await Ne(B._id,ge),A(!1),E(null)}catch(Qe){console.error("Failed to delete message:",Qe),Be("Failed to delete message")}},bn=ge=>{a(ge.target.value),ge.target.value.trim()&&B?(Ue(),O.current&&clearTimeout(O.current),O.current=setTimeout(()=>{Ye()},2e3)):Ye()},Js=async()=>{if(B&&z.hasMore&&!J)try{await ce(B._id,z.currentPage+1)}catch(ge){console.error("Failed to load more messages:",ge),Be("Failed to load more messages")}},ui=u.filter(ge=>{var Qe,at,Fn;return((Qe=ge.name)==null?void 0:Qe.toLowerCase().includes(t.toLowerCase()))||((at=ge.email)==null?void 0:at.toLowerCase().includes(t.toLowerCase()))||((Fn=ge.specialization)==null?void 0:Fn.toLowerCase().includes(t.toLowerCase()))}),pn=Le(),Si=Ee(pn).filter(ge=>{var Qe;return(Qe=ge.displayName)==null?void 0:Qe.toLowerCase().includes(t.toLowerCase())});return k.useEffect(()=>{if(Q){const ge=setTimeout(()=>{Fe()},5e3);return()=>clearTimeout(ge)}},[Q,Fe]),p?f.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[f.jsxs("div",{className:`${l?"w-full md:w-80":"hidden md:block md:w-80"} bg-white/90 backdrop-blur-xl border-r border-slate-200/60 shadow-2xl`,children:[f.jsxs("div",{className:"p-6 border-b border-slate-200/60 bg-gradient-to-r from-white/80 to-blue-50/50 backdrop-blur-sm",children:[y&&f.jsxs("div",{className:"flex items-center mb-6 p-5 bg-gradient-to-r from-blue-50/90 to-indigo-50/90 rounded-2xl border border-blue-100/60 shadow-lg",children:[f.jsxs("div",{className:"relative",children:[f.jsx("img",{src:y.avatar||y.profileImage||`https://ui-avatars.com/api/?name=${y.name}&background=3b82f6&color=fff`,alt:y.name,className:"w-16 h-16 rounded-2xl object-cover ring-3 ring-blue-200/50 shadow-xl"}),f.jsx("div",{className:`absolute -bottom-1 -right-1 w-5 h-5 border-3 border-white rounded-full shadow-sm ${W?"bg-green-400":"bg-red-400"}`})]}),f.jsxs("div",{className:"ml-4 flex-1",children:[f.jsx("h2",{className:"text-lg font-bold text-slate-900",children:y.name}),f.jsxs("div",{className:"text-sm text-slate-600 space-y-1 mt-1",children:[f.jsxs("p",{className:"flex items-center",children:[f.jsx(ts,{className:"w-3.5 h-3.5 mr-2 text-slate-500"}),y.phone||"No phone"]}),f.jsxs("p",{className:"flex items-center",children:[f.jsx("span",{className:"w-3.5 h-3.5 mr-2 text-slate-500 text-xs",children:"@"}),y.email||"No email"]}),f.jsxs("p",{className:"text-slate-600 font-medium",children:[y.gender||"Not specified","  ",p]})]})]}),Z>0&&f.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 text-white text-xs font-bold rounded-full w-8 h-8 flex items-center justify-center shadow-lg",children:Z})]}),f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:p==="Client"?"Find Doctors":"Your Patients"}),f.jsxs("div",{className:"flex space-x-2",children:[f.jsx("button",{onClick:X,className:"p-3 hover:bg-blue-50/80 rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-md",title:"Refresh chats",children:f.jsx(Wv,{className:"w-5 h-5 text-slate-600"})}),f.jsx("button",{className:"p-3 hover:bg-blue-50/80 rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-md",children:f.jsx(iA,{className:"w-5 h-5 text-slate-600"})})]})]}),f.jsxs("div",{className:"relative",children:[f.jsx(Qs,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),f.jsx("input",{type:"text",placeholder:`Search ${p==="Client"?"doctors":"patients"}...`,className:"w-full pl-12 pr-4 py-3.5 bg-white/80 border border-slate-200/60 rounded-2xl focus:outline-none focus:ring-3 focus:ring-blue-500/30 focus:border-blue-500 transition-all duration-300 text-slate-700 placeholder-slate-500 shadow-sm",value:t,onChange:ge=>e(ge.target.value)})]})]}),f.jsxs("div",{className:"flex border-b border-slate-200/60 bg-white/60 backdrop-blur-sm",children:[f.jsx("button",{className:"flex-1 px-6 py-4 text-sm font-semibold text-blue-600 border-b-3 border-blue-600 bg-blue-50/60",children:p==="Client"?"All Doctors":"All Patients"}),f.jsxs("button",{className:"flex-1 px-6 py-4 text-sm font-medium text-slate-500 hover:text-slate-700 hover:bg-slate-50/60 transition-all duration-300",children:["Recent Chats (",Si.length,")"]})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto",children:[B&&z.hasMore&&f.jsx("div",{className:"p-4 border-b border-slate-200/60",children:f.jsx("button",{onClick:Js,disabled:J,className:"w-full py-2 text-sm text-blue-600 hover:text-blue-700 font-medium disabled:opacity-50",children:J?"Loading...":"Load More Messages"})}),Si.length>0&&f.jsxs("div",{className:"border-b border-slate-200/60",children:[f.jsx("div",{className:"px-6 py-3 bg-gradient-to-r from-blue-50/60 to-indigo-50/60",children:f.jsx("h3",{className:"text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Recent Chats"})}),Si.map(ge=>f.jsxs("div",{onClick:()=>tt(ge),className:"flex items-center p-4 hover:bg-gradient-to-r hover:from-blue-50/80 hover:to-indigo-50/80 cursor-pointer border-b border-slate-100/60 transition-all duration-300 group hover:shadow-sm",children:[f.jsxs("div",{className:"relative",children:[f.jsx("img",{src:ge.displayAvatar||`https://ui-avatars.com/api/?name=${ge.displayName}&background=3b82f6&color=fff`,alt:ge.displayName,className:"w-14 h-14 rounded-2xl object-cover ring-2 ring-white shadow-lg"}),f.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-400 border-2 border-white rounded-full"})]}),f.jsxs("div",{className:"ml-4 flex-1",children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsx("h3",{className:"text-sm font-semibold text-slate-900 group-hover:text-blue-600 transition-colors duration-300",children:ge.displayName}),f.jsx("span",{className:"text-xs text-slate-500 bg-slate-100/80 px-2.5 py-1 rounded-full",children:new Date(ge.lastMessageTime).toLocaleDateString()})]}),f.jsx("p",{className:"text-sm text-slate-600 mt-1 truncate font-medium",children:ge.lastMessagePreview}),ge.unreadCount>0&&f.jsx("span",{className:"inline-block bg-gradient-to-r from-blue-500 to-blue-600 text-white text-xs font-bold rounded-full px-3 py-1 mt-2 shadow-lg",children:ge.unreadCount})]})]},ge._id))]}),f.jsxs("div",{children:[f.jsx("div",{className:"px-6 py-3 bg-gradient-to-r from-slate-50/60 to-blue-50/60",children:f.jsx("h3",{className:"text-xs font-bold text-slate-600 uppercase tracking-wider",children:p==="Client"?"Available Doctors":"All Patients"})}),ze?f.jsxs("div",{className:"p-8 text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-200 border-t-blue-600 mx-auto"}),f.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Loading contacts..."})]}):ui.map(ge=>f.jsxs("div",{onClick:()=>qe(ge),className:"flex items-center p-4 hover:bg-gradient-to-r hover:from-blue-50/80 hover:to-indigo-50/80 cursor-pointer border-b border-slate-100/60 transition-all duration-300 group hover:shadow-sm",children:[f.jsxs("div",{className:"relative",children:[f.jsx("img",{src:ge.avatar||ge.profileImage||`https://ui-avatars.com/api/?name=${ge.name}&background=3b82f6&color=fff`,alt:ge.name,className:"w-14 h-14 rounded-2xl object-cover ring-2 ring-white shadow-lg"}),f.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-400 border-2 border-white rounded-full"})]}),f.jsxs("div",{className:"ml-4 flex-1",children:[f.jsx("h3",{className:"text-sm font-semibold text-slate-900 group-hover:text-blue-600 transition-colors duration-300",children:ge.name}),f.jsxs("div",{className:"text-xs text-slate-600 mt-1 font-medium",children:[f.jsxs("span",{children:[ge.age," years  ",ge.gender]}),p==="Client"&&ge.specialization&&f.jsxs("span",{className:"ml-2",children:[" ",ge.specialization]})]}),p==="Client"&&ge.verified&&f.jsx("span",{className:"inline-block bg-gradient-to-r from-green-400 to-green-500 text-white text-xs font-bold px-3 py-1 rounded-full mt-2 shadow-lg",children:" Verified"})]}),f.jsx(sA,{className:"w-5 h-5 text-slate-400 group-hover:text-blue-500 transition-colors duration-300"})]},ge._id))]})]})]}),f.jsx("div",{className:`${l?"hidden md:flex":"flex"} flex-1 flex-col bg-gradient-to-b from-white/40 to-slate-50/40 backdrop-blur-sm`,children:n?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"bg-white/90 backdrop-blur-xl border-b border-slate-200/60 px-6 py-4 shadow-lg",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("button",{onClick:()=>{c(!0),fe()},className:"mr-5 p-2.5 hover:bg-blue-50/80 rounded-xl md:hidden transition-all duration-300 hover:shadow-md",children:f.jsx(xw,{className:"w-5 h-5"})}),f.jsxs("div",{className:"relative",children:[f.jsx("img",{src:n.avatar||n.profileImage||`https://ui-avatars.com/api/?name=${n.name}&background=3b82f6&color=fff`,alt:n.name,className:"w-12 h-12 rounded-2xl object-cover ring-2 ring-white shadow-lg"}),f.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-400 border-2 border-white rounded-full"})]}),f.jsxs("div",{className:"ml-4",children:[f.jsx("h3",{className:"text-lg font-bold text-slate-900",children:n.name}),f.jsxs("div",{className:"text-sm text-slate-600 font-medium space-y-1",children:[f.jsxs("p",{children:[n.age," years  ",n.gender]}),n.phone&&f.jsxs("p",{className:"flex items-center",children:[f.jsx(ts,{className:"w-3 h-3 mr-1"}),n.phone]}),n.email&&f.jsxs("p",{className:"flex items-center",children:[f.jsx("span",{className:"w-3 h-3 mr-1",children:"@"}),n.email]}),p==="Client"&&n.specialization&&f.jsxs("p",{children:["Specialization: ",n.specialization]})]})]})]}),f.jsxs("div",{className:"flex space-x-2",children:[f.jsx("button",{className:"p-3 hover:bg-blue-50/80 rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-md",children:f.jsx(ts,{className:"w-5 h-5 text-slate-600"})}),f.jsx(Rt,{to:"/video-call",children:f.jsx("button",{className:"p-3 hover:bg-blue-50/80 rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-md",children:f.jsx(Fp,{className:"w-5 h-5 text-slate-600"})})}),f.jsx("button",{className:"p-3 hover:bg-blue-50/80 rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-md",children:f.jsx(iA,{className:"w-5 h-5 text-slate-600"})})]})]})}),f.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-8 space-y-8",children:[[...F].sort((ge,Qe)=>new Date(ge.createdAt)-new Date(Qe.createdAt)).map(ge=>{var Fn,Gi,ea;const Qe=Le(),at=Se(ge,Qe);return console.log("Message debug:",{messageId:ge._id,senderId:((Fn=ge.sender)==null?void 0:Fn.userId)||ge.senderId,currentUserId:Qe,isOwnMessage:at,content:ge.content}),f.jsx("div",{className:`w-full flex ${at?"justify-end":"justify-start"}`,children:f.jsxs("div",{className:`flex items-start max-w-2xl w-full ${at?"flex-row-reverse space-x-reverse space-x-4":"flex-row space-x-4"}`,children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("img",{src:at?(y==null?void 0:y.avatar)||(y==null?void 0:y.profileImage)||`https://ui-avatars.com/api/?name=${y==null?void 0:y.name}&background=3b82f6&color=fff`:(n==null?void 0:n.avatar)||(n==null?void 0:n.profileImage)||`https://ui-avatars.com/api/?name=${n==null?void 0:n.name}&background=10b981&color=fff`,alt:at?y==null?void 0:y.name:n==null?void 0:n.name,className:"w-12 h-12 rounded-2xl object-cover ring-3 ring-white shadow-xl"})}),f.jsxs("div",{className:`flex-1 ${at?"text-right":"text-left"}`,children:[f.jsxs("div",{className:`mb-2 ${at?"text-right":"text-left"}`,children:[f.jsx("span",{className:"text-xs font-semibold text-slate-600",children:at?"You":n==null?void 0:n.name}),f.jsxs("span",{className:"text-xs text-slate-500 ml-2",children:[console.log("Message timestamp:",ge.timestamp),new Date(ge.timestamp).toLocaleTimeString([],{hour12:!0,hour:"2-digit",minute:"2-digit"})]})]}),f.jsxs("div",{className:`relative inline-block max-w-lg p-4 rounded-2xl shadow-lg ${at?"bg-gradient-to-r from-blue-500 to-blue-600 text-white":"bg-white text-slate-900 border border-slate-200"}`,children:[ge.messageType==="image"&&ge.fileUrl?f.jsxs("div",{className:"mb-2",children:[f.jsx("img",{src:ge.fileUrl,alt:"Shared image",className:"max-w-xs rounded-xl cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(ge.fileUrl,"_blank")}),ge.content&&f.jsx("p",{className:"mt-2 text-sm",children:ge.content})]}):ge.messageType==="file"&&ge.fileUrl?f.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-slate-100/20 rounded-xl",children:[f.jsx("div",{className:"w-10 h-10 bg-slate-200 rounded-lg flex items-center justify-center",children:f.jsx("span",{className:"text-xs font-bold text-slate-600",children:((ea=(Gi=ge.fileName)==null?void 0:Gi.split(".").pop())==null?void 0:ea.toUpperCase())||"FILE"})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"text-sm font-medium truncate",children:ge.fileName||"File"}),f.jsx("p",{className:"text-xs opacity-70",children:ge.fileSize?`${(ge.fileSize/1024).toFixed(1)} KB`:"File"})]}),f.jsx("button",{onClick:()=>window.open(ge.fileUrl,"_blank"),className:"p-2 hover:bg-slate-200/20 rounded-lg transition-colors",children:f.jsx(Gv,{className:"w-4 h-4"})})]}):f.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:ge.content}),f.jsxs("div",{className:`flex items-center justify-between mt-2 ${at?"flex-row-reverse":"flex-row"}`,children:[at&&f.jsxs("div",{className:"flex items-center space-x-1 text-xs",children:[ge.status==="sent"&&f.jsx("span",{className:"opacity-70",children:""}),ge.status==="delivered"&&f.jsx("span",{className:"opacity-70",children:""}),ge.isRead&&f.jsx("span",{className:"text-green-300",children:""})]}),f.jsx("div",{className:"flex items-center space-x-1",children:at&&f.jsx("button",{onClick:()=>{E(ge._id),A(!0)},className:"p-1 hover:bg-red-100/20 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:f.jsx(zp,{className:"w-3 h-3"})})})]}),f.jsx("div",{className:`absolute top-4 ${at?"right-0 transform translate-x-2":"left-0 transform -translate-x-2"}`,children:f.jsx("div",{className:`w-0 h-0 border-t-4 border-b-4 border-transparent ${at?"border-l-4 border-l-blue-500":"border-r-4 border-r-white"}`})})]})]})]})},ge._id)}),b&&f.jsx("div",{className:"w-full flex justify-start",children:f.jsxs("div",{className:"flex items-center space-x-4 max-w-xs",children:[f.jsx("img",{src:(n==null?void 0:n.avatar)||(n==null?void 0:n.profileImage)||`https://ui-avatars.com/api/?name=${n==null?void 0:n.name}&background=10b981&color=fff`,alt:n==null?void 0:n.name,className:"w-8 h-8 rounded-full object-cover"}),f.jsx("div",{className:"bg-white p-4 rounded-2xl shadow-lg border border-slate-200",children:f.jsxs("div",{className:"flex space-x-1",children:[f.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce"}),f.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),f.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})}),f.jsx("div",{ref:N})]}),f.jsxs("div",{className:"bg-white/90 backdrop-blur-xl border-t border-slate-200/60 p-6 shadow-lg",children:[T&&f.jsx("div",{className:"mb-4 p-4 bg-blue-50/80 rounded-2xl border border-blue-200/60",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:T.type.startsWith("image/")?f.jsx("img",{src:URL.createObjectURL(T),alt:"Preview",className:"w-8 h-8 object-cover rounded-lg"}):f.jsx("span",{className:"text-xs font-bold text-blue-600",children:(cs=T.name.split(".").pop())==null?void 0:cs.toUpperCase()})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-slate-900 truncate max-w-xs",children:T.name}),f.jsxs("p",{className:"text-xs text-slate-600",children:[(T.size/1024).toFixed(1)," KB"]})]})]}),f.jsx("button",{onClick:()=>{_(null),j.current&&(j.current.value="")},className:"p-2 hover:bg-red-100 rounded-xl transition-colors",children:f.jsx(zp,{className:"w-4 h-4 text-red-500"})})]})}),f.jsxs("form",{onSubmit:kt,className:"flex items-end space-x-4",children:[f.jsx("input",{ref:j,type:"file",onChange:Bt,accept:"image/*,.pdf,.doc,.docx,.txt",className:"hidden"}),f.jsx("button",{type:"button",onClick:()=>{var ge;return(ge=j.current)==null?void 0:ge.click()},className:"p-3 hover:bg-blue-50/80 rounded-2xl transition-all duration-300 hover:scale-105 hover:shadow-md",children:f.jsx("span",{className:"text-2xl",children:""})}),f.jsx("div",{className:"flex-1",children:f.jsx("textarea",{value:r,onChange:bn,placeholder:"Type your message...",className:"w-full p-4 bg-slate-50/80 border border-slate-200/60 rounded-2xl focus:outline-none focus:ring-3 focus:ring-blue-500/30 focus:border-blue-500 transition-all duration-300 resize-none text-slate-700 placeholder-slate-500 shadow-sm",rows:r.split(`
`).length||1,style:{maxHeight:"120px"},onKeyDown:ge=>{ge.key==="Enter"&&!ge.shiftKey&&(ge.preventDefault(),kt(ge))}})}),f.jsx("button",{type:"submit",disabled:!r.trim()&&!T,className:"p-4 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-2xl transition-all duration-300 hover:scale-105 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:f.jsx(K$,{className:"w-5 h-5"})})]}),f.jsxs("div",{className:"flex items-center justify-center mt-4 space-x-2",children:[f.jsx("div",{className:`w-2 h-2 rounded-full ${W?"bg-green-400":"bg-red-400"}`}),f.jsx("span",{className:"text-xs text-slate-600",children:W?"Connected":"Connecting..."})]})]})]}):f.jsx("div",{className:"flex-1 flex items-center justify-center bg-gradient-to-br from-slate-50/40 to-blue-50/40",children:f.jsxs("div",{className:"text-center bg-white/80 backdrop-blur-lg p-12 rounded-3xl shadow-2xl border border-white/20 max-w-md",children:[f.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-lg",children:f.jsx(sA,{className:"w-12 h-12 text-blue-600"})}),f.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-4",children:p==="Client"?"Find a Doctor":"Connect with Patients"}),f.jsx("p",{className:"text-slate-600 leading-relaxed mb-8",children:p==="Client"?"Select a verified doctor from the list to start a consultation and get professional medical advice.":"Choose a patient from your list to begin providing care and medical guidance."}),f.jsx("button",{onClick:()=>c(!0),className:"px-8 py-4 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold rounded-2xl transition-all duration-300 hover:scale-105 hover:shadow-lg md:hidden",children:p==="Client"?"Browse Doctors":"View Patients"})]})})}),R&&f.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:f.jsx("div",{className:"bg-white/95 backdrop-blur-xl p-8 rounded-3xl shadow-2xl border border-white/20 max-w-md w-full mx-4",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-2xl flex items-center justify-center mx-auto mb-6",children:f.jsx(zp,{className:"w-8 h-8 text-red-600"})}),f.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-4",children:"Delete Message?"}),f.jsx("p",{className:"text-slate-600 mb-8",children:"This action cannot be undone. The message will be permanently deleted."}),f.jsxs("div",{className:"flex space-x-4",children:[f.jsx("button",{onClick:()=>{A(!1),E(null)},className:"flex-1 px-6 py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 font-semibold rounded-2xl transition-all duration-300",children:"Cancel"}),f.jsx("button",{onClick:()=>_i(S),className:"flex-1 px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-semibold rounded-2xl transition-all duration-300 hover:shadow-lg",children:"Delete"})]})]})})}),Q&&f.jsx("div",{className:"fixed bottom-6 right-6 bg-gradient-to-r from-red-500 to-red-600 text-white px-6 py-4 rounded-2xl shadow-2xl border border-red-400/20 backdrop-blur-xl z-50 max-w-md",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-semibold mb-1",children:"Error"}),f.jsx("p",{className:"text-sm opacity-90",children:Q})]}),f.jsx("button",{onClick:Fe,className:"ml-4 p-1 hover:bg-red-400/20 rounded-lg transition-colors",children:f.jsx(y$,{className:"w-4 h-4"})})]})}),J&&f.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-40",children:f.jsx("div",{className:"bg-white/90 backdrop-blur-xl p-8 rounded-3xl shadow-2xl border border-white/20",children:f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-3 border-blue-200 border-t-blue-600"}),f.jsx("span",{className:"text-slate-700 font-semibold",children:"Processing..."})]})})})]}):f.jsx("div",{className:"flex items-center justify-center h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:f.jsxs("div",{className:"text-center bg-white/80 backdrop-blur-lg p-10 rounded-3xl shadow-2xl border border-white/20",children:[f.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-200 border-t-blue-600 mx-auto"}),f.jsx("p",{className:"mt-6 text-gray-700 font-semibold text-lg",children:"Loading your chat..."})]})})},_q=()=>{const{client:t,isLoading:e,error:n,isCheckingAuth:i,updateProfile:r,clearError:a}=kr();console.log(t);const{theme:l,toggleTheme:c}=vn(),[u,h]=k.useState({name:"",email:"",phone:"",age:"",gender:"",password:"",confirmPassword:""}),[p,g]=k.useState(null),[y,x]=k.useState(""),[b,w]=k.useState(!1);k.useEffect(()=>{kr.getState().checkAuth()},[]),k.useEffect(()=>{t&&(h({name:t.name||"",email:t.email||"",phone:t.phone||"",age:t.age||"",gender:t.gender||"",password:"",confirmPassword:""}),x(t.avatar||""))},[t]),k.useEffect(()=>()=>a(),[a]),k.useEffect(()=>{n&&(Rn.error(n),a())},[n,a]);const T=E=>{const{name:R,value:A}=E.target;h(N=>({...N,[R]:A}))},_=E=>{const R=E.target.files[0];if(R){g(R);const A=new FileReader;A.onloadend=()=>{x(A.result)},A.readAsDataURL(R)}},S=async E=>{if(E.preventDefault(),u.password&&u.password!==u.confirmPassword)return Rn.error("Passwords do not match");const R=new FormData;for(const N in u)u[N]&&N!=="confirmPassword"&&R.append(N,u[N]);p&&R.append("avatar",p),(await r(R)).success&&(Rn.success("Profile updated successfully"),w(!1),g(null))};return i?f.jsx("div",{className:"min-h-screen flex items-center justify-center",children:f.jsx("p",{className:"text-xl",children:"Authenticating client..."})}):t?f.jsx("div",{className:`min-h-screen ${l==="dark"?"bg-gray-900 text-white":"bg-gray-100"} transition-colors duration-300`,children:f.jsx("div",{className:"container mx-auto px-4 py-8",children:f.jsxs("div",{className:`${l==="dark"?"bg-gray-800 shadow-lg":"bg-white shadow-md"} rounded-lg overflow-hidden max-w-4xl mx-auto transition-colors duration-300`,children:[f.jsxs("div",{className:`${l==="dark"?"bg-gradient-to-r from-indigo-700 to-purple-800":"bg-gradient-to-r from-blue-500 to-indigo-600"} px-6 py-4 flex justify-between items-center`,children:[f.jsx("h2",{className:"text-2xl font-bold text-white",children:"Client Profile"}),f.jsx("button",{onClick:c,className:`flex items-center justify-center rounded-full p-2 ${l==="dark"?"bg-gray-700 text-yellow-300":"bg-blue-400 text-gray-800"}`,"aria-label":`Toggle ${l==="dark"?"light":"dark"} mode`,children:l==="dark"?f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})]}),f.jsx("div",{className:"p-6",children:b?f.jsxs("form",{onSubmit:S,className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col items-center mb-6",children:[f.jsx("div",{className:`w-32 h-32 rounded-full overflow-hidden mb-4 ${l==="dark"?"ring-2 ring-indigo-500":"ring-2 ring-blue-300"}`,children:f.jsx("img",{src:y||t.avatar||"/placeholder-avatar.png",alt:"Client Avatar",className:"w-full h-full object-cover"})}),f.jsxs("label",{className:`cursor-pointer ${l==="dark"?"bg-indigo-600 hover:bg-indigo-700":"bg-blue-500 hover:bg-blue-600"} text-white py-2 px-4 rounded transition-colors duration-200`,children:["Change Photo",f.jsx("input",{type:"file",accept:"image/*",onChange:_,className:"hidden"})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:`block ${l==="dark"?"text-gray-300":"text-gray-700"} font-semibold mb-2`,children:"Name"}),f.jsx("input",{type:"text",name:"name",value:u.name,onChange:T,className:`w-full border rounded-md px-3 py-2 ${l==="dark"?"bg-gray-700 border-gray-600 text-white focus:ring-indigo-500":"bg-white border-gray-300 focus:ring-blue-500"} focus:outline-none focus:ring-2`,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block ${l==="dark"?"text-gray-300":"text-gray-700"} font-semibold mb-2`,children:"Email"}),f.jsx("input",{type:"email",name:"email",value:u.email,onChange:T,className:`w-full border rounded-md px-3 py-2 ${l==="dark"?"bg-gray-700 border-gray-600 text-white focus:ring-indigo-500":"bg-white border-gray-300 focus:ring-blue-500"} focus:outline-none focus:ring-2`,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block ${l==="dark"?"text-gray-300":"text-gray-700"} font-semibold mb-2`,children:"Phone"}),f.jsx("input",{type:"tel",name:"phone",value:u.phone,onChange:T,className:`w-full border rounded-md px-3 py-2 ${l==="dark"?"bg-gray-700 border-gray-600 text-white focus:ring-indigo-500":"bg-white border-gray-300 focus:ring-blue-500"} focus:outline-none focus:ring-2`,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block ${l==="dark"?"text-gray-300":"text-gray-700"} font-semibold mb-2`,children:"Age"}),f.jsx("input",{type:"number",name:"age",value:u.age,onChange:T,className:`w-full border rounded-md px-3 py-2 ${l==="dark"?"bg-gray-700 border-gray-600 text-white focus:ring-indigo-500":"bg-white border-gray-300 focus:ring-blue-500"} focus:outline-none focus:ring-2`,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block ${l==="dark"?"text-gray-300":"text-gray-700"} font-semibold mb-2`,children:"Gender"}),f.jsxs("select",{name:"gender",value:u.gender,onChange:T,className:`w-full border rounded-md px-3 py-2 ${l==="dark"?"bg-gray-700 border-gray-600 text-white focus:ring-indigo-500":"bg-white border-gray-300 focus:ring-blue-500"} focus:outline-none focus:ring-2`,required:!0,children:[f.jsx("option",{value:"",children:"Select Gender"}),f.jsx("option",{value:"Male",children:"Male"}),f.jsx("option",{value:"Female",children:"Female"}),f.jsx("option",{value:"Other",children:"Other"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block ${l==="dark"?"text-gray-300":"text-gray-700"} font-semibold mb-2`,children:"New Password (leave blank to keep current)"}),f.jsx("input",{type:"password",name:"password",value:u.password,onChange:T,className:`w-full border rounded-md px-3 py-2 ${l==="dark"?"bg-gray-700 border-gray-600 text-white focus:ring-indigo-500":"bg-white border-gray-300 focus:ring-blue-500"} focus:outline-none focus:ring-2`})]}),f.jsxs("div",{children:[f.jsx("label",{className:`block ${l==="dark"?"text-gray-300":"text-gray-700"} font-semibold mb-2`,children:"Confirm New Password"}),f.jsx("input",{type:"password",name:"confirmPassword",value:u.confirmPassword,onChange:T,className:`w-full border rounded-md px-3 py-2 ${l==="dark"?"bg-gray-700 border-gray-600 text-white focus:ring-indigo-500":"bg-white border-gray-300 focus:ring-blue-500"} focus:outline-none focus:ring-2`})]})]}),f.jsxs("div",{className:"flex gap-4 justify-end mt-6",children:[f.jsx("button",{type:"button",onClick:()=>w(!1),className:`${l==="dark"?"bg-gray-600 hover:bg-gray-700 text-white":"bg-gray-300 hover:bg-gray-400 text-gray-800"} py-2 px-6 rounded transition-colors duration-200`,children:"Cancel"}),f.jsx("button",{type:"submit",className:`${l==="dark"?"bg-indigo-600 hover:bg-indigo-700":"bg-blue-500 hover:bg-blue-600"} text-white py-2 px-6 rounded transition-colors duration-200`,disabled:e,children:e?"Saving...":"Save Changes"})]})]}):f.jsxs("div",{children:[f.jsxs("div",{className:"flex flex-col md:flex-row",children:[f.jsx("div",{className:"flex-shrink-0 mb-6 md:mb-0 md:mr-8",children:f.jsx("div",{className:`w-40 h-40 rounded-full overflow-hidden ${l==="dark"?"ring-2 ring-indigo-500":"ring-2 ring-blue-300"}`,children:f.jsx("img",{src:t.avatar||"/placeholder-avatar.png",alt:"Client Avatar",className:"w-full h-full object-cover"})})}),f.jsxs("div",{className:"flex-grow",children:[f.jsx("h3",{className:"text-2xl font-bold mb-2",children:t.name}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-y-4 gap-x-8",children:[f.jsxs("div",{children:[f.jsx("p",{className:`${l==="dark"?"text-gray-400":"text-gray-500"}`,children:"Email"}),f.jsx("p",{className:"font-medium",children:t.email})]}),f.jsxs("div",{children:[f.jsx("p",{className:`${l==="dark"?"text-gray-400":"text-gray-500"}`,children:"Phone"}),f.jsx("p",{className:"font-medium",children:t.phone})]}),f.jsxs("div",{children:[f.jsx("p",{className:`${l==="dark"?"text-gray-400":"text-gray-500"}`,children:"Age"}),f.jsxs("p",{className:"font-medium",children:[t.age," years"]})]}),f.jsxs("div",{children:[f.jsx("p",{className:`${l==="dark"?"text-gray-400":"text-gray-500"}`,children:"Gender"}),f.jsx("p",{className:"font-medium",children:t.gender&&t.gender.charAt(0).toUpperCase()+t.gender.slice(1)})]})]})]})]}),f.jsx("div",{className:"flex justify-end mt-8",children:f.jsx("button",{onClick:()=>w(!0),className:`${l==="dark"?"bg-indigo-600 hover:bg-indigo-700":"bg-blue-500 hover:bg-blue-600"} text-white py-2 px-6 rounded transition-colors duration-200`,children:"Edit Profile"})})]})})]})})}):f.jsx("div",{className:"min-h-screen flex items-center justify-center",children:f.jsx("p",{className:"text-xl text-red-500",children:"Failed to load client profile. Please log in."})})},Li="http://localhost:5000",Sq=Tm((t,e)=>({calls:[],activeCalls:[],currentCall:null,callHistory:[],isLoading:!1,isInitiating:!1,isAccepting:!1,isRejecting:!1,isEnding:!1,isFetchingHistory:!1,isFetchingActive:!1,isRating:!1,isReporting:!1,error:null,isTogglingCamera:!1,isTogglingMicrophone:!1,isTogglingScreenShare:!1,isFetchingMediaPermissions:!1,isUpdatingQuality:!1,mediaState:{cameraEnabled:!0,microphoneEnabled:!0,screenSharing:!1,qualitySettings:{videoQuality:"high",audioQuality:"high"}},pagination:{currentPage:1,totalPages:1,totalCalls:0,hasMore:!1},clearError:()=>t({error:null}),getUserType:()=>{const n=pr.getState(),i=kr.getState();return n.isAuthenticated&&n.doctor?{userType:"Doctor",user:n.doctor}:i.isAuthenticated&&i.client?{userType:"Client",user:i.client}:null},getAuthToken:()=>{const n=pr.getState(),i=kr.getState();return n.isAuthenticated?localStorage.getItem("doctorAccessToken"):i.isAuthenticated?localStorage.getItem("clientAccessToken"):null},initiateCall:async(n,i,r="video",a=!0,l=!0)=>{var c,u;t({isInitiating:!0,error:null});try{if(!e().getUserType())throw new Error("User not authenticated");const g=(await St.post(`${Li}/video-call/initiate`,{participantId:n,participantType:i,callType:r,cameraEnabled:a,microphoneEnabled:l},{withCredentials:!0})).data.data;return t(y=>({isInitiating:!1,currentCall:g,activeCalls:[...y.activeCalls,g],mediaState:{...y.mediaState,cameraEnabled:a,microphoneEnabled:l}})),rt.success("Call initiated successfully!"),{success:!0,data:g}}catch(h){const p=((u=(c=h.response)==null?void 0:c.data)==null?void 0:u.message)||"Failed to initiate call";return t({isInitiating:!1,error:p}),rt.error(p),{success:!1,error:p}}},acceptCall:async(n,i=!0,r=!0)=>{var a,l;t({isAccepting:!0,error:null});try{const u=(await St.patch(`${Li}/video-call/${n}/accept`,{cameraEnabled:i,microphoneEnabled:r},{withCredentials:!0})).data.data;return t(h=>({isAccepting:!1,currentCall:u.call,activeCalls:h.activeCalls.map(p=>p._id===n?u.call:p),mediaState:{...h.mediaState,cameraEnabled:i,microphoneEnabled:r}})),rt.success("Call accepted successfully!"),{success:!0,data:u}}catch(c){const u=((l=(a=c.response)==null?void 0:a.data)==null?void 0:l.message)||"Failed to accept call";return t({isAccepting:!1,error:u}),rt.error(u),{success:!1,error:u}}},toggleCamera:async(n,i)=>{var r,a;t({isTogglingCamera:!0,error:null});try{const l=await St.patch(`${Li}/video-call/${n}/camera`,{enabled:i},{withCredentials:!0}),{cameraEnabled:c}=l.data.data;return t(u=>({isTogglingCamera:!1,mediaState:{...u.mediaState,cameraEnabled:c}})),rt.success(`Camera ${c?"enabled":"disabled"}`),{success:!0,data:{cameraEnabled:c}}}catch(l){const c=((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to toggle camera";return t({isTogglingCamera:!1,error:c}),rt.error(c),{success:!1,error:c}}},toggleMicrophone:async(n,i)=>{var r,a;t({isTogglingMicrophone:!0,error:null});try{const l=await St.patch(`${Li}/video-call/${n}/microphone`,{enabled:i},{withCredentials:!0}),{microphoneEnabled:c}=l.data.data;return t(u=>({isTogglingMicrophone:!1,mediaState:{...u.mediaState,microphoneEnabled:c}})),rt.success(`Microphone ${c?"enabled":"disabled"}`),{success:!0,data:{microphoneEnabled:c}}}catch(l){const c=((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to toggle microphone";return t({isTogglingMicrophone:!1,error:c}),rt.error(c),{success:!1,error:c}}},toggleScreenShare:async(n,i)=>{var r,a;t({isTogglingScreenShare:!0,error:null});try{const l=await St.patch(`${Li}/video-call/${n}/screen-share`,{enabled:i},{withCredentials:!0}),{screenSharing:c,cameraEnabled:u}=l.data.data;return t(h=>({isTogglingScreenShare:!1,mediaState:{...h.mediaState,screenSharing:c,cameraEnabled:u}})),rt.success(`Screen sharing ${c?"started":"stopped"}`),{success:!0,data:{screenSharing:c,cameraEnabled:u}}}catch(l){const c=((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to toggle screen share";return t({isTogglingScreenShare:!1,error:c}),rt.error(c),{success:!1,error:c}}},getMediaPermissions:async n=>{var i,r;t({isFetchingMediaPermissions:!0,error:null});try{const a=await St.get(`${Li}/video-call/${n}/media-permissions`,{withCredentials:!0}),{mediaState:l,callStatus:c}=a.data.data;return t(u=>({isFetchingMediaPermissions:!1,mediaState:{...u.mediaState,...l}})),{success:!0,data:{mediaState:l,callStatus:c}}}catch(a){const l=((r=(i=a.response)==null?void 0:i.data)==null?void 0:r.message)||"Failed to fetch media permissions";return t({isFetchingMediaPermissions:!1,error:l}),{success:!1,error:l}}},updateMediaQuality:async(n,i="high",r="high")=>{var l,c;const a=["low","medium","high"];if(!a.includes(i)||!a.includes(r))return rt.error("Quality must be 'low', 'medium', or 'high'"),{success:!1,error:"Invalid quality settings"};t({isUpdatingQuality:!0,error:null});try{const h=(await St.patch(`${Li}/video-call/${n}/quality`,{videoQuality:i,audioQuality:r},{withCredentials:!0})).data.data;return t(p=>({isUpdatingQuality:!1,mediaState:{...p.mediaState,qualitySettings:{videoQuality:h.videoQuality,audioQuality:h.audioQuality}}})),rt.success("Media quality updated successfully!"),{success:!0,data:h}}catch(u){const h=((c=(l=u.response)==null?void 0:l.data)==null?void 0:c.message)||"Failed to update media quality";return t({isUpdatingQuality:!1,error:h}),rt.error(h),{success:!1,error:h}}},rejectCall:async(n,i="rejected")=>{var r,a;t({isRejecting:!0,error:null});try{return await St.patch(`${Li}/video-call/${n}/reject`,{reason:i},{withCredentials:!0}),t(l=>{var c;return{isRejecting:!1,currentCall:((c=l.currentCall)==null?void 0:c._id)===n?null:l.currentCall,activeCalls:l.activeCalls.filter(u=>u._id!==n)}}),rt.success("Call rejected successfully!"),{success:!0}}catch(l){const c=((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to reject call";return t({isRejecting:!1,error:c}),rt.error(c),{success:!1,error:c}}},endCall:async n=>{var i,r;t({isEnding:!0,error:null});try{const l=(await St.patch(`${Li}/video-call/${n}/end`,{},{withCredentials:!0})).data.data;return t(c=>{var u;return{isEnding:!1,currentCall:((u=c.currentCall)==null?void 0:u._id)===n?null:c.currentCall,activeCalls:c.activeCalls.filter(h=>h._id!==n),mediaState:{cameraEnabled:!0,microphoneEnabled:!0,screenSharing:!1,qualitySettings:{videoQuality:"high",audioQuality:"high"}}}}),rt.success(`Call ended successfully! Duration: ${Math.floor(l.duration/60)}:${l.duration%60}`),{success:!0,data:l}}catch(a){const l=((r=(i=a.response)==null?void 0:i.data)==null?void 0:r.message)||"Failed to end call";return t({isEnding:!1,error:l}),rt.error(l),{success:!1,error:l}}},getCallHistory:async(n=1,i=20,r=null)=>{var a,l;t({isFetchingHistory:!0,error:null});try{const c=new URLSearchParams({page:n.toString(),limit:i.toString()});r&&c.append("status",r);const u=await St.get(`${Li}/video-call/history?${c.toString()}`,{withCredentials:!0}),{calls:h,pagination:p}=u.data.data;return t(g=>({isFetchingHistory:!1,callHistory:n===1?h:[...g.callHistory,...h],pagination:p})),{success:!0,data:{calls:h,pagination:p}}}catch(c){const u=((l=(a=c.response)==null?void 0:a.data)==null?void 0:l.message)||"Failed to fetch call history";return t({isFetchingHistory:!1,error:u}),rt.error(u),{success:!1,error:u}}},getActiveCalls:async()=>{var n,i;t({isFetchingActive:!0,error:null});try{const a=(await St.get(`${Li}/video-call/active`,{withCredentials:!0})).data.data;return t({isFetchingActive:!1,activeCalls:a}),{success:!0,data:a}}catch(r){const a=((i=(n=r.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to fetch active calls";return t({isFetchingActive:!1,error:a}),{success:!1,error:a}}},rateCall:async(n,i,r="")=>{var a,l;if(!i||i<1||i>5)return rt.error("Rating must be between 1 and 5"),{success:!1,error:"Invalid rating"};t({isRating:!0,error:null});try{return await St.post(`${Li}/video-call/${n}/rate`,{rating:i,feedback:r},{withCredentials:!0}),t(c=>({isRating:!1,callHistory:c.callHistory.map(u=>u._id===n?{...u,callQuality:{rating:i,feedback:r}}:u)})),rt.success("Call rated successfully!"),{success:!0}}catch(c){const u=((l=(a=c.response)==null?void 0:a.data)==null?void 0:l.message)||"Failed to rate call";return t({isRating:!1,error:u}),rt.error(u),{success:!1,error:u}}},reportIssue:async(n,i)=>{var r,a;if(!i||i.trim()==="")return rt.error("Issue description is required"),{success:!1,error:"Issue description required"};t({isReporting:!0,error:null});try{return await St.post(`${Li}/video-call/${n}/report-issue`,{issue:i},{withCredentials:!0}),t({isReporting:!1}),rt.success("Issue reported successfully!"),{success:!0}}catch(l){const c=((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to report issue";return t({isReporting:!1,error:c}),rt.error(c),{success:!1,error:c}}},setCurrentCall:n=>t({currentCall:n}),clearCurrentCall:()=>t({currentCall:null}),updateCallStatus:(n,i)=>t(r=>{var a;return{activeCalls:r.activeCalls.map(l=>l._id===n?{...l,callStatus:i}:l),currentCall:((a=r.currentCall)==null?void 0:a._id)===n?{...r.currentCall,callStatus:i}:r.currentCall}}),setMediaState:n=>t(i=>({mediaState:{...i.mediaState,...n}})),resetMediaState:()=>t({mediaState:{cameraEnabled:!0,microphoneEnabled:!0,screenSharing:!1,qualitySettings:{videoQuality:"high",audioQuality:"high"}}}),handleIncomingCall:n=>{t(i=>({activeCalls:[...i.activeCalls,n]}))},handleCallAccepted:n=>{t(i=>{var r;return{activeCalls:i.activeCalls.map(a=>a._id===n.callId?n.call:a),currentCall:((r=i.currentCall)==null?void 0:r._id)===n.callId?n.call:i.currentCall}})},handleCallRejected:n=>{t(i=>{var r;return{activeCalls:i.activeCalls.filter(a=>a._id!==n.callId),currentCall:((r=i.currentCall)==null?void 0:r._id)===n.callId?null:i.currentCall}})},handleCallEnded:n=>{t(i=>{var r;return{activeCalls:i.activeCalls.filter(a=>a._id!==n.callId),currentCall:((r=i.currentCall)==null?void 0:r._id)===n.callId?null:i.currentCall}}),e().resetMediaState()},handleCameraToggled:n=>{const{userId:i,cameraEnabled:r}=n;console.log("Camera toggled:",i,r),t(a=>{if(a.currentCall){const l=a.currentCall.participants.map(c=>{var u;return((u=c.userId)==null?void 0:u._id)===i?{...c,mediaState:{...c.mediaState,cameraEnabled:r}}:c});return{currentCall:{...a.currentCall,participants:l}}}return a})},handleMicrophoneToggled:n=>{const{userId:i,microphoneEnabled:r}=n;console.log("Microphone toggled:",i,r),t(a=>{if(a.currentCall){const l=a.currentCall.participants.map(c=>{var u;return((u=c.userId)==null?void 0:u._id)===i?{...c,mediaState:{...c.mediaState,microphoneEnabled:r}}:c});return{currentCall:{...a.currentCall,participants:l}}}return a})},handleScreenShareToggled:n=>{const{userId:i,screenSharing:r,cameraEnabled:a}=n;console.log("Screen share toggled:",i,r,a),t(l=>{if(l.currentCall){const c=l.currentCall.participants.map(u=>{var h;return((h=u.userId)==null?void 0:h._id)===i?{...u,mediaState:{...u.mediaState,screenSharing:r,cameraEnabled:a}}:u});return{currentCall:{...l.currentCall,participants:c}}}return l})},handleMediaQualityUpdated:n=>{const{userId:i,qualitySettings:r}=n;console.log("Media quality updated:",i,r),t(a=>{if(a.currentCall){const l=a.currentCall.participants.map(c=>{var u;return((u=c.userId)==null?void 0:u._id)===i?{...c,mediaState:{...c.mediaState,qualitySettings:r}}:c});return{currentCall:{...a.currentCall,participants:l}}}return a})},resetStore:()=>t({calls:[],activeCalls:[],currentCall:null,callHistory:[],isLoading:!1,isInitiating:!1,isAccepting:!1,isRejecting:!1,isEnding:!1,isFetchingHistory:!1,isFetchingActive:!1,isRating:!1,isReporting:!1,isTogglingCamera:!1,isTogglingMicrophone:!1,isTogglingScreenShare:!1,isFetchingMediaPermissions:!1,isUpdatingQuality:!1,error:null,mediaState:{cameraEnabled:!0,microphoneEnabled:!0,screenSharing:!1,qualitySettings:{videoQuality:"high",audioQuality:"high"}},pagination:{currentPage:1,totalPages:1,totalCalls:0,hasMore:!1}})})),Mq=()=>{var pt,ct,Zt;const t="http://localhost:5000",[e,n]=k.useState(""),[i,r]=k.useState(null),[a,l]=k.useState(!0),[c,u]=k.useState([]),[h,p]=k.useState(null),[g,y]=k.useState(null),[x,b]=k.useState(!1),[w,T]=k.useState({video:"high",audio:"high"}),[_,S]=k.useState("disconnected"),[E,R]=k.useState(""),[A,N]=k.useState(!1),j=k.useRef(null),O=k.useRef(null),L=k.useRef(null),B=k.useRef(null),F=k.useRef(null),J=k.useRef(null),Q=k.useRef(!1),W=k.useRef([]),Z=k.useRef(!1),z=k.useRef(!1),{currentCall:$,activeCalls:U,callHistory:X,mediaState:D,isInitiating:q,isAccepting:ce,isRejecting:me,isEnding:fe,isTogglingCamera:ie,isTogglingMicrophone:Ne,isTogglingScreenShare:Fe,isFetchingHistory:Be,error:Ie,initiateCall:$e,acceptCall:Ke,rejectCall:Se,endCall:Ee,toggleCamera:Re,toggleMicrophone:De,toggleScreenShare:ke,getCallHistory:H,getActiveCalls:I,updateMediaQuality:ve,rateCall:_e,clearError:K}=Sq(),{doctor:we,isAuthenticated:Le,getAllDoctors:ze,checkAuth:Ce}=pr(),{client:Oe,isAuthenticated:qe,getAllClients:tt,checkAuth:Ue}=kr();k.useEffect(()=>{const ne=()=>{console.log("[Socket] Initializing socket connection...");const oe=h==="Doctor"?localStorage.getItem("doctorAccessToken"):localStorage.getItem("clientAccessToken");if(console.log("[Socket] Retrieved token:",oe?"exists":"missing"),console.log("[Socket] User Type:",h),console.log("[Socket] Current User:",g),!oe){console.error("[Socket] No authentication token found");return}if(!g||!g._id){console.error("[Socket] Invalid current user data:",g);return}try{const Me=xd(t,{auth:{token:oe,userType:h,userId:g._id},transports:["websocket","polling"],timeout:2e4,forceNew:!0});J.current=Me,Me.on("connect",()=>{console.log("[Socket] Connected! Socket ID:",Me.id),S("connected")}),Me.on("authenticated",Te=>{console.log("[Socket] Authenticated:",Te),Me.emit("identify",{userId:g._id,userType:h})}),Me.on("incoming-call",async Te=>{console.log("[Socket] Incoming call:",Te),await cs(Te)}),Me.on("offer",async Te=>{console.log("[Socket] Received call offer:",Te),await ui(Te)}),Me.on("answer",async Te=>{console.log("[Socket] Received call answer:",Te),await pn(Te)}),Me.on("iceCandidate",async Te=>{console.log("[Socket] Received ICE candidate:",Te),await Js(Te)}),Me.on("call-ended",()=>{console.log("[Socket] Call ended by remote user"),Ks()}),Me.on("call-rejected",()=>{console.log("[Socket] Call rejected by remote user"),Si()}),Me.on("disconnect",Te=>{console.warn("[Socket] Disconnected:",Te),S("disconnected")}),Me.on("connect_error",Te=>{var Ve;console.error("[Socket] Connection error:",Te),S("error"),(Ve=Te.message)!=null&&Ve.includes("Authentication")&&console.warn("[Socket] Authentication failed. Consider redirecting to login.")}),Me.on("error",Te=>{console.error("[Socket] General socket error:",Te)})}catch(Me){console.error("[Socket] Exception during socket setup:",Me)}};return g&&h&&(console.log("[Socket] useEffect triggered - Initializing..."),ne()),()=>{J.current&&(console.log("[Socket] Disconnecting socket..."),J.current.disconnect())}},[g,h]);const Ye=async()=>{if(console.log("[Media] Initializing media stream..."),L.current&&L.current.active)return console.log("[Media] Using existing active stream"),j.current&&j.current.srcObject!==L.current&&(j.current.srcObject=L.current,await new Promise(ne=>{j.current.onloadedmetadata=ne,setTimeout(ne,1e3)})),L.current;try{if(L.current&&(console.log("[Media] Stopping existing inactive stream..."),L.current.getTracks().forEach(oe=>{oe.stop(),console.log(`[Media] Stopped ${oe.kind} track`)}),L.current=null),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Media devices not supported by this browser");console.log("[Media] Requesting new media stream...");const ne=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280,min:640,max:1920},height:{ideal:720,min:480,max:1080},frameRate:{ideal:30,min:15,max:60},facingMode:"user"},audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:{ideal:44100}}});if(console.log("[Media] New media stream obtained:",{id:ne.id,videoTracks:ne.getVideoTracks().length,audioTracks:ne.getAudioTracks().length,active:ne.active}),L.current=ne,j.current){j.current.srcObject=ne,console.log("[Media] Stream attached to local video element");try{await new Promise((oe,Me)=>{j.current.onloadedmetadata=oe,j.current.onerror=Me,setTimeout(Me,5e3)}),await j.current.play(),console.log("[Media] Local video playing")}catch(oe){console.warn("[Media] Auto-play prevented or video load failed:",oe)}}return ne}catch(ne){throw console.error("[Media] Error accessing media devices:",ne),ne}},kt=()=>{console.log("[Peer] Initializing new RTCPeerConnection..."),F.current&&(console.log("[Peer] Closing existing peer connection"),F.current.close(),F.current=null),Bt();const ne=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"}],iceCandidatePoolSize:10});return F.current=ne,ne.onicecandidate=oe=>{oe.candidate&&J.current&&(console.log("[Peer] Sending ICE candidate:",oe.candidate),J.current.emit("iceCandidate",{candidate:oe.candidate,targetUserId:(i==null?void 0:i._id)||Qe()}))},ne.ontrack=oe=>{var Me,Te,Ve,zt;if(console.log("[Peer] Received remote track event:",{streamsLength:oe.streams.length,trackKind:(Me=oe.track)==null?void 0:Me.kind,trackId:(Te=oe.track)==null?void 0:Te.id,trackEnabled:(Ve=oe.track)==null?void 0:Ve.enabled,trackReadyState:(zt=oe.track)==null?void 0:zt.readyState}),oe.streams.length>0){const mt=oe.streams[0];B.current=mt,console.log("[Peer] Remote stream details:",{id:mt.id,active:mt.active,videoTracks:mt.getVideoTracks().length,audioTracks:mt.getAudioTracks().length}),O.current&&(console.log("[Peer] Attaching remote stream to video element"),O.current.srcObject=mt,O.current.onloadedmetadata=()=>{console.log("[Peer] Remote video metadata loaded"),O.current.play().catch(ln=>{console.warn("[Peer] Auto-play prevented:",ln)})},O.current.oncanplay=()=>{console.log("[Peer] Remote video can play")},O.current.onplaying=()=>{console.log("[Peer] Remote video is playing"),S("connected")},O.current.onerror=ln=>{console.error("[Peer] Remote video error:",ln)})}else console.warn("[Peer] ontrack event received with no streams")},ne.onconnectionstatechange=()=>{const oe=ne.connectionState;switch(console.log("[Peer] Peer connection state changed:",oe),S(oe),oe){case"connected":console.log("[Peer] Peer connection established successfully");break;case"disconnected":console.warn("[Peer] Peer connection disconnected"),ge();break;case"failed":console.error("[Peer] Peer connection failed"),ge();break;case"closed":console.log("[Peer] Peer connection closed");break}},ne.oniceconnectionstatechange=()=>{const oe=ne.iceConnectionState;console.log("[Peer] ICE connection state changed:",oe),oe==="failed"&&(console.warn("[Peer] ICE connection failed. Restarting ICE..."),ne.restartIce())},ne},Bt=()=>{console.log("[State] Resetting connection state..."),Q.current=!1,W.current=[],Z.current=!1,z.current=!1},_i=(ne,oe)=>{if(!ne||!oe){console.warn("[Tracks] Cannot add tracks - missing peer connection or stream");return}console.log("[Tracks] Adding tracks to peer connection...");const Te=ne.getSenders().filter(Ve=>Ve.track).map(Ve=>Ve.track.id);oe.getTracks().forEach(Ve=>{if(Te.includes(Ve.id))console.log(`[Tracks] Track ${Ve.kind} (ID: ${Ve.id}) already exists, skipping`);else try{ne.addTrack(Ve,oe),console.log(`[Tracks] Successfully added ${Ve.kind} track (ID: ${Ve.id})`)}catch(zt){console.error(`[Tracks] Failed to add ${Ve.kind} track:`,zt)}})},bn=async()=>{console.log("[ICE] drainIceCandidateQueue called"),console.log(`[ICE] Queue length: ${W.current.length}`),console.log(`[ICE] remoteDescriptionSetRef: ${Q.current}`),console.log("[ICE] peerConnectionRef exists:",!!F.current);const ne=F.current;if(!ne||!Q.current){console.log("[ICE] Not ready: peerConnection or remoteDescription flag not set");return}let oe=0;for(;!ne.remoteDescription&&oe<5;)console.log("[ICE] Waiting for remoteDescription to be actually set..."),await new Promise(Te=>setTimeout(Te,100)),oe++;if(!ne.remoteDescription){console.warn("[ICE] remoteDescription still null after waiting, skipping drain");return}if(W.current.length===0){console.log("[ICE] No ICE candidates to drain");return}console.log(`[ICE] Draining ${W.current.length} queued ICE candidates`);const Me=[...W.current];W.current=[];for(const Te of Me)try{Te&&(Te.candidate||Te.sdpMid||Te.sdpMLineIndex!==void 0)?(await ne.addIceCandidate(new RTCIceCandidate(Te)),console.log("[ICE] Successfully added queued ICE candidate")):console.warn("[ICE] Invalid candidate data, skipping:",Te)}catch(Ve){console.error("[ICE] Failed to add queued candidate:",Ve)}},Js=async ne=>{console.log("[ICE] Received ICE candidate data:",ne);try{if(!ne||!ne.candidate){console.warn("[ICE] No ICE candidate in received data");return}const oe=ne.candidate;if(!oe.candidate&&!oe.sdpMid&&oe.sdpMLineIndex===void 0){console.warn("[ICE] Invalid candidate data received:",oe);return}if(F.current&&Q.current&&F.current.remoteDescription){console.log("[ICE] Adding ICE candidate immediately to peer connection...");try{await F.current.addIceCandidate(new RTCIceCandidate(oe)),console.log("[ICE] ICE candidate added successfully")}catch(Me){console.error("[ICE] Failed to add ICE candidate immediately:",Me),W.current.push(oe)}}else console.log("[ICE] Peer connection not ready, queueing ICE candidate"),W.current.push(oe),console.log(`[ICE] Queued candidates count: ${W.current.length}`)}catch(oe){console.error("[ICE] Error handling ICE candidate:",oe)}},ui=async ne=>{var oe,Me;if(Z.current){console.warn("[Offer] Already processing an offer, ignoring duplicate");return}Z.current=!0,console.log("[Offer] Received offer from:",ne.fromUserId);try{if(Bt(),(!L.current||!L.current.active)&&(console.log("[Offer] No active local stream, initializing media..."),await Ye(),await new Promise(zt=>setTimeout(zt,2e3))),!L.current||!L.current.active)throw new Error("Failed to obtain active media stream for answering");console.log("[Offer] Initializing peer connection...");const Te=kt();console.log("[Offer] Adding local tracks to peer connection..."),_i(Te,L.current),await new Promise(zt=>setTimeout(zt,500)),console.log("[Offer] Setting remote description..."),console.log("[Offer] Offer SDP:",ne.offer),await Te.setRemoteDescription(new RTCSessionDescription(ne.offer)),Q.current=!0,console.log("[SDP] Remote description set successfully"),console.log("[SDP] Remote description type:",(oe=Te.remoteDescription)==null?void 0:oe.type),console.log("[SDP] Remote description exists:",!!Te.remoteDescription),console.log("[SDP] Draining ICE candidates after setting remote description..."),await bn(),console.log("[Offer] Creating SDP answer...");const Ve=await Te.createAnswer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(console.log("[Offer] Setting local description..."),await Te.setLocalDescription(Ve),console.log("[Offer] Local description set, type:",(Me=Te.localDescription)==null?void 0:Me.type),J.current&&J.current.connected)console.log("[Offer] Sending SDP answer back to offerer..."),J.current.emit("call-answer",{answer:Ve,targetUserId:ne.fromUserId});else throw new Error("Socket not connected - cannot send answer");S("connecting"),console.log("[Offer] Offer handling completed successfully")}catch(Te){console.error("[Offer] Error while handling incoming offer:",Te),R(`Failed to accept incoming call: ${Te.message}`),F.current&&(F.current.close(),F.current=null),Bt()}finally{Z.current=!1}},pn=async ne=>{if(z.current){console.warn("[Answer] Already processing an answer, ignoring duplicate");return}z.current=!0,console.log("[Answer] Received answer data:",ne);try{if(!F.current)throw new Error("No peer connection available to set answer");if(!ne.answer)throw new Error("No answer data received");console.log("[Answer] Before setting remote description"),console.log("[Answer] Current signaling state:",F.current.signalingState),console.log("[Answer] Answer SDP:",ne.answer),F.current.signalingState!=="have-local-offer"&&console.warn("[Answer] Unexpected signaling state for answer:",F.current.signalingState),console.log("[Answer] Setting remote description with received answer..."),await F.current.setRemoteDescription(new RTCSessionDescription(ne.answer)),Q.current=!0,console.log("[Answer] Remote description set successfully"),console.log("[Answer] New signaling state:",F.current.signalingState),console.log("[Answer] Remote description exists:",!!F.current.remoteDescription),console.log("[SDP] Draining ICE candidates after setting answer..."),await bn(),console.log("[Answer] Answer processing completed successfully")}catch(oe){console.error("[Answer] Error handling received answer:",oe),R(`Failed to process call answer: ${oe.message}`),F.current&&(F.current.close(),F.current=null),Bt()}finally{z.current=!1}},Ks=()=>{console.log("[Call] Ending call..."),F.current&&(console.log("[Call] Closing peer connection"),F.current.close(),F.current=null),O.current&&(console.log("[Call] Clearing remote video stream"),O.current.srcObject=null),B.current=null,Bt(),S("disconnected"),r(null),l(!0)},Si=()=>{Ks()},cs=async ne=>{console.log("Incoming call from:",ne)},ge=()=>{console.log("Connection failed, attempting to reconnect..."),S("reconnecting"),setTimeout(()=>{J.current&&!J.current.connected&&J.current.connect()},3e3)},Qe=()=>h==="Doctor"?we==null?void 0:we._id:h==="Client"?Oe==null?void 0:Oe._id:null;k.useEffect(()=>{(we||Oe)&&(async()=>{try{const oe=localStorage.getItem("doctorAccessToken"),Me=localStorage.getItem("clientAccessToken");if(oe&&we){p("Doctor"),y(we);return}if(Me&&Oe){p("Client"),y(Oe);return}if(we&&(await Ce()).success){p("Doctor"),y(we);return}if(Oe&&(await Ue()).success){p("Client"),y(Oe);return}console.warn("No valid user found")}catch(oe){console.error("Error initializing user:",oe)}})()},[we,Oe,Ce,Ue]),k.useEffect(()=>{h&&(at(),I(),H())},[h]),k.useEffect(()=>(($||i)&&Ye(),()=>{L.current&&L.current.getTracks().forEach(ne=>ne.stop())}),[$,i]),k.useEffect(()=>()=>{console.log("[Cleanup] Component unmounting..."),L.current&&L.current.getTracks().forEach(ne=>ne.stop()),F.current&&F.current.close(),J.current&&J.current.disconnect(),Bt()},[]);const at=async()=>{try{if(N(!0),h==="Client"){const ne=await ze({verified:"true"});ne.success&&u(ne.data)}else if(h==="Doctor"){const ne=await tt();ne.success&&u(ne.data)}}catch(ne){console.error("Failed to fetch contacts:",ne)}finally{N(!1)}},Fn=ne=>{r(ne),l(!1)},Gi=async()=>{if(!i||!J.current||!J.current.connected){console.error("Cannot initiate call: missing contact or socket connection"),R("Cannot start call - no connection to server");return}try{if(S("connecting"),console.log("[Call] Starting call initiation process..."),Bt(),(!L.current||!L.current.active)&&(console.log("[Call] No active local stream, initializing media..."),await Ye(),await new Promise(Ve=>setTimeout(Ve,2e3))),!L.current||!L.current.active)throw new Error("Failed to obtain active media stream");console.log("[Call] Initializing peer connection...");const ne=kt();console.log("[Call] Adding local tracks to peer connection..."),_i(ne,L.current),await new Promise(Ve=>setTimeout(Ve,500)),console.log("[Call] Creating offer...");const oe=await ne.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0,iceRestart:!1});console.log("[Call] Offer created:",oe),console.log("[Call] Setting local description..."),await ne.setLocalDescription(oe),console.log("[Call] Local description set, signaling state:",ne.signalingState),console.log("[Call] Sending offer to:",i._id),J.current.emit("call-offer",{offer:oe,targetUserId:i._id,callType:"video",fromUserId:Qe()});const Me=h==="Client"?"Doctor":"Client",Te=await $e(i._id,Me,"video",D.cameraEnabled,D.microphoneEnabled);if(Te.success)console.log("[Call] API call successful:",Te.data);else throw new Error(Te.message||"Failed to initiate call");console.log("[Call] Call initiation completed successfully")}catch(ne){console.error("[Call] Error initiating call:",ne),R(`Failed to start call: ${ne.message}`),S("disconnected"),F.current&&(F.current.close(),F.current=null),Bt()}},ea=async ne=>{(await Ke(ne,!0,!0)).success&&(r(null),l(!1))},V=async ne=>{await Se(ne,"User declined"),J.current&&J.current.emit("call-rejected",{callId:ne})},de=async()=>{$&&(await Ee($._id),J.current&&J.current.emit("call-ended",{callId:$._id}),Ks())},le=async()=>{if($&&(await Re($._id,!D.cameraEnabled),L.current)){const ne=L.current.getVideoTracks()[0];ne&&(ne.enabled=!D.cameraEnabled)}},ye=async()=>{if($&&(await De($._id,!D.microphoneEnabled),L.current)){const ne=L.current.getAudioTracks()[0];ne&&(ne.enabled=!D.microphoneEnabled)}},je=async()=>{if($)try{if(D.screenSharing){if(L.current&&F.current){const ne=F.current.getSenders().find(oe=>oe.track&&oe.track.kind==="video");ne&&await ne.replaceTrack(L.current.getVideoTracks()[0])}}else{const ne=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0});if(F.current){const oe=F.current.getSenders().find(Me=>Me.track&&Me.track.kind==="video");oe&&await oe.replaceTrack(ne.getVideoTracks()[0])}ne.getVideoTracks()[0].onended=()=>{je()}}await ke($._id,!D.screenSharing)}catch(ne){console.error("Error toggling screen share:",ne)}},dt=c.filter(ne=>{var oe,Me,Te;return((oe=ne.name)==null?void 0:oe.toLowerCase().includes(e.toLowerCase()))||((Me=ne.email)==null?void 0:Me.toLowerCase().includes(e.toLowerCase()))||((Te=ne.specialization)==null?void 0:Te.toLowerCase().includes(e.toLowerCase()))}),lt=U.filter(ne=>{var Te,Ve,zt;const oe=Qe(),Me=(Te=ne.participants)==null?void 0:Te.find(mt=>{var ln;return((ln=mt==null?void 0:mt.userId)==null?void 0:ln._id)&&mt.userId._id.toString()!==(oe==null?void 0:oe.toString())});return(zt=(Ve=Me==null?void 0:Me.userId)==null?void 0:Ve.name)==null?void 0:zt.toLowerCase().includes(e.toLowerCase())});return h?f.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[f.jsxs("div",{className:`${a?"w-full md:w-80":"hidden md:block md:w-80"} bg-white/90 backdrop-blur-xl border-r border-slate-200/60 shadow-2xl`,children:[f.jsxs("div",{className:"p-6 border-b border-slate-200/60 bg-gradient-to-r from-white/80 to-blue-50/50 backdrop-blur-sm",children:[g&&f.jsxs("div",{className:"flex items-center mb-6 p-5 bg-gradient-to-r from-blue-50/90 to-indigo-50/90 rounded-2xl border border-blue-100/60 shadow-lg",children:[f.jsxs("div",{className:"relative",children:[f.jsx("img",{src:g.avatar||g.profileImage||`https://ui-avatars.com/api/?name=${encodeURIComponent(g.name||"User")}&background=3b82f6&color=fff`,alt:g.name||"User",className:"w-16 h-16 rounded-2xl object-cover ring-3 ring-blue-200/50 shadow-xl",onError:ne=>{ne.target.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(g.name||"User")}&background=3b82f6&color=fff`}}),f.jsx("div",{className:`absolute -bottom-1 -right-1 w-5 h-5 border-3 border-white rounded-full shadow-sm ${_==="connected"?"bg-green-400":_==="connecting"?"bg-yellow-400 animate-pulse":"bg-gray-400"}`})]}),f.jsxs("div",{className:"ml-4 flex-1",children:[f.jsx("h2",{className:"text-lg font-bold text-slate-900",children:g.name||"Unknown User"}),f.jsxs("div",{className:"text-sm text-slate-600 space-y-1 mt-1",children:[f.jsxs("p",{className:"flex items-center",children:[f.jsx(ts,{className:"w-3.5 h-3.5 mr-2 text-slate-500"}),g.phone||"No phone"]}),f.jsxs("p",{className:"text-slate-600 font-medium",children:[g.gender||"Not specified","  ",h]})]})]})]}),f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Video Calls"}),f.jsx("div",{className:"flex space-x-2",children:f.jsx("button",{className:"p-3 hover:bg-blue-50/80 rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-md",title:"View all contacts",children:f.jsx(Wv,{className:"w-5 h-5 text-slate-600"})})})]}),f.jsxs("div",{className:"relative",children:[f.jsx(Qs,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),f.jsx("input",{type:"text",placeholder:`Search ${h==="Client"?"doctors":"patients"}...`,className:"w-full pl-12 pr-4 py-3.5 bg-white/80 border border-slate-200/60 rounded-2xl focus:outline-none focus:ring-3 focus:ring-blue-500/30 focus:border-blue-500 transition-all duration-300 text-slate-700 placeholder-slate-500 shadow-sm",value:e,onChange:ne=>n(ne.target.value)})]})]}),f.jsxs("div",{className:"flex border-b border-slate-200/60 bg-white/60 backdrop-blur-sm",children:[f.jsx("button",{onClick:()=>b(!1),className:`flex-1 px-6 py-4 text-sm font-semibold transition-all duration-300 ${x?"text-slate-500 hover:text-slate-700 hover:bg-slate-50/60":"text-blue-600 border-b-3 border-blue-600 bg-blue-50/60"}`,children:"Available"}),f.jsx("button",{onClick:()=>b(!0),className:`flex-1 px-6 py-4 text-sm font-semibold transition-all duration-300 ${x?"text-blue-600 border-b-3 border-blue-600 bg-blue-50/60":"text-slate-500 hover:text-slate-700 hover:bg-slate-50/60"}`,children:"Call History"})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto",children:[A&&f.jsxs("div",{className:"flex items-center justify-center p-8",children:[f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-200 border-t-blue-600"}),f.jsx("span",{className:"ml-3 text-slate-600",children:"Loading..."})]}),!A&&!x?f.jsxs(f.Fragment,{children:[lt&&lt.length>0&&f.jsxs("div",{className:"border-b border-slate-200/60",children:[f.jsx("div",{className:"px-6 py-3 bg-gradient-to-r from-green-50/60 to-emerald-50/60",children:f.jsx("h3",{className:"text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Active Calls"})}),lt.map(ne=>{var zt;const oe=Qe(),Me=(zt=ne.participants)==null?void 0:zt.find(mt=>{var ln,Gt;return((Gt=(ln=mt==null?void 0:mt.userId)==null?void 0:ln._id)==null?void 0:Gt.toString())!==(oe==null?void 0:oe.toString())}),Te=Me==null?void 0:Me.userId;if(!Te)return null;const Ve=ne.callStatus==="ringing";return f.jsxs("div",{className:"flex items-center p-4 bg-gradient-to-r from-green-50/80 to-emerald-50/80 border-b border-slate-100/60",children:[f.jsxs("div",{className:"relative",children:[f.jsx("img",{src:Te.avatar||Te.profileImage||`https://ui-avatars.com/api/?name=${encodeURIComponent(Te.name||"User")}&background=10b981&color=fff`,alt:Te.name||"User",className:"w-14 h-14 rounded-2xl object-cover ring-2 ring-green-200 shadow-lg",onError:mt=>{mt.target.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(Te.name||"User")}&background=10b981&color=fff`}}),f.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-400 border-2 border-white rounded-full animate-pulse"})]}),f.jsxs("div",{className:"ml-4 flex-1",children:[f.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:Te.name||"Unknown User"}),f.jsx("p",{className:"text-sm text-green-600 font-medium",children:Ve?"Incoming call...":"In call"})]}),f.jsx("div",{className:"flex space-x-2",children:Ve&&f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>ea(ne._id),disabled:ce,className:"p-3 bg-green-500 hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl transition-all duration-300 hover:scale-105 shadow-lg",title:"Accept call",children:f.jsx(ts,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>V(ne._id),disabled:me,className:"p-3 bg-red-500 hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl transition-all duration-300 hover:scale-105 shadow-lg",title:"Reject call",children:f.jsx(aA,{className:"w-4 h-4"})})]})})]},ne._id)})]}),f.jsxs("div",{className:"mt-4",children:[f.jsx("div",{className:"px-6 py-3 bg-gradient-to-r from-slate-50/60 to-blue-50/60",children:f.jsx("h3",{className:"text-xs font-bold text-slate-600 uppercase tracking-wider",children:h==="Client"?"Available Doctors":"Available Patients"})}),dt&&dt.length>0?dt.map(ne=>f.jsxs("div",{onClick:()=>Fn(ne),className:"flex items-center p-4 hover:bg-gradient-to-r hover:from-blue-50/80 hover:to-indigo-50/80 cursor-pointer border-b border-slate-100/60 transition-all duration-300 group hover:shadow-sm",children:[f.jsxs("div",{className:"relative",children:[f.jsx("img",{src:ne.avatar||ne.profileImage||`https://ui-avatars.com/api/?name=${encodeURIComponent(ne.name||"User")}&background=3b82f6&color=fff`,alt:ne.name||"User",className:"w-14 h-14 rounded-2xl object-cover ring-2 ring-white shadow-lg",onError:oe=>{oe.target.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(ne.name||"User")}&background=3b82f6&color=fff`}}),f.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-400 border-2 border-white rounded-full"})]}),f.jsxs("div",{className:"ml-4 flex-1",children:[f.jsx("h3",{className:"text-sm font-semibold text-slate-900 group-hover:text-blue-600 transition-colors duration-300",children:ne.name||"Unknown User"}),f.jsxs("div",{className:"text-xs text-slate-600 mt-1 font-medium",children:[f.jsxs("span",{children:[ne.age?`${ne.age} years`:"Age unknown","  ",ne.gender||"Gender not specified"]}),h==="Client"&&ne.specialization&&f.jsxs("span",{className:"ml-2",children:[" ",ne.specialization]})]}),h==="Client"&&ne.verified&&f.jsx("span",{className:"inline-block bg-gradient-to-r from-green-400 to-green-500 text-white text-xs font-bold px-3 py-1 rounded-full mt-2 shadow-lg",children:" Verified"})]}),f.jsx(Fp,{className:"w-5 h-5 text-slate-400 group-hover:text-blue-500 transition-colors duration-300"})]},ne._id)):f.jsxs("div",{className:"p-8 text-center text-slate-500",children:[f.jsx(Wv,{className:"w-12 h-12 mx-auto mb-4 text-slate-300"}),f.jsx("p",{className:"text-sm",children:e?`No ${h==="Client"?"doctors":"patients"} found matching "${e}"`:`No ${h==="Client"?"doctors":"patients"} available`})]})]})]}):!A&&x?f.jsxs("div",{children:[f.jsx("div",{className:"px-6 py-3 bg-gradient-to-r from-slate-50/60 to-blue-50/60",children:f.jsx("h3",{className:"text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Recent Calls"})}),X&&X.length>0?X.map(ne=>{var zt,mt;const oe=Qe(),Me=(zt=ne.participants)==null?void 0:zt.find(ln=>{var Gt,Wi;return((Wi=(Gt=ln==null?void 0:ln.userId)==null?void 0:Gt._id)==null?void 0:Wi.toString())!==(oe==null?void 0:oe.toString())}),Te=Me==null?void 0:Me.userId;if(!Te)return null;const Ve=new Date(ne.createdAt);return f.jsxs("div",{className:"flex items-center p-4 hover:bg-gradient-to-r hover:from-slate-50/80 hover:to-blue-50/80 cursor-pointer border-b border-slate-100/60 transition-all duration-300",children:[f.jsxs("div",{className:"relative",children:[f.jsx("img",{src:Te.avatar||Te.profileImage||`https://ui-avatars.com/api/?name=${encodeURIComponent(Te.name||"User")}&background=6b7280&color=fff`,alt:Te.name||"User",className:"w-14 h-14 rounded-2xl object-cover ring-2 ring-white shadow-lg",onError:ln=>{ln.target.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(Te.name||"User")}&background=6b7280&color=fff`}}),f.jsx("div",{className:`absolute -bottom-1 -right-1 w-4 h-4 border-2 border-white rounded-full ${ne.callStatus==="completed"?"bg-green-400":ne.callStatus==="missed"?"bg-red-400":"bg-gray-400"}`})]}),f.jsxs("div",{className:"ml-4 flex-1",children:[f.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:Te.name||"Unknown User"}),f.jsxs("div",{className:"text-xs text-slate-600 mt-1 space-y-1",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(Zs,{className:"w-3 h-3 mr-1"}),ne.createdAt?f.jsxs(f.Fragment,{children:[Ve.toLocaleDateString()," at ",Ve.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}):"Date unknown"]}),f.jsx("div",{className:`font-medium ${ne.callStatus==="completed"?"text-green-600":ne.callStatus==="missed"?"text-red-600":"text-gray-600"}`,children:ne.callStatus==="completed"?`${ne.duration||"0"}min`:ne.callStatus==="missed"?"Missed call":ne.callStatus||"Unknown status"})]})]}),((mt=ne.callQuality)==null?void 0:mt.rating)&&f.jsxs("div",{className:"flex items-center text-yellow-500",children:[f.jsx(BR,{className:"w-4 h-4 fill-current"}),f.jsx("span",{className:"text-xs ml-1 text-slate-600",children:ne.callQuality.rating})]})]},ne._id)}):f.jsxs("div",{className:"p-8 text-center text-slate-500",children:[f.jsx(Zs,{className:"w-12 h-12 mx-auto mb-4 text-slate-300"}),f.jsx("p",{className:"text-sm",children:"No call history available"})]})]}):null]})]}),f.jsx("div",{className:"flex-1 flex flex-col",children:!i&&!$?f.jsx("div",{className:"flex-1 flex items-center justify-center bg-gradient-to-br from-slate-50 to-blue-50",children:f.jsxs("div",{className:"text-center max-w-md mx-auto p-10 bg-white/80 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/20",children:[f.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-3xl flex items-center justify-center mx-auto mb-8 shadow-xl",children:f.jsx(Fp,{className:"w-12 h-12 text-white"})}),f.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Start a Video Call"}),f.jsx("p",{className:"text-slate-600 mb-8 leading-relaxed",children:h==="Client"?"Select a doctor from the sidebar to start a video consultation.":"Select a patient from the sidebar to start a video call."}),f.jsx("button",{onClick:()=>l(!0),className:"md:hidden bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-8 py-4 rounded-2xl font-semibold hover:shadow-lg transition-all duration-300 hover:scale-105",children:"View Contacts"})]})}):f.jsxs("div",{className:"flex-1 relative bg-black",children:[f.jsx("video",{ref:O,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover",onLoadedMetadata:()=>console.log("Remote video loaded"),onError:ne=>console.error("Remote video error:",ne)}),(!B.current||!B.current.active||_!=="connected")&&f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-800 to-gray-900 flex items-center justify-center",children:f.jsxs("div",{className:"text-center text-white",children:[f.jsxs("div",{className:"w-32 h-32 bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-6",children:[f.jsx("img",{src:(i==null?void 0:i.avatar)||(i==null?void 0:i.profileImage)||`https://ui-avatars.com/api/?name=${encodeURIComponent((i==null?void 0:i.name)||"User")}&background=6b7280&color=fff`,alt:(i==null?void 0:i.name)||"User",className:"w-24 h-24 rounded-full object-cover",onError:ne=>{ne.target.style.display="none",ne.target.nextElementSibling.style.display="block"}}),f.jsx(tA,{className:"w-16 h-16 text-gray-400 hidden"})]}),f.jsx("h3",{className:"text-xl font-semibold mb-2",children:(i==null?void 0:i.name)||"Unknown User"}),f.jsx("p",{className:"text-gray-300",children:_==="connecting"?"Connecting...":_==="connected"?"Waiting for video...":"Waiting to connect..."})]})}),f.jsxs("div",{className:"absolute top-6 right-6 w-48 h-36 bg-gray-900 rounded-2xl overflow-hidden shadow-2xl border-3 border-white/20",children:[f.jsx("video",{ref:j,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover",onLoadedMetadata:()=>console.log("Local video loaded"),onError:ne=>console.error("Local video error:",ne)}),!D.cameraEnabled&&f.jsx("div",{className:"absolute inset-0 bg-gray-800 flex items-center justify-center",children:f.jsx(tA,{className:"w-8 h-8 text-gray-400"})})]}),_!=="connected"&&f.jsxs("div",{className:"absolute top-6 left-6 bg-black/60 backdrop-blur-sm text-white px-4 py-2 rounded-xl flex items-center space-x-2",children:[f.jsx("div",{className:`w-2 h-2 rounded-full ${_==="connecting"?"bg-yellow-400 animate-pulse":_==="disconnected"?"bg-red-400":_==="error"?"bg-red-500":"bg-gray-400"}`}),f.jsx("span",{className:"text-sm font-medium",children:_==="connecting"?"Connecting...":_==="disconnected"?"Disconnected":_==="error"?"Connection Error":_})]}),f.jsx("div",{className:"absolute top-6 left-1/2 transform -translate-x-1/2 bg-black/60 backdrop-blur-sm text-white px-6 py-3 rounded-2xl",children:f.jsxs("div",{className:"text-center",children:[f.jsx("h3",{className:"font-semibold text-lg",children:(i==null?void 0:i.name)||((Zt=(ct=(pt=$==null?void 0:$.participants)==null?void 0:pt.find(ne=>{var Me;const oe=typeof ne.userId=="string"?ne.userId:(Me=ne.userId)==null?void 0:Me._id;return String(oe)!==String(Qe())}))==null?void 0:ct.userId)==null?void 0:Zt.name)||"Unknown User"}),f.jsx("p",{className:"text-sm text-gray-300",children:$?"In call":_==="connecting"?"Calling...":_==="connected"?"Connected":"Ready to call"})]})}),f.jsxs("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 flex items-center space-x-4 bg-black/60 backdrop-blur-sm px-8 py-4 rounded-3xl",children:[f.jsx("button",{onClick:ye,disabled:Ne,className:`p-4 rounded-2xl transition-all duration-300 hover:scale-105 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed ${D.microphoneEnabled?"bg-gray-700/80 text-white hover:bg-gray-600/80":"bg-red-500 text-white hover:bg-red-600"}`,title:D.microphoneEnabled?"Mute microphone":"Unmute microphone",children:D.microphoneEnabled?f.jsx(O$,{className:"w-6 h-6"}):f.jsx(D$,{className:"w-6 h-6"})}),f.jsx("button",{onClick:le,disabled:ie,className:`p-4 rounded-2xl transition-all duration-300 hover:scale-105 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed ${D.cameraEnabled?"bg-gray-700/80 text-white hover:bg-gray-600/80":"bg-red-500 text-white hover:bg-red-600"}`,title:D.cameraEnabled?"Turn off camera":"Turn on camera",children:D.cameraEnabled?f.jsx(Fp,{className:"w-6 h-6"}):f.jsx(uq,{className:"w-6 h-6"})}),f.jsx("button",{onClick:je,disabled:Fe,className:`p-4 rounded-2xl transition-all duration-300 hover:scale-105 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed ${D.screenSharing?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-700/80 text-white hover:bg-gray-600/80"}`,title:D.screenSharing?"Stop screen sharing":"Start screen sharing",children:D.screenSharing?f.jsx(z$,{className:"w-6 h-6"}):f.jsx(I$,{className:"w-6 h-6"})}),$?f.jsx("button",{onClick:de,disabled:fe,className:"p-4 bg-red-500 hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-2xl transition-all duration-300 hover:scale-105 shadow-lg",title:"End call",children:f.jsx(aA,{className:"w-6 h-6"})}):f.jsx("button",{onClick:Gi,disabled:q||_==="connecting",className:"p-4 bg-green-500 hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-2xl transition-all duration-300 hover:scale-105 shadow-lg",title:"Start call",children:f.jsx(ts,{className:"w-6 h-6"})}),f.jsx("button",{className:"p-4 bg-gray-700/80 hover:bg-gray-600/80 text-white rounded-2xl transition-all duration-300 hover:scale-105 shadow-lg",title:"Settings",children:f.jsx(tq,{className:"w-6 h-6"})})]}),f.jsx("button",{onClick:()=>{$?de():(r(null),l(!0))},className:"md:hidden absolute top-6 left-6 p-3 bg-black/60 backdrop-blur-sm text-white rounded-xl hover:bg-black/80 transition-all duration-300",title:"Go back",children:f.jsx(xw,{className:"w-5 h-5"})})]})}),(E||Ie)&&f.jsx("div",{className:"fixed top-4 right-4 bg-red-500 text-white px-6 py-4 rounded-2xl shadow-lg z-50 max-w-md",children:f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h4",{className:"font-semibold mb-1",children:"Error"}),f.jsx("p",{className:"text-sm opacity-90",children:E||Ie})]}),f.jsx("button",{onClick:()=>{R(""),K()},className:"ml-4 text-white hover:text-red-200 transition-colors duration-300 text-xl font-bold",title:"Close error",children:""})]})}),(q||ce||me||fe)&&f.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-white rounded-2xl p-8 flex items-center space-x-4 shadow-2xl",children:[f.jsx("div",{className:"w-6 h-6 border-3 border-blue-200 border-t-blue-600 rounded-full animate-spin"}),f.jsxs("span",{className:"font-medium text-slate-900",children:[q&&"Starting call...",ce&&"Accepting call...",me&&"Declining call...",fe&&"Ending call..."]})]})})]}):f.jsx("div",{className:"flex items-center justify-center h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:f.jsxs("div",{className:"text-center bg-white/80 backdrop-blur-lg p-10 rounded-3xl shadow-2xl border border-white/20",children:[f.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-200 border-t-blue-600 mx-auto"}),f.jsx("p",{className:"mt-6 text-gray-700 font-semibold text-lg",children:"Loading video call..."})]})})},Tq=()=>{const t="http://localhost:5000",[e,n]=k.useState(null),[i,r]=k.useState({hospitals:[],clinics:[],dispensaries:[]}),[a,l]=k.useState(!1),[c,u]=k.useState(""),[h,p]=k.useState("all"),[g,y]=k.useState(5),[x,b]=k.useState(null),[w,T]=k.useState(!1),_=k.useRef(null),S=k.useRef(null),E=k.useRef([]);k.useEffect(()=>((async()=>{if(!window.L){const X=document.createElement("link");X.rel="stylesheet",X.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(X);const D=document.createElement("script");return D.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",document.head.appendChild(D),new Promise(q=>{D.onload=q})}})().then(()=>{_.current&&!S.current&&(S.current=window.L.map(_.current).setView([26.8467,80.9462],13),window.L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors"}).addTo(S.current))}),()=>{S.current&&(S.current.remove(),S.current=null)}),[]);const R=U=>{if(!S.current)return;const X=.01,D=S.current.getCenter();switch(U){case"up":S.current.panTo([D.lat+X,D.lng]);break;case"down":S.current.panTo([D.lat-X,D.lng]);break;case"left":S.current.panTo([D.lat,D.lng-X]);break;case"right":S.current.panTo([D.lat,D.lng+X]);break}},A=U=>{S.current&&(U==="in"?S.current.zoomIn():S.current.zoomOut())},N=()=>{S.current&&(e?S.current.setView([e.lat,e.lng],15):S.current.setView([26.8467,80.9462],13))},j=()=>{if(l(!0),u(""),!navigator.geolocation){u("Geolocation is not supported by this browser."),l(!1);return}navigator.geolocation.getCurrentPosition(U=>{const X={lat:U.coords.latitude,lng:U.coords.longitude};n(X),S.current&&S.current.setView([X.lat,X.lng],15),h==="all"?O(X.lat,X.lng):L(X.lat,X.lng,h)},U=>{u(`Location error: ${U.message}`),l(!1)})},O=async(U,X)=>{try{const q=await(await fetch(`${t}/clinics/nearby-medical?lat=${U}&lng=${X}&radius=${g}`)).json();q.success?(r(q.medical_facilities),J(q.medical_facilities,{lat:U,lng:X})):u("Failed to fetch medical facilities")}catch(D){u("Error fetching data: "+D.message)}finally{l(!1)}},L=async(U,X,D)=>{try{let q="";switch(D){case"hospitals":q="nearby-hospitals";break;case"clinics":q="nearby-clinics";break;case"dispensaries":q="nearby-dispensaries";break;default:q="nearby-medical"}const me=await(await fetch(`${t}/clinics/${q}?lat=${U}&lng=${X}&radius=${g}`)).json();if(me.success){const fe={hospitals:[],clinics:[],dispensaries:[]};me.hospitals&&(fe.hospitals=me.hospitals.map(ie=>({...ie,type:"hospital"}))),me.clinics&&(fe.clinics=me.clinics.map(ie=>({...ie,type:"clinic"}))),me.dispensaries&&(fe.dispensaries=me.dispensaries.map(ie=>({...ie,type:"dispensary"}))),me.medical_facilities?(r(me.medical_facilities),J(me.medical_facilities,{lat:U,lng:X})):(r(fe),J(fe,{lat:U,lng:X}))}else u(`Failed to fetch ${D}`)}catch(q){u("Error fetching data: "+q.message)}finally{l(!1)}},B=U=>{p(U),e&&(l(!0),U==="all"?O(e.lat,e.lng):L(e.lat,e.lng,U))},F=U=>{y(U),T(!1),e&&(l(!0),h==="all"?O(e.lat,e.lng):L(e.lat,e.lng,h))},J=(U,X)=>{if(!S.current||!window.L)return;E.current.forEach(ce=>S.current.removeLayer(ce)),E.current=[];const D=window.L.marker([X.lat,X.lng]).addTo(S.current).bindPopup("Your Location").openPopup();E.current.push(D);const q={hospitals:{color:"#dc2626",icon:""},clinics:{color:"#2563eb",icon:""},dispensaries:{color:"#16a34a",icon:""}};Object.entries(U).forEach(([ce,me])=>{const fe=q[ce];fe&&me.forEach(ie=>{if(ie.lat&&ie.lng){const Ne=window.L.divIcon({html:`<div style="background-color: ${fe.color}; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 16px; border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.3);">${fe.icon}</div>`,className:"custom-marker",iconSize:[30,30],iconAnchor:[15,15]}),Fe=window.L.marker([ie.lat,ie.lng],{icon:Ne}).addTo(S.current).bindPopup(`
              <div style="min-width: 200px;">
                <h3 style="margin: 0 0 8px 0; color: ${fe.color};">${ie.name}</h3>
                <p style="margin: 4px 0; color: #666; font-size: 13px; text-transform: capitalize;"><strong>Type:</strong> ${ie.type||ce.slice(0,-1)}</p>
                <p style="margin: 4px 0;"><strong>Address:</strong> ${ie.address}</p>
                <p style="margin: 4px 0;"><strong>Phone:</strong> ${ie.phone}</p>
                <p style="margin: 4px 0;"><strong>Hours:</strong> ${ie.opening_hours}</p>
                ${ie.emergency?'<p style="margin: 4px 0; color: red;"><strong>Emergency:</strong> Available</p>':""}
                ${ie.website?`<p style="margin: 4px 0;"><a href="${ie.website}" target="_blank">Visit Website</a></p>`:""}
              </div>
            `);Fe.on("click",()=>b(ie)),E.current.push(Fe)}})})},Q=()=>{var U;return h==="all"?[...i.hospitals.map(X=>({...X,category:"hospital"})),...i.clinics.map(X=>({...X,category:"clinic"})),...i.dispensaries.map(X=>({...X,category:"dispensary"}))]:((U=i[h])==null?void 0:U.map(X=>({...X,category:h.slice(0,-1)})))||[]},W=U=>{switch(U){case"hospital":return f.jsx(vp,{className:"w-4 h-4 text-red-600"});case"clinic":return f.jsx(ym,{className:"w-4 h-4 text-blue-600"});case"dispensary":return f.jsx(Ld,{className:"w-4 h-4 text-green-600"});default:return f.jsx(kR,{className:"w-4 h-4"})}},Z=U=>{switch(U){case"hospital":return"border-red-200 bg-red-50 hover:bg-red-100";case"clinic":return"border-blue-200 bg-blue-50 hover:bg-blue-100";case"dispensary":return"border-green-200 bg-green-50 hover:bg-green-100";default:return"border-gray-200 bg-gray-50 hover:bg-gray-100"}},z=()=>i.hospitals.length+i.clinics.length+i.dispensaries.length,$=[{value:1,label:"1 km"},{value:2,label:"2 km"},{value:5,label:"5 km"},{value:10,label:"10 km"},{value:15,label:"15 km"},{value:20,label:"20 km"},{value:25,label:"25 km"}];return f.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-br from-blue-50 to-indigo-100",children:[f.jsx("div",{className:"bg-white shadow-xl border-b border-gray-200",children:f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsxs("h1",{className:"text-3xl font-bold text-gray-800 flex items-center gap-3",children:[f.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:f.jsx(vp,{className:"w-8 h-8 text-red-600"})}),"Medical Facilities Finder"]}),f.jsxs("div",{className:"flex items-center gap-6",children:[f.jsxs("div",{className:"relative",children:[f.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-2",children:"Search Radius:"}),f.jsxs("div",{className:"relative",children:[f.jsxs("button",{onClick:()=>T(!w),className:"w-32 px-4 py-2 bg-white border-2 border-gray-300 rounded-lg flex items-center justify-between hover:border-blue-400 focus:border-blue-500 focus:outline-none transition-colors",children:[f.jsxs("span",{className:"font-medium",children:[g," km"]}),f.jsx(nA,{className:`w-4 h-4 transition-transform ${w?"rotate-180":""}`})]}),w&&f.jsx("div",{className:"absolute top-full left-0 mt-1 w-32 bg-white border-2 border-gray-300 rounded-lg shadow-lg z-50 max-h-48 overflow-y-auto",children:$.map(U=>f.jsx("button",{onClick:()=>F(U.value),className:`w-full px-4 py-2 text-left hover:bg-blue-50 transition-colors ${g===U.value?"bg-blue-100 text-blue-700 font-semibold":"text-gray-700"}`,children:U.label},U.value))})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-2 opacity-0",children:"Search:"}),f.jsxs("button",{onClick:j,disabled:a,className:"bg-gradient-to-r from-red-600 to-red-700 text-white px-6 py-2 rounded-lg flex items-center gap-3 hover:from-red-700 hover:to-red-800 disabled:opacity-50 shadow-lg transform hover:scale-105 transition-all duration-200",children:[a?f.jsx(C$,{className:"w-5 h-5 animate-spin"}):f.jsx(Qs,{className:"w-5 h-5"}),f.jsx("span",{className:"font-medium",children:"Find Facilities"})]})]})]})]}),f.jsx("div",{className:"flex gap-3",children:[{key:"all",label:"All Facilities",icon:L$,count:z(),color:"purple"},{key:"hospitals",label:"Hospitals",icon:vp,count:i.hospitals.length,color:"red"},{key:"clinics",label:"Clinics",icon:ym,count:i.clinics.length,color:"blue"},{key:"dispensaries",label:"Pharmacies",icon:Ld,count:i.dispensaries.length,color:"green"}].map(({key:U,label:X,icon:D,count:q,color:ce})=>f.jsxs("button",{onClick:()=>B(U),className:`px-6 py-3 rounded-xl flex items-center gap-3 transition-all duration-200 transform hover:scale-105 ${h===U?`bg-gradient-to-r ${ce==="purple"?"from-purple-600 to-purple-700":ce==="red"?"from-red-600 to-red-700":ce==="blue"?"from-blue-600 to-blue-700":"from-green-600 to-green-700"} text-white shadow-lg`:"bg-white text-gray-700 hover:bg-gray-50 border-2 border-gray-200 hover:border-gray-300"}`,children:[f.jsx(D,{className:"w-5 h-5"}),f.jsx("span",{className:"font-medium",children:X}),q>0&&f.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${h===U?"bg-white bg-opacity-30":"bg-gray-200"}`,children:q})]},U))})]})}),c&&f.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 px-6 py-4 mx-6 mt-4 rounded-r-lg shadow-md",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),f.jsx("div",{className:"ml-3",children:f.jsx("p",{className:"font-medium",children:c})})]})}),f.jsxs("div",{className:"flex-1 flex gap-4 p-4",children:[f.jsxs("div",{className:"flex-1 relative bg-white rounded-2xl shadow-xl overflow-hidden",children:[f.jsx("div",{ref:_,className:"w-full h-full"}),f.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2",children:[f.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-1",children:[f.jsx("button",{onClick:()=>A("in"),className:"block p-2 hover:bg-gray-100 rounded transition-colors",title:"Zoom In",children:f.jsx(fq,{className:"w-5 h-5 text-gray-700"})}),f.jsx("button",{onClick:()=>A("out"),className:"block p-2 hover:bg-gray-100 rounded transition-colors",title:"Zoom Out",children:f.jsx(mq,{className:"w-5 h-5 text-gray-700"})})]}),f.jsx("div",{className:"bg-white rounded-lg shadow-lg p-1",children:f.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[f.jsx("div",{}),f.jsx("button",{onClick:()=>R("up"),className:"p-2 hover:bg-gray-100 rounded transition-colors",title:"Pan Up",children:f.jsx(l$,{className:"w-5 h-5 text-gray-700"})}),f.jsx("div",{}),f.jsx("button",{onClick:()=>R("left"),className:"p-2 hover:bg-gray-100 rounded transition-colors",title:"Pan Left",children:f.jsx(r$,{className:"w-5 h-5 text-gray-700"})}),f.jsx("button",{onClick:N,className:"p-2 hover:bg-gray-100 rounded transition-colors",title:"Reset View",children:f.jsx(Z$,{className:"w-4 h-4 text-gray-700"})}),f.jsx("button",{onClick:()=>R("right"),className:"p-2 hover:bg-gray-100 rounded transition-colors",title:"Pan Right",children:f.jsx(a$,{className:"w-5 h-5 text-gray-700"})}),f.jsx("div",{}),f.jsx("button",{onClick:()=>R("down"),className:"p-2 hover:bg-gray-100 rounded transition-colors",title:"Pan Down",children:f.jsx(nA,{className:"w-5 h-5 text-gray-700"})}),f.jsx("div",{})]})})]})]}),f.jsx("div",{className:"w-96 bg-white rounded-2xl shadow-xl overflow-hidden",children:f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsx("h2",{className:"text-xl font-bold text-gray-800",children:h==="all"?"All Medical Facilities":h==="hospitals"?"Hospitals":h==="clinics"?"Clinics":"Pharmacies"}),Q().length>0&&f.jsxs("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-semibold",children:[Q().length," found"]})]}),f.jsx("div",{className:"h-[calc(100vh-300px)] overflow-y-auto pr-2 -mr-2",children:Q().length===0?f.jsxs("div",{className:"text-center text-gray-500 py-12",children:[f.jsx("div",{className:"p-4 bg-gray-100 rounded-full w-20 h-20 mx-auto mb-4 flex items-center justify-center",children:f.jsx(vp,{className:"w-10 h-10 text-gray-400"})}),f.jsx("p",{className:"text-lg font-medium mb-2",children:"No facilities found"}),f.jsx("p",{className:"text-sm",children:e?"Try expanding your search radius or changing the location.":'Click "Find Facilities" to start searching for medical facilities near you.'})]}):f.jsx("div",{className:"space-y-4",children:Q().map((U,X)=>f.jsx("div",{className:`p-4 border-2 rounded-xl cursor-pointer transition-all duration-200 hover:shadow-lg transform hover:scale-102 ${Z(U.category)} ${(x==null?void 0:x.id)===U.id?"ring-4 ring-blue-300 shadow-lg scale-102":""}`,onClick:()=>{b(U),S.current&&U.lat&&U.lng&&S.current.setView([U.lat,U.lng],16)},children:f.jsxs("div",{className:"flex items-start gap-4",children:[f.jsx("div",{className:"flex-shrink-0 p-2 bg-white rounded-lg shadow-sm",children:W(U.category)}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("h3",{className:"font-bold text-gray-900 text-lg mb-1",children:U.name}),f.jsx("p",{className:"text-sm text-gray-600 capitalize font-medium mb-2 bg-white px-2 py-1 rounded-md inline-block",children:U.type||U.category}),f.jsx("p",{className:"text-sm text-gray-700 mb-3 leading-relaxed",children:U.address}),f.jsxs("div",{className:"space-y-2",children:[U.phone!=="Phone not available"&&f.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[f.jsx(ts,{className:"w-4 h-4 text-green-600"}),f.jsx("span",{className:"font-medium",children:U.phone})]}),U.opening_hours!=="Hours not available"&&f.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[f.jsx(Zs,{className:"w-4 h-4 text-blue-600"}),f.jsx("span",{children:U.opening_hours})]}),U.emergency&&f.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600 font-bold bg-red-50 px-2 py-1 rounded-md",children:[f.jsx("div",{className:"w-2 h-2 bg-red-600 rounded-full animate-pulse"}),"Emergency Services Available"]}),U.website&&f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx(S$,{className:"w-4 h-4 text-blue-600"}),f.jsx("a",{href:U.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline font-medium transition-colors",onClick:D=>D.stopPropagation(),children:"Visit Website"})]})]})]})]})},`${U.category}-${U.id}-${X}`))})})]})})]})]})};function Eq(){const t="http://localhost:5000",[e,n]=k.useState(""),[i,r]=k.useState([]),[a,l]=k.useState(!1),[c,u]=k.useState(null),[h,p]=k.useState([]);k.useEffect(()=>{const w=setTimeout(()=>{e.trim()?g():(r([]),u(null))},500);return()=>clearTimeout(w)},[e]);const g=async()=>{if(e.trim()){l(!0),u(null);try{const w=await fetch(`${t}/medicines/search?name=${encodeURIComponent(e)}`);if(!w.ok)throw new Error("Failed to fetch medicines");const T=await w.json();T.success?(r(T.data),T.data.length>0&&!h.includes(e.trim())&&p(_=>[e.trim(),..._.slice(0,4)])):(u(T.message||"No medicines found"),r([]))}catch(w){u(w.message),r([])}finally{l(!1)}}},y=w=>{n(w)},x=()=>{n(""),r([]),u(null)},b=k.useMemo(()=>{const w={};return i.forEach(T=>{const _=T.manufacturer_name||"Unknown";w[_]||(w[_]=[]),w[_].push(T)}),w},[i]);return f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50",children:f.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsxs("div",{className:"flex items-center justify-center mb-4",children:[f.jsx(Ld,{className:"w-10 h-10 text-blue-600 mr-3"}),f.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:"Medicine Search"})]}),f.jsx("p",{className:"text-gray-600 text-lg",children:"Find detailed information about medicines instantly"})]}),f.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 mb-8",children:[f.jsxs("div",{className:"relative mb-4",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:f.jsx(Qs,{className:"h-5 w-5 text-black"})}),f.jsx("input",{type:"text",placeholder:"Enter medicine name (e.g., Paracetamol, Aspirin...)",value:e,onChange:w=>n(w.target.value),className:`w-full pl-12 pr-12 py-4 text-lg border-2 border-gray-200 rounded-xl 
             focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all 
             duration-200 outline-none text-black placeholder-black`}),e&&f.jsx("button",{onClick:x,className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600",children:""})]}),h.length>0&&!e&&f.jsxs("div",{className:"mb-4",children:[f.jsxs("p",{className:"text-sm text-gray-500 mb-2 flex items-center",children:[f.jsx(Zs,{className:"w-4 h-4 mr-1"}),"Recent searches"]}),f.jsx("div",{className:"flex flex-wrap gap-2",children:h.map((w,T)=>f.jsx("button",{onClick:()=>y(w),className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded-full transition-colors duration-200",children:w},T))})]}),a&&f.jsxs("div",{className:"flex items-center justify-center py-4",children:[f.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),f.jsx("span",{className:"ml-2 text-gray-600",children:"Searching medicines..."})]}),c&&f.jsxs("div",{className:"flex items-center p-4 bg-red-50 border border-red-200 rounded-xl",children:[f.jsx(jR,{className:"w-5 h-5 text-red-500 mr-2"}),f.jsx("span",{className:"text-red-700",children:c})]})]}),!a&&i.length>0&&f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"flex items-center justify-between",children:f.jsxs("h2",{className:"text-2xl font-semibold text-gray-800 flex items-center",children:[f.jsx(G$,{className:"w-6 h-6 mr-2 text-blue-600"}),"Search Results (",i.length," found)"]})}),Object.entries(b).map(([w,T])=>f.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[f.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4",children:f.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[f.jsx(kR,{className:"w-5 h-5 mr-2"}),w," (",T.length," products)"]})}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700",children:"Medicine"}),f.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700",children:"Price"}),f.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700",children:"Status"}),f.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700",children:"Type & Pack"}),f.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700",children:"Composition"})]})}),f.jsx("tbody",{className:"divide-y divide-gray-200",children:T.map((_,S)=>f.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:[f.jsx("td",{className:"px-6 py-4",children:f.jsxs("div",{className:"flex items-start",children:[f.jsx(Ld,{className:"w-5 h-5 text-green-500 mr-2 mt-1 flex-shrink-0"}),f.jsxs("div",{children:[f.jsx("div",{className:"font-semibold text-gray-900",children:_.name}),f.jsx("div",{className:"text-sm text-gray-500",children:_.type})]})]})}),f.jsx("td",{className:"px-6 py-4",children:f.jsxs("div",{className:"text-lg font-bold text-green-600",children:["",_["price()"]]})}),f.jsx("td",{className:"px-6 py-4",children:f.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${_.Is_discontinued?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:_.Is_discontinued?"Discontinued":"Available"})}),f.jsx("td",{className:"px-6 py-4",children:f.jsxs("div",{className:"text-sm",children:[f.jsx("div",{className:"font-medium text-gray-900",children:_.type}),f.jsx("div",{className:"text-gray-500",children:_.pack_size_label})]})}),f.jsx("td",{className:"px-6 py-4",children:f.jsxs("div",{className:"text-sm text-black space-y-1",children:[_.short_composition1&&f.jsxs("div",{className:"flex items-center",children:[f.jsx(rA,{className:"w-3 h-3 text-gray-400 mr-1"}),_.short_composition1]}),_.short_composition2&&f.jsxs("div",{className:"flex items-center",children:[f.jsx(rA,{className:"w-3 h-3 text-gray-400 font-black mr-1"}),_.short_composition2]})]})})]},_._id))})]})})]},w))]}),!a&&i.length===0&&e&&!c&&f.jsxs("div",{className:"text-center py-12",children:[f.jsx(Ld,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),f.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No medicines found"}),f.jsx("p",{className:"text-gray-500",children:"Try searching with a different medicine name or check the spelling."})]}),!e&&i.length===0&&f.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl shadow-lg",children:[f.jsx(Qs,{className:"w-16 h-16 text-blue-400 mx-auto mb-4"}),f.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Start searching for medicines"}),f.jsx("p",{className:"text-gray-500",children:"Enter a medicine name above to get detailed information including price, composition, and availability."})]})]})})}const cx=()=>{const{theme:t,toggleTheme:e}=vn();return f.jsx("button",{onClick:e,className:"fixed top-4 right-4 z-50 p-3 rounded-full bg-white dark:bg-gray-800 shadow-lg border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-all duration-300 group","aria-label":"Toggle theme",children:t==="light"?f.jsx(V$,{className:"w-5 h-5 text-gray-700 dark:text-gray-300 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors"}):f.jsx(sq,{className:"w-5 h-5 text-gray-700 dark:text-gray-300 group-hover:text-yellow-500 transition-colors"})})},Aq=()=>{const[t,e]=k.useState([]),[n,i]=k.useState(!0),[r,a]=k.useState(null),[l,c]=k.useState(""),[u,h]=k.useState([]),p=async()=>{try{i(!0);const g=await fetch(`${apiUrl}/doctor`),y=await g.json();if(!g.ok)throw new Error(y.message||"Failed to fetch doctors");e(y.data.doctors),h(y.data.doctors)}catch(g){console.error("Error fetching doctors:",g),a(g.message)}finally{i(!1)}};return k.useEffect(()=>{p()},[]),k.useEffect(()=>{const g=t.filter(y=>y.name.toLowerCase().includes(l.toLowerCase())||y.specialization.toLowerCase().includes(l.toLowerCase())||y.email.toLowerCase().includes(l.toLowerCase()));h(g)},[l,t]),n?f.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300",children:[f.jsx(cx,{}),f.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 dark:border-blue-800 rounded-full animate-spin border-t-blue-600 dark:border-t-blue-400"}),f.jsx("div",{className:"absolute inset-0 w-16 h-16 border-4 border-transparent rounded-full border-t-blue-400 dark:border-t-blue-300 animate-spin",style:{animationDelay:"0.3s",animationDuration:"1.5s"}})]}),f.jsx("p",{className:"text-center mt-6 text-xl text-gray-700 dark:text-gray-300 font-medium",children:"Loading doctors..."}),f.jsx("p",{className:"text-center mt-2 text-gray-500 dark:text-gray-400",children:"Please wait while we fetch the latest information"})]})]}):r?f.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300",children:[f.jsx(cx,{}),f.jsx("div",{className:"flex items-center justify-center min-h-screen p-6",children:f.jsxs("div",{className:"text-center bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 max-w-md border border-gray-200 dark:border-gray-700",children:[f.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:f.jsx("svg",{className:"w-8 h-8 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),f.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Oops! Something went wrong"}),f.jsx("p",{className:"text-red-600 dark:text-red-400 mb-6",children:r}),f.jsx("button",{onClick:p,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-xl font-medium transition-colors duration-200",children:"Try Again"})]})})]}):f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 dark:from-gray-900 dark:to-gray-800 transition-colors duration-300",children:[f.jsx(cx,{}),f.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[f.jsxs("div",{className:"text-center mb-12",children:[f.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-blue-800 bg-clip-text text-transparent mb-4",children:"All Verified Doctors"}),f.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400 max-w-2xl mx-auto leading-relaxed",children:"Meet our team of experienced and certified medical professionals ready to provide you with exceptional healthcare."}),f.jsxs("div",{className:"mt-6 flex items-center justify-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[f.jsx(BR,{className:"w-4 h-4 text-yellow-500 fill-current"}),f.jsx("span",{children:"All doctors are verified and certified"})]})]}),f.jsxs("div",{className:"mb-8 max-w-2xl mx-auto",children:[f.jsxs("div",{className:"relative",children:[f.jsx(Qs,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),f.jsx("input",{type:"text",placeholder:"Search doctors by name, specialization, or email...",value:l,onChange:g=>c(g.target.value),className:"w-full pl-12 pr-4 py-4 border border-gray-200 dark:border-gray-600 rounded-2xl bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 shadow-lg"})]}),l&&f.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2 text-center",children:["Found ",u.length," doctor",u.length!==1?"s":"",' matching "',l,'"']})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8",children:u.map(g=>f.jsxs("div",{className:"group bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-3xl shadow-lg hover:shadow-2xl p-6 border border-gray-200 dark:border-gray-700 transition-all duration-300 hover:-translate-y-2 hover:scale-[1.02]",children:[f.jsx("div",{className:"relative flex justify-center mb-6",children:f.jsxs("div",{className:"relative",children:[f.jsx("img",{src:g.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(g.name)}&background=4f46e5&color=fff&size=120`,alt:g.name,className:"w-32 h-32 rounded-full object-cover border-4 border-white dark:border-gray-700 shadow-xl group-hover:border-blue-500 transition-colors duration-300",onError:y=>{y.target.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(g.name)}&background=4f46e5&color=fff&size=120`}}),f.jsx("div",{className:"absolute -bottom-2 -right-2 w-8 h-8 bg-green-500 rounded-full border-4 border-white dark:border-gray-800 shadow-lg flex items-center justify-center",children:f.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]})}),f.jsxs("div",{className:"text-center mb-6",children:[f.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:["Dr. ",g.name]}),f.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 text-sm font-medium mb-3",children:[f.jsx(ym,{className:"w-4 h-4 mr-2"}),g.specialization]})]}),f.jsxs("div",{className:"space-y-3 mb-6",children:[f.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300 group-hover:text-gray-800 dark:group-hover:text-gray-200 transition-colors",children:[f.jsx(vw,{className:"w-5 h-5 mr-3 text-gray-400 flex-shrink-0"}),f.jsx("span",{className:"text-sm truncate",children:g.email})]}),f.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-300 group-hover:text-gray-800 dark:group-hover:text-gray-200 transition-colors",children:[f.jsx(ts,{className:"w-5 h-5 mr-3 text-gray-400 flex-shrink-0"}),f.jsx("span",{className:"text-sm",children:g.phone})]})]}),f.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-2xl p-4 space-y-3",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"flex items-center justify-center mb-1",children:f.jsx(Hv,{className:"w-4 h-4 text-blue-500 mr-1"})}),f.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:g.experience}),f.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Years Exp."})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"flex items-center justify-center mb-1",children:f.jsx(uh,{className:"w-4 h-4 text-purple-500 mr-1"})}),f.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:g.age}),f.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:g.gender})]})]}),f.jsxs("div",{className:"pt-3 border-t border-gray-200 dark:border-gray-600",children:[f.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 text-center",children:"Educational Qualification"}),f.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-white text-center bg-white dark:bg-gray-600 rounded-lg py-2 px-3",children:g.degree})]})]}),f.jsx("button",{className:"w-full mt-6 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-semibold py-3 px-6 rounded-2xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:"View Profile"})]},g._id))}),u.length===0&&!n&&!r&&f.jsxs("div",{className:"text-center py-12",children:[f.jsx("div",{className:"w-24 h-24 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:f.jsx(Qs,{className:"w-12 h-12 text-gray-400"})}),f.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No doctors found"}),f.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Try adjusting your search terms or clear the search to see all doctors."}),f.jsx("button",{onClick:()=>c(""),className:"mt-4 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium",children:"Clear search"})]}),!n&&!r&&u.length>0&&f.jsx("div",{className:"mt-12 text-center",children:f.jsx("div",{className:"inline-flex items-center px-6 py-3 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700",children:f.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Showing ",f.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:u.length})," verified doctor",u.length!==1?"s":""]})})})]})]})},Cq=()=>{const t="http://localhost:5000",{isAuthenticated:e,currentDoctor:n,getCurrentDoctor:i}=pr(),[r,a]=k.useState("create"),[l,c]=k.useState([]),[u,h]=k.useState(!1),[p,g]=k.useState({text:"",type:""}),[y,x]=k.useState({date:"",slots:[]}),[b,w]=k.useState(""),[T,_]=k.useState(null);k.useEffect(()=>{console.log("isAuthenticated:",e),console.log("currentDoctor:",n),e&&!n&&(console.log("Fetching current doctor..."),i())},[e,n,i]);const S=()=>{x(j=>({...j,slots:[...j.slots,{time:"",fee:""}]}))},E=j=>{x(O=>({...O,slots:O.slots.filter((L,B)=>B!==j)}))},R=(j,O,L)=>{x(B=>({...B,slots:B.slots.map((F,J)=>J===j?{...F,[O]:L}:F)}))},A=async()=>{if(!y.date||y.slots.length===0){g({text:"Please fill in date and at least one slot",type:"error"});return}if(y.slots.some(O=>!O.time||!O.fee)){g({text:"Please fill in all slot details",type:"error"});return}if(!(n!=null&&n._id)){g({text:"Doctor information not available",type:"error"});return}h(!0);try{const L=await(await fetch(`${t}/schedule/create`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("doctorAccessToken")}`},body:JSON.stringify({doctorId:n._id,date:y.date,slots:y.slots.map(B=>({time:B.time,fee:parseFloat(B.fee)}))})})).json();L.success?(g({text:"Schedule created successfully!",type:"success"}),x({date:"",slots:[]})):g({text:L.message||"Failed to create schedule",type:"error"})}catch{g({text:"Network error occurred",type:"error"})}h(!1)},N=async()=>{if(!b){g({text:"Please select a date",type:"error"});return}if(!(n!=null&&n._id)){g({text:"Doctor information not available",type:"error"});return}h(!0);try{const O=await(await fetch(`${t}/schedule?doctorId=${n._id}&date=${b}`,{headers:{Authorization:`Bearer ${localStorage.getItem("doctorAccessToken")}`}})).json();O.success?(_(O.schedule),g({text:"Schedule loaded successfully!",type:"success"})):(_(null),g({text:O.message||"No schedule found",type:"error"}))}catch{g({text:"Network error occurred",type:"error"})}h(!1)};return k.useEffect(()=>{if(p.text){const j=setTimeout(()=>g({text:"",type:""}),3e3);return()=>clearTimeout(j)}},[p]),f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Doctor Schedule Manager"}),f.jsx("p",{className:"text-gray-600",children:"Manage your appointments and availability"}),n&&f.jsxs("p",{className:"text-blue-600 font-medium mt-2",children:["Welcome, ",n.name||"Doctor"]})]}),p.text&&f.jsxs("div",{className:`mb-6 p-4 rounded-lg flex items-center gap-2 ${p.type==="success"?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:[p.type==="success"?f.jsx(DR,{size:20}):f.jsx(PR,{size:20}),p.text]}),f.jsx("div",{className:"bg-white rounded-lg shadow-md mb-6",children:f.jsxs("div",{className:"flex border-b",children:[f.jsxs("button",{onClick:()=>a("create"),className:`flex-1 py-4 px-6 text-center font-medium transition-colors ${r==="create"?"bg-blue-500 text-white border-b-2 border-blue-500":"text-gray-600 hover:bg-gray-50"}`,children:[f.jsx(oA,{className:"inline-block mr-2",size:20}),"Create Schedule"]}),f.jsxs("button",{onClick:()=>a("view"),className:`flex-1 py-4 px-6 text-center font-medium transition-colors ${r==="view"?"bg-blue-500 text-white border-b-2 border-blue-500":"text-gray-600 hover:bg-gray-50"}`,children:[f.jsx(Gv,{className:"inline-block mr-2",size:20}),"View Schedule"]})]})}),r==="create"&&f.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[f.jsxs("h2",{className:"text-2xl font-semibold mb-6 flex items-center gap-2",children:[f.jsx(ch,{className:"text-blue-500"}),"Create New Schedule"]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Date"}),f.jsx("input",{type:"date",value:y.date,onChange:j=>x(O=>({...O,date:j.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 bg-white",min:new Date().toISOString().split("T")[0]})]}),f.jsxs("div",{className:"mb-6",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Time Slots"}),f.jsxs("button",{onClick:S,className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors flex items-center gap-2",children:[f.jsx(oA,{size:16}),"Add Slot"]})]}),y.slots.length===0?f.jsxs("div",{className:"text-center py-8 text-gray-500",children:[f.jsx(Zs,{className:"mx-auto mb-2",size:48}),f.jsx("p",{children:'No slots added yet. Click "Add Slot" to get started.'})]}):f.jsx("div",{className:"space-y-4",children:y.slots.map((j,O)=>f.jsxs("div",{className:"flex gap-4 items-center p-4 bg-gray-50 rounded-lg",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time"}),f.jsx("input",{type:"time",value:j.time,onChange:L=>R(O,"time",L.target.value),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white"})]}),f.jsxs("div",{className:"flex-1",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fee ($)"}),f.jsx("input",{type:"number",value:j.fee,onChange:L=>R(O,"fee",L.target.value),placeholder:"0.00",min:"0",step:"0.01",className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white placeholder-gray-400"})]}),f.jsx("button",{onClick:()=>E(O),className:"text-red-500 hover:bg-red-50 p-2 rounded-lg transition-colors",children:f.jsx(zp,{size:20})})]},O))})]}),f.jsx("button",{onClick:A,disabled:u||!y.date||y.slots.length===0,className:"w-full bg-blue-500 text-white py-3 px-6 rounded-lg hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors font-medium",children:u?"Creating Schedule...":"Create Schedule"})]}),r==="view"&&f.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[f.jsxs("h2",{className:"text-2xl font-semibold mb-6 flex items-center gap-2",children:[f.jsx(Gv,{className:"text-blue-500"}),"View Schedule"]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Date"}),f.jsx("input",{type:"date",value:b,onChange:j=>w(j.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white"})]}),f.jsx("button",{onClick:N,disabled:u||!b,className:"w-full bg-blue-500 text-white py-3 px-6 rounded-lg hover:bg-blue-600 disabled:bg-gray-300 transition-colors font-medium mb-6",children:u?"Loading Schedule...":"Get My Schedule"}),T&&f.jsxs("div",{className:"border-t pt-6",children:[f.jsxs("div",{className:"mb-4 flex items-center gap-2 text-lg font-medium text-gray-800",children:[f.jsx(ch,{className:"text-blue-500"}),"Schedule for ",T.date]}),f.jsx("div",{className:"grid gap-4",children:T.slots.map((j,O)=>f.jsxs("div",{className:`p-4 rounded-lg border-2 ${j.isBooked?"border-red-200 bg-red-50":"border-green-200 bg-green-50"}`,children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Zs,{size:16,className:"text-gray-600"}),f.jsx("span",{className:"font-medium text-gray-900",children:j.time})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(OR,{size:16,className:"text-gray-600"}),f.jsxs("span",{className:"font-medium text-gray-900",children:["$",j.fee]})]})]}),f.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${j.isBooked?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:j.isBooked?"Booked":"Available"})]}),j.isBooked&&j.bookedBy&&f.jsxs("div",{className:"mt-2 text-sm text-gray-600 flex items-center gap-2",children:[f.jsx(uh,{size:14}),"Booked by: ",j.bookedBy]})]},O))})]})]})]})})},Nq=()=>{const t="http://localhost:5000",[e,n]=k.useState("doctors"),[i,r]=k.useState([]),[a,l]=k.useState(null),[c,u]=k.useState([]),[h,p]=k.useState(!1),[g,y]=k.useState(""),[x,b]=k.useState(""),[w,T]=k.useState({text:"",type:""}),[_,S]=k.useState(!1),[E,R]=k.useState(!1),[A,N]=k.useState(null),{getCurrentClient:j}=kr(),O=async()=>{try{p(!0);const z=await fetch(`${t}/doctor`),$=await z.json();if(!z.ok)throw new Error($.message||"Failed to fetch doctors");r($.data.doctors)}catch(z){console.error("Error fetching doctors:",z),T({text:z.message,type:"error"})}finally{p(!1)}},L=async(z,$)=>{try{p(!0);const X=await(await fetch(`${t}/schedule?doctorId=${z}&date=${$}`,{headers:{Authorization:`Bearer ${localStorage.getItem("clientAccessToken")}`}})).json();return X.success?X.schedule:null}catch(U){return console.error("Error fetching schedule:",U),null}finally{p(!1)}},B=async(z,$,U)=>{try{S(!0);const D=await(await fetch(`${t}/slots/request`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("clientAccessToken")}`},body:JSON.stringify({doctorId:a._id,scheduleId:z,slotIndex:$})})).json();if(D.success){if(N({requestId:D.request._id,amount:U,doctorName:a.name,date:x,time:c[0].slots[$].time}),T({text:"Slot requested successfully! Please proceed with payment.",type:"success"}),x){const q=await L(a._id,x);q&&u([q])}}else T({text:D.message||"Failed to request slot",type:"error"})}catch(X){console.error("Error requesting slot:",X),T({text:"Network error occurred",type:"error"})}finally{S(!1)}},F=async()=>{Kv("/pay")};k.useEffect(()=>{O()},[]);const J=z=>{l(z),n("booking"),b(""),u([]),N(null)},Q=async z=>{if(b(z),N(null),a&&z){const $=await L(a._id,z);$?(u([$]),T({text:"Schedule loaded successfully!",type:"success"})):(u([]),T({text:"No schedule available for this date",type:"error"}))}},W=i.filter(z=>z.name.toLowerCase().includes(g.toLowerCase())||z.specialization.toLowerCase().includes(g.toLowerCase())||z.email.toLowerCase().includes(g.toLowerCase()));k.useEffect(()=>{if(w.text){const z=setTimeout(()=>T({text:"",type:""}),3e3);return()=>clearTimeout(z)}},[w]);const Z=new Date().toISOString().split("T")[0];return f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:f.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-blue-800 bg-clip-text text-transparent mb-4",children:e==="doctors"?"Book Your Appointment":`Book with Dr. ${a==null?void 0:a.name}`}),f.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:e==="doctors"?"Choose from our verified doctors and book your appointment":"Select a date and time slot for your appointment"})]}),w.text&&f.jsxs("div",{className:`mb-6 p-4 rounded-lg flex items-center gap-2 max-w-2xl mx-auto ${w.type==="success"?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:[w.type==="success"?f.jsx(DR,{size:20}):f.jsx(PR,{size:20}),w.text]}),A&&f.jsx("div",{className:"mb-6 max-w-2xl mx-auto",children:f.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border-2 border-yellow-200 rounded-2xl p-6 shadow-lg",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx("div",{className:"w-10 h-10 bg-yellow-500 rounded-full flex items-center justify-center",children:f.jsx(gm,{className:"w-5 h-5 text-white"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Payment Required"}),f.jsx("p",{className:"text-sm text-gray-600",children:"Complete payment to confirm your appointment"})]})]}),f.jsx("div",{className:"bg-white rounded-xl p-4 mb-4",children:f.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500",children:"Doctor:"}),f.jsxs("p",{className:"font-semibold",children:["Dr. ",A.doctorName]})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500",children:"Amount:"}),f.jsxs("p",{className:"font-semibold text-green-600",children:["$",A.amount]})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500",children:"Date:"}),f.jsx("p",{className:"font-semibold",children:A.date})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500",children:"Time:"}),f.jsx("p",{className:"font-semibold",children:A.time})]})]})}),f.jsx("button",{onClick:F,disabled:E,className:"w-full bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:E?f.jsxs("span",{className:"flex items-center justify-center gap-2",children:[f.jsx("div",{className:"w-5 h-5 border-2 border-white rounded-full animate-spin border-t-transparent"}),"Processing Payment..."]}):f.jsxs("span",{className:"flex items-center justify-center gap-2",children:[f.jsx(gm,{size:20}),"Pay $",A.amount," - Confirm Appointment"]})})]})}),e==="doctors"&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"mb-8 max-w-2xl mx-auto",children:f.jsxs("div",{className:"relative",children:[f.jsx(Qs,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),f.jsx("input",{type:"text",placeholder:"Search doctors by name, specialization, or email...",value:g,onChange:z=>y(z.target.value),className:"w-full pl-12 pr-4 py-4 border border-gray-200 rounded-2xl bg-white/80 backdrop-blur-sm text-gray-900 placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 shadow-lg"})]})}),h&&f.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[f.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 rounded-full animate-spin border-t-blue-600"}),f.jsx("p",{className:"text-center mt-6 text-xl text-gray-700 font-medium",children:"Loading doctors..."})]}),!h&&f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8",children:W.map(z=>f.jsxs("div",{className:"group bg-white/80 backdrop-blur-sm rounded-3xl shadow-lg hover:shadow-2xl p-6 border border-gray-200 transition-all duration-300 hover:-translate-y-2 hover:scale-[1.02] cursor-pointer",onClick:()=>J(z),children:[f.jsx("div",{className:"relative flex justify-center mb-6",children:f.jsxs("div",{className:"relative",children:[f.jsx("img",{src:z.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(z.name)}&background=4f46e5&color=fff&size=120`,alt:z.name,className:"w-32 h-32 rounded-full object-cover border-4 border-white shadow-xl group-hover:border-blue-500 transition-colors duration-300",onError:$=>{$.target.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(z.name)}&background=4f46e5&color=fff&size=120`}}),f.jsx("div",{className:"absolute -bottom-2 -right-2 w-8 h-8 bg-green-500 rounded-full border-4 border-white shadow-lg flex items-center justify-center",children:f.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]})}),f.jsxs("div",{className:"text-center mb-6",children:[f.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-2 group-hover:text-blue-600 transition-colors",children:["Dr. ",z.name]}),f.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full bg-blue-100 text-blue-800 text-sm font-medium mb-3",children:[f.jsx(ym,{className:"w-4 h-4 mr-2"}),z.specialization]})]}),f.jsxs("div",{className:"space-y-3 mb-6",children:[f.jsxs("div",{className:"flex items-center text-gray-600 group-hover:text-gray-800 transition-colors",children:[f.jsx(vw,{className:"w-5 h-5 mr-3 text-gray-400 flex-shrink-0"}),f.jsx("span",{className:"text-sm truncate",children:z.email})]}),f.jsxs("div",{className:"flex items-center text-gray-600 group-hover:text-gray-800 transition-colors",children:[f.jsx(ts,{className:"w-5 h-5 mr-3 text-gray-400 flex-shrink-0"}),f.jsx("span",{className:"text-sm",children:z.phone})]})]}),f.jsxs("div",{className:"bg-gray-50 rounded-2xl p-4 space-y-3",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"flex items-center justify-center mb-1",children:f.jsx(Hv,{className:"w-4 h-4 text-blue-500 mr-1"})}),f.jsx("div",{className:"text-lg font-bold text-gray-900",children:z.experience}),f.jsx("div",{className:"text-xs text-gray-500",children:"Years Exp."})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"flex items-center justify-center mb-1",children:f.jsx(uh,{className:"w-4 h-4 text-purple-500 mr-1"})}),f.jsx("div",{className:"text-lg font-bold text-gray-900",children:z.age}),f.jsx("div",{className:"text-xs text-gray-500",children:z.gender})]})]}),f.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[f.jsx("div",{className:"text-xs text-gray-500 mb-1 text-center",children:"Educational Qualification"}),f.jsx("div",{className:"text-sm font-semibold text-gray-900 text-center bg-white rounded-lg py-2 px-3",children:z.degree})]})]}),f.jsx("button",{className:"w-full mt-6 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-semibold py-3 px-6 rounded-2xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:"Book Appointment"})]},z._id))}),!h&&W.length===0&&f.jsxs("div",{className:"text-center py-12",children:[f.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:f.jsx(Qs,{className:"w-12 h-12 text-gray-400"})}),f.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No doctors found"}),f.jsx("p",{className:"text-gray-600",children:"Try adjusting your search terms or clear the search to see all doctors."}),f.jsx("button",{onClick:()=>y(""),className:"mt-4 text-blue-600 hover:text-blue-800 font-medium",children:"Clear search"})]})]}),e==="booking"&&a&&f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsxs("button",{onClick:()=>{n("doctors"),N(null)},className:"mb-6 flex items-center gap-2 text-blue-600 hover:text-blue-800 font-medium transition-colors",children:[f.jsx(xw,{size:20}),"Back to Doctors"]}),f.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:f.jsxs("div",{className:"flex items-center gap-6",children:[f.jsx("img",{src:a.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(a.name)}&background=4f46e5&color=fff&size=80`,alt:a.name,className:"w-20 h-20 rounded-full object-cover border-4 border-gray-200"}),f.jsxs("div",{className:"flex-1",children:[f.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-1",children:["Dr. ",a.name]}),f.jsx("p",{className:"text-blue-600 font-medium mb-2",children:a.specialization}),f.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[f.jsxs("span",{className:"flex items-center gap-1",children:[f.jsx(Hv,{size:16}),a.experience," years exp."]}),f.jsx("span",{children:a.degree})]})]})]})}),f.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[f.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[f.jsx(ch,{className:"text-blue-500"}),"Select Appointment Date"]}),f.jsx("input",{type:"date",value:x,onChange:z=>Q(z.target.value),min:Z,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 bg-white"})]}),x&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[f.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[f.jsx(Zs,{className:"text-blue-500"}),"Available Time Slots for ",x]}),h&&f.jsxs("div",{className:"text-center py-8",children:[f.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 rounded-full animate-spin border-t-transparent mx-auto mb-2"}),f.jsx("p",{className:"text-gray-600",children:"Loading available slots..."})]}),!h&&c.length>0&&f.jsx("div",{className:"grid gap-4",children:c[0].slots.map((z,$)=>{const U=z.requestId!==null,X=z.isBooked,D=!X&&!U;return f.jsxs("div",{className:`p-4 rounded-lg border-2 transition-all duration-200 ${D?"border-green-200 bg-green-50 hover:border-green-300 hover:shadow-md":X?"border-red-200 bg-red-50":"border-yellow-200 bg-yellow-50"}`,children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{className:"flex items-center gap-6",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Zs,{size:18,className:"text-gray-600"}),f.jsx("span",{className:"font-semibold text-gray-900 text-lg",children:z.time})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(OR,{size:18,className:"text-gray-600"}),f.jsxs("span",{className:"font-semibold text-gray-900 text-lg",children:["$",z.fee]})]})]}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:`px-4 py-2 rounded-full text-sm font-medium ${D?"bg-green-100 text-green-800":X?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:D?"Available":X?"Booked":"Pending Request"}),D&&f.jsx("button",{onClick:()=>B(c[0]._id,$,z.fee),disabled:_,className:"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 disabled:bg-blue-300 transition-colors font-medium",children:_?"Requesting...":"Request Slot"})]})]}),U&&f.jsxs("div",{className:"mt-3 text-sm text-yellow-700 flex items-center gap-2",children:[f.jsx(jR,{size:16}),f.jsx("span",{children:"A request is pending for this slot"})]})]},$)})}),!h&&c.length===0&&x&&f.jsxs("div",{className:"text-center py-8 text-gray-500",children:[f.jsx(ch,{className:"mx-auto mb-4",size:48}),f.jsx("h4",{className:"text-lg font-medium mb-2",children:"No Schedule Available"}),f.jsxs("p",{children:["Dr. ",a.name," hasn't set up any appointments for this date."]}),f.jsx("p",{className:"text-sm mt-2",children:"Please try a different date or contact the doctor directly."})]})]})]})]})})},Rq=()=>{var T;const t="http://localhost:5000",[e,n]=k.useState(null),[i,r]=k.useState(!0),[a,l]=k.useState(""),[c,u]=k.useState("all"),{isAuthenticated:h,doctor:p,checkAuth:g}=pr();k.useEffect(()=>{g()},[]),k.useEffect(()=>{h&&(p!=null&&p._id)&&y()},[h,p]);const y=async()=>{try{if(r(!0),console.log(" Fetching history for doctor:",p),!(p!=null&&p._id))throw new Error("Doctor information not available");const _=p._id,S=await fetch(`${t}/payments/history?doctorId=${_}`);if(!S.ok)throw new Error("Failed to fetch payment history");const E=await S.json();n(E.data)}catch(_){l(_.message)}finally{r(!1)}},x=_=>new Date(_).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),b=_=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(_),w=((T=e==null?void 0:e.paymentHistory)==null?void 0:T.filter(_=>c==="all"?!0:_.status===c))||[];return!h||!p?f.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),f.jsx("p",{className:"text-gray-600",children:"Loading doctor information..."})]})}):i?f.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:f.jsx("div",{className:"max-w-6xl mx-auto",children:f.jsxs("div",{className:"animate-pulse",children:[f.jsx("div",{className:"h-8 bg-gray-300 rounded w-1/3 mb-6"}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[1,2,3].map(_=>f.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[f.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/2 mb-2"}),f.jsx("div",{className:"h-8 bg-gray-300 rounded w-3/4"})]},_))}),f.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(_=>f.jsx("div",{className:"h-24 bg-gray-300 rounded-lg"},_))})]})})}):a?f.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:f.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[f.jsx("h2",{className:"text-red-800 font-semibold mb-2",children:"Error Loading Data"}),f.jsx("p",{className:"text-red-600",children:a}),f.jsx("button",{onClick:y,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors",children:"Retry"})]})}):f.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:f.jsxs("div",{className:"max-w-6xl mx-auto",children:[f.jsxs("div",{className:"mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Payment History"}),f.jsx("p",{className:"text-gray-600",children:"Track your earnings and patient payment details"}),f.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:["Dr. ",p.name," - ID: ",p._id]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[f.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Earnings"}),f.jsx("p",{className:"text-2xl font-bold text-green-600",children:b((e==null?void 0:e.totalEarnings)||0)})]}),f.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:f.jsx(E$,{className:"h-6 w-6 text-green-600"})})]})}),f.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Payments"}),f.jsx("p",{className:"text-2xl font-bold text-blue-600",children:(e==null?void 0:e.totalPayments)||0})]}),f.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:f.jsx(gm,{className:"h-6 w-6 text-blue-600"})})]})}),f.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Successful Payments"}),f.jsx("p",{className:"text-2xl font-bold text-purple-600",children:(e==null?void 0:e.successfulPayments)||0})]}),f.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:f.jsx(uh,{className:"h-6 w-6 text-purple-600"})})]})})]}),f.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 mb-6",children:f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx(w$,{className:"h-5 w-5 text-gray-500"}),f.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filter by status:"}),f.jsxs("select",{value:c,onChange:_=>u(_.target.value),className:"border border-gray-300 rounded px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[f.jsx("option",{value:"all",children:"All Payments"}),f.jsx("option",{value:"success",children:"Successful"}),f.jsx("option",{value:"failed",children:"Failed"})]}),f.jsxs("span",{className:"text-sm text-gray-500",children:["Showing ",w.length," of ",(e==null?void 0:e.totalPayments)||0," payments"]})]})}),f.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:f.jsx("div",{className:"overflow-x-auto",children:w.length===0?f.jsxs("div",{className:"p-8 text-center",children:[f.jsx(gm,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),f.jsx("p",{className:"text-gray-500",children:"No payment records found"})]}):f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Patient Details"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact Info"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Details"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Appointment"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map(_=>f.jsxs("tr",{className:"hover:bg-gray-50",children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"bg-blue-100 p-2 rounded-full mr-3",children:f.jsx(uh,{className:"h-4 w-4 text-blue-600"})}),f.jsxs("div",{children:[f.jsx("div",{className:"text-sm font-medium text-gray-900",children:_.client.name}),f.jsxs("div",{className:"text-sm text-gray-500",children:["Age: ",_.client.age," years"]})]})]})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsxs("div",{className:"space-y-1",children:[f.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[f.jsx(vw,{className:"h-4 w-4 text-gray-400 mr-2"}),_.client.email]}),f.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[f.jsx(ts,{className:"h-4 w-4 text-gray-400 mr-2"}),_.client.phone]})]})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsxs("div",{className:"space-y-1",children:[f.jsx("div",{className:"text-sm font-medium text-gray-900",children:b(_.amount)}),f.jsx("div",{className:"text-xs text-gray-500",children:_.paymentGateway}),f.jsx("div",{className:"text-xs text-gray-500",children:x(_.paymentDate)})]})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsxs("div",{className:"space-y-1",children:[f.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[f.jsx(ch,{className:"h-4 w-4 text-gray-400 mr-2"}),_.appointment.date]}),f.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[f.jsx(Zs,{className:"h-4 w-4 text-gray-400 mr-2"}),_.appointment.time]})]})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${_.status==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:_.status==="success"?"Success":"Failed"})})]},_.paymentId))})]})})})]})})},Lq=()=>{const{theme:t,toggleTheme:e}=vn(),[n,i]=k.useState([]),[r,a]=k.useState(!1),[l,c]=k.useState(null),[u,h]=k.useState("confirmed"),[p,g]=k.useState({startDate:new Date(new Date().setDate(new Date().getDate()-30)).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),y="http://localhost:5000";k.useEffect(()=>{x()},[u,p]);const x=async()=>{var B,F;try{a(!0);const Q=(await Lt.get(`${y}/client/appointments?status=${u}`,{withCredentials:!0})).data.data.appointments.filter(W=>{const Z=new Date(`${W.date}T${W.time}`),z=new Date(p.startDate),$=new Date(p.endDate);return $.setHours(23,59,59,999),Z>=z&&Z<=$});i(Q),a(!1)}catch(J){console.error("Error fetching appointments:",J),c(((F=(B=J.response)==null?void 0:B.data)==null?void 0:F.message)||"Failed to fetch appointments"),a(!1)}},b=B=>{h(B.target.value)},w=B=>{g({...p,[B.target.name]:B.target.value})},T=B=>RR(new Date(B),"MMM dd, yyyy - h:mm a"),_=B=>{const F={confirmed:t==="dark"?"bg-blue-900 text-blue-200":"bg-blue-100 text-blue-800",completed:t==="dark"?"bg-green-900 text-green-200":"bg-green-100 text-green-800",cancelled:t==="dark"?"bg-red-900 text-red-200":"bg-red-100 text-red-800",pending:t==="dark"?"bg-yellow-900 text-yellow-200":"bg-yellow-100 text-yellow-800",default:t==="dark"?"bg-gray-700 text-gray-200":"bg-gray-100 text-gray-800"};return F[B]||F.default},S=t==="dark"?"bg-gray-900 text-white":"bg-gray-100 text-gray-900",E=t==="dark"?"bg-gray-800 shadow-dark":"bg-white shadow",R=t==="dark"?"text-white":"text-gray-900",A=t==="dark"?"text-gray-300":"text-gray-700",N=t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900",j=t==="dark"?"bg-gray-800 text-gray-300":"bg-gray-50 text-gray-500",O=t==="dark"?"hover:bg-gray-700":"hover:bg-gray-50",L=t==="dark"?"divide-gray-700":"divide-gray-200";return f.jsxs("section",{children:[f.jsx(W3,{}),f.jsxs("div",{className:`p-6 max-w-6xl mx-auto transition-colors duration-200 ${S}`,children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h1",{className:`text-2xl font-bold ${R}`,children:"Your Appointments"}),f.jsx("button",{onClick:e,className:`p-2 rounded-full ${t==="dark"?"bg-gray-700 text-yellow-300":"bg-gray-200 text-gray-800"}`,children:t==="dark"?"":""})]}),f.jsxs("div",{className:`${E} p-4 rounded-lg mb-6`,children:[f.jsx("h2",{className:`text-lg font-semibold mb-3 ${R}`,children:"Filters"}),f.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[f.jsxs("div",{className:"w-full md:w-1/3",children:[f.jsx("label",{className:`block text-sm font-medium ${A} mb-1`,children:"Status"}),f.jsxs("select",{value:u,onChange:b,className:`w-full p-2 border rounded-md ${N}`,children:[f.jsx("option",{value:"all",children:"All"}),f.jsx("option",{value:"pending",children:"Pending"}),f.jsx("option",{value:"confirmed",children:"Confirmed"}),f.jsx("option",{value:"completed",children:"Completed"}),f.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),f.jsxs("div",{className:"w-full md:w-1/3",children:[f.jsx("label",{className:`block text-sm font-medium ${A} mb-1`,children:"From"}),f.jsx("input",{type:"date",name:"startDate",value:p.startDate,onChange:w,className:`w-full p-2 border rounded-md ${N}`})]}),f.jsxs("div",{className:"w-full md:w-1/3",children:[f.jsx("label",{className:`block text-sm font-medium ${A} mb-1`,children:"To"}),f.jsx("input",{type:"date",name:"endDate",value:p.endDate,onChange:w,className:`w-full p-2 border rounded-md ${N}`})]})]})]}),l&&f.jsx("div",{className:`${t==="dark"?"bg-red-900 text-red-200":"bg-red-100 text-red-700"} border px-4 py-3 rounded mb-4`,children:l}),r?f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx("div",{className:`animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 ${t==="dark"?"border-blue-400":"border-blue-500"}`})}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:`mb-4 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:["Showing ",n.length," appointment",n.length!==1?"s":""]}),n.length>0?f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:`min-w-full ${E} rounded-lg`,children:[f.jsx("thead",{className:j,children:f.jsxs("tr",{children:[f.jsx("th",{className:"py-3 px-4 text-left text-xs font-medium uppercase",children:"Doctor"}),f.jsx("th",{className:"py-3 px-4 text-left text-xs font-medium uppercase",children:"Time"}),f.jsx("th",{className:"py-3 px-4 text-left text-xs font-medium uppercase",children:"Status"})]})}),f.jsx("tbody",{className:`${L} divide-y`,children:n.map(B=>{var F;return f.jsxs("tr",{className:O,children:[f.jsxs("td",{className:"py-4 px-4",children:[f.jsx("div",{className:"font-medium",children:((F=B.clientId)==null?void 0:F.name)||"Dr. Unknown"}),f.jsxs("div",{className:"text-sm text-gray-500",children:["Fee: ",B.fee]})]}),f.jsx("td",{className:"py-4 px-4 text-sm",children:T(`${B.date}T${B.time}`)}),f.jsx("td",{className:"py-4 px-4",children:f.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${_(B.status)}`,children:B.status.charAt(0).toUpperCase()+B.status.slice(1)})})]},B._id)})})]})}):f.jsxs("div",{className:`${E} p-8 rounded-lg text-center`,children:[f.jsx("p",{className:t==="dark"?"text-gray-400":"text-gray-500",children:"No appointments found with the selected filters."}),f.jsx("button",{onClick:()=>{h("all"),g({startDate:new Date(new Date().setDate(new Date().getDate()-30)).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]})},className:"mt-4 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md",children:"Clear Filters"})]})]})]})]})};function kq(){return f.jsx("div",{children:"Pay"})}function jq(){return f.jsx(oF,{children:f.jsx(pj,{children:f.jsx("div",{className:"app",children:f.jsxs(Wk,{children:[f.jsx(Nn,{path:"/",element:f.jsx(zG,{})}),f.jsx(Nn,{path:"/login",element:f.jsx(U3,{})}),f.jsx(Nn,{path:"/signup",element:f.jsx(V3,{})}),f.jsx(Nn,{path:"/doctordashboard",element:f.jsx(lF,{})}),f.jsx(Nn,{path:"/clientdashboard",element:f.jsx(cF,{})}),f.jsx(Nn,{path:"/doctorprofile",element:f.jsx(FG,{})}),f.jsx(Nn,{path:"/doctorappointments",element:f.jsx(Rq,{})}),f.jsx(Nn,{path:"/doctordirectory",element:f.jsx($W,{})}),f.jsx(Nn,{path:"/chat",element:f.jsx(wq,{})}),f.jsx(Nn,{path:"/clientprofile",element:f.jsx(_q,{})}),f.jsx(Nn,{path:"/clientappointments",element:f.jsx(Lq,{})}),f.jsx(Nn,{path:"/video-call",element:f.jsx(Mq,{})}),f.jsx(Nn,{path:"/nearby-clinics",element:f.jsx(Tq,{})}),f.jsx(Nn,{path:"/medicines-search",element:f.jsx(Eq,{})}),f.jsx(Nn,{path:"/finddoctors",element:f.jsx(Aq,{})}),f.jsx(Nn,{path:"/doctorschedule",element:f.jsx(Cq,{})}),f.jsx(Nn,{path:"/bookappointment",element:f.jsx(Nq,{})}),f.jsx(Nn,{path:"/pay",element:f.jsx(kq,{})})]})})})})}tk.createRoot(document.getElementById("root")).render(f.jsx(k.StrictMode,{children:f.jsx(jq,{})}));
